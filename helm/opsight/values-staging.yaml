# Staging environment values for opsight
# Reason: Optimized configuration for cost-effective staging environment

# Application settings
app:
  environment: staging

# Frontend configuration - reduced resources for staging
frontend:
  replicaCount: 1
  image:
    tag: "staging"
  resources:
    limits:
      cpu: 500m
      memory: 512Mi
    requests:
      cpu: 100m
      memory: 128Mi
  autoscaling:
    enabled: false
    minReplicas: 1
    maxReplicas: 3
  env:
    NODE_ENV: staging
    NEXT_PUBLIC_API_URL: https://api-staging.opsight.dev

# Backend configuration - reduced resources for staging
backend:
  replicaCount: 1
  image:
    tag: "staging"
  resources:
    limits:
      cpu: 1000m
      memory: 1Gi
    requests:
      cpu: 200m
      memory: 256Mi
  autoscaling:
    enabled: false
    minReplicas: 1
    maxReplicas: 5
  env:
    ENVIRONMENT: staging
    WORKERS: 2

# Database configuration - smaller resources for staging
postgresql:
  primary:
    persistence:
      size: 10Gi
    resources:
      limits:
        cpu: 500m
        memory: 512Mi
      requests:
        cpu: 100m
        memory: 256Mi

# Ingress configuration for staging
ingress:
  hosts:
    - host: staging.opsight.dev
      paths:
        - path: /
          pathType: Prefix
          service: frontend
        - path: /api
          pathType: Prefix
          service: backend
  tls:
    - secretName: opsight-staging-tls
      hosts:
        - staging.opsight.dev

# Monitoring configuration - reduced resources for staging
monitoring:
  prometheus:
    server:
      retention: "7d"
      resources:
        limits:
          cpu: 500m
          memory: 1Gi
        requests:
          cpu: 250m
          memory: 512Mi
  grafana:
    resources:
      limits:
        cpu: 250m
        memory: 256Mi
      requests:
        cpu: 50m
        memory: 64Mi
  alertmanager:
    resources:
      limits:
        cpu: 50m
        memory: 64Mi
      requests:
        cpu: 25m
        memory: 32Mi 