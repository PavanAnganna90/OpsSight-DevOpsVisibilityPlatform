# Example Terraform Variables for OpsSight Platform
# Copy this file to terraform.tfvars and modify values as needed

# General Configuration
project_name = "opssight"
environment  = "dev"  # Options: dev, staging, production
owner        = "DevOps Team"
aws_region   = "us-west-2"

# Networking Configuration
vpc_cidr             = "10.0.0.0/16"
private_subnet_cidrs = ["10.0.1.0/24", "10.0.2.0/24", "10.0.3.0/24"]
public_subnet_cidrs  = ["10.0.101.0/24", "10.0.102.0/24", "10.0.103.0/24"]

# EKS Configuration
kubernetes_version      = "1.28"
node_instance_types     = ["t3.medium"]
node_group_min_size     = 1
node_group_max_size     = 5
node_group_desired_size = 2
node_disk_size          = 50

# EKS Admin Users (replace with actual ARNs)
eks_admin_users = [
  # {
  #   userarn  = "arn:aws:iam::123456789012:user/admin-user"
  #   username = "admin-user"
  #   groups   = ["system:masters"]
  # }
]

# Database Configuration
db_instance_class       = "db.t3.micro"  # Use db.t3.medium+ for production
db_allocated_storage    = 20
db_max_allocated_storage = 100
db_name                 = "opssight"
db_username             = "postgres"
db_password             = "change-me-in-production"  # Use AWS Secrets Manager in production

# Redis Configuration
redis_node_type  = "cache.t3.micro"  # Use cache.r6g.large+ for production
redis_auth_token = "change-me-redis-token"  # Use strong token in production

# DNS and SSL Configuration
manage_dns  = false  # Set to true if you want to manage DNS with Route53
domain_name = "example.com"  # Replace with your domain

# Security Configuration
allowed_cidr_blocks        = ["0.0.0.0/0"]  # Restrict for production
enable_cluster_encryption  = true
enable_database_encryption = true

# Monitoring and Logging
enable_cloudwatch_logs = true
log_retention_days     = 14

# Backup Configuration
backup_retention_period    = 7    # Increase for production
enable_deletion_protection = false  # Set to true for production

# Cost Optimization
enable_cost_allocation_tags = true

# Scheduled scaling (optional)
scheduled_scaling = {
  scale_down_cron = "0 20 * * MON-FRI"  # Scale down at 8 PM weekdays
  scale_up_cron   = "0 8 * * MON-FRI"   # Scale up at 8 AM weekdays
  min_size        = 1
  max_size        = 1
}

# Environment-specific overrides
environment_config = {
  # Override defaults based on environment
  # For development:
  node_min_size           = 1
  node_desired_size       = 1
  db_instance_class       = "db.t3.micro"
  redis_node_type         = "cache.t3.micro"
  enable_spot_instances   = true
  
  # For production, consider:
  # node_min_size         = 3
  # node_desired_size     = 5
  # db_instance_class     = "db.r6g.large"
  # redis_node_type       = "cache.r6g.large"
  # enable_spot_instances = false
}

# Production Example (uncomment and modify as needed)
# project_name = "opssight"
# environment  = "production"
# 
# # EKS Configuration for Production
# node_instance_types     = ["m5.large", "m5.xlarge"]
# node_group_min_size     = 3
# node_group_max_size     = 20
# node_group_desired_size = 5
# node_disk_size          = 100
# 
# # Database Configuration for Production
# db_instance_class       = "db.r6g.large"
# db_allocated_storage    = 500
# db_max_allocated_storage = 2000
# 
# # Redis Configuration for Production
# redis_node_type = "cache.r6g.large"
# 
# # Security for Production
# allowed_cidr_blocks = ["10.0.0.0/8", "172.16.0.0/12"]  # Restrict access
# enable_deletion_protection = true
# backup_retention_period = 30
# log_retention_days = 90
# 
# # DNS for Production
# manage_dns  = true
# domain_name = "yourdomain.com"