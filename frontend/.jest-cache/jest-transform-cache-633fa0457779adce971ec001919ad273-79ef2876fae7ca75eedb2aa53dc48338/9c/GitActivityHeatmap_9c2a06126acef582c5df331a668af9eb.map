{"version":3,"sources":["/Users/pavan/Desktop/Devops-app-dev-cursor/frontend/src/components/charts/GitActivityHeatmap.tsx"],"sourcesContent":["/**\n * Git Activity Heatmap Component\n * \n * Calendar-style heatmap visualization showing Git activity data including commits,\n * pull requests, and contributor activity over time.\n */\n\nimport React, { useState, useMemo, useCallback, useRef, useEffect } from 'react';\nimport { format, startOfWeek, endOfWeek, eachDayOfInterval, startOfYear, endOfYear, getDay } from 'date-fns';\nimport { motion, AnimatePresence } from 'framer-motion';\nimport { clsx } from 'clsx';\nimport {\n  GitActivityHeatmapProps,\n  ActivityHeatmapData,\n  HeatmapCellData,\n  HeatmapTooltipData\n} from '../../types/git-activity';\nimport { calculateActivityLevel, fillMissingDates } from '../../services/gitActivityService';\n\n/**\n * Tooltip component for heatmap cells\n */\nconst HeatmapTooltip: React.FC<{\n  data: HeatmapTooltipData | null;\n  visible: boolean;\n}> = ({ data, visible }) => {\n  if (!data || !visible) return null;\n\n  const { date, dayOfWeek, activityData, position } = data;\n\n  return (\n    <AnimatePresence>\n      <motion.div\n        initial={{ opacity: 0, scale: 0.8 }}\n        animate={{ opacity: 1, scale: 1 }}\n        exit={{ opacity: 0, scale: 0.8 }}\n        transition={{ duration: 0.2 }}\n        className=\"absolute z-50 bg-white dark:bg-gray-800 shadow-lg rounded-lg border border-gray-200 dark:border-gray-700 p-3 pointer-events-none max-w-xs\"\n        style={{\n          left: position.x,\n          top: position.y - 10,\n          transform: 'translateX(-50%) translateY(-100%)'\n        }}\n      >\n        <div className=\"text-sm font-medium text-gray-900 dark:text-gray-100\">\n          {format(new Date(date), 'MMM d, yyyy')}\n        </div>\n        <div className=\"text-xs text-gray-600 dark:text-gray-400 mb-2\">\n          {dayOfWeek}\n        </div>\n        \n        <div className=\"space-y-1 text-xs\">\n          <div className=\"flex justify-between\">\n            <span className=\"text-gray-600 dark:text-gray-400\">Total Activity:</span>\n            <span className=\"font-medium text-gray-900 dark:text-gray-100\">\n              {activityData.activity_count}\n            </span>\n          </div>\n          \n          <div className=\"flex justify-between\">\n            <span className=\"text-gray-600 dark:text-gray-400\">Commits:</span>\n            <span className=\"font-medium text-blue-600 dark:text-blue-400\">\n              {activityData.commit_count}\n            </span>\n          </div>\n          \n          <div className=\"flex justify-between\">\n            <span className=\"text-gray-600 dark:text-gray-400\">Pull Requests:</span>\n            <span className=\"font-medium text-green-600 dark:text-green-400\">\n              {activityData.pr_count}\n            </span>\n          </div>\n          \n          <div className=\"flex justify-between\">\n            <span className=\"text-gray-600 dark:text-gray-400\">Contributors:</span>\n            <span className=\"font-medium text-purple-600 dark:text-purple-400\">\n              {activityData.contributor_count}\n            </span>\n          </div>\n          \n          {activityData.lines_added > 0 && (\n            <div className=\"flex justify-between\">\n              <span className=\"text-gray-600 dark:text-gray-400\">Lines Added:</span>\n              <span className=\"font-medium text-green-600 dark:text-green-400\">\n                +{activityData.lines_added.toLocaleString()}\n              </span>\n            </div>\n          )}\n          \n          {activityData.lines_deleted > 0 && (\n            <div className=\"flex justify-between\">\n              <span className=\"text-gray-600 dark:text-gray-400\">Lines Deleted:</span>\n              <span className=\"font-medium text-red-600 dark:text-red-400\">\n                -{activityData.lines_deleted.toLocaleString()}\n              </span>\n            </div>\n          )}\n        </div>\n        \n        {/* Tooltip arrow */}\n        <div className=\"absolute top-full left-1/2 transform -translate-x-1/2\">\n          <div className=\"w-0 h-0 border-l-4 border-r-4 border-t-4 border-l-transparent border-r-transparent border-t-gray-200 dark:border-t-gray-700\"></div>\n        </div>\n      </motion.div>\n    </AnimatePresence>\n  );\n};\n\n/**\n * Individual heatmap cell component\n */\nconst HeatmapCell: React.FC<{\n  data: HeatmapCellData;\n  size: number;\n  gap: number;\n  colorScheme: string;\n  onClick: (date: string, data: ActivityHeatmapData) => void;\n  onHover: (date: string, data: ActivityHeatmapData, position: { x: number; y: number }) => void;\n  onLeave: () => void;\n}> = ({ data, size, gap, colorScheme, onClick, onHover, onLeave }) => {\n  const cellRef = useRef<HTMLDivElement>(null);\n\n  const handleMouseEnter = useCallback((event: React.MouseEvent) => {\n    if (cellRef.current) {\n      const rect = cellRef.current.getBoundingClientRect();\n      const position = {\n        x: rect.left + rect.width / 2,\n        y: rect.top\n      };\n      onHover(data.date, data.activityData, position);\n    }\n  }, [data, onHover]);\n\n  const handleClick = useCallback(() => {\n    onClick(data.date, data.activityData);\n  }, [data, onClick]);\n\n  const getColorClass = (level: number, scheme: string): string => {\n    const schemes = {\n      green: [\n        'bg-gray-100 dark:bg-gray-800',\n        'bg-green-200 dark:bg-green-900',\n        'bg-green-300 dark:bg-green-700',\n        'bg-green-400 dark:bg-green-600',\n        'bg-green-500 dark:bg-green-500'\n      ],\n      blue: [\n        'bg-gray-100 dark:bg-gray-800',\n        'bg-blue-200 dark:bg-blue-900',\n        'bg-blue-300 dark:bg-blue-700',\n        'bg-blue-400 dark:bg-blue-600',\n        'bg-blue-500 dark:bg-blue-500'\n      ],\n      purple: [\n        'bg-gray-100 dark:bg-gray-800',\n        'bg-purple-200 dark:bg-purple-900',\n        'bg-purple-300 dark:bg-purple-700',\n        'bg-purple-400 dark:bg-purple-600',\n        'bg-purple-500 dark:bg-purple-500'\n      ],\n      red: [\n        'bg-gray-100 dark:bg-gray-800',\n        'bg-red-200 dark:bg-red-900',\n        'bg-red-300 dark:bg-red-700',\n        'bg-red-400 dark:bg-red-600',\n        'bg-red-500 dark:bg-red-500'\n      ]\n    };\n\n    return schemes[scheme as keyof typeof schemes]?.[level] || schemes.green[level];\n  };\n\n  return (\n    <motion.div\n      ref={cellRef}\n      className={clsx(\n        'rounded-sm cursor-pointer transition-all duration-200 hover:ring-2 hover:ring-blue-400 hover:scale-110',\n        getColorClass(data.level, colorScheme)\n      )}\n      style={{\n        width: size,\n        height: size,\n        marginRight: gap,\n        marginBottom: gap\n      }}\n      onClick={handleClick}\n      onMouseEnter={handleMouseEnter}\n      onMouseLeave={onLeave}\n      whileHover={{ scale: 1.1 }}\n      whileTap={{ scale: 0.95 }}\n      title={data.tooltip}\n    />\n  );\n};\n\n/**\n * Main Git Activity Heatmap Component\n */\nexport const GitActivityHeatmap: React.FC<GitActivityHeatmapProps> = ({\n  data,\n  repository,\n  dateRange,\n  colorScheme = 'green',\n  showWeekdays = true,\n  showMonthLabels = true,\n  cellSize = 12,\n  cellGap = 2,\n  loading = false,\n  error = null,\n  onCellClick,\n  onCellHover,\n  className = ''\n}) => {\n  const [tooltip, setTooltip] = useState<HeatmapTooltipData | null>(null);\n  const [showTooltip, setShowTooltip] = useState(false);\n  const containerRef = useRef<HTMLDivElement>(null);\n\n  // Determine date range\n  const { startDate, endDate } = useMemo(() => {\n    if (dateRange) {\n      return dateRange;\n    }\n    \n    // Default to current year if no data or date range provided\n    if (data.length === 0) {\n      const now = new Date();\n      return {\n        startDate: startOfYear(now),\n        endDate: endOfYear(now)\n      };\n    }\n    \n    // Use data range\n    const dates = data.map(d => new Date(d.date));\n    return {\n      startDate: new Date(Math.min(...dates.map(d => d.getTime()))),\n      endDate: new Date(Math.max(...dates.map(d => d.getTime())))\n    };\n  }, [data, dateRange]);\n\n  // Process heatmap data\n  const processedData = useMemo(() => {\n    if (loading || data.length === 0) return [];\n\n    // Fill missing dates and convert to heatmap cells\n    const filledData = fillMissingDates(data, startDate, endDate);\n    const maxActivity = Math.max(...filledData.map(d => d.activity_count));\n\n    return filledData.map(item => {\n      const date = new Date(item.date);\n      const level = calculateActivityLevel(item.activity_count, maxActivity);\n      \n      return {\n        date: item.date,\n        value: item.activity_count,\n        level,\n        tooltip: `${item.activity_count} activities on ${format(date, 'MMM d, yyyy')}`,\n        activityData: item\n      } as HeatmapCellData;\n    });\n  }, [data, startDate, endDate, loading]);\n\n  // Organize data by weeks\n  const weekData = useMemo(() => {\n    if (processedData.length === 0) return [];\n\n    const weeks: HeatmapCellData[][] = [];\n    const dataMap = new Map(processedData.map(d => [d.date, d]));\n    \n    // Start from the beginning of the week containing startDate\n    let currentWeekStart = startOfWeek(startDate, { weekStartsOn: 0 }); // Sunday\n    \n    while (currentWeekStart <= endDate) {\n      const weekEnd = endOfWeek(currentWeekStart, { weekStartsOn: 0 });\n      const weekDays = eachDayOfInterval({ start: currentWeekStart, end: weekEnd });\n      \n      const week = weekDays.map(day => {\n        const dateStr = format(day, 'yyyy-MM-dd');\n        return dataMap.get(dateStr) || {\n          date: dateStr,\n          value: 0,\n          level: 0 as const,\n          tooltip: 'No activity',\n          activityData: {\n            date: dateStr,\n            activity_count: 0,\n            commit_count: 0,\n            pr_count: 0,\n            contributor_count: 0,\n            lines_added: 0,\n            lines_deleted: 0,\n            files_changed: 0,\n            activity_types: []\n          }\n        };\n      });\n      \n      weeks.push(week);\n      currentWeekStart = new Date(currentWeekStart);\n      currentWeekStart.setDate(currentWeekStart.getDate() + 7);\n    }\n    \n    return weeks;\n  }, [processedData, startDate, endDate]);\n\n  // Handle cell interactions\n  const handleCellClick = useCallback((date: string, activityData: ActivityHeatmapData) => {\n    onCellClick?.(date, activityData);\n  }, [onCellClick]);\n\n  const handleCellHover = useCallback((\n    date: string, \n    activityData: ActivityHeatmapData, \n    position: { x: number; y: number }\n  ) => {\n    const dayOfWeek = format(new Date(date), 'EEEE');\n    \n    setTooltip({\n      date,\n      dayOfWeek,\n      activityData,\n      position\n    });\n    setShowTooltip(true);\n    onCellHover?.(date, activityData);\n  }, [onCellHover]);\n\n  const handleCellLeave = useCallback(() => {\n    setShowTooltip(false);\n    onCellHover?.(tooltip?.date || '', null);\n  }, [tooltip, onCellHover]);\n\n  // Month labels\n  const monthLabels = useMemo(() => {\n    if (!showMonthLabels || weekData.length === 0) return [];\n    \n    const labels: Array<{ month: string; x: number }> = [];\n    let currentMonth = '';\n    \n    weekData.forEach((week, weekIndex) => {\n      const firstDay = week[0];\n      if (firstDay) {\n        const month = format(new Date(firstDay.date), 'MMM');\n        if (month !== currentMonth) {\n          currentMonth = month;\n          labels.push({\n            month,\n            x: weekIndex * (cellSize + cellGap)\n          });\n        }\n      }\n    });\n    \n    return labels;\n  }, [weekData, showMonthLabels, cellSize, cellGap]);\n\n  // Weekday labels\n  const weekdayLabels = ['S', 'M', 'T', 'W', 'T', 'F', 'S'];\n\n  if (loading) {\n    return (\n      <div className={clsx('flex items-center justify-center p-8', className)}>\n        <div className=\"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-500\"></div>\n        <span className=\"ml-3 text-gray-600 dark:text-gray-400\">Loading activity data...</span>\n      </div>\n    );\n  }\n\n  if (error) {\n    return (\n      <div className={clsx('flex items-center justify-center p-8 text-red-600 dark:text-red-400', className)}>\n        <span>Error loading activity data: {error}</span>\n      </div>\n    );\n  }\n\n  if (processedData.length === 0) {\n    return (\n      <div className={clsx('flex items-center justify-center p-8 text-gray-600 dark:text-gray-400', className)}>\n        <span>No activity data available for {repository}</span>\n      </div>\n    );\n  }\n\n  return (\n    <div className={clsx('relative', className)} ref={containerRef}>\n      {/* Header */}\n      <div className=\"mb-4\">\n        <h3 className=\"text-lg font-semibold text-gray-900 dark:text-gray-100\">\n          Git Activity for {repository}\n        </h3>\n        <p className=\"text-sm text-gray-600 dark:text-gray-400\">\n          {format(startDate, 'MMM d, yyyy')} - {format(endDate, 'MMM d, yyyy')}\n        </p>\n      </div>\n\n      {/* Heatmap Container */}\n      <div className=\"flex\">\n        {/* Weekday Labels */}\n        {showWeekdays && (\n          <div className=\"flex flex-col mr-3\">\n            <div style={{ height: showMonthLabels ? 20 : 0 }} />\n            {weekdayLabels.map((day, index) => (\n              <div\n                key={day}\n                className=\"text-xs text-gray-600 dark:text-gray-400 flex items-center justify-center\"\n                style={{ \n                  height: cellSize + cellGap,\n                  lineHeight: `${cellSize}px`\n                }}\n              >\n                {index % 2 === 1 ? day : ''} {/* Show only alternate labels for compactness */}\n              </div>\n            ))}\n          </div>\n        )}\n\n        {/* Main Heatmap */}\n        <div>\n          {/* Month Labels */}\n          {showMonthLabels && (\n            <div \n              className=\"flex relative mb-2\"\n              style={{ height: 20 }}\n            >\n              {monthLabels.map(({ month, x }) => (\n                <div\n                  key={`${month}-${x}`}\n                  className=\"absolute text-xs text-gray-600 dark:text-gray-400\"\n                  style={{ left: x }}\n                >\n                  {month}\n                </div>\n              ))}\n            </div>\n          )}\n\n          {/* Heatmap Grid */}\n          <div className=\"flex\">\n            {weekData.map((week, weekIndex) => (\n              <div key={weekIndex} className=\"flex flex-col\">\n                {week.map((day, dayIndex) => (\n                  <HeatmapCell\n                    key={`${weekIndex}-${dayIndex}`}\n                    data={day}\n                    size={cellSize}\n                    gap={cellGap}\n                    colorScheme={colorScheme}\n                    onClick={handleCellClick}\n                    onHover={handleCellHover}\n                    onLeave={handleCellLeave}\n                  />\n                ))}\n              </div>\n            ))}\n          </div>\n        </div>\n      </div>\n\n      {/* Legend */}\n      <div className=\"mt-4 flex items-center space-x-2 text-xs text-gray-600 dark:text-gray-400\">\n        <span>Less</span>\n        {[0, 1, 2, 3, 4].map(level => (\n          <div\n            key={level}\n            className={clsx(\n              'rounded-sm',\n              level === 0 && 'bg-gray-100 dark:bg-gray-800',\n              level === 1 && colorScheme === 'green' && 'bg-green-200 dark:bg-green-900',\n              level === 2 && colorScheme === 'green' && 'bg-green-300 dark:bg-green-700',\n              level === 3 && colorScheme === 'green' && 'bg-green-400 dark:bg-green-600',\n              level === 4 && colorScheme === 'green' && 'bg-green-500 dark:bg-green-500',\n              level === 1 && colorScheme === 'blue' && 'bg-blue-200 dark:bg-blue-900',\n              level === 2 && colorScheme === 'blue' && 'bg-blue-300 dark:bg-blue-700',\n              level === 3 && colorScheme === 'blue' && 'bg-blue-400 dark:bg-blue-600',\n              level === 4 && colorScheme === 'blue' && 'bg-blue-500 dark:bg-blue-500'\n            )}\n            style={{ width: cellSize, height: cellSize }}\n          />\n        ))}\n        <span>More</span>\n      </div>\n\n      {/* Tooltip */}\n      <HeatmapTooltip data={tooltip} visible={showTooltip} />\n    </div>\n  );\n};\n\nexport default GitActivityHeatmap; "],"names":["GitActivityHeatmap","HeatmapTooltip","data","visible","date","dayOfWeek","activityData","position","AnimatePresence","motion","div","initial","opacity","scale","animate","exit","transition","duration","className","style","left","x","top","y","transform","format","Date","span","activity_count","commit_count","pr_count","contributor_count","lines_added","toLocaleString","lines_deleted","HeatmapCell","size","gap","colorScheme","onClick","onHover","onLeave","cellRef","useRef","handleMouseEnter","useCallback","event","current","rect","getBoundingClientRect","width","handleClick","getColorClass","level","scheme","schemes","green","blue","purple","red","ref","clsx","height","marginRight","marginBottom","onMouseEnter","onMouseLeave","whileHover","whileTap","title","tooltip","repository","dateRange","showWeekdays","showMonthLabels","cellSize","cellGap","loading","error","onCellClick","onCellHover","setTooltip","useState","showTooltip","setShowTooltip","containerRef","startDate","endDate","useMemo","length","now","startOfYear","endOfYear","dates","map","d","Math","min","getTime","max","processedData","filledData","fillMissingDates","maxActivity","item","calculateActivityLevel","value","weekData","weeks","dataMap","Map","currentWeekStart","startOfWeek","weekStartsOn","weekEnd","endOfWeek","weekDays","eachDayOfInterval","start","end","week","day","dateStr","get","files_changed","activity_types","push","setDate","getDate","handleCellClick","handleCellHover","handleCellLeave","monthLabels","labels","currentMonth","forEach","weekIndex","firstDay","month","weekdayLabels","h3","p","index","lineHeight","dayIndex"],"mappings":"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"}