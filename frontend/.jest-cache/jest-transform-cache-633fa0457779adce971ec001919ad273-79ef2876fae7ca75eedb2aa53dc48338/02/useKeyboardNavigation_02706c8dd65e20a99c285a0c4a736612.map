{"version":3,"sources":["/Users/pavan/Desktop/Devops-app-dev-cursor/frontend/src/hooks/useKeyboardNavigation.ts"],"sourcesContent":["/**\n * Keyboard Navigation Hook\n * \n * Provides keyboard navigation utilities for dashboard components\n * including focus management and keyboard shortcuts.\n */\n\nimport { useEffect, useCallback, useRef } from 'react';\n\ninterface UseKeyboardNavigationOptions {\n  /** Enable arrow key navigation */\n  enableArrowKeys?: boolean;\n  /** Enable Tab/Shift+Tab navigation */\n  enableTabNavigation?: boolean;\n  /** Enable Enter/Space activation */\n  enableActivation?: boolean;\n  /** Enable Escape key handling */\n  enableEscape?: boolean;\n  /** Custom keyboard shortcuts */\n  shortcuts?: Record<string, () => void>;\n  /** Focus trap within container */\n  trapFocus?: boolean;\n}\n\ninterface UseKeyboardNavigationReturn {\n  /** Ref to attach to the container element */\n  containerRef: React.RefObject<HTMLElement | null>;\n  /** Ref to attach to focusable elements */\n  registerFocusable: (element: HTMLElement | null) => void;\n  /** Programmatically focus first element */\n  focusFirst: () => void;\n  /** Programmatically focus last element */\n  focusLast: () => void;\n  /** Programmatically focus next element */\n  focusNext: () => void;\n  /** Programmatically focus previous element */\n  focusPrevious: () => void;\n}\n\n/**\n * Get all focusable elements within a container\n */\nconst getFocusableElements = (container: HTMLElement): HTMLElement[] => {\n  const selectors = [\n    'button:not([disabled])',\n    'input:not([disabled])',\n    'select:not([disabled])',\n    'textarea:not([disabled])',\n    'a[href]',\n    '[tabindex]:not([tabindex=\"-1\"])',\n    '[contenteditable=\"true\"]',\n  ].join(', ');\n\n  return Array.from(container.querySelectorAll(selectors)) as HTMLElement[];\n};\n\n/**\n * Check if element is currently visible\n */\nconst isElementVisible = (element: HTMLElement): boolean => {\n  const rect = element.getBoundingClientRect();\n  return (\n    rect.width > 0 &&\n    rect.height > 0 &&\n    rect.top >= 0 &&\n    rect.left >= 0 &&\n    rect.bottom <= (window.innerHeight || document.documentElement.clientHeight) &&\n    rect.right <= (window.innerWidth || document.documentElement.clientWidth)\n  );\n};\n\n/**\n * Keyboard Navigation Hook\n * \n * Provides comprehensive keyboard navigation support:\n * - Arrow key navigation between elements\n * - Tab/Shift+Tab navigation\n * - Enter/Space activation\n * - Escape key handling\n * - Custom keyboard shortcuts\n * - Focus trapping\n * \n * @param options - Configuration options for keyboard navigation\n * @returns Navigation utilities and element refs\n */\nexport const useKeyboardNavigation = (\n  options: UseKeyboardNavigationOptions = {}\n): UseKeyboardNavigationReturn => {\n  const {\n    enableArrowKeys = true,\n    enableTabNavigation = true,\n    enableActivation = true,\n    enableEscape = true,\n    shortcuts = {},\n    trapFocus = false,\n  } = options;\n\n  const containerRef = useRef<HTMLElement>(null);\n  const focusableElementsRef = useRef<Set<HTMLElement>>(new Set());\n\n  /**\n   * Register a focusable element\n   */\n  const registerFocusable = useCallback((element: HTMLElement | null) => {\n    if (element) {\n      focusableElementsRef.current.add(element);\n    }\n  }, []);\n\n  /**\n   * Get all focusable elements in order\n   */\n  const getFocusableElementsInOrder = useCallback((): HTMLElement[] => {\n    if (!containerRef.current) return [];\n\n    const allFocusable = getFocusableElements(containerRef.current);\n    const registered = Array.from(focusableElementsRef.current);\n\n    // Merge and deduplicate, maintaining DOM order\n    const combined = [...allFocusable, ...registered];\n    const unique = Array.from(new Set(combined));\n\n    // Sort by DOM order\n    return unique.sort((a, b) => {\n      const position = a.compareDocumentPosition(b);\n      if (position & Node.DOCUMENT_POSITION_FOLLOWING) return -1;\n      if (position & Node.DOCUMENT_POSITION_PRECEDING) return 1;\n      return 0;\n    });\n  }, []);\n\n  /**\n   * Focus first focusable element\n   */\n  const focusFirst = useCallback(() => {\n    const focusable = getFocusableElementsInOrder();\n    if (focusable.length > 0) {\n      focusable[0].focus();\n    }\n  }, [getFocusableElementsInOrder]);\n\n  /**\n   * Focus last focusable element\n   */\n  const focusLast = useCallback(() => {\n    const focusable = getFocusableElementsInOrder();\n    if (focusable.length > 0) {\n      focusable[focusable.length - 1].focus();\n    }\n  }, [getFocusableElementsInOrder]);\n\n  /**\n   * Focus next element in sequence\n   */\n  const focusNext = useCallback(() => {\n    const focusable = getFocusableElementsInOrder();\n    const currentIndex = focusable.findIndex(el => el === document.activeElement);\n    \n    if (currentIndex >= 0 && currentIndex < focusable.length - 1) {\n      focusable[currentIndex + 1].focus();\n    } else if (trapFocus && focusable.length > 0) {\n      focusable[0].focus(); // Wrap to first\n    }\n  }, [getFocusableElementsInOrder, trapFocus]);\n\n  /**\n   * Focus previous element in sequence\n   */\n  const focusPrevious = useCallback(() => {\n    const focusable = getFocusableElementsInOrder();\n    const currentIndex = focusable.findIndex(el => el === document.activeElement);\n    \n    if (currentIndex > 0) {\n      focusable[currentIndex - 1].focus();\n    } else if (trapFocus && focusable.length > 0) {\n      focusable[focusable.length - 1].focus(); // Wrap to last\n    }\n  }, [getFocusableElementsInOrder, trapFocus]);\n\n  /**\n   * Handle keyboard events\n   */\n  const handleKeyDown = useCallback((event: KeyboardEvent) => {\n    // Handle custom shortcuts first\n    const shortcutKey = `${event.ctrlKey ? 'Ctrl+' : ''}${event.altKey ? 'Alt+' : ''}${event.shiftKey ? 'Shift+' : ''}${event.key}`;\n    if (shortcuts[shortcutKey]) {\n      event.preventDefault();\n      shortcuts[shortcutKey]();\n      return;\n    }\n\n    // Handle built-in navigation\n    switch (event.key) {\n      case 'ArrowDown':\n      case 'ArrowRight':\n        if (enableArrowKeys) {\n          event.preventDefault();\n          focusNext();\n        }\n        break;\n\n      case 'ArrowUp':\n      case 'ArrowLeft':\n        if (enableArrowKeys) {\n          event.preventDefault();\n          focusPrevious();\n        }\n        break;\n\n      case 'Tab':\n        if (enableTabNavigation && trapFocus) {\n          event.preventDefault();\n          if (event.shiftKey) {\n            focusPrevious();\n          } else {\n            focusNext();\n          }\n        }\n        break;\n\n      case 'Home':\n        event.preventDefault();\n        focusFirst();\n        break;\n\n      case 'End':\n        event.preventDefault();\n        focusLast();\n        break;\n\n      case 'Enter':\n      case ' ':\n        if (enableActivation && document.activeElement) {\n          const target = document.activeElement as HTMLElement;\n          if (target.tagName !== 'INPUT' && target.tagName !== 'TEXTAREA') {\n            event.preventDefault();\n            target.click();\n          }\n        }\n        break;\n\n      case 'Escape':\n        if (enableEscape && containerRef.current) {\n          event.preventDefault();\n          containerRef.current.focus();\n        }\n        break;\n\n      default:\n        break;\n    }\n  }, [\n    shortcuts,\n    enableArrowKeys,\n    enableTabNavigation,\n    enableActivation,\n    enableEscape,\n    trapFocus,\n    focusNext,\n    focusPrevious,\n    focusFirst,\n    focusLast,\n  ]);\n\n  /**\n   * Setup keyboard event listeners\n   */\n  useEffect(() => {\n    const container = containerRef.current;\n    if (!container) return;\n\n    container.addEventListener('keydown', handleKeyDown);\n\n    // Cleanup\n    return () => {\n      container.removeEventListener('keydown', handleKeyDown);\n    };\n  }, [handleKeyDown]);\n\n  /**\n   * Setup container accessibility attributes\n   */\n  useEffect(() => {\n    const container = containerRef.current;\n    if (!container) return;\n\n    // Make container focusable if not already\n    if (!container.hasAttribute('tabindex')) {\n      container.setAttribute('tabindex', '-1');\n    }\n\n    // Add accessibility attributes\n    container.setAttribute('role', 'application');\n    container.setAttribute('aria-label', 'Dashboard navigation area');\n  }, []);\n\n  return {\n    containerRef,\n    registerFocusable,\n    focusFirst,\n    focusLast,\n    focusNext,\n    focusPrevious,\n  };\n};\n\nexport default useKeyboardNavigation; "],"names":["useKeyboardNavigation","getFocusableElements","container","selectors","join","Array","from","querySelectorAll","isElementVisible","element","rect","getBoundingClientRect","width","height","top","left","bottom","window","innerHeight","document","documentElement","clientHeight","right","innerWidth","clientWidth","options","enableArrowKeys","enableTabNavigation","enableActivation","enableEscape","shortcuts","trapFocus","containerRef","useRef","focusableElementsRef","Set","registerFocusable","useCallback","current","add","getFocusableElementsInOrder","allFocusable","registered","combined","unique","sort","a","b","position","compareDocumentPosition","Node","DOCUMENT_POSITION_FOLLOWING","DOCUMENT_POSITION_PRECEDING","focusFirst","focusable","length","focus","focusLast","focusNext","currentIndex","findIndex","el","activeElement","focusPrevious","handleKeyDown","event","shortcutKey","ctrlKey","altKey","shiftKey","key","preventDefault","target","tagName","click","useEffect","addEventListener","removeEventListener","hasAttribute","setAttribute"],"mappings":"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"}