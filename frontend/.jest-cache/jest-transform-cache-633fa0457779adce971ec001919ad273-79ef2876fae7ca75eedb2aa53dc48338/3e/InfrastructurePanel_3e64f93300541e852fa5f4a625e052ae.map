{"version":3,"names":["InfrastructurePanel","cov_15xq20jp6","f","panelVisibility","s","_SettingsContext","useSettings","queryClient","_reactquery","useQueryClient","data","resources","isLoading","error","refetch","useQuery","queryKey","queryFn","_infrastructureApi","fetchInfrastructure","restartMutation","useMutation","mutationFn","restartResource","onSuccess","invalidateQueries","deleteMutation","deleteResource","infrastructure","b","handleRestart","id","_analytics","trackEvent","resourceId","_auditLogApi","logAuditEvent","mutate","handleDelete","_jsxruntime","jsxs","className","jsx","panel","String","_EmptyState","default","illustration","title","description","action","label","onClick","length","map","res","name","type","region","status","cost","last_updated"],"sources":["/Users/pavan/Desktop/Devops-app-dev-cursor/frontend/src/components/dashboard/InfrastructurePanel.tsx"],"sourcesContent":["import React from 'react';\nimport { useQuery, useMutation, useQueryClient } from '@tanstack/react-query';\nimport { fetchInfrastructure, restartResource, deleteResource } from '../../services/infrastructureApi';\nimport { useSettings } from '../../contexts/SettingsContext';\nimport { trackEvent } from '../../utils/analytics';\nimport { logAuditEvent } from '../../services/auditLogApi';\nimport EmptyState from '../ui/EmptyState';\n\nexport default function InfrastructurePanel() {\n  const { panelVisibility } = useSettings();\n  const queryClient = useQueryClient();\n  const { data: resources, isLoading, error, refetch } = useQuery({ queryKey: ['infrastructure'], queryFn: fetchInfrastructure });\n\n  const restartMutation = useMutation({\n    mutationFn: restartResource,\n    onSuccess: () => queryClient.invalidateQueries({ queryKey: ['infrastructure'] })\n  });\n  const deleteMutation = useMutation({\n    mutationFn: deleteResource,\n    onSuccess: () => queryClient.invalidateQueries({ queryKey: ['infrastructure'] })\n  });\n\n  if (!panelVisibility.infrastructure) return null;\n\n  const handleRestart = async (id: number) => {\n    trackEvent('restart_resource', { resourceId: id });\n    await logAuditEvent('restart_resource', 'admin', { resourceId: id });\n    restartMutation.mutate(id);\n  };\n  const handleDelete = async (id: number) => {\n    trackEvent('delete_resource', { resourceId: id });\n    await logAuditEvent('delete_resource', 'admin', { resourceId: id });\n    deleteMutation.mutate(id);\n  };\n\n  if (isLoading) {\n    return (\n      <section className=\"bg-white/80 dark:bg-gray-900/80 rounded-xl shadow-lg p-6 flex flex-col gap-6 min-h-[320px] items-center justify-center\">\n        <div className=\"animate-spin rounded-full h-10 w-10 border-b-2 border-blue-500 mb-2\" aria-label=\"Loading infrastructure\" />\n        <span className=\"text-gray-500\">Loading infrastructure...</span>\n      </section>\n    );\n  }\n  if (error) {\n    trackEvent('error', { panel: 'Infrastructure', error: String(error) });\n    return (\n      <section className=\"bg-white/80 dark:bg-gray-900/80 rounded-xl shadow-lg p-6 flex flex-col gap-6 min-h-[320px] items-center justify-center\">\n        <EmptyState\n          illustration=\"mascot\"\n          title=\"Error Loading Infrastructure\"\n          description=\"We couldn't load infrastructure. Please try again.\"\n          action={{ label: 'Retry', onClick: refetch }}\n        />\n      </section>\n    );\n  }\n  if (!resources?.length) {\n    return (\n      <section className=\"bg-white/80 dark:bg-gray-900/80 rounded-xl shadow-lg p-6 flex flex-col gap-6 min-h-[320px] items-center justify-center\">\n        <EmptyState\n          illustration=\"mascot\"\n          title=\"No Infrastructure\"\n          description=\"No resources found.\"\n          action={{ label: 'Refresh', onClick: refetch }}\n        />\n      </section>\n    );\n  }\n  return (\n    <section className=\"bg-white/80 dark:bg-gray-900/80 rounded-xl shadow-lg p-6 flex flex-col gap-6 relative overflow-hidden min-h-[320px]\">\n      <div className=\"font-medium mb-2\">Infrastructure Resources</div>\n      <ul className=\"space-y-3\">\n        {resources.map((res: any) => (\n          <li key={res.id} className=\"flex flex-col md:flex-row md:items-center gap-2 bg-gray-50 dark:bg-gray-800 rounded-lg p-4\">\n            <div className=\"flex-1\">\n              <div className=\"font-semibold text-blue-600\">{res.name} ({res.type})</div>\n              <div className=\"text-gray-800 dark:text-gray-100\">Region: {res.region} | Status: {res.status}</div>\n              <div className=\"text-xs text-gray-400\">Cost: ${res.cost} | Last updated: {res.last_updated}</div>\n            </div>\n            <div className=\"flex gap-2 mt-2 md:mt-0\">\n              <button\n                onClick={() => handleRestart(res.id)}\n                className=\"px-3 py-1 rounded bg-yellow-600 text-white font-medium hover:bg-yellow-700 focus:outline-none focus:ring-2 focus:ring-yellow-400 transition\"\n                aria-label={`Restart resource ${res.id}`}\n              >\n                Restart\n              </button>\n              <button\n                onClick={() => handleDelete(res.id)}\n                className=\"px-3 py-1 rounded bg-red-600 text-white font-medium hover:bg-red-700 focus:outline-none focus:ring-2 focus:ring-red-400 transition\"\n                aria-label={`Delete resource ${res.id}`}\n              >\n                Delete\n              </button>\n            </div>\n          </li>\n        ))}\n      </ul>\n    </section>\n  );\n} "],"mappings":"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","ignoreList":[]}