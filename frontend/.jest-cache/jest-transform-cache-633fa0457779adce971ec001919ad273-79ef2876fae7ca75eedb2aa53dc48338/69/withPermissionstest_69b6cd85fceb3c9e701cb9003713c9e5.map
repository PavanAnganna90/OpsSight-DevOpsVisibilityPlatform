{"version":3,"sources":["/Users/pavan/Desktop/Devops-app-dev-cursor/frontend/src/components/rbac/__tests__/withPermissions.test.tsx"],"sourcesContent":["/**\n * Unit tests for withPermissions HOC.\n * Tests higher-order component for page-level permission protection.\n */\n\nimport React from 'react';\nimport { render, screen } from '@testing-library/react';\nimport { withPermissions, withAdminAccess } from '../withPermissions';\nimport { useAuth } from '../../../contexts/AuthContext';\n\n// Mock the useAuth hook\njest.mock('../../../contexts/AuthContext', () => ({\n  useAuth: jest.fn(),\n}));\n\nconst mockUseAuth = useAuth as jest.MockedFunction<typeof useAuth>;\n\n// Test component to wrap with HOCs\nconst TestComponent = () => <div data-testid=\"protected-page\">Protected Page Content</div>;\n\n// Mock auth context\nconst createMockAuth = (permissions: string[] = [], roles: string[] = [], isAdmin = false) => ({\n  hasPermission: jest.fn((permission: string) => permissions.includes(permission)),\n  hasRole: jest.fn((role: string) => roles.includes(role)),\n  hasAnyRole: jest.fn((roleList: string[]) => roleList.some(role => roles.includes(role))),\n  hasAnyPermission: jest.fn((permList: string[]) => permList.some(perm => permissions.includes(perm))),\n  canAccess: jest.fn((resource: string, action: string) => {\n    const resourcePermissions = {\n      'users': ['view_users', 'manage_users'],\n      'roles': ['view_roles', 'manage_roles'],\n      'infrastructure': ['view_infrastructure', 'manage_infrastructure'],\n    };\n    const requiredPerms = resourcePermissions[resource as keyof typeof resourcePermissions] || [];\n    return requiredPerms.some(perm => permissions.includes(perm));\n  }),\n  getUserPermissions: jest.fn(() => permissions),\n  getUserRoles: jest.fn(() => roles),\n  isAdmin: jest.fn(() => isAdmin),\n  state: {\n    isAuthenticated: true,\n    user: { id: 1, email: 'test@example.com' },\n    tokens: null,\n    isLoading: false,\n    error: null,\n  },\n  login: jest.fn(),\n  logout: jest.fn(),\n  refreshToken: jest.fn(),\n  getCurrentUser: jest.fn(),\n});\n\ndescribe('withPermissions HOC', () => {\n  beforeEach(() => {\n    jest.clearAllMocks();\n  });\n\n  describe('withPermissions', () => {\n    it('renders component when user has required permission', () => {\n      mockUseAuth.mockReturnValue(createMockAuth(['view_dashboard']));\n      \n      const ProtectedComponent = withPermissions(TestComponent, {\n        permissions: ['view_dashboard']\n      });\n\n      render(<ProtectedComponent />);\n\n      expect(screen.getByTestId('protected-page')).toBeInTheDocument();\n    });\n\n    it('renders access denied when user lacks required permission', () => {\n      mockUseAuth.mockReturnValue(createMockAuth([]));\n      \n      const ProtectedComponent = withPermissions(TestComponent, {\n        permissions: ['view_dashboard']\n      });\n\n      render(<ProtectedComponent />);\n\n      expect(screen.queryByTestId('protected-page')).not.toBeInTheDocument();\n      expect(screen.getByText('Access Denied')).toBeInTheDocument();\n    });\n\n    it('renders component when user has any of multiple permissions (requireAll=false)', () => {\n      mockUseAuth.mockReturnValue(createMockAuth(['view_dashboard']));\n      \n      const ProtectedComponent = withPermissions(TestComponent, {\n        permissions: ['view_dashboard', 'manage_infrastructure'],\n        requireAll: false\n      });\n\n      render(<ProtectedComponent />);\n\n      expect(screen.getByTestId('protected-page')).toBeInTheDocument();\n    });\n\n    it('requires all permissions when requireAll=true', () => {\n      mockUseAuth.mockReturnValue(createMockAuth(['view_dashboard']));\n      \n      const ProtectedComponent = withPermissions(TestComponent, {\n        permissions: ['view_dashboard', 'manage_infrastructure'],\n        requireAll: true\n      });\n\n      render(<ProtectedComponent />);\n\n      expect(screen.queryByTestId('protected-page')).not.toBeInTheDocument();\n      expect(screen.getByText('Access Denied')).toBeInTheDocument();\n    });\n\n    it('renders component when user has required role', () => {\n      mockUseAuth.mockReturnValue(createMockAuth([], ['organization_owner']));\n      \n      const ProtectedComponent = withPermissions(TestComponent, {\n        roles: ['organization_owner']\n      });\n\n      render(<ProtectedComponent />);\n\n      expect(screen.getByTestId('protected-page')).toBeInTheDocument();\n    });\n\n    it('renders component when user has any of multiple roles', () => {\n      mockUseAuth.mockReturnValue(createMockAuth([], ['team_lead']));\n      \n      const ProtectedComponent = withPermissions(TestComponent, {\n        roles: ['organization_owner', 'team_lead', 'devops_admin']\n      });\n\n      render(<ProtectedComponent />);\n\n      expect(screen.getByTestId('protected-page')).toBeInTheDocument();\n    });\n\n    it('renders access denied when user lacks required roles', () => {\n      mockUseAuth.mockReturnValue(createMockAuth([], ['developer']));\n      \n      const ProtectedComponent = withPermissions(TestComponent, {\n        roles: ['organization_owner', 'devops_admin']\n      });\n\n      render(<ProtectedComponent />);\n\n      expect(screen.queryByTestId('protected-page')).not.toBeInTheDocument();\n      expect(screen.getByText('Access Denied')).toBeInTheDocument();\n    });\n\n    it('renders component when user can access resource with required action', () => {\n      mockUseAuth.mockReturnValue(createMockAuth(['manage_users']));\n      \n      const ProtectedComponent = withPermissions(TestComponent, {\n        resource: 'users',\n        action: 'manage'\n      });\n\n      render(<ProtectedComponent />);\n\n      expect(screen.getByTestId('protected-page')).toBeInTheDocument();\n    });\n\n    it('renders access denied when user cannot access resource', () => {\n      mockUseAuth.mockReturnValue(createMockAuth(['view_dashboard']));\n      \n      const ProtectedComponent = withPermissions(TestComponent, {\n        resource: 'users',\n        action: 'manage'\n      });\n\n      render(<ProtectedComponent />);\n\n      expect(screen.queryByTestId('protected-page')).not.toBeInTheDocument();\n      expect(screen.getByText('Access Denied')).toBeInTheDocument();\n    });\n\n    it('renders custom fallback component when provided', () => {\n      mockUseAuth.mockReturnValue(createMockAuth([]));\n      \n      const CustomFallback = () => <div data-testid=\"custom-fallback\">Custom Access Denied</div>;\n      \n      const ProtectedComponent = withPermissions(TestComponent, {\n        permissions: ['view_dashboard'],\n        fallback: CustomFallback\n      });\n\n      render(<ProtectedComponent />);\n\n      expect(screen.queryByTestId('protected-page')).not.toBeInTheDocument();\n      expect(screen.getByTestId('custom-fallback')).toBeInTheDocument();\n    });\n\n    it('renders loading state when auth is loading', () => {\n      mockUseAuth.mockReturnValue({\n        ...createMockAuth([]),\n        state: {\n          isAuthenticated: false,\n          user: null,\n          tokens: null,\n          isLoading: true,\n          error: null,\n        }\n      });\n      \n      const ProtectedComponent = withPermissions(TestComponent, {\n        permissions: ['view_dashboard']\n      });\n\n      render(<ProtectedComponent />);\n\n      expect(screen.getByText('Loading...')).toBeInTheDocument();\n    });\n\n    it('renders access denied when user is not authenticated', () => {\n      mockUseAuth.mockReturnValue({\n        ...createMockAuth([]),\n        state: {\n          isAuthenticated: false,\n          user: null,\n          tokens: null,\n          isLoading: false,\n          error: null,\n        }\n      });\n      \n      const ProtectedComponent = withPermissions(TestComponent, {\n        permissions: ['view_dashboard']\n      });\n\n      render(<ProtectedComponent />);\n\n      expect(screen.queryByTestId('protected-page')).not.toBeInTheDocument();\n      expect(screen.getByText('Access Denied')).toBeInTheDocument();\n    });\n\n    it('handles complex permission combinations', () => {\n      mockUseAuth.mockReturnValue(createMockAuth(\n        ['view_dashboard', 'view_infrastructure'], \n        ['team_lead']\n      ));\n      \n      const ProtectedComponent = withPermissions(TestComponent, {\n        permissions: ['view_dashboard'],\n        roles: ['team_lead'],\n        resource: 'infrastructure',\n        action: 'view'\n      });\n\n      render(<ProtectedComponent />);\n\n      expect(screen.getByTestId('protected-page')).toBeInTheDocument();\n    });\n\n    it('denies access when any permission check fails in complex combinations', () => {\n      mockUseAuth.mockReturnValue(createMockAuth(\n        ['view_dashboard'], \n        ['developer'] // Wrong role\n      ));\n      \n      const ProtectedComponent = withPermissions(TestComponent, {\n        permissions: ['view_dashboard'],\n        roles: ['team_lead'], // Required role user doesn't have\n        resource: 'infrastructure',\n        action: 'view'\n      });\n\n      render(<ProtectedComponent />);\n\n      expect(screen.queryByTestId('protected-page')).not.toBeInTheDocument();\n      expect(screen.getByText('Access Denied')).toBeInTheDocument();\n    });\n  });\n\n  describe('withAdminAccess HOC', () => {\n    it('renders component for admin users', () => {\n      mockUseAuth.mockReturnValue(createMockAuth(\n        ['manage_roles', 'manage_users'], \n        ['organization_owner'], \n        true\n      ));\n      \n      const AdminComponent = withAdminAccess(TestComponent);\n\n      render(<AdminComponent />);\n\n      expect(screen.getByTestId('protected-page')).toBeInTheDocument();\n    });\n\n    it('renders access denied for non-admin users', () => {\n      mockUseAuth.mockReturnValue(createMockAuth(\n        ['view_dashboard'], \n        ['developer'], \n        false\n      ));\n      \n      const AdminComponent = withAdminAccess(TestComponent);\n\n      render(<AdminComponent />);\n\n      expect(screen.queryByTestId('protected-page')).not.toBeInTheDocument();\n      expect(screen.getByText('Access Denied')).toBeInTheDocument();\n    });\n\n    it('renders component for organization owner', () => {\n      mockUseAuth.mockReturnValue(createMockAuth(\n        [], \n        ['organization_owner'], \n        false // Even if isAdmin returns false, should still allow access\n      ));\n      \n      const AdminComponent = withAdminAccess(TestComponent);\n\n      render(<AdminComponent />);\n\n      expect(screen.getByTestId('protected-page')).toBeInTheDocument();\n    });\n\n    it('renders component for devops admin', () => {\n      mockUseAuth.mockReturnValue(createMockAuth(\n        [], \n        ['devops_admin'], \n        false\n      ));\n      \n      const AdminComponent = withAdminAccess(TestComponent);\n\n      render(<AdminComponent />);\n\n      expect(screen.getByTestId('protected-page')).toBeInTheDocument();\n    });\n\n    it('preserves component props', () => {\n      mockUseAuth.mockReturnValue(createMockAuth(\n        ['manage_roles'], \n        ['organization_owner'], \n        true\n      ));\n      \n      const PropsTestComponent = ({ testProp }: { testProp: string }) => (\n        <div data-testid=\"props-test\">{testProp}</div>\n      );\n      \n      const AdminComponent = withAdminAccess(PropsTestComponent);\n\n      render(<AdminComponent testProp=\"test-value\" />);\n\n      expect(screen.getByTestId('props-test')).toHaveTextContent('test-value');\n    });\n\n    it('preserves component display name', () => {\n      const NamedComponent = () => <div>Test</div>;\n      NamedComponent.displayName = 'NamedComponent';\n      \n      const AdminComponent = withAdminAccess(NamedComponent);\n      \n      expect(AdminComponent.displayName).toBe('withAdminAccess(NamedComponent)');\n    });\n  });\n\n  describe('HOC Edge Cases', () => {\n    it('handles undefined permissions gracefully', () => {\n      mockUseAuth.mockReturnValue(createMockAuth());\n      \n      const ProtectedComponent = withPermissions(TestComponent, {\n        permissions: undefined as any\n      });\n\n      render(<ProtectedComponent />);\n\n      // Should render component when no permissions are required\n      expect(screen.getByTestId('protected-page')).toBeInTheDocument();\n    });\n\n    it('handles empty permissions array', () => {\n      mockUseAuth.mockReturnValue(createMockAuth());\n      \n      const ProtectedComponent = withPermissions(TestComponent, {\n        permissions: []\n      });\n\n      render(<ProtectedComponent />);\n\n      // Should render component when no permissions are required\n      expect(screen.getByTestId('protected-page')).toBeInTheDocument();\n    });\n\n    it('handles missing auth context gracefully', () => {\n      // Mock useAuth to throw error (simulating missing provider)\n      mockUseAuth.mockImplementation(() => {\n        throw new Error('useAuth must be used within an AuthProvider');\n      });\n      \n      const ProtectedComponent = withPermissions(TestComponent, {\n        permissions: ['view_dashboard']\n      });\n\n      // Should not crash, but should show access denied\n      expect(() => render(<ProtectedComponent />)).toThrow();\n    });\n\n    it('handles auth error state', () => {\n      mockUseAuth.mockReturnValue({\n        ...createMockAuth([]),\n        state: {\n          isAuthenticated: false,\n          user: null,\n          tokens: null,\n          isLoading: false,\n          error: 'Authentication failed',\n        }\n      });\n      \n      const ProtectedComponent = withPermissions(TestComponent, {\n        permissions: ['view_dashboard']\n      });\n\n      render(<ProtectedComponent />);\n\n      expect(screen.queryByTestId('protected-page')).not.toBeInTheDocument();\n      expect(screen.getByText('Access Denied')).toBeInTheDocument();\n    });\n  });\n});"],"names":["jest","mock","useAuth","fn","mockUseAuth","TestComponent","div","data-testid","createMockAuth","permissions","roles","isAdmin","hasPermission","permission","includes","hasRole","role","hasAnyRole","roleList","some","hasAnyPermission","permList","perm","canAccess","resource","action","resourcePermissions","requiredPerms","getUserPermissions","getUserRoles","state","isAuthenticated","user","id","email","tokens","isLoading","error","login","logout","refreshToken","getCurrentUser","describe","beforeEach","clearAllMocks","it","mockReturnValue","ProtectedComponent","withPermissions","render","expect","screen","getByTestId","toBeInTheDocument","queryByTestId","not","getByText","requireAll","CustomFallback","fallback","AdminComponent","withAdminAccess","PropsTestComponent","testProp","toHaveTextContent","NamedComponent","displayName","toBe","undefined","mockImplementation","Error","toThrow"],"mappings":"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"}