{"version":3,"sources":["/Users/pavan/Desktop/Devops-app-dev-cursor/frontend/src/components/rbac/__tests__/withPermissions.test.tsx"],"sourcesContent":["/**\n * Unit tests for withPermissions HOC.\n * Tests higher-order component for page-level permission protection.\n */\n\nimport React from 'react';\nimport { render, screen } from '@testing-library/react';\nimport { withPermissions, withAdminAccess } from '../withPermissions';\nimport { useAuth } from '../../../contexts/AuthContext';\n\n// Mock router\nconst mockRouter = {\n  push: jest.fn(),\n  replace: jest.fn(),\n  back: jest.fn(),\n};\n\n// Mock Next.js router\njest.mock('next/navigation', () => ({\n  useRouter: () => mockRouter,\n}));\n\n// Mock the useAuth hook\njest.mock('../../../contexts/AuthContext', () => ({\n  useAuth: jest.fn(),\n}));\n\nconst mockUseAuth = useAuth as jest.MockedFunction<typeof useAuth>;\n\n// Test component to wrap with HOCs\nconst TestComponent = () => <div data-testid=\"protected-page\">Protected Page Content</div>;\n\n// Mock auth context\nconst createMockAuth = (permissions: string[] = [], roles: string[] = [], isAdmin = false) => ({\n  state: {\n    isAuthenticated: true,\n    user: { id: 1, email: 'test@example.com' },\n    tokens: null,\n    isLoading: false,\n    error: null,\n  },\n  login: jest.fn(),\n  logout: jest.fn(),\n  refreshToken: jest.fn(),\n  getCurrentUser: jest.fn(),\n  hasPermission: jest.fn((permission: string) => permissions.includes(permission)),\n  hasRole: jest.fn((role: string) => roles.includes(role)),\n  hasAnyRole: jest.fn((roleList: string[]) => roleList.some(role => roles.includes(role))),\n  hasAnyPermission: jest.fn((permList: string[]) => permList.some(perm => permissions.includes(perm))),\n  canAccess: jest.fn((resource: string, action: string) => {\n    const resourcePermissions = {\n      'users': ['view_users', 'manage_users'],\n      'roles': ['view_roles', 'manage_roles'],\n      'infrastructure': ['view_infrastructure', 'manage_infrastructure'],\n    };\n    const requiredPerms = resourcePermissions[resource as keyof typeof resourcePermissions] || [];\n    return requiredPerms.some(perm => permissions.includes(perm));\n  }),\n  getUserPermissions: jest.fn(() => permissions),\n  getUserRoles: jest.fn(() => roles),\n  isAdmin: jest.fn(() => isAdmin),\n});\n\ndescribe('withPermissions HOC', () => {\n  beforeEach(() => {\n    jest.clearAllMocks();\n    mockRouter.push.mockClear();\n    mockRouter.replace.mockClear();\n    mockRouter.back.mockClear();\n  });\n\n  describe('withPermissions', () => {\n    it('renders component when user has required permission', () => {\n      mockUseAuth.mockReturnValue(createMockAuth(['view_dashboard']));\n      \n      const ProtectedComponent = withPermissions(TestComponent, {\n        permissions: ['view_dashboard']\n      });\n\n      render(<ProtectedComponent />);\n\n      expect(screen.getByTestId('protected-page')).toBeInTheDocument();\n    });\n\n    it('renders access denied when user lacks required permission', () => {\n      mockUseAuth.mockReturnValue(createMockAuth([]));\n      \n      const ProtectedComponent = withPermissions(TestComponent, {\n        permissions: ['view_dashboard']\n      });\n\n      render(<ProtectedComponent />);\n\n      expect(screen.queryByTestId('protected-page')).not.toBeInTheDocument();\n      expect(screen.getByText('Access Denied')).toBeInTheDocument();\n      expect(screen.getByText(/Required permissions: view_dashboard/)).toBeInTheDocument();\n      expect(mockRouter.push).toHaveBeenCalledWith('/unauthorized');\n    });\n\n    it('renders component when user has any of multiple permissions (requireAll=false)', () => {\n      mockUseAuth.mockReturnValue(createMockAuth(['view_dashboard']));\n      \n      const ProtectedComponent = withPermissions(TestComponent, {\n        permissions: ['view_dashboard', 'manage_infrastructure'],\n        requireAll: false\n      });\n\n      render(<ProtectedComponent />);\n\n      expect(screen.getByTestId('protected-page')).toBeInTheDocument();\n    });\n\n    it('requires all permissions when requireAll=true', () => {\n      mockUseAuth.mockReturnValue(createMockAuth(['view_dashboard']));\n      \n      const ProtectedComponent = withPermissions(TestComponent, {\n        permissions: ['view_dashboard', 'manage_infrastructure'],\n        requireAll: true\n      });\n\n      render(<ProtectedComponent />);\n\n      expect(screen.queryByTestId('protected-page')).not.toBeInTheDocument();\n      expect(screen.getByText('Access Denied')).toBeInTheDocument();\n      expect(screen.getByText(/Required permissions: view_dashboard and manage_infrastructure/)).toBeInTheDocument();\n      expect(mockRouter.push).toHaveBeenCalledWith('/unauthorized');\n    });\n\n    it('renders component when user has required role', () => {\n      mockUseAuth.mockReturnValue(createMockAuth([], ['organization_owner']));\n      \n      const ProtectedComponent = withPermissions(TestComponent, {\n        roles: ['organization_owner']\n      });\n\n      render(<ProtectedComponent />);\n\n      expect(screen.getByTestId('protected-page')).toBeInTheDocument();\n    });\n\n    it('renders component when user has any of multiple roles', () => {\n      mockUseAuth.mockReturnValue(createMockAuth([], ['team_lead']));\n      \n      const ProtectedComponent = withPermissions(TestComponent, {\n        roles: ['organization_owner', 'team_lead', 'devops_admin']\n      });\n\n      render(<ProtectedComponent />);\n\n      expect(screen.getByTestId('protected-page')).toBeInTheDocument();\n    });\n\n    it('renders access denied when user lacks required roles', () => {\n      mockUseAuth.mockReturnValue(createMockAuth([], ['developer']));\n      \n      const ProtectedComponent = withPermissions(TestComponent, {\n        roles: ['organization_owner', 'devops_admin']\n      });\n\n      render(<ProtectedComponent />);\n\n      expect(screen.queryByTestId('protected-page')).not.toBeInTheDocument();\n      expect(screen.getByText('Access Denied')).toBeInTheDocument();\n      expect(screen.getByText(/Required roles: organization_owner or devops_admin/)).toBeInTheDocument();\n      expect(mockRouter.push).toHaveBeenCalledWith('/unauthorized');\n    });\n\n    it('renders component when user can access resource with required action', () => {\n      mockUseAuth.mockReturnValue(createMockAuth(['manage_users']));\n      \n      const ProtectedComponent = withPermissions(TestComponent, {\n        resource: 'users',\n        action: 'manage'\n      });\n\n      render(<ProtectedComponent />);\n\n      expect(screen.getByTestId('protected-page')).toBeInTheDocument();\n    });\n\n    it('renders access denied when user cannot access resource', () => {\n      mockUseAuth.mockReturnValue(createMockAuth(['view_dashboard']));\n      \n      const ProtectedComponent = withPermissions(TestComponent, {\n        resource: 'users',\n        action: 'manage'\n      });\n\n      render(<ProtectedComponent />);\n\n      expect(screen.queryByTestId('protected-page')).not.toBeInTheDocument();\n      expect(screen.getByText('Access Denied')).toBeInTheDocument();\n      expect(screen.getByText(/You don't have permission to manage users/)).toBeInTheDocument();\n      expect(mockRouter.push).toHaveBeenCalledWith('/unauthorized');\n    });\n\n    it('renders custom fallback component when provided', () => {\n      mockUseAuth.mockReturnValue(createMockAuth([]));\n      \n      const CustomFallback = () => <div data-testid=\"custom-fallback\">Custom Access Denied</div>;\n      \n      const ProtectedComponent = withPermissions(TestComponent, {\n        permissions: ['view_dashboard'],\n        fallback: CustomFallback\n      });\n\n      render(<ProtectedComponent />);\n\n      expect(screen.queryByTestId('protected-page')).not.toBeInTheDocument();\n      expect(screen.getByTestId('custom-fallback')).toBeInTheDocument();\n      expect(mockRouter.push).toHaveBeenCalledWith('/unauthorized');\n    });\n\n    it('redirects to login when user is not authenticated', () => {\n      mockUseAuth.mockReturnValue({\n        ...createMockAuth([]),\n        state: {\n          isAuthenticated: false,\n          user: null,\n          tokens: null,\n          isLoading: false,\n          error: null,\n        }\n      });\n      \n      const ProtectedComponent = withPermissions(TestComponent, {\n        permissions: ['view_dashboard']\n      });\n\n      render(<ProtectedComponent />);\n\n      expect(screen.getByText('Authentication Required')).toBeInTheDocument();\n      expect(screen.getByText('Redirecting to login...')).toBeInTheDocument();\n      expect(mockRouter.push).toHaveBeenCalledWith('/login');\n    });\n\n    it('handles complex permission combinations', () => {\n      mockUseAuth.mockReturnValue(createMockAuth(\n        ['view_dashboard', 'view_infrastructure'], \n        ['team_lead']\n      ));\n      \n      const ProtectedComponent = withPermissions(TestComponent, {\n        permissions: ['view_dashboard'],\n        roles: ['team_lead'],\n        resource: 'infrastructure',\n        action: 'view'\n      });\n\n      render(<ProtectedComponent />);\n\n      expect(screen.getByTestId('protected-page')).toBeInTheDocument();\n    });\n\n    it('denies access when any permission check fails in complex combinations', () => {\n      mockUseAuth.mockReturnValue(createMockAuth(\n        ['view_dashboard'], \n        ['developer'] // Wrong role\n      ));\n      \n      const ProtectedComponent = withPermissions(TestComponent, {\n        permissions: ['view_dashboard'],\n        roles: ['team_lead'], // Required role user doesn't have\n        resource: 'infrastructure',\n        action: 'view'\n      });\n\n      render(<ProtectedComponent />);\n\n      expect(screen.queryByTestId('protected-page')).not.toBeInTheDocument();\n      expect(screen.getByText('Access Denied')).toBeInTheDocument();\n      expect(mockRouter.push).toHaveBeenCalledWith('/unauthorized');\n    });\n\n    it('uses custom redirect path when provided', () => {\n      mockUseAuth.mockReturnValue(createMockAuth([]));\n      \n      const ProtectedComponent = withPermissions(TestComponent, {\n        permissions: ['view_dashboard'],\n        redirectTo: '/custom-unauthorized'\n      });\n\n      render(<ProtectedComponent />);\n\n      expect(screen.queryByTestId('protected-page')).not.toBeInTheDocument();\n      expect(mockRouter.push).toHaveBeenCalledWith('/custom-unauthorized');\n    });\n  });\n\n  describe('withAdminAccess HOC', () => {\n    it('renders component for admin users', () => {\n      mockUseAuth.mockReturnValue(createMockAuth(\n        ['manage_roles', 'manage_users'], \n        ['organization_owner'], \n        true\n      ));\n      \n      const AdminComponent = withAdminAccess(TestComponent);\n\n      render(<AdminComponent />);\n\n      expect(screen.getByTestId('protected-page')).toBeInTheDocument();\n    });\n\n    it('renders access denied for non-admin users', () => {\n      mockUseAuth.mockReturnValue(createMockAuth(\n        ['view_dashboard'], \n        ['developer'], \n        false\n      ));\n      \n      const AdminComponent = withAdminAccess(TestComponent);\n\n      render(<AdminComponent />);\n\n      expect(screen.queryByTestId('protected-page')).not.toBeInTheDocument();\n      expect(screen.getByText('Access Denied')).toBeInTheDocument();\n      expect(screen.getByText('Administrator access required.')).toBeInTheDocument();\n      expect(mockRouter.push).toHaveBeenCalledWith('/unauthorized');\n    });\n\n    it('preserves component props', () => {\n      mockUseAuth.mockReturnValue(createMockAuth(\n        ['manage_roles'], \n        ['organization_owner'], \n        true\n      ));\n      \n      const PropsTestComponent = ({ testProp }: { testProp: string }) => (\n        <div data-testid=\"props-test\">{testProp}</div>\n      );\n      \n      const AdminComponent = withAdminAccess(PropsTestComponent);\n\n      render(<AdminComponent testProp=\"test-value\" />);\n\n      expect(screen.getByTestId('props-test')).toHaveTextContent('test-value');\n    });\n\n    it('preserves component display name', () => {\n      const NamedComponent = () => <div>Test</div>;\n      NamedComponent.displayName = 'NamedComponent';\n      \n      const AdminComponent = withAdminAccess(NamedComponent);\n      \n      expect(AdminComponent.displayName).toBe('withPermissions(NamedComponent)');\n    });\n  });\n\n  describe('HOC Edge Cases', () => {\n    it('handles undefined permissions gracefully', () => {\n      mockUseAuth.mockReturnValue(createMockAuth());\n      \n      const ProtectedComponent = withPermissions(TestComponent, {\n        permissions: undefined as any\n      });\n\n      render(<ProtectedComponent />);\n\n      // Should render component when no permissions are required\n      expect(screen.getByTestId('protected-page')).toBeInTheDocument();\n    });\n\n    it('handles empty permissions array', () => {\n      mockUseAuth.mockReturnValue(createMockAuth());\n      \n      const ProtectedComponent = withPermissions(TestComponent, {\n        permissions: []\n      });\n\n      render(<ProtectedComponent />);\n\n      // Should render component when no permissions are required\n      expect(screen.getByTestId('protected-page')).toBeInTheDocument();\n    });\n\n    it('handles missing auth context gracefully', () => {\n      // Mock useAuth to throw error (simulating missing provider)\n      mockUseAuth.mockImplementation(() => {\n        throw new Error('useAuth must be used within an AuthProvider');\n      });\n      \n      const ProtectedComponent = withPermissions(TestComponent, {\n        permissions: ['view_dashboard']\n      });\n\n      // Should throw when auth context is missing\n      expect(() => render(<ProtectedComponent />)).toThrow('useAuth must be used within an AuthProvider');\n    });\n\n    it('handles auth error state', () => {\n      mockUseAuth.mockReturnValue({\n        ...createMockAuth([]),\n        state: {\n          isAuthenticated: false,\n          user: null,\n          tokens: null,\n          isLoading: false,\n          error: 'Authentication failed',\n        }\n      });\n      \n      const ProtectedComponent = withPermissions(TestComponent, {\n        permissions: ['view_dashboard']\n      });\n\n      render(<ProtectedComponent />);\n\n      // When not authenticated, should redirect to login\n      expect(screen.getByText('Authentication Required')).toBeInTheDocument();\n      expect(mockRouter.push).toHaveBeenCalledWith('/login');\n    });\n\n    it('handles organization-scoped permissions', () => {\n      const mockAuthWithOrgScope = createMockAuth(['view_dashboard']);\n      mockAuthWithOrgScope.hasPermission = jest.fn((permission: string, orgId?: string) => {\n        return orgId === 'org-123' && permission === 'view_dashboard';\n      });\n      \n      mockUseAuth.mockReturnValue(mockAuthWithOrgScope);\n      \n      const ProtectedComponent = withPermissions(TestComponent, {\n        permissions: ['view_dashboard'],\n        organizationId: 'org-123'\n      });\n\n      render(<ProtectedComponent />);\n\n      expect(screen.getByTestId('protected-page')).toBeInTheDocument();\n      expect(mockAuthWithOrgScope.hasPermission).toHaveBeenCalledWith('view_dashboard', 'org-123');\n    });\n\n    it('denies access for wrong organization scope', () => {\n      const mockAuthWithOrgScope = createMockAuth([]);\n      mockAuthWithOrgScope.hasPermission = jest.fn((permission: string, orgId?: string) => {\n        return orgId === 'org-123' && permission === 'view_dashboard';\n      });\n      \n      mockUseAuth.mockReturnValue(mockAuthWithOrgScope);\n      \n      const ProtectedComponent = withPermissions(TestComponent, {\n        permissions: ['view_dashboard'],\n        organizationId: 'org-456' // Different org\n      });\n\n      render(<ProtectedComponent />);\n\n      expect(screen.queryByTestId('protected-page')).not.toBeInTheDocument();\n      expect(screen.getByText('Access Denied')).toBeInTheDocument();\n    });\n  });\n});"],"names":["jest","mock","useRouter","mockRouter","useAuth","fn","push","replace","back","mockUseAuth","TestComponent","div","data-testid","createMockAuth","permissions","roles","isAdmin","state","isAuthenticated","user","id","email","tokens","isLoading","error","login","logout","refreshToken","getCurrentUser","hasPermission","permission","includes","hasRole","role","hasAnyRole","roleList","some","hasAnyPermission","permList","perm","canAccess","resource","action","resourcePermissions","requiredPerms","getUserPermissions","getUserRoles","describe","beforeEach","clearAllMocks","mockClear","it","mockReturnValue","ProtectedComponent","withPermissions","render","expect","screen","getByTestId","toBeInTheDocument","queryByTestId","not","getByText","toHaveBeenCalledWith","requireAll","CustomFallback","fallback","redirectTo","AdminComponent","withAdminAccess","PropsTestComponent","testProp","toHaveTextContent","NamedComponent","displayName","toBe","undefined","mockImplementation","Error","toThrow","mockAuthWithOrgScope","orgId","organizationId"],"mappings":"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"}