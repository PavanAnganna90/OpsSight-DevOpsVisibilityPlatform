{"version":3,"sources":["/Users/pavan/Desktop/Devops-app-dev-cursor/frontend/src/services/apiService.ts"],"sourcesContent":["/**\n * Enhanced API Service for backend communication\n * Handles authentication, error handling, caching, and real-time data fetching\n * Optimized for enterprise-grade backend architecture\n */\n\nconst API_BASE_URL = process.env.NEXT_PUBLIC_API_BASE_URL || 'http://localhost:8000/api/v1';\n\nexport interface ApiResponse<T = any> {\n  success: boolean;\n  data?: T;\n  error?: string;\n  status?: number;\n  cached?: boolean;\n  request_id?: string;\n  process_time?: number;\n}\n\nexport interface OAuthProvider {\n  provider: string;\n  name: string;\n  configured: boolean;\n  enabled: boolean;\n  description: string;\n}\n\nexport interface OAuthProvidersResponse {\n  providers: OAuthProvider[];\n  total_count: number;\n  enabled_count: number;\n}\n\nexport interface AuthorizationUrlResponse {\n  authorization_url: string;\n  provider: string;\n  state: string;\n}\n\nexport interface HealthResponse {\n  status: string;\n  service: string;\n  version: string;\n  environment?: string;\n  dependencies?: Record<string, boolean>;\n}\n\nexport interface DashboardMetrics {\n  services: {\n    name: string;\n    status: 'healthy' | 'warning' | 'error';\n    uptime: string;\n    response_time: number;\n  }[];\n  system: {\n    cpu_usage: number;\n    memory_usage: number;\n    disk_usage: number;\n  };\n  deployments: {\n    id: string;\n    service: string;\n    status: 'running' | 'pending' | 'failed';\n    timestamp: string;\n    duration: number;\n  }[];\n}\n\nexport interface CacheMetrics {\n  hit_rate: number;\n  miss_rate: number;\n  total_requests: number;\n  hits: number;\n  misses: number;\n  size: number;\n  max_size: number;\n}\n\nclass ApiService {\n  private baseUrl: string;\n  private authToken: string | null = null;\n  private requestCache: Map<string, { data: any; timestamp: number; ttl: number }> = new Map();\n  private retryAttempts: number = 3;\n  private retryDelay: number = 1000;\n\n  constructor(baseUrl: string = API_BASE_URL) {\n    this.baseUrl = baseUrl;\n    // SSR-safe localStorage access\n    this.authToken = typeof window !== 'undefined' \n      ? localStorage.getItem('auth_token') \n      : null;\n  }\n\n  /**\n   * Set authentication token\n   */\n  setAuthToken(token: string | null) {\n    this.authToken = token;\n    // SSR-safe localStorage access\n    if (typeof window !== 'undefined') {\n      if (token) {\n        localStorage.setItem('auth_token', token);\n      } else {\n        localStorage.removeItem('auth_token');\n      }\n    }\n  }\n\n  /**\n   * Get authentication headers\n   */\n  private getAuthHeaders(): HeadersInit {\n    const headers: HeadersInit = {\n      'Content-Type': 'application/json',\n      'X-Requested-With': 'XMLHttpRequest',\n    };\n\n    if (this.authToken) {\n      headers['Authorization'] = `Bearer ${this.authToken}`;\n    }\n\n    return headers;\n  }\n\n  /**\n   * Check if cached data is still valid\n   */\n  private isCacheValid(cacheKey: string): boolean {\n    const cached = this.requestCache.get(cacheKey);\n    if (!cached) return false;\n    \n    const now = Date.now();\n    return (now - cached.timestamp) < cached.ttl;\n  }\n\n  /**\n   * Get cached data if valid\n   */\n  private getCachedData(cacheKey: string): any | null {\n    if (this.isCacheValid(cacheKey)) {\n      return this.requestCache.get(cacheKey)?.data || null;\n    }\n    return null;\n  }\n\n  /**\n   * Cache data with TTL\n   */\n  private setCachedData(cacheKey: string, data: any, ttl: number = 300000): void {\n    this.requestCache.set(cacheKey, {\n      data,\n      timestamp: Date.now(),\n      ttl\n    });\n  }\n\n  /**\n   * Retry failed requests with exponential backoff\n   */\n  private async retryRequest<T>(\n    requestFn: () => Promise<Response>,\n    attempts: number = this.retryAttempts\n  ): Promise<Response> {\n    for (let i = 0; i < attempts; i++) {\n      try {\n        const response = await requestFn();\n        if (response.ok || response.status < 500) {\n          return response;\n        }\n        throw new Error(`HTTP ${response.status}`);\n      } catch (error) {\n        if (i === attempts - 1) throw error;\n        await new Promise(resolve => setTimeout(resolve, this.retryDelay * Math.pow(2, i)));\n      }\n    }\n    throw new Error('Max retry attempts exceeded');\n  }\n\n  /**\n   * Generic API request method with caching and retry logic\n   */\n  private async request<T>(\n    endpoint: string,\n    options: RequestInit = {},\n    useCache: boolean = false,\n    cacheTtl: number = 300000\n  ): Promise<ApiResponse<T>> {\n    const cacheKey = `${endpoint}-${JSON.stringify(options)}`;\n    \n    // Check cache for GET requests\n    if (useCache && (!options.method || options.method === 'GET')) {\n      const cachedData = this.getCachedData(cacheKey);\n      if (cachedData) {\n        return {\n          success: true,\n          data: cachedData,\n          cached: true,\n        };\n      }\n    }\n\n    try {\n      const url = `${this.baseUrl}${endpoint}`;\n      \n      const response = await this.retryRequest(async () => {\n        return fetch(url, {\n          ...options,\n          headers: {\n            ...this.getAuthHeaders(),\n            ...options.headers,\n          },\n        });\n      });\n\n      const data = await response.json();\n\n      // Extract performance headers\n      const requestId = response.headers.get('X-Request-ID');\n      const processTime = response.headers.get('X-Process-Time');\n\n      if (!response.ok) {\n        return {\n          success: false,\n          error: data.detail || `HTTP ${response.status}`,\n          status: response.status,\n          request_id: requestId || undefined,\n          process_time: processTime ? parseFloat(processTime) : undefined,\n        };\n      }\n\n      // Cache successful GET requests\n      if (useCache && (!options.method || options.method === 'GET')) {\n        this.setCachedData(cacheKey, data, cacheTtl);\n      }\n\n      return {\n        success: true,\n        data,\n        status: response.status,\n        request_id: requestId || undefined,\n        process_time: processTime ? parseFloat(processTime) : undefined,\n      };\n    } catch (error) {\n      console.error('API request failed:', error);\n      return {\n        success: false,\n        error: error instanceof Error ? error.message : 'Network error',\n      };\n    }\n  }\n\n  /**\n   * GET request with optional caching\n   */\n  async get<T>(endpoint: string, useCache: boolean = true, cacheTtl?: number): Promise<ApiResponse<T>> {\n    return this.request<T>(endpoint, { method: 'GET' }, useCache, cacheTtl);\n  }\n\n  /**\n   * POST request\n   */\n  async post<T>(endpoint: string, data?: any): Promise<ApiResponse<T>> {\n    return this.request<T>(endpoint, {\n      method: 'POST',\n      body: data ? JSON.stringify(data) : undefined,\n    });\n  }\n\n  /**\n   * PUT request\n   */\n  async put<T>(endpoint: string, data?: any): Promise<ApiResponse<T>> {\n    return this.request<T>(endpoint, {\n      method: 'PUT',\n      body: data ? JSON.stringify(data) : undefined,\n    });\n  }\n\n  /**\n   * DELETE request\n   */\n  async delete<T>(endpoint: string): Promise<ApiResponse<T>> {\n    return this.request<T>(endpoint, { method: 'DELETE' });\n  }\n\n  /**\n   * Clear cache for specific endpoint or all cache\n   */\n  clearCache(endpoint?: string): void {\n    if (endpoint) {\n      const keysToDelete = Array.from(this.requestCache.keys()).filter(key => \n        key.startsWith(endpoint)\n      );\n      keysToDelete.forEach(key => this.requestCache.delete(key));\n    } else {\n      this.requestCache.clear();\n    }\n  }\n\n  // OAuth Methods\n  /**\n   * Get available OAuth providers\n   */\n  async getOAuthProviders(): Promise<ApiResponse<OAuthProvidersResponse>> {\n    return this.get<OAuthProvidersResponse>('/auth/oauth/providers');\n  }\n\n  /**\n   * Get OAuth authorization URL for a provider\n   */\n  async getOAuthAuthorizationUrl(\n    provider: string,\n    redirectUri?: string,\n    state?: string\n  ): Promise<ApiResponse<AuthorizationUrlResponse>> {\n    const params = new URLSearchParams();\n    if (redirectUri) params.set('redirect_uri', redirectUri);\n    if (state) params.set('state', state);\n    \n    const query = params.toString() ? `?${params.toString()}` : '';\n    return this.get<AuthorizationUrlResponse>(`/auth/oauth/${provider}/authorize${query}`);\n  }\n\n  /**\n   * Check OAuth provider health\n   */\n  async checkOAuthProviderHealth(provider: string): Promise<ApiResponse<any>> {\n    return this.get(`/auth/oauth/${provider}/health`);\n  }\n\n  // Health Methods\n  /**\n   * Get application health status\n   */\n  async getHealth(): Promise<ApiResponse<HealthResponse>> {\n    // Use the root health endpoint instead of API v1\n    const response = await fetch('http://localhost:8000/health');\n    const data = await response.json();\n    \n    return {\n      success: response.ok,\n      data: response.ok ? data : undefined,\n      error: response.ok ? undefined : data.detail || 'Health check failed',\n      status: response.status,\n    };\n  }\n\n  // Dashboard Data Methods\n  /**\n   * Get comprehensive dashboard metrics\n   */\n  async getDashboardMetrics(): Promise<ApiResponse<DashboardMetrics>> {\n    return this.get<DashboardMetrics>('/metrics/dashboard', true, 60000); // Cache for 1 minute\n  }\n\n  /**\n   * Get cache performance metrics\n   */\n  async getCacheMetrics(): Promise<ApiResponse<CacheMetrics>> {\n    // Use the root cache metrics endpoint\n    const response = await fetch(`${this.baseUrl.replace('/api/v1', '')}/cache/metrics`, {\n      headers: this.getAuthHeaders(),\n    });\n    const data = await response.json();\n    \n    return {\n      success: response.ok,\n      data: response.ok ? data : undefined,\n      error: response.ok ? undefined : data.detail || 'Cache metrics failed',\n      status: response.status,\n    };\n  }\n\n  /**\n   * Get API performance information\n   */\n  async getApiPerformance(): Promise<ApiResponse<any>> {\n    // Use the root API performance endpoint\n    const response = await fetch(`${this.baseUrl.replace('/api/v1', '')}/api/performance`, {\n      headers: this.getAuthHeaders(),\n    });\n    const data = await response.json();\n    \n    return {\n      success: response.ok,\n      data: response.ok ? data : undefined,\n      error: response.ok ? undefined : data.detail || 'API performance failed',\n      status: response.status,\n    };\n  }\n\n  /**\n   * Get pipeline data\n   */\n  async getPipelines(): Promise<ApiResponse<any[]>> {\n    return this.get('/pipelines', true, 120000); // Cache for 2 minutes\n  }\n\n  /**\n   * Get organization data\n   */\n  async getOrganizations(): Promise<ApiResponse<any[]>> {\n    return this.get('/organizations', true, 300000); // Cache for 5 minutes\n  }\n\n  /**\n   * Get user data\n   */\n  async getUsers(): Promise<ApiResponse<any[]>> {\n    return this.get('/users', true, 180000); // Cache for 3 minutes\n  }\n\n  /**\n   * Get alerts with optional filtering\n   */\n  async getAlerts(status?: string): Promise<ApiResponse<any[]>> {\n    const endpoint = status ? `/alerts?status=${status}` : '/alerts';\n    return this.get(endpoint, true, 30000); // Cache for 30 seconds (real-time data)\n  }\n\n  /**\n   * Get infrastructure data\n   */\n  async getInfrastructure(): Promise<ApiResponse<any[]>> {\n    return this.get('/infrastructure', true, 180000); // Cache for 3 minutes\n  }\n\n  /**\n   * Get system monitoring data\n   */\n  async getMonitoringData(): Promise<ApiResponse<any>> {\n    return this.get('/monitoring/system', true, 30000); // Cache for 30 seconds\n  }\n\n  /**\n   * Get deployment status\n   */\n  async getDeployments(): Promise<ApiResponse<any[]>> {\n    return this.get('/deployments', true, 60000); // Cache for 1 minute\n  }\n\n  /**\n   * Get service health status\n   */\n  async getServiceHealth(): Promise<ApiResponse<any[]>> {\n    return this.get('/monitoring/services', true, 60000); // Cache for 1 minute\n  }\n\n  /**\n   * Get real-time metrics for dashboard\n   */\n  async getRealTimeMetrics(): Promise<ApiResponse<any>> {\n    return this.get('/metrics/realtime', false); // No cache for real-time data\n  }\n\n  /**\n   * Trigger cache invalidation for specific patterns\n   */\n  async invalidateCache(pattern?: string): Promise<ApiResponse<any>> {\n    const data = pattern ? { pattern } : {};\n    return this.post('/cache/invalidate', data);\n  }\n}\n\n// Export singleton instance\nexport const apiService = new ApiService();\nexport default apiService;"],"names":["apiService","API_BASE_URL","process","env","NEXT_PUBLIC_API_BASE_URL","ApiService","constructor","baseUrl","authToken","requestCache","Map","retryAttempts","retryDelay","window","localStorage","getItem","setAuthToken","token","setItem","removeItem","getAuthHeaders","headers","isCacheValid","cacheKey","cached","get","now","Date","timestamp","ttl","getCachedData","data","setCachedData","set","retryRequest","requestFn","attempts","i","response","ok","status","Error","error","Promise","resolve","setTimeout","Math","pow","request","endpoint","options","useCache","cacheTtl","JSON","stringify","method","cachedData","success","url","fetch","json","requestId","processTime","detail","request_id","undefined","process_time","parseFloat","console","message","post","body","put","delete","clearCache","keysToDelete","Array","from","keys","filter","key","startsWith","forEach","clear","getOAuthProviders","getOAuthAuthorizationUrl","provider","redirectUri","state","params","URLSearchParams","query","toString","checkOAuthProviderHealth","getHealth","getDashboardMetrics","getCacheMetrics","replace","getApiPerformance","getPipelines","getOrganizations","getUsers","getAlerts","getInfrastructure","getMonitoringData","getDeployments","getServiceHealth","getRealTimeMetrics","invalidateCache","pattern"],"mappings":"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"}