18247dbbed9c51f351e6d7906ecc4f77
'use client';
"use strict";
Object.defineProperty(exports, "__esModule", {
    value: true
});
Object.defineProperty(exports, "withAuth", {
    enumerable: true,
    get: function() {
        return withAuth;
    }
});
const _jsxruntime = require("react/jsx-runtime");
const _react = require("react");
const _navigation = require("next/navigation");
const _AuthContext = require("../../contexts/AuthContext");
function withAuth(WrappedComponent) {
    return function ProtectedRoute(props) {
        const router = (0, _navigation.useRouter)();
        const { state } = (0, _AuthContext.useAuth)();
        (0, _react.useEffect)(()=>{
            // Only redirect after the initial loading is complete
            if (!state.isLoading && !state.isAuthenticated) {
                // Store the current path for redirect after login
                const currentPath = window.location.pathname;
                router.push(`/login?redirect=${encodeURIComponent(currentPath)}`);
            }
        }, [
            state.isAuthenticated,
            state.isLoading,
            router
        ]);
        // Show nothing while loading
        if (state.isLoading) {
            return /*#__PURE__*/ (0, _jsxruntime.jsx)("div", {
                className: "min-h-screen flex items-center justify-center bg-gray-50",
                children: /*#__PURE__*/ (0, _jsxruntime.jsx)("div", {
                    className: "animate-spin rounded-full h-12 w-12 border-b-2 border-gray-900"
                })
            });
        }
        // Only render the component if authenticated
        return state.isAuthenticated ? /*#__PURE__*/ (0, _jsxruntime.jsx)(WrappedComponent, {
            ...props
        }) : null;
    };
}

//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi9Vc2Vycy9wYXZhbi9EZXNrdG9wL0Rldm9wcy1hcHAtZGV2LWN1cnNvci9mcm9udGVuZC9zcmMvY29tcG9uZW50cy9hdXRoL3dpdGhBdXRoLnRzeCJdLCJzb3VyY2VzQ29udGVudCI6WyIndXNlIGNsaWVudCc7XG5cbmltcG9ydCB7IHVzZUVmZmVjdCB9IGZyb20gJ3JlYWN0JztcbmltcG9ydCB7IHVzZVJvdXRlciB9IGZyb20gJ25leHQvbmF2aWdhdGlvbic7XG5pbXBvcnQgeyB1c2VBdXRoIH0gZnJvbSAnQC9jb250ZXh0cy9BdXRoQ29udGV4dCc7XG5cbi8qKlxuICogSGlnaGVyLW9yZGVyIGNvbXBvbmVudCBmb3IgcHJvdGVjdGluZyByb3V0ZXMgdGhhdCByZXF1aXJlIGF1dGhlbnRpY2F0aW9uXG4gKiBAcGFyYW0gV3JhcHBlZENvbXBvbmVudCAtIFRoZSBjb21wb25lbnQgdG8gd3JhcCB3aXRoIGF1dGhlbnRpY2F0aW9uXG4gKiBAcmV0dXJucyBBIG5ldyBjb21wb25lbnQgd2l0aCBhdXRoZW50aWNhdGlvbiBjaGVja3NcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIHdpdGhBdXRoPFAgZXh0ZW5kcyBvYmplY3Q+KFxuICBXcmFwcGVkQ29tcG9uZW50OiBSZWFjdC5Db21wb25lbnRUeXBlPFA+XG4pIHtcbiAgcmV0dXJuIGZ1bmN0aW9uIFByb3RlY3RlZFJvdXRlKHByb3BzOiBQKSB7XG4gICAgY29uc3Qgcm91dGVyID0gdXNlUm91dGVyKCk7XG4gICAgY29uc3QgeyBzdGF0ZSB9ID0gdXNlQXV0aCgpO1xuXG4gICAgdXNlRWZmZWN0KCgpID0+IHtcbiAgICAgIC8vIE9ubHkgcmVkaXJlY3QgYWZ0ZXIgdGhlIGluaXRpYWwgbG9hZGluZyBpcyBjb21wbGV0ZVxuICAgICAgaWYgKCFzdGF0ZS5pc0xvYWRpbmcgJiYgIXN0YXRlLmlzQXV0aGVudGljYXRlZCkge1xuICAgICAgICAvLyBTdG9yZSB0aGUgY3VycmVudCBwYXRoIGZvciByZWRpcmVjdCBhZnRlciBsb2dpblxuICAgICAgICBjb25zdCBjdXJyZW50UGF0aCA9IHdpbmRvdy5sb2NhdGlvbi5wYXRobmFtZTtcbiAgICAgICAgcm91dGVyLnB1c2goYC9sb2dpbj9yZWRpcmVjdD0ke2VuY29kZVVSSUNvbXBvbmVudChjdXJyZW50UGF0aCl9YCk7XG4gICAgICB9XG4gICAgfSwgW3N0YXRlLmlzQXV0aGVudGljYXRlZCwgc3RhdGUuaXNMb2FkaW5nLCByb3V0ZXJdKTtcblxuICAgIC8vIFNob3cgbm90aGluZyB3aGlsZSBsb2FkaW5nXG4gICAgaWYgKHN0YXRlLmlzTG9hZGluZykge1xuICAgICAgcmV0dXJuIChcbiAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJtaW4taC1zY3JlZW4gZmxleCBpdGVtcy1jZW50ZXIganVzdGlmeS1jZW50ZXIgYmctZ3JheS01MFwiPlxuICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiYW5pbWF0ZS1zcGluIHJvdW5kZWQtZnVsbCBoLTEyIHctMTIgYm9yZGVyLWItMiBib3JkZXItZ3JheS05MDBcIj48L2Rpdj5cbiAgICAgICAgPC9kaXY+XG4gICAgICApO1xuICAgIH1cblxuICAgIC8vIE9ubHkgcmVuZGVyIHRoZSBjb21wb25lbnQgaWYgYXV0aGVudGljYXRlZFxuICAgIHJldHVybiBzdGF0ZS5pc0F1dGhlbnRpY2F0ZWQgPyA8V3JhcHBlZENvbXBvbmVudCB7Li4ucHJvcHN9IC8+IDogbnVsbDtcbiAgfTtcbn0gIl0sIm5hbWVzIjpbIndpdGhBdXRoIiwiV3JhcHBlZENvbXBvbmVudCIsIlByb3RlY3RlZFJvdXRlIiwicHJvcHMiLCJyb3V0ZXIiLCJ1c2VSb3V0ZXIiLCJzdGF0ZSIsInVzZUF1dGgiLCJ1c2VFZmZlY3QiLCJpc0xvYWRpbmciLCJpc0F1dGhlbnRpY2F0ZWQiLCJjdXJyZW50UGF0aCIsIndpbmRvdyIsImxvY2F0aW9uIiwicGF0aG5hbWUiLCJwdXNoIiwiZW5jb2RlVVJJQ29tcG9uZW50IiwiZGl2IiwiY2xhc3NOYW1lIl0sIm1hcHBpbmdzIjoiQUFBQTs7Ozs7K0JBV2dCQTs7O2VBQUFBOzs7O3VCQVRVOzRCQUNBOzZCQUNGO0FBT2pCLFNBQVNBLFNBQ2RDLGdCQUF3QztJQUV4QyxPQUFPLFNBQVNDLGVBQWVDLEtBQVE7UUFDckMsTUFBTUMsU0FBU0MsSUFBQUEscUJBQVM7UUFDeEIsTUFBTSxFQUFFQyxLQUFLLEVBQUUsR0FBR0MsSUFBQUEsb0JBQU87UUFFekJDLElBQUFBLGdCQUFTLEVBQUM7WUFDUixzREFBc0Q7WUFDdEQsSUFBSSxDQUFDRixNQUFNRyxTQUFTLElBQUksQ0FBQ0gsTUFBTUksZUFBZSxFQUFFO2dCQUM5QyxrREFBa0Q7Z0JBQ2xELE1BQU1DLGNBQWNDLE9BQU9DLFFBQVEsQ0FBQ0MsUUFBUTtnQkFDNUNWLE9BQU9XLElBQUksQ0FBQyxDQUFDLGdCQUFnQixFQUFFQyxtQkFBbUJMLGNBQWM7WUFDbEU7UUFDRixHQUFHO1lBQUNMLE1BQU1JLGVBQWU7WUFBRUosTUFBTUcsU0FBUztZQUFFTDtTQUFPO1FBRW5ELDZCQUE2QjtRQUM3QixJQUFJRSxNQUFNRyxTQUFTLEVBQUU7WUFDbkIscUJBQ0UscUJBQUNRO2dCQUFJQyxXQUFVOzBCQUNiLGNBQUEscUJBQUNEO29CQUFJQyxXQUFVOzs7UUFHckI7UUFFQSw2Q0FBNkM7UUFDN0MsT0FBT1osTUFBTUksZUFBZSxpQkFBRyxxQkFBQ1Q7WUFBa0IsR0FBR0UsS0FBSzthQUFPO0lBQ25FO0FBQ0YifQ==