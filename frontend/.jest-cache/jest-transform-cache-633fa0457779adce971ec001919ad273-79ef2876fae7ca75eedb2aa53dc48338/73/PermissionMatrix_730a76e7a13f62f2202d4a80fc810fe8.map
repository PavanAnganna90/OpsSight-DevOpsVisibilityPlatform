{"version":3,"sources":["/Users/pavan/Desktop/Devops-app-dev-cursor/frontend/src/components/admin/role-management/PermissionMatrix.tsx"],"sourcesContent":["import React, { useState, useEffect } from 'react';\nimport { Permission } from '../../../types/role';\n\ninterface PermissionMatrixProps {\n  permissions: Permission[];\n  setPermissions: (perms: Permission[]) => void;\n}\n\n/**\n * UI for assigning permissions to a role.\n */\nconst PermissionMatrix: React.FC<PermissionMatrixProps> = ({ permissions, setPermissions }) => {\n  const [allPermissions, setAllPermissions] = useState<Permission[]>([]);\n  const [loading, setLoading] = useState(true);\n  const [error, setError] = useState<string | null>(null);\n\n  // Fetch all permissions from API\n  useEffect(() => {\n    const fetchPermissions = async () => {\n      try {\n        const response = await fetch('/api/v1/permissions');\n        if (!response.ok) {\n          throw new Error('Failed to fetch permissions');\n        }\n        const data = await response.json();\n        setAllPermissions(data);\n      } catch (err) {\n        setError(err instanceof Error ? err.message : 'An error occurred');\n      } finally {\n        setLoading(false);\n      }\n    };\n\n    fetchPermissions();\n  }, []);\n  const togglePermission = (perm: Permission) => {\n    if (permissions.some(p => p.id === perm.id)) {\n      setPermissions(permissions.filter(p => p.id !== perm.id));\n    } else {\n      setPermissions([...permissions, perm]);\n    }\n  };\n\n  if (loading) {\n    return (\n      <div className=\"animate-pulse\">\n        <div className=\"grid grid-cols-2 gap-2\">\n          {[1, 2, 3, 4, 5, 6].map(i => (\n            <div key={i} className=\"h-6 bg-gray-300 rounded\"></div>\n          ))}\n        </div>\n      </div>\n    );\n  }\n\n  if (error) {\n    return <div className=\"text-red-600\">Error loading permissions: {error}</div>;\n  }\n\n  // Group permissions by category\n  const groupedPermissions = allPermissions.reduce((acc, perm) => {\n    if (!acc[perm.category]) {\n      acc[perm.category] = [];\n    }\n    acc[perm.category].push(perm);\n    return acc;\n  }, {} as Record<string, Permission[]>);\n\n  return (\n    <div className=\"space-y-4\">\n      {Object.entries(groupedPermissions).map(([category, perms]) => (\n        <div key={category}>\n          <h4 className=\"font-medium text-gray-700 dark:text-gray-300 mb-2 capitalize\">\n            {category.replace('_', ' ')}\n          </h4>\n          <div className=\"grid grid-cols-1 gap-2\">\n            {perms.map(perm => (\n              <label key={perm.id} className=\"flex items-center gap-2\">\n                <input\n                  type=\"checkbox\"\n                  checked={permissions.some(p => p.id === perm.id)}\n                  onChange={() => togglePermission(perm)}\n                  className=\"rounded border-gray-300 text-blue-600 focus:ring-blue-500\"\n                />\n                <span className=\"text-sm\">{perm.description}</span>\n              </label>\n            ))}\n          </div>\n        </div>\n      ))}\n    </div>\n  );\n};\n\nexport default PermissionMatrix;\n"],"names":["PermissionMatrix","permissions","setPermissions","allPermissions","setAllPermissions","useState","loading","setLoading","error","setError","useEffect","fetchPermissions","response","fetch","ok","Error","data","json","err","message","togglePermission","perm","some","p","id","filter","div","className","map","i","groupedPermissions","reduce","acc","category","push","Object","entries","perms","h4","replace","label","input","type","checked","onChange","span","description"],"mappings":";;;;+BA8FA;;;eAAA;;;;+DA9F2C;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAQ3C;;CAEC,GACD,MAAMA,mBAAoD,CAAC,EAAEC,WAAW,EAAEC,cAAc,EAAE;IACxF,MAAM,CAACC,gBAAgBC,kBAAkB,GAAGC,IAAAA,eAAQ,EAAe,EAAE;IACrE,MAAM,CAACC,SAASC,WAAW,GAAGF,IAAAA,eAAQ,EAAC;IACvC,MAAM,CAACG,OAAOC,SAAS,GAAGJ,IAAAA,eAAQ,EAAgB;IAElD,iCAAiC;IACjCK,IAAAA,gBAAS,EAAC;QACR,MAAMC,mBAAmB;YACvB,IAAI;gBACF,MAAMC,WAAW,MAAMC,MAAM;gBAC7B,IAAI,CAACD,SAASE,EAAE,EAAE;oBAChB,MAAM,IAAIC,MAAM;gBAClB;gBACA,MAAMC,OAAO,MAAMJ,SAASK,IAAI;gBAChCb,kBAAkBY;YACpB,EAAE,OAAOE,KAAK;gBACZT,SAASS,eAAeH,QAAQG,IAAIC,OAAO,GAAG;YAChD,SAAU;gBACRZ,WAAW;YACb;QACF;QAEAI;IACF,GAAG,EAAE;IACL,MAAMS,mBAAmB,CAACC;QACxB,IAAIpB,YAAYqB,IAAI,CAACC,CAAAA,IAAKA,EAAEC,EAAE,KAAKH,KAAKG,EAAE,GAAG;YAC3CtB,eAAeD,YAAYwB,MAAM,CAACF,CAAAA,IAAKA,EAAEC,EAAE,KAAKH,KAAKG,EAAE;QACzD,OAAO;YACLtB,eAAe;mBAAID;gBAAaoB;aAAK;QACvC;IACF;IAEA,IAAIf,SAAS;QACX,qBACE,qBAACoB;YAAIC,WAAU;sBACb,cAAA,qBAACD;gBAAIC,WAAU;0BACZ;oBAAC;oBAAG;oBAAG;oBAAG;oBAAG;oBAAG;iBAAE,CAACC,GAAG,CAACC,CAAAA,kBACtB,qBAACH;wBAAYC,WAAU;uBAAbE;;;IAKpB;IAEA,IAAIrB,OAAO;QACT,qBAAO,sBAACkB;YAAIC,WAAU;;gBAAe;gBAA4BnB;;;IACnE;IAEA,gCAAgC;IAChC,MAAMsB,qBAAqB3B,eAAe4B,MAAM,CAAC,CAACC,KAAKX;QACrD,IAAI,CAACW,GAAG,CAACX,KAAKY,QAAQ,CAAC,EAAE;YACvBD,GAAG,CAACX,KAAKY,QAAQ,CAAC,GAAG,EAAE;QACzB;QACAD,GAAG,CAACX,KAAKY,QAAQ,CAAC,CAACC,IAAI,CAACb;QACxB,OAAOW;IACT,GAAG,CAAC;IAEJ,qBACE,qBAACN;QAAIC,WAAU;kBACZQ,OAAOC,OAAO,CAACN,oBAAoBF,GAAG,CAAC,CAAC,CAACK,UAAUI,MAAM,iBACxD,sBAACX;;kCACC,qBAACY;wBAAGX,WAAU;kCACXM,SAASM,OAAO,CAAC,KAAK;;kCAEzB,qBAACb;wBAAIC,WAAU;kCACZU,MAAMT,GAAG,CAACP,CAAAA,qBACT,sBAACmB;gCAAoBb,WAAU;;kDAC7B,qBAACc;wCACCC,MAAK;wCACLC,SAAS1C,YAAYqB,IAAI,CAACC,CAAAA,IAAKA,EAAEC,EAAE,KAAKH,KAAKG,EAAE;wCAC/CoB,UAAU,IAAMxB,iBAAiBC;wCACjCM,WAAU;;kDAEZ,qBAACkB;wCAAKlB,WAAU;kDAAWN,KAAKyB,WAAW;;;+BAPjCzB,KAAKG,EAAE;;;eANfS;;AAqBlB;MAEA,WAAejC"}