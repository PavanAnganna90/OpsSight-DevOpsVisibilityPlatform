1e72dbbfed25bbbeee0e5e04e22c9094
"use strict";
Object.defineProperty(exports, "__esModule", {
    value: true
});
Object.defineProperty(exports, "default", {
    enumerable: true,
    get: function() {
        return _default;
    }
});
const _jsxruntime = require("react/jsx-runtime");
const _react = /*#__PURE__*/ _interop_require_wildcard(require("react"));
function _getRequireWildcardCache(nodeInterop) {
    if (typeof WeakMap !== "function") return null;
    var cacheBabelInterop = new WeakMap();
    var cacheNodeInterop = new WeakMap();
    return (_getRequireWildcardCache = function(nodeInterop) {
        return nodeInterop ? cacheNodeInterop : cacheBabelInterop;
    })(nodeInterop);
}
function _interop_require_wildcard(obj, nodeInterop) {
    if (!nodeInterop && obj && obj.__esModule) {
        return obj;
    }
    if (obj === null || typeof obj !== "object" && typeof obj !== "function") {
        return {
            default: obj
        };
    }
    var cache = _getRequireWildcardCache(nodeInterop);
    if (cache && cache.has(obj)) {
        return cache.get(obj);
    }
    var newObj = {
        __proto__: null
    };
    var hasPropertyDescriptor = Object.defineProperty && Object.getOwnPropertyDescriptor;
    for(var key in obj){
        if (key !== "default" && Object.prototype.hasOwnProperty.call(obj, key)) {
            var desc = hasPropertyDescriptor ? Object.getOwnPropertyDescriptor(obj, key) : null;
            if (desc && (desc.get || desc.set)) {
                Object.defineProperty(newObj, key, desc);
            } else {
                newObj[key] = obj[key];
            }
        }
    }
    newObj.default = obj;
    if (cache) {
        cache.set(obj, newObj);
    }
    return newObj;
}
/**
 * UI for assigning permissions to a role.
 */ const PermissionMatrix = ({ permissions, setPermissions })=>{
    const [allPermissions, setAllPermissions] = (0, _react.useState)([]);
    const [loading, setLoading] = (0, _react.useState)(true);
    const [error, setError] = (0, _react.useState)(null);
    // Fetch all permissions from API
    (0, _react.useEffect)(()=>{
        const fetchPermissions = async ()=>{
            try {
                const response = await fetch('/api/v1/permissions');
                if (!response.ok) {
                    throw new Error('Failed to fetch permissions');
                }
                const data = await response.json();
                setAllPermissions(data);
            } catch (err) {
                setError(err instanceof Error ? err.message : 'An error occurred');
            } finally{
                setLoading(false);
            }
        };
        fetchPermissions();
    }, []);
    const togglePermission = (perm)=>{
        if (permissions.some((p)=>p.id === perm.id)) {
            setPermissions(permissions.filter((p)=>p.id !== perm.id));
        } else {
            setPermissions([
                ...permissions,
                perm
            ]);
        }
    };
    if (loading) {
        return /*#__PURE__*/ (0, _jsxruntime.jsx)("div", {
            className: "animate-pulse",
            children: /*#__PURE__*/ (0, _jsxruntime.jsx)("div", {
                className: "grid grid-cols-2 gap-2",
                children: [
                    1,
                    2,
                    3,
                    4,
                    5,
                    6
                ].map((i)=>/*#__PURE__*/ (0, _jsxruntime.jsx)("div", {
                        className: "h-6 bg-gray-300 rounded"
                    }, i))
            })
        });
    }
    if (error) {
        return /*#__PURE__*/ (0, _jsxruntime.jsxs)("div", {
            className: "text-red-600",
            children: [
                "Error loading permissions: ",
                error
            ]
        });
    }
    // Group permissions by category
    const groupedPermissions = allPermissions.reduce((acc, perm)=>{
        if (!acc[perm.category]) {
            acc[perm.category] = [];
        }
        acc[perm.category].push(perm);
        return acc;
    }, {});
    return /*#__PURE__*/ (0, _jsxruntime.jsx)("div", {
        className: "space-y-4",
        children: Object.entries(groupedPermissions).map(([category, perms])=>/*#__PURE__*/ (0, _jsxruntime.jsxs)("div", {
                children: [
                    /*#__PURE__*/ (0, _jsxruntime.jsx)("h4", {
                        className: "font-medium text-gray-700 dark:text-gray-300 mb-2 capitalize",
                        children: category.replace('_', ' ')
                    }),
                    /*#__PURE__*/ (0, _jsxruntime.jsx)("div", {
                        className: "grid grid-cols-1 gap-2",
                        children: perms.map((perm)=>/*#__PURE__*/ (0, _jsxruntime.jsxs)("label", {
                                className: "flex items-center gap-2",
                                children: [
                                    /*#__PURE__*/ (0, _jsxruntime.jsx)("input", {
                                        type: "checkbox",
                                        checked: permissions.some((p)=>p.id === perm.id),
                                        onChange: ()=>togglePermission(perm),
                                        className: "rounded border-gray-300 text-blue-600 focus:ring-blue-500"
                                    }),
                                    /*#__PURE__*/ (0, _jsxruntime.jsx)("span", {
                                        className: "text-sm",
                                        children: perm.description
                                    })
                                ]
                            }, perm.id))
                    })
                ]
            }, category))
    });
};
const _default = PermissionMatrix;

//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi9Vc2Vycy9wYXZhbi9EZXNrdG9wL0Rldm9wcy1hcHAtZGV2LWN1cnNvci9mcm9udGVuZC9zcmMvY29tcG9uZW50cy9hZG1pbi9yb2xlLW1hbmFnZW1lbnQvUGVybWlzc2lvbk1hdHJpeC50c3giXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IFJlYWN0LCB7IHVzZVN0YXRlLCB1c2VFZmZlY3QgfSBmcm9tICdyZWFjdCc7XG5pbXBvcnQgeyBQZXJtaXNzaW9uIH0gZnJvbSAnLi4vLi4vLi4vdHlwZXMvcm9sZSc7XG5cbmludGVyZmFjZSBQZXJtaXNzaW9uTWF0cml4UHJvcHMge1xuICBwZXJtaXNzaW9uczogUGVybWlzc2lvbltdO1xuICBzZXRQZXJtaXNzaW9uczogKHBlcm1zOiBQZXJtaXNzaW9uW10pID0+IHZvaWQ7XG59XG5cbi8qKlxuICogVUkgZm9yIGFzc2lnbmluZyBwZXJtaXNzaW9ucyB0byBhIHJvbGUuXG4gKi9cbmNvbnN0IFBlcm1pc3Npb25NYXRyaXg6IFJlYWN0LkZDPFBlcm1pc3Npb25NYXRyaXhQcm9wcz4gPSAoeyBwZXJtaXNzaW9ucywgc2V0UGVybWlzc2lvbnMgfSkgPT4ge1xuICBjb25zdCBbYWxsUGVybWlzc2lvbnMsIHNldEFsbFBlcm1pc3Npb25zXSA9IHVzZVN0YXRlPFBlcm1pc3Npb25bXT4oW10pO1xuICBjb25zdCBbbG9hZGluZywgc2V0TG9hZGluZ10gPSB1c2VTdGF0ZSh0cnVlKTtcbiAgY29uc3QgW2Vycm9yLCBzZXRFcnJvcl0gPSB1c2VTdGF0ZTxzdHJpbmcgfCBudWxsPihudWxsKTtcblxuICAvLyBGZXRjaCBhbGwgcGVybWlzc2lvbnMgZnJvbSBBUElcbiAgdXNlRWZmZWN0KCgpID0+IHtcbiAgICBjb25zdCBmZXRjaFBlcm1pc3Npb25zID0gYXN5bmMgKCkgPT4ge1xuICAgICAgdHJ5IHtcbiAgICAgICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCBmZXRjaCgnL2FwaS92MS9wZXJtaXNzaW9ucycpO1xuICAgICAgICBpZiAoIXJlc3BvbnNlLm9rKSB7XG4gICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdGYWlsZWQgdG8gZmV0Y2ggcGVybWlzc2lvbnMnKTtcbiAgICAgICAgfVxuICAgICAgICBjb25zdCBkYXRhID0gYXdhaXQgcmVzcG9uc2UuanNvbigpO1xuICAgICAgICBzZXRBbGxQZXJtaXNzaW9ucyhkYXRhKTtcbiAgICAgIH0gY2F0Y2ggKGVycikge1xuICAgICAgICBzZXRFcnJvcihlcnIgaW5zdGFuY2VvZiBFcnJvciA/IGVyci5tZXNzYWdlIDogJ0FuIGVycm9yIG9jY3VycmVkJyk7XG4gICAgICB9IGZpbmFsbHkge1xuICAgICAgICBzZXRMb2FkaW5nKGZhbHNlKTtcbiAgICAgIH1cbiAgICB9O1xuXG4gICAgZmV0Y2hQZXJtaXNzaW9ucygpO1xuICB9LCBbXSk7XG4gIGNvbnN0IHRvZ2dsZVBlcm1pc3Npb24gPSAocGVybTogUGVybWlzc2lvbikgPT4ge1xuICAgIGlmIChwZXJtaXNzaW9ucy5zb21lKHAgPT4gcC5pZCA9PT0gcGVybS5pZCkpIHtcbiAgICAgIHNldFBlcm1pc3Npb25zKHBlcm1pc3Npb25zLmZpbHRlcihwID0+IHAuaWQgIT09IHBlcm0uaWQpKTtcbiAgICB9IGVsc2Uge1xuICAgICAgc2V0UGVybWlzc2lvbnMoWy4uLnBlcm1pc3Npb25zLCBwZXJtXSk7XG4gICAgfVxuICB9O1xuXG4gIGlmIChsb2FkaW5nKSB7XG4gICAgcmV0dXJuIChcbiAgICAgIDxkaXYgY2xhc3NOYW1lPVwiYW5pbWF0ZS1wdWxzZVwiPlxuICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImdyaWQgZ3JpZC1jb2xzLTIgZ2FwLTJcIj5cbiAgICAgICAgICB7WzEsIDIsIDMsIDQsIDUsIDZdLm1hcChpID0+IChcbiAgICAgICAgICAgIDxkaXYga2V5PXtpfSBjbGFzc05hbWU9XCJoLTYgYmctZ3JheS0zMDAgcm91bmRlZFwiPjwvZGl2PlxuICAgICAgICAgICkpfVxuICAgICAgICA8L2Rpdj5cbiAgICAgIDwvZGl2PlxuICAgICk7XG4gIH1cblxuICBpZiAoZXJyb3IpIHtcbiAgICByZXR1cm4gPGRpdiBjbGFzc05hbWU9XCJ0ZXh0LXJlZC02MDBcIj5FcnJvciBsb2FkaW5nIHBlcm1pc3Npb25zOiB7ZXJyb3J9PC9kaXY+O1xuICB9XG5cbiAgLy8gR3JvdXAgcGVybWlzc2lvbnMgYnkgY2F0ZWdvcnlcbiAgY29uc3QgZ3JvdXBlZFBlcm1pc3Npb25zID0gYWxsUGVybWlzc2lvbnMucmVkdWNlKChhY2MsIHBlcm0pID0+IHtcbiAgICBpZiAoIWFjY1twZXJtLmNhdGVnb3J5XSkge1xuICAgICAgYWNjW3Blcm0uY2F0ZWdvcnldID0gW107XG4gICAgfVxuICAgIGFjY1twZXJtLmNhdGVnb3J5XS5wdXNoKHBlcm0pO1xuICAgIHJldHVybiBhY2M7XG4gIH0sIHt9IGFzIFJlY29yZDxzdHJpbmcsIFBlcm1pc3Npb25bXT4pO1xuXG4gIHJldHVybiAoXG4gICAgPGRpdiBjbGFzc05hbWU9XCJzcGFjZS15LTRcIj5cbiAgICAgIHtPYmplY3QuZW50cmllcyhncm91cGVkUGVybWlzc2lvbnMpLm1hcCgoW2NhdGVnb3J5LCBwZXJtc10pID0+IChcbiAgICAgICAgPGRpdiBrZXk9e2NhdGVnb3J5fT5cbiAgICAgICAgICA8aDQgY2xhc3NOYW1lPVwiZm9udC1tZWRpdW0gdGV4dC1ncmF5LTcwMCBkYXJrOnRleHQtZ3JheS0zMDAgbWItMiBjYXBpdGFsaXplXCI+XG4gICAgICAgICAgICB7Y2F0ZWdvcnkucmVwbGFjZSgnXycsICcgJyl9XG4gICAgICAgICAgPC9oND5cbiAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImdyaWQgZ3JpZC1jb2xzLTEgZ2FwLTJcIj5cbiAgICAgICAgICAgIHtwZXJtcy5tYXAocGVybSA9PiAoXG4gICAgICAgICAgICAgIDxsYWJlbCBrZXk9e3Blcm0uaWR9IGNsYXNzTmFtZT1cImZsZXggaXRlbXMtY2VudGVyIGdhcC0yXCI+XG4gICAgICAgICAgICAgICAgPGlucHV0XG4gICAgICAgICAgICAgICAgICB0eXBlPVwiY2hlY2tib3hcIlxuICAgICAgICAgICAgICAgICAgY2hlY2tlZD17cGVybWlzc2lvbnMuc29tZShwID0+IHAuaWQgPT09IHBlcm0uaWQpfVxuICAgICAgICAgICAgICAgICAgb25DaGFuZ2U9eygpID0+IHRvZ2dsZVBlcm1pc3Npb24ocGVybSl9XG4gICAgICAgICAgICAgICAgICBjbGFzc05hbWU9XCJyb3VuZGVkIGJvcmRlci1ncmF5LTMwMCB0ZXh0LWJsdWUtNjAwIGZvY3VzOnJpbmctYmx1ZS01MDBcIlxuICAgICAgICAgICAgICAgIC8+XG4gICAgICAgICAgICAgICAgPHNwYW4gY2xhc3NOYW1lPVwidGV4dC1zbVwiPntwZXJtLmRlc2NyaXB0aW9ufTwvc3Bhbj5cbiAgICAgICAgICAgICAgPC9sYWJlbD5cbiAgICAgICAgICAgICkpfVxuICAgICAgICAgIDwvZGl2PlxuICAgICAgICA8L2Rpdj5cbiAgICAgICkpfVxuICAgIDwvZGl2PlxuICApO1xufTtcblxuZXhwb3J0IGRlZmF1bHQgUGVybWlzc2lvbk1hdHJpeDtcbiJdLCJuYW1lcyI6WyJQZXJtaXNzaW9uTWF0cml4IiwicGVybWlzc2lvbnMiLCJzZXRQZXJtaXNzaW9ucyIsImFsbFBlcm1pc3Npb25zIiwic2V0QWxsUGVybWlzc2lvbnMiLCJ1c2VTdGF0ZSIsImxvYWRpbmciLCJzZXRMb2FkaW5nIiwiZXJyb3IiLCJzZXRFcnJvciIsInVzZUVmZmVjdCIsImZldGNoUGVybWlzc2lvbnMiLCJyZXNwb25zZSIsImZldGNoIiwib2siLCJFcnJvciIsImRhdGEiLCJqc29uIiwiZXJyIiwibWVzc2FnZSIsInRvZ2dsZVBlcm1pc3Npb24iLCJwZXJtIiwic29tZSIsInAiLCJpZCIsImZpbHRlciIsImRpdiIsImNsYXNzTmFtZSIsIm1hcCIsImkiLCJncm91cGVkUGVybWlzc2lvbnMiLCJyZWR1Y2UiLCJhY2MiLCJjYXRlZ29yeSIsInB1c2giLCJPYmplY3QiLCJlbnRyaWVzIiwicGVybXMiLCJoNCIsInJlcGxhY2UiLCJsYWJlbCIsImlucHV0IiwidHlwZSIsImNoZWNrZWQiLCJvbkNoYW5nZSIsInNwYW4iLCJkZXNjcmlwdGlvbiJdLCJtYXBwaW5ncyI6Ijs7OzsrQkE4RkE7OztlQUFBOzs7OytEQTlGMkM7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OztBQVEzQzs7Q0FFQyxHQUNELE1BQU1BLG1CQUFvRCxDQUFDLEVBQUVDLFdBQVcsRUFBRUMsY0FBYyxFQUFFO0lBQ3hGLE1BQU0sQ0FBQ0MsZ0JBQWdCQyxrQkFBa0IsR0FBR0MsSUFBQUEsZUFBUSxFQUFlLEVBQUU7SUFDckUsTUFBTSxDQUFDQyxTQUFTQyxXQUFXLEdBQUdGLElBQUFBLGVBQVEsRUFBQztJQUN2QyxNQUFNLENBQUNHLE9BQU9DLFNBQVMsR0FBR0osSUFBQUEsZUFBUSxFQUFnQjtJQUVsRCxpQ0FBaUM7SUFDakNLLElBQUFBLGdCQUFTLEVBQUM7UUFDUixNQUFNQyxtQkFBbUI7WUFDdkIsSUFBSTtnQkFDRixNQUFNQyxXQUFXLE1BQU1DLE1BQU07Z0JBQzdCLElBQUksQ0FBQ0QsU0FBU0UsRUFBRSxFQUFFO29CQUNoQixNQUFNLElBQUlDLE1BQU07Z0JBQ2xCO2dCQUNBLE1BQU1DLE9BQU8sTUFBTUosU0FBU0ssSUFBSTtnQkFDaENiLGtCQUFrQlk7WUFDcEIsRUFBRSxPQUFPRSxLQUFLO2dCQUNaVCxTQUFTUyxlQUFlSCxRQUFRRyxJQUFJQyxPQUFPLEdBQUc7WUFDaEQsU0FBVTtnQkFDUlosV0FBVztZQUNiO1FBQ0Y7UUFFQUk7SUFDRixHQUFHLEVBQUU7SUFDTCxNQUFNUyxtQkFBbUIsQ0FBQ0M7UUFDeEIsSUFBSXBCLFlBQVlxQixJQUFJLENBQUNDLENBQUFBLElBQUtBLEVBQUVDLEVBQUUsS0FBS0gsS0FBS0csRUFBRSxHQUFHO1lBQzNDdEIsZUFBZUQsWUFBWXdCLE1BQU0sQ0FBQ0YsQ0FBQUEsSUFBS0EsRUFBRUMsRUFBRSxLQUFLSCxLQUFLRyxFQUFFO1FBQ3pELE9BQU87WUFDTHRCLGVBQWU7bUJBQUlEO2dCQUFhb0I7YUFBSztRQUN2QztJQUNGO0lBRUEsSUFBSWYsU0FBUztRQUNYLHFCQUNFLHFCQUFDb0I7WUFBSUMsV0FBVTtzQkFDYixjQUFBLHFCQUFDRDtnQkFBSUMsV0FBVTswQkFDWjtvQkFBQztvQkFBRztvQkFBRztvQkFBRztvQkFBRztvQkFBRztpQkFBRSxDQUFDQyxHQUFHLENBQUNDLENBQUFBLGtCQUN0QixxQkFBQ0g7d0JBQVlDLFdBQVU7dUJBQWJFOzs7SUFLcEI7SUFFQSxJQUFJckIsT0FBTztRQUNULHFCQUFPLHNCQUFDa0I7WUFBSUMsV0FBVTs7Z0JBQWU7Z0JBQTRCbkI7OztJQUNuRTtJQUVBLGdDQUFnQztJQUNoQyxNQUFNc0IscUJBQXFCM0IsZUFBZTRCLE1BQU0sQ0FBQyxDQUFDQyxLQUFLWDtRQUNyRCxJQUFJLENBQUNXLEdBQUcsQ0FBQ1gsS0FBS1ksUUFBUSxDQUFDLEVBQUU7WUFDdkJELEdBQUcsQ0FBQ1gsS0FBS1ksUUFBUSxDQUFDLEdBQUcsRUFBRTtRQUN6QjtRQUNBRCxHQUFHLENBQUNYLEtBQUtZLFFBQVEsQ0FBQyxDQUFDQyxJQUFJLENBQUNiO1FBQ3hCLE9BQU9XO0lBQ1QsR0FBRyxDQUFDO0lBRUoscUJBQ0UscUJBQUNOO1FBQUlDLFdBQVU7a0JBQ1pRLE9BQU9DLE9BQU8sQ0FBQ04sb0JBQW9CRixHQUFHLENBQUMsQ0FBQyxDQUFDSyxVQUFVSSxNQUFNLGlCQUN4RCxzQkFBQ1g7O2tDQUNDLHFCQUFDWTt3QkFBR1gsV0FBVTtrQ0FDWE0sU0FBU00sT0FBTyxDQUFDLEtBQUs7O2tDQUV6QixxQkFBQ2I7d0JBQUlDLFdBQVU7a0NBQ1pVLE1BQU1ULEdBQUcsQ0FBQ1AsQ0FBQUEscUJBQ1Qsc0JBQUNtQjtnQ0FBb0JiLFdBQVU7O2tEQUM3QixxQkFBQ2M7d0NBQ0NDLE1BQUs7d0NBQ0xDLFNBQVMxQyxZQUFZcUIsSUFBSSxDQUFDQyxDQUFBQSxJQUFLQSxFQUFFQyxFQUFFLEtBQUtILEtBQUtHLEVBQUU7d0NBQy9Db0IsVUFBVSxJQUFNeEIsaUJBQWlCQzt3Q0FDakNNLFdBQVU7O2tEQUVaLHFCQUFDa0I7d0NBQUtsQixXQUFVO2tEQUFXTixLQUFLeUIsV0FBVzs7OytCQVBqQ3pCLEtBQUtHLEVBQUU7OztlQU5mUzs7QUFxQmxCO01BRUEsV0FBZWpDIn0=