{"version":3,"sources":["/Users/pavan/Desktop/Devops-app-dev-cursor/frontend/src/components/terraform/TerraformLogsViewer.tsx"],"sourcesContent":["import React, { useState, useCallback, useMemo } from 'react';\nimport { useMutation } from '@tanstack/react-query';\nimport { \n  Upload, \n  FileText, \n  AlertCircle, \n  CheckCircle, \n  XCircle, \n  Clock,\n  Filter,\n  Eye,\n  EyeOff,\n  ChevronDown,\n  ChevronRight,\n  Activity,\n  Zap,\n  Settings,\n  Database,\n  Server,\n  Cloud,\n  Package,\n  AlertTriangle,\n  Info\n} from 'lucide-react';\nimport { format } from 'date-fns';\n\n// Types for Terraform analysis\ninterface TerraformLogEntry {\n  timestamp: string;\n  level: 'info' | 'warn' | 'error' | 'debug';\n  message: string;\n  module: string;\n  message_type?: string;\n  change?: {\n    resource: {\n      address: string;\n      resource_type: string;\n      resource_name: string;\n      module: string;\n    };\n    action: 'create' | 'update' | 'delete' | 'replace' | 'no-op';\n    before?: any;\n    after?: any;\n  };\n}\n\ninterface TerraformAnalysis {\n  summary?: {\n    operation: string;\n    total_changes: number;\n    add_count: number;\n    change_count: number;\n    remove_count: number;\n    duration_seconds?: number;\n    succeeded: boolean;\n    error_count: number;\n    warning_count: number;\n  };\n  total_entries: number;\n  entries: TerraformLogEntry[];\n  file_metadata?: {\n    filename: string;\n    size_bytes: number;\n    detected_format: string;\n    operation_type?: string;\n  };\n}\n\ninterface TerraformLogsViewerProps {\n  className?: string;\n}\n\nconst TerraformLogsViewer: React.FC<TerraformLogsViewerProps> = ({ className = \"\" }) => {\n  const [selectedFile, setSelectedFile] = useState<File | null>(null);\n  const [logContent, setLogContent] = useState<string>('');\n  const [logFormat, setLogFormat] = useState<'json' | 'text' | 'auto'>('auto');\n  const [analysis, setAnalysis] = useState<TerraformAnalysis | null>(null);\n  const [filterLevel, setFilterLevel] = useState<string>('all');\n  const [filterModule, setFilterModule] = useState<string>('all');\n  const [showRawLogs, setShowRawLogs] = useState<boolean>(false);\n  const [expandedEntries, setExpandedEntries] = useState<Set<number>>(new Set());\n\n  // Upload file mutation\n  const uploadMutation = useMutation({\n    mutationFn: async (file: File) => {\n      const formData = new FormData();\n      formData.append('log_file', file);\n      formData.append('log_format', logFormat);\n      \n      const response = await fetch('/api/v1/terraform/upload-logs', {\n        method: 'POST',\n        body: formData,\n      });\n      \n      if (!response.ok) {\n        throw new Error('Failed to upload log file');\n      }\n      \n      return response.json();\n    },\n    onSuccess: (data) => {\n      setAnalysis(data.data);\n    },\n  });\n\n  // Parse logs mutation\n  const parseMutation = useMutation({\n    mutationFn: async (content: string) => {\n      const response = await fetch('/api/v1/terraform/parse-logs', {\n        method: 'POST',\n        headers: {\n          'Content-Type': 'application/json',\n        },\n        body: JSON.stringify({\n          log_content: content,\n          log_format: logFormat,\n        }),\n      });\n      \n      if (!response.ok) {\n        throw new Error('Failed to parse log content');\n      }\n      \n      return response.json();\n    },\n    onSuccess: (data) => {\n      setAnalysis(data.data);\n    },\n  });\n\n  // Handle file selection\n  const handleFileSelect = useCallback((event: React.ChangeEvent<HTMLInputElement>) => {\n    const file = event.target.files?.[0];\n    if (file) {\n      setSelectedFile(file);\n      setLogContent('');\n      setAnalysis(null);\n    }\n  }, []);\n\n  // Handle file upload\n  const handleUpload = useCallback(() => {\n    if (selectedFile) {\n      uploadMutation.mutate(selectedFile);\n    }\n  }, [selectedFile, uploadMutation]);\n\n  // Handle text parsing\n  const handleParseText = useCallback(() => {\n    if (logContent.trim()) {\n      parseMutation.mutate(logContent);\n    }\n  }, [logContent, parseMutation]);\n\n  // Filter logs based on level and module\n  const filteredEntries = useMemo(() => {\n    if (!analysis?.entries) return [];\n    \n    return analysis.entries.filter(entry => {\n      const levelMatch = filterLevel === 'all' || entry.level === filterLevel;\n      const moduleMatch = filterModule === 'all' || entry.module === filterModule;\n      return levelMatch && moduleMatch;\n    });\n  }, [analysis?.entries, filterLevel, filterModule]);\n\n  // Get unique modules for filter\n  const uniqueModules = useMemo(() => {\n    if (!analysis?.entries) return [];\n    const modules = new Set(analysis.entries.map(entry => entry.module));\n    return Array.from(modules);\n  }, [analysis?.entries]);\n\n  // Toggle entry expansion\n  const toggleEntryExpansion = useCallback((index: number) => {\n    const newExpanded = new Set(expandedEntries);\n    if (newExpanded.has(index)) {\n      newExpanded.delete(index);\n    } else {\n      newExpanded.add(index);\n    }\n    setExpandedEntries(newExpanded);\n  }, [expandedEntries]);\n\n  // Get icon for log level\n  const getLevelIcon = (level: string) => {\n    switch (level) {\n      case 'error':\n        return <XCircle className=\"w-4 h-4 text-red-500\" />;\n      case 'warn':\n        return <AlertTriangle className=\"w-4 h-4 text-yellow-500\" />;\n      case 'info':\n        return <Info className=\"w-4 h-4 text-blue-500\" />;\n      default:\n        return <Activity className=\"w-4 h-4 text-gray-500\" />;\n    }\n  };\n\n  // Get icon for action type\n  const getActionIcon = (action: string) => {\n    switch (action) {\n      case 'create':\n        return <CheckCircle className=\"w-4 h-4 text-green-500\" />;\n      case 'update':\n        return <Settings className=\"w-4 h-4 text-blue-500\" />;\n      case 'delete':\n        return <XCircle className=\"w-4 h-4 text-red-500\" />;\n      case 'replace':\n        return <Zap className=\"w-4 h-4 text-orange-500\" />;\n      default:\n        return <Clock className=\"w-4 h-4 text-gray-500\" />;\n    }\n  };\n\n  // Get resource type icon\n  const getResourceIcon = (resourceType: string) => {\n    if (resourceType.includes('instance') || resourceType.includes('vm')) {\n      return <Server className=\"w-4 h-4 text-purple-500\" />;\n    } else if (resourceType.includes('database') || resourceType.includes('db')) {\n      return <Database className=\"w-4 h-4 text-green-500\" />;\n    } else if (resourceType.includes('storage') || resourceType.includes('bucket')) {\n      return <Package className=\"w-4 h-4 text-blue-500\" />;\n    } else {\n      return <Cloud className=\"w-4 h-4 text-gray-500\" />;\n    }\n  };\n\n  return (\n    <div className={`terraform-logs-viewer bg-slate-800/40 backdrop-blur-sm rounded-2xl p-6 border border-slate-700/50 ${className}`}>\n      {/* Header */}\n      <div className=\"flex items-center justify-between mb-6\">\n        <div className=\"flex items-center\">\n          <FileText className=\"w-6 h-6 text-purple-400 mr-3\" />\n          <h2 className=\"text-xl font-semibold text-white\">Terraform Logs Analysis</h2>\n        </div>\n        \n        {analysis && (\n          <button\n            onClick={() => setShowRawLogs(!showRawLogs)}\n            className=\"flex items-center px-3 py-1 bg-slate-700/50 hover:bg-slate-600/50 rounded-lg text-sm text-slate-300 transition-colors\"\n          >\n            {showRawLogs ? <EyeOff className=\"w-4 h-4 mr-1\" /> : <Eye className=\"w-4 h-4 mr-1\" />}\n            {showRawLogs ? 'Hide Raw' : 'Show Raw'}\n          </button>\n        )}\n      </div>\n\n      {/* Input Methods */}\n      <div className=\"grid grid-cols-1 lg:grid-cols-2 gap-6 mb-6\">\n        {/* File Upload */}\n        <div className=\"space-y-4\">\n          <h3 className=\"text-lg font-medium text-white flex items-center\">\n            <Upload className=\"w-5 h-5 mr-2 text-blue-400\" />\n            Upload Log File\n          </h3>\n          \n          <div className=\"border-2 border-dashed border-slate-600 rounded-lg p-6 text-center\">\n            <input\n              type=\"file\"\n              accept=\".log,.txt,.json,.out\"\n              onChange={handleFileSelect}\n              className=\"hidden\"\n              id=\"log-file-input\"\n            />\n            <label\n              htmlFor=\"log-file-input\"\n              className=\"cursor-pointer flex flex-col items-center\"\n            >\n              <Upload className=\"w-8 h-8 text-slate-400 mb-2\" />\n              <span className=\"text-slate-300\">\n                {selectedFile ? selectedFile.name : 'Choose a log file'}\n              </span>\n              <span className=\"text-xs text-slate-500 mt-1\">\n                Supports .log, .txt, .json, .out files (max 10MB)\n              </span>\n            </label>\n          </div>\n          \n          {selectedFile && (\n            <button\n              onClick={handleUpload}\n              disabled={uploadMutation.isPending}\n              className=\"w-full px-4 py-2 bg-purple-600 hover:bg-purple-700 disabled:bg-slate-600 text-white rounded-lg transition-colors\"\n            >\n              {uploadMutation.isPending ? 'Uploading...' : 'Upload & Parse'}\n            </button>\n          )}\n        </div>\n\n        {/* Text Input */}\n        <div className=\"space-y-4\">\n          <h3 className=\"text-lg font-medium text-white flex items-center\">\n            <FileText className=\"w-5 h-5 mr-2 text-green-400\" />\n            Paste Log Content\n          </h3>\n          \n          <textarea\n            value={logContent}\n            onChange={(e) => setLogContent(e.target.value)}\n            placeholder=\"Paste your Terraform logs here...\"\n            className=\"w-full h-32 p-3 bg-slate-700/50 border border-slate-600 rounded-lg text-white placeholder-slate-400 resize-none focus:ring-2 focus:ring-purple-500 focus:border-transparent\"\n          />\n          \n          <button\n            onClick={handleParseText}\n            disabled={!logContent.trim() || parseMutation.isPending}\n            className=\"w-full px-4 py-2 bg-green-600 hover:bg-green-700 disabled:bg-slate-600 text-white rounded-lg transition-colors\"\n          >\n            {parseMutation.isPending ? 'Parsing...' : 'Parse Logs'}\n          </button>\n        </div>\n      </div>\n\n      {/* Format Selection */}\n      <div className=\"mb-6\">\n        <label className=\"block text-sm font-medium text-slate-300 mb-2\">\n          Log Format\n        </label>\n        <select\n          value={logFormat}\n          onChange={(e) => setLogFormat(e.target.value as any)}\n          className=\"px-3 py-2 bg-slate-700/50 border border-slate-600 rounded-lg text-white focus:ring-2 focus:ring-purple-500\"\n        >\n          <option value=\"auto\">Auto-detect</option>\n          <option value=\"json\">JSON (terraform apply -json)</option>\n          <option value=\"text\">Plain text</option>\n        </select>\n      </div>\n\n      {/* Analysis Results */}\n      {analysis && (\n        <div className=\"space-y-6\">\n          {/* Summary */}\n          {analysis.summary && (\n            <div className=\"bg-slate-700/30 rounded-xl p-4 border border-slate-600/50\">\n              <h3 className=\"text-lg font-medium text-white mb-4 flex items-center\">\n                <Activity className=\"w-5 h-5 mr-2 text-blue-400\" />\n                Execution Summary\n              </h3>\n              \n              <div className=\"grid grid-cols-2 md:grid-cols-4 gap-4\">\n                <div className=\"text-center\">\n                  <div className=\"text-2xl font-bold text-green-400\">{analysis.summary.add_count}</div>\n                  <div className=\"text-sm text-slate-400\">Added</div>\n                </div>\n                <div className=\"text-center\">\n                  <div className=\"text-2xl font-bold text-blue-400\">{analysis.summary.change_count}</div>\n                  <div className=\"text-sm text-slate-400\">Changed</div>\n                </div>\n                <div className=\"text-center\">\n                  <div className=\"text-2xl font-bold text-red-400\">{analysis.summary.remove_count}</div>\n                  <div className=\"text-sm text-slate-400\">Removed</div>\n                </div>\n                <div className=\"text-center\">\n                  <div className=\"text-2xl font-bold text-slate-300\">{analysis.summary.total_changes}</div>\n                  <div className=\"text-sm text-slate-400\">Total</div>\n                </div>\n              </div>\n              \n              <div className=\"mt-4 flex items-center justify-between text-sm\">\n                <span className=\"text-slate-400\">\n                  Operation: <span className=\"text-white font-medium\">{analysis.summary.operation}</span>\n                </span>\n                <span className=\"text-slate-400\">\n                  Status: <span className={`font-medium ${analysis.summary.succeeded ? 'text-green-400' : 'text-red-400'}`}>\n                    {analysis.summary.succeeded ? 'Success' : 'Failed'}\n                  </span>\n                </span>\n                {analysis.summary.duration_seconds && (\n                  <span className=\"text-slate-400\">\n                    Duration: <span className=\"text-white font-medium\">{analysis.summary.duration_seconds.toFixed(1)}s</span>\n                  </span>\n                )}\n              </div>\n            </div>\n          )}\n\n          {/* Filters */}\n          <div className=\"flex flex-wrap gap-4\">\n            <div className=\"flex items-center\">\n              <Filter className=\"w-4 h-4 text-slate-400 mr-2\" />\n              <select\n                value={filterLevel}\n                onChange={(e) => setFilterLevel(e.target.value)}\n                className=\"px-3 py-1 bg-slate-700/50 border border-slate-600 rounded text-sm text-white\"\n              >\n                <option value=\"all\">All Levels</option>\n                <option value=\"error\">Errors</option>\n                <option value=\"warn\">Warnings</option>\n                <option value=\"info\">Info</option>\n                <option value=\"debug\">Debug</option>\n              </select>\n            </div>\n            \n            <select\n              value={filterModule}\n              onChange={(e) => setFilterModule(e.target.value)}\n              className=\"px-3 py-1 bg-slate-700/50 border border-slate-600 rounded text-sm text-white\"\n            >\n              <option value=\"all\">All Modules</option>\n              {uniqueModules.map(module => (\n                <option key={module} value={module}>{module}</option>\n              ))}\n            </select>\n            \n            <span className=\"text-sm text-slate-400 py-1\">\n              {filteredEntries.length} of {analysis.total_entries} entries\n            </span>\n          </div>\n\n          {/* Log Entries */}\n          <div className=\"space-y-2 max-h-96 overflow-y-auto\">\n            {filteredEntries.map((entry, index) => (\n              <div key={index} className=\"bg-slate-700/20 rounded-lg border border-slate-600/30\">\n                <div \n                  className=\"p-3 cursor-pointer hover:bg-slate-600/20 transition-colors\"\n                  onClick={() => toggleEntryExpansion(index)}\n                >\n                  <div className=\"flex items-center justify-between\">\n                    <div className=\"flex items-center space-x-3\">\n                      {expandedEntries.has(index) ? \n                        <ChevronDown className=\"w-4 h-4 text-slate-400\" /> : \n                        <ChevronRight className=\"w-4 h-4 text-slate-400\" />\n                      }\n                      {getLevelIcon(entry.level)}\n                      \n                      {entry.change && (\n                        <div className=\"flex items-center space-x-1\">\n                          {getActionIcon(entry.change.action)}\n                          {getResourceIcon(entry.change.resource.resource_type)}\n                        </div>\n                      )}\n                      \n                      <span className=\"text-white text-sm font-medium\">\n                        {entry.change ? \n                          `${entry.change.action} ${entry.change.resource.address}` : \n                          entry.message.slice(0, 80)\n                        }\n                      </span>\n                    </div>\n                    \n                    <span className=\"text-xs text-slate-400\">\n                      {format(new Date(entry.timestamp), 'HH:mm:ss')}\n                    </span>\n                  </div>\n                </div>\n                \n                {expandedEntries.has(index) && (\n                  <div className=\"px-3 pb-3 border-t border-slate-600/30\">\n                    <div className=\"mt-2 space-y-2 text-sm\">\n                      <div className=\"text-slate-300\">{entry.message}</div>\n                      \n                      {entry.change && (\n                        <div className=\"bg-slate-800/50 rounded p-2\">\n                          <div className=\"grid grid-cols-2 gap-2 text-xs\">\n                            <div>\n                              <span className=\"text-slate-400\">Resource:</span>\n                              <span className=\"text-white ml-1\">{entry.change.resource.resource_type}</span>\n                            </div>\n                            <div>\n                              <span className=\"text-slate-400\">Action:</span>\n                              <span className=\"text-white ml-1\">{entry.change.action}</span>\n                            </div>\n                          </div>\n                          \n                          {showRawLogs && (entry.change.before || entry.change.after) && (\n                            <details className=\"mt-2\">\n                              <summary className=\"text-slate-400 cursor-pointer\">View Changes</summary>\n                              <pre className=\"mt-1 text-xs text-slate-300 bg-slate-900/50 p-2 rounded overflow-x-auto\">\n                                {JSON.stringify({\n                                  before: entry.change.before,\n                                  after: entry.change.after\n                                }, null, 2)}\n                              </pre>\n                            </details>\n                          )}\n                        </div>\n                      )}\n                    </div>\n                  </div>\n                )}\n              </div>\n            ))}\n          </div>\n\n          {/* File Metadata */}\n          {analysis.file_metadata && (\n            <div className=\"bg-slate-700/20 rounded-lg p-3 border border-slate-600/30\">\n              <h4 className=\"text-sm font-medium text-white mb-2\">File Information</h4>\n              <div className=\"grid grid-cols-2 md:grid-cols-4 gap-2 text-xs\">\n                <div>\n                  <span className=\"text-slate-400\">Filename:</span>\n                  <span className=\"text-white ml-1\">{analysis.file_metadata.filename}</span>\n                </div>\n                <div>\n                  <span className=\"text-slate-400\">Size:</span>\n                  <span className=\"text-white ml-1\">{(analysis.file_metadata.size_bytes / 1024).toFixed(1)} KB</span>\n                </div>\n                <div>\n                  <span className=\"text-slate-400\">Format:</span>\n                  <span className=\"text-white ml-1\">{analysis.file_metadata.detected_format}</span>\n                </div>\n                {analysis.file_metadata.operation_type && (\n                  <div>\n                    <span className=\"text-slate-400\">Operation:</span>\n                    <span className=\"text-white ml-1\">{analysis.file_metadata.operation_type}</span>\n                  </div>\n                )}\n              </div>\n            </div>\n          )}\n        </div>\n      )}\n\n      {/* Error States */}\n      {(uploadMutation.isError || parseMutation.isError) && (\n        <div className=\"bg-red-900/20 border border-red-500/30 rounded-lg p-4\">\n          <div className=\"flex items-center\">\n            <AlertCircle className=\"w-5 h-5 text-red-400 mr-2\" />\n            <span className=\"text-red-300\">\n              {uploadMutation.error?.message || parseMutation.error?.message || 'An error occurred'}\n            </span>\n          </div>\n        </div>\n      )}\n    </div>\n  );\n};\n\nexport default TerraformLogsViewer; "],"names":["TerraformLogsViewer","className","selectedFile","setSelectedFile","useState","logContent","setLogContent","logFormat","setLogFormat","analysis","setAnalysis","filterLevel","setFilterLevel","filterModule","setFilterModule","showRawLogs","setShowRawLogs","expandedEntries","setExpandedEntries","Set","uploadMutation","useMutation","mutationFn","file","formData","FormData","append","response","fetch","method","body","ok","Error","json","onSuccess","data","parseMutation","content","headers","JSON","stringify","log_content","log_format","handleFileSelect","useCallback","event","target","files","handleUpload","mutate","handleParseText","trim","filteredEntries","useMemo","entries","filter","entry","levelMatch","level","moduleMatch","module","uniqueModules","modules","map","Array","from","toggleEntryExpansion","index","newExpanded","has","delete","add","getLevelIcon","XCircle","AlertTriangle","Info","Activity","getActionIcon","action","CheckCircle","Settings","Zap","Clock","getResourceIcon","resourceType","includes","Server","Database","Package","Cloud","div","FileText","h2","button","onClick","EyeOff","Eye","h3","Upload","input","type","accept","onChange","id","label","htmlFor","span","name","disabled","isPending","textarea","value","e","placeholder","select","option","summary","add_count","change_count","remove_count","total_changes","operation","succeeded","duration_seconds","toFixed","Filter","length","total_entries","ChevronDown","ChevronRight","change","resource","resource_type","address","message","slice","format","Date","timestamp","before","after","details","pre","file_metadata","h4","filename","size_bytes","detected_format","operation_type","isError","AlertCircle","error"],"mappings":"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"}