{"version":3,"sources":["/Users/pavan/Desktop/Devops-app-dev-cursor/frontend/src/components/ui/AccessibleSelect.tsx"],"sourcesContent":["'use client';\n\nimport React, { useState, useRef, useEffect, useCallback } from 'react';\nimport { motion, AnimatePresence } from 'framer-motion';\nimport { ChevronDownIcon, CheckIcon } from '@heroicons/react/24/outline';\nimport { \n  generateAriaAttributes, \n  createKeyboardNavigation, \n  createFocusTrap, \n  announceToScreenReader,\n  respectReducedMotion \n} from '@/utils/accessibility';\nimport { cn } from '@/utils/cn';\n\ninterface Option {\n  value: string;\n  label: string;\n  description?: string;\n  disabled?: boolean;\n  icon?: React.ComponentType<{ className?: string }>;\n}\n\ninterface AccessibleSelectProps {\n  options: Option[];\n  value?: string;\n  onChange: (value: string) => void;\n  placeholder?: string;\n  label?: string;\n  description?: string;\n  error?: string;\n  disabled?: boolean;\n  required?: boolean;\n  className?: string;\n  size?: 'sm' | 'md' | 'lg';\n  variant?: 'default' | 'ghost' | 'outline';\n}\n\n/**\n * Fully accessible select component with keyboard navigation and ARIA support\n * Meets WCAG 2.1 AA standards with proper focus management\n */\nexport function AccessibleSelect({\n  options,\n  value,\n  onChange,\n  placeholder = 'Select an option',\n  label,\n  description,\n  error,\n  disabled = false,\n  required = false,\n  className,\n  size = 'md',\n  variant = 'default',\n}: AccessibleSelectProps) {\n  const [isOpen, setIsOpen] = useState(false);\n  const [highlightedIndex, setHighlightedIndex] = useState(0);\n  const [searchQuery, setSearchQuery] = useState('');\n  const [searchTimeout, setSearchTimeout] = useState<NodeJS.Timeout | null>(null);\n  \n  const selectRef = useRef<HTMLDivElement>(null);\n  const listboxRef = useRef<HTMLUListElement>(null);\n  const buttonRef = useRef<HTMLButtonElement>(null);\n  const optionRefs = useRef<(HTMLLIElement | null)[]>([]);\n  \n  const selectId = useRef(`select-${Math.random().toString(36).substr(2, 9)}`);\n  const listboxId = useRef(`listbox-${Math.random().toString(36).substr(2, 9)}`);\n  const descriptionId = useRef(`desc-${Math.random().toString(36).substr(2, 9)}`);\n  const errorId = useRef(`error-${Math.random().toString(36).substr(2, 9)}`);\n\n  // Filter options based on search query\n  const filteredOptions = options.filter(option =>\n    option.label.toLowerCase().includes(searchQuery.toLowerCase()) && !option.disabled\n  );\n\n  // Find currently selected option\n  const selectedOption = options.find(option => option.value === value);\n  \n  // Size classes\n  const sizeClasses = {\n    sm: 'px-3 py-1.5 text-sm',\n    md: 'px-4 py-2 text-base',\n    lg: 'px-5 py-3 text-lg',\n  };\n\n  // Variant classes\n  const variantClasses = {\n    default: 'bg-white border-gray-300 text-gray-900 hover:border-gray-400',\n    ghost: 'bg-transparent border-transparent text-gray-700 hover:bg-gray-50',\n    outline: 'bg-transparent border-gray-300 text-gray-900 hover:border-gray-400',\n  };\n\n  // Open/close handlers\n  const openSelect = useCallback(() => {\n    if (disabled) return;\n    setIsOpen(true);\n    setHighlightedIndex(0);\n    announceToScreenReader(`${label || 'Select'} expanded`, 'polite');\n  }, [disabled, label]);\n\n  const closeSelect = useCallback(() => {\n    setIsOpen(false);\n    setSearchQuery('');\n    if (searchTimeout) {\n      clearTimeout(searchTimeout);\n      setSearchTimeout(null);\n    }\n    buttonRef.current?.focus();\n    announceToScreenReader(`${label || 'Select'} collapsed`, 'polite');\n  }, [label, searchTimeout]);\n\n  // Selection handler\n  const selectOption = useCallback((option: Option) => {\n    if (option.disabled) return;\n    \n    onChange(option.value);\n    closeSelect();\n    announceToScreenReader(`${option.label} selected`, 'polite');\n  }, [onChange, closeSelect]);\n\n  // Keyboard navigation setup\n  const handleKeyDown = useCallback((event: React.KeyboardEvent<HTMLButtonElement>) => {\n    if (disabled) return;\n\n    switch (event.key) {\n      case 'Enter':\n      case ' ':\n        event.preventDefault();\n        if (!isOpen) {\n          openSelect();\n        } else if (filteredOptions[highlightedIndex]) {\n          selectOption(filteredOptions[highlightedIndex]);\n        }\n        break;\n\n      case 'Escape':\n        event.preventDefault();\n        closeSelect();\n        break;\n\n      case 'ArrowDown':\n        event.preventDefault();\n        if (!isOpen) {\n          openSelect();\n        } else {\n          const nextIndex = Math.min(highlightedIndex + 1, filteredOptions.length - 1);\n          setHighlightedIndex(nextIndex);\n          optionRefs.current[nextIndex]?.focus();\n        }\n        break;\n\n      case 'ArrowUp':\n        event.preventDefault();\n        if (isOpen) {\n          const prevIndex = Math.max(highlightedIndex - 1, 0);\n          setHighlightedIndex(prevIndex);\n          optionRefs.current[prevIndex]?.focus();\n        }\n        break;\n\n      case 'Home':\n        if (isOpen) {\n          event.preventDefault();\n          setHighlightedIndex(0);\n          optionRefs.current[0]?.focus();\n        }\n        break;\n\n      case 'End':\n        if (isOpen) {\n          event.preventDefault();\n          const lastIndex = filteredOptions.length - 1;\n          setHighlightedIndex(lastIndex);\n          optionRefs.current[lastIndex]?.focus();\n        }\n        break;\n\n      default:\n        // Type-ahead search\n        if (isOpen && event.key.length === 1) {\n          const newQuery = searchQuery + event.key;\n          setSearchQuery(newQuery);\n          \n          if (searchTimeout) clearTimeout(searchTimeout);\n          setSearchTimeout(setTimeout(() => setSearchQuery(''), 1000));\n          \n          const matchingIndex = filteredOptions.findIndex(option =>\n            option.label.toLowerCase().startsWith(newQuery.toLowerCase())\n          );\n          \n          if (matchingIndex !== -1) {\n            setHighlightedIndex(matchingIndex);\n            optionRefs.current[matchingIndex]?.focus();\n          }\n        }\n        break;\n    }\n  }, [disabled, isOpen, openSelect, closeSelect, selectOption, filteredOptions, highlightedIndex, searchQuery, searchTimeout]);\n\n  // Focus trap for the listbox\n  useEffect(() => {\n    if (isOpen && listboxRef.current) {\n      const cleanup = createFocusTrap(listboxRef.current);\n      return cleanup;\n    }\n  }, [isOpen]);\n\n  // Click outside handler\n  useEffect(() => {\n    const handleClickOutside = (event: MouseEvent) => {\n      if (selectRef.current && !selectRef.current.contains(event.target as Node)) {\n        closeSelect();\n      }\n    };\n\n    if (isOpen) {\n      document.addEventListener('mousedown', handleClickOutside);\n      return () => document.removeEventListener('mousedown', handleClickOutside);\n    }\n  }, [isOpen, closeSelect]);\n\n  // Animation variants\n  const dropdownVariants = {\n    hidden: { \n      opacity: 0, \n      y: respectReducedMotion(-10, 0),\n      scale: respectReducedMotion(0.95, 1)\n    },\n    visible: { \n      opacity: 1, \n      y: 0,\n      scale: 1,\n      transition: {\n        type: respectReducedMotion(\"spring\", \"tween\"),\n        stiffness: respectReducedMotion(300, 0),\n        damping: respectReducedMotion(30, 0),\n        duration: respectReducedMotion(0, 0.15)\n      }\n    },\n    exit: { \n      opacity: 0, \n      y: respectReducedMotion(-10, 0),\n      scale: respectReducedMotion(0.95, 1),\n      transition: {\n        duration: respectReducedMotion(0.2, 0.1)\n      }\n    }\n  };\n\n  const optionVariants = {\n    hidden: { opacity: 0, x: respectReducedMotion(-20, 0) },\n    visible: (index: number) => ({\n      opacity: 1,\n      x: 0,\n      transition: {\n        delay: respectReducedMotion(index * 0.05, 0),\n        duration: respectReducedMotion(0.2, 0.1)\n      }\n    })\n  };\n\n  return (\n    <div ref={selectRef} className={cn('relative', className)}>\n      {/* Label */}\n      {label && (\n        <label\n          htmlFor={selectId.current}\n          className={cn(\n            'block text-sm font-medium text-gray-700 mb-2',\n            disabled && 'text-gray-400',\n            error && 'text-red-600'\n          )}\n        >\n          {label}\n          {required && <span className=\"text-red-500 ml-1\" aria-label=\"required\">*</span>}\n        </label>\n      )}\n\n      {/* Description */}\n      {description && (\n        <p\n          id={descriptionId.current}\n          className=\"text-sm text-gray-600 mb-2\"\n        >\n          {description}\n        </p>\n      )}\n\n      {/* Select Button */}\n      <button\n        ref={buttonRef}\n        id={selectId.current}\n        type=\"button\"\n        onClick={openSelect}\n        onKeyDown={handleKeyDown}\n        disabled={disabled}\n        className={cn(\n          'relative w-full cursor-default rounded-md border focus:border-blue-500 focus:outline-none focus:ring-1 focus:ring-blue-500',\n          sizeClasses[size],\n          variantClasses[variant],\n          disabled && 'cursor-not-allowed opacity-50 bg-gray-50',\n          error && 'border-red-300 focus:border-red-500 focus:ring-red-500',\n          'transition-colors duration-200'\n        )}\n        {...generateAriaAttributes('button', {\n          expanded: isOpen,\n          label: label,\n          describedBy: [\n            description ? descriptionId.current : undefined,\n            error ? errorId.current : undefined\n          ].filter(Boolean).join(' ') || undefined\n        })}\n        aria-haspopup=\"listbox\"\n        aria-controls={isOpen ? listboxId.current : undefined}\n        aria-invalid={error ? 'true' : 'false'}\n        aria-required={required}\n      >\n        <span className=\"flex items-center justify-between\">\n          <span className=\"flex items-center\">\n            {selectedOption?.icon && (\n              <selectedOption.icon className=\"w-5 h-5 mr-2 text-gray-400\" />\n            )}\n            <span className={cn(\n              'block truncate',\n              !selectedOption && 'text-gray-500'\n            )}>\n              {selectedOption ? selectedOption.label : placeholder}\n            </span>\n          </span>\n          <ChevronDownIcon\n            className={cn(\n              'w-5 h-5 text-gray-400 transition-transform duration-200',\n              isOpen && 'transform rotate-180'\n            )}\n            aria-hidden=\"true\"\n          />\n        </span>\n      </button>\n\n      {/* Error Message */}\n      {error && (\n        <p\n          id={errorId.current}\n          className=\"mt-2 text-sm text-red-600\"\n          role=\"alert\"\n          aria-live=\"polite\"\n        >\n          {error}\n        </p>\n      )}\n\n      {/* Dropdown */}\n      <AnimatePresence>\n        {isOpen && (\n          <motion.div\n            variants={dropdownVariants}\n            initial=\"hidden\"\n            animate=\"visible\"\n            exit=\"exit\"\n            className=\"absolute z-50 mt-1 w-full bg-white shadow-lg max-h-60 rounded-md py-1 text-base ring-1 ring-black ring-opacity-5 overflow-auto focus:outline-none\"\n          >\n            <ul\n              ref={listboxRef}\n              id={listboxId.current}\n              role=\"listbox\"\n              aria-labelledby={selectId.current}\n              aria-activedescendant={filteredOptions[highlightedIndex] ? `option-${filteredOptions[highlightedIndex].value}` : undefined}\n              tabIndex={-1}\n            >\n              {filteredOptions.length === 0 ? (\n                <li className=\"px-4 py-2 text-gray-500 text-center\">\n                  No options available\n                </li>\n              ) : (\n                filteredOptions.map((option, index) => (\n                  <motion.li\n                    key={option.value}\n                                         ref={el => { optionRefs.current[index] = el; }}\n                    id={`option-${option.value}`}\n                    role=\"option\"\n                    aria-selected={option.value === value}\n                    tabIndex={-1}\n                    variants={optionVariants}\n                    initial=\"hidden\"\n                    animate=\"visible\"\n                    custom={index}\n                    className={cn(\n                      'cursor-pointer select-none relative py-2 pl-3 pr-9 transition-colors duration-150',\n                      index === highlightedIndex ? 'bg-blue-600 text-white' : 'text-gray-900 hover:bg-gray-50',\n                      option.disabled && 'cursor-not-allowed opacity-50'\n                    )}\n                    onClick={() => selectOption(option)}\n                    onMouseEnter={() => setHighlightedIndex(index)}\n                  >\n                    <div className=\"flex items-center\">\n                      {option.icon && (\n                        <option.icon className={cn(\n                          'w-5 h-5 mr-3',\n                          index === highlightedIndex ? 'text-white' : 'text-gray-400'\n                        )} />\n                      )}\n                      <div className=\"flex flex-col\">\n                        <span className={cn(\n                          'block truncate',\n                          option.value === value ? 'font-semibold' : 'font-normal'\n                        )}>\n                          {option.label}\n                        </span>\n                        {option.description && (\n                          <span className={cn(\n                            'text-sm',\n                            index === highlightedIndex ? 'text-blue-200' : 'text-gray-500'\n                          )}>\n                            {option.description}\n                          </span>\n                        )}\n                      </div>\n                    </div>\n\n                    {option.value === value && (\n                      <span className={cn(\n                        'absolute inset-y-0 right-0 flex items-center pr-4',\n                        index === highlightedIndex ? 'text-white' : 'text-blue-600'\n                      )}>\n                        <CheckIcon className=\"w-5 h-5\" aria-hidden=\"true\" />\n                      </span>\n                    )}\n                  </motion.li>\n                ))\n              )}\n            </ul>\n          </motion.div>\n        )}\n      </AnimatePresence>\n    </div>\n  );\n} "],"names":["AccessibleSelect","options","value","onChange","placeholder","label","description","error","disabled","required","className","size","variant","isOpen","setIsOpen","useState","highlightedIndex","setHighlightedIndex","searchQuery","setSearchQuery","searchTimeout","setSearchTimeout","selectRef","useRef","listboxRef","buttonRef","optionRefs","selectId","Math","random","toString","substr","listboxId","descriptionId","errorId","filteredOptions","filter","option","toLowerCase","includes","selectedOption","find","sizeClasses","sm","md","lg","variantClasses","default","ghost","outline","openSelect","useCallback","announceToScreenReader","closeSelect","clearTimeout","current","focus","selectOption","handleKeyDown","event","key","preventDefault","nextIndex","min","length","prevIndex","max","lastIndex","newQuery","setTimeout","matchingIndex","findIndex","startsWith","useEffect","cleanup","createFocusTrap","handleClickOutside","contains","target","document","addEventListener","removeEventListener","dropdownVariants","hidden","opacity","y","respectReducedMotion","scale","visible","transition","type","stiffness","damping","duration","exit","optionVariants","x","index","delay","div","ref","cn","htmlFor","span","aria-label","p","id","button","onClick","onKeyDown","generateAriaAttributes","expanded","describedBy","undefined","Boolean","join","aria-haspopup","aria-controls","aria-invalid","aria-required","icon","ChevronDownIcon","aria-hidden","role","aria-live","AnimatePresence","motion","variants","initial","animate","ul","aria-labelledby","aria-activedescendant","tabIndex","li","map","el","aria-selected","custom","onMouseEnter","CheckIcon"],"mappings":"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"}