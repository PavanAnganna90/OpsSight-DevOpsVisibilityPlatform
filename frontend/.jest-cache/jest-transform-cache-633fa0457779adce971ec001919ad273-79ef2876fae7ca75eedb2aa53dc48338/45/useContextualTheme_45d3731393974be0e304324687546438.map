{"version":3,"sources":["/Users/pavan/Desktop/Devops-app-dev-cursor/frontend/src/hooks/useContextualTheme.ts"],"sourcesContent":["/**\n * Contextual Theme Hook\n * \n * Manages contextual themes (default, focus, relax, energize) with state management,\n * persistence, smooth transitions, and integration with the main theme system.\n */\n\nimport { useState, useEffect, useCallback } from 'react';\nimport { ThemeContext, ThemeConfig, applyTheme, getThemeVariables } from '../utils/theme';\n\nexport interface ContextualThemeState {\n  /** Current contextual theme */\n  context: ThemeContext;\n  /** Whether contextual themes are enabled */\n  enabled: boolean;\n  /** Whether transitions are enabled */\n  transitionsEnabled: boolean;\n}\n\nexport interface UseContextualThemeReturn {\n  /** Current contextual theme state */\n  state: ContextualThemeState;\n  /** Set contextual theme */\n  setContext: (context: ThemeContext) => void;\n  /** Toggle contextual themes on/off */\n  toggleEnabled: () => void;\n  /** Enable/disable transitions */\n  setTransitionsEnabled: (enabled: boolean) => void;\n  /** Reset to default context */\n  resetToDefault: () => void;\n  /** Apply contextual theme immediately */\n  applyContextualTheme: (config: ThemeConfig) => void;\n  /** Get current contextual theme variables */\n  getContextualVariables: (config: ThemeConfig) => Record<string, string>;\n}\n\n/**\n * Custom hook for managing contextual themes\n * \n * Features:\n * - State management for contextual themes\n * - Persistent storage in localStorage\n * - Smooth transitions between contexts\n * - Integration with main theme system\n * - Performance optimizations\n * \n * @param storageKey - localStorage key for persistence\n * @param defaultContext - Default contextual theme\n * @param enableTransitions - Whether to enable transitions by default\n */\nexport function useContextualTheme(\n  storageKey: string = 'opssight-contextual-theme',\n  defaultContext: ThemeContext = 'default',\n  enableTransitions: boolean = true\n): UseContextualThemeReturn {\n  const [state, setState] = useState<ContextualThemeState>({\n    context: defaultContext,\n    enabled: true,\n    transitionsEnabled: enableTransitions,\n  });\n\n  /**\n   * Load contextual theme state from localStorage\n   */\n  const loadFromStorage = useCallback((): ContextualThemeState => {\n    try {\n      const stored = localStorage.getItem(storageKey);\n      if (stored) {\n        const parsed = JSON.parse(stored);\n        return {\n          context: parsed.context || defaultContext,\n          enabled: parsed.enabled !== undefined ? parsed.enabled : true,\n          transitionsEnabled: parsed.transitionsEnabled !== undefined ? parsed.transitionsEnabled : enableTransitions,\n        };\n      }\n    } catch (error) {\n      console.warn('Failed to load contextual theme from localStorage:', error);\n    }\n    \n    return {\n      context: defaultContext,\n      enabled: true,\n      transitionsEnabled: enableTransitions,\n    };\n  }, [storageKey, defaultContext, enableTransitions]);\n\n  /**\n   * Save contextual theme state to localStorage\n   */\n  const saveToStorage = useCallback((newState: ContextualThemeState) => {\n    try {\n      localStorage.setItem(storageKey, JSON.stringify(newState));\n    } catch (error) {\n      console.warn('Failed to save contextual theme to localStorage:', error);\n    }\n  }, [storageKey]);\n\n  /**\n   * Set contextual theme with persistence and transition support\n   */\n  const setContext = useCallback((context: ThemeContext) => {\n    setState(prevState => {\n      const newState = { ...prevState, context };\n      saveToStorage(newState);\n      return newState;\n    });\n  }, [saveToStorage]);\n\n  /**\n   * Toggle contextual themes on/off\n   */\n  const toggleEnabled = useCallback(() => {\n    setState(prevState => {\n      const newState = { ...prevState, enabled: !prevState.enabled };\n      saveToStorage(newState);\n      return newState;\n    });\n  }, [saveToStorage]);\n\n  /**\n   * Enable/disable transitions\n   */\n  const setTransitionsEnabled = useCallback((enabled: boolean) => {\n    setState(prevState => {\n      const newState = { ...prevState, transitionsEnabled: enabled };\n      saveToStorage(newState);\n      return newState;\n    });\n  }, [saveToStorage]);\n\n  /**\n   * Reset to default context\n   */\n  const resetToDefault = useCallback(() => {\n    setContext(defaultContext);\n  }, [setContext, defaultContext]);\n\n  /**\n   * Apply contextual theme with smooth transitions\n   */\n  const applyContextualTheme = useCallback((config: ThemeConfig) => {\n    if (!state.enabled) return;\n\n    const contextualConfig: ThemeConfig = {\n      ...config,\n      context: state.context,\n    };\n\n    // Apply transition class for smooth animations\n    if (state.transitionsEnabled && typeof document !== 'undefined' && document.documentElement) {\n      document.documentElement.classList.add('theme-transitioning');\n      \n      // Remove transition class after transition completes\n      setTimeout(() => {\n        if (document.documentElement) {\n          document.documentElement.classList.remove('theme-transitioning');\n        }\n      }, 300);\n    }\n\n    // Apply the theme with contextual overrides\n    applyTheme(contextualConfig);\n  }, [state.enabled, state.context, state.transitionsEnabled]);\n\n  /**\n   * Get current contextual theme variables\n   */\n  const getContextualVariables = useCallback((config: ThemeConfig): Record<string, string> => {\n    if (!state.enabled) {\n      return getThemeVariables(config);\n    }\n\n    const contextualConfig: ThemeConfig = {\n      ...config,\n      context: state.context,\n    };\n\n    return getThemeVariables(contextualConfig);\n  }, [state.enabled, state.context]);\n\n  /**\n   * Initialize state from localStorage on mount\n   */\n  useEffect(() => {\n    const loadedState = loadFromStorage();\n    setState(loadedState);\n  }, [loadFromStorage]);\n\n  /**\n   * Apply CSS class for transition support\n   */\n  useEffect(() => {\n    // Handle cases where document is not available (e.g., SSR, tests)\n    if (typeof document === 'undefined' || !document.documentElement) {\n      return;\n    }\n    \n    const root = document.documentElement;\n    \n    if (state.transitionsEnabled) {\n      root.style.setProperty('--theme-transition-duration', '300ms');\n      root.style.setProperty('--theme-transition-easing', 'cubic-bezier(0.4, 0, 0.2, 1)');\n    } else {\n      root.style.removeProperty('--theme-transition-duration');\n      root.style.removeProperty('--theme-transition-easing');\n    }\n  }, [state.transitionsEnabled]);\n\n  /**\n   * Add data attribute for CSS targeting\n   */\n  useEffect(() => {\n    const root = document.documentElement;\n    root.setAttribute('data-contextual-theme', state.context);\n    root.setAttribute('data-contextual-enabled', state.enabled.toString());\n  }, [state.context, state.enabled]);\n\n  return {\n    state,\n    setContext,\n    toggleEnabled,\n    setTransitionsEnabled,\n    resetToDefault,\n    applyContextualTheme,\n    getContextualVariables,\n  };\n} "],"names":["useContextualTheme","storageKey","defaultContext","enableTransitions","state","setState","useState","context","enabled","transitionsEnabled","loadFromStorage","useCallback","stored","localStorage","getItem","parsed","JSON","parse","undefined","error","console","warn","saveToStorage","newState","setItem","stringify","setContext","prevState","toggleEnabled","setTransitionsEnabled","resetToDefault","applyContextualTheme","config","contextualConfig","document","documentElement","classList","add","setTimeout","remove","applyTheme","getContextualVariables","getThemeVariables","useEffect","loadedState","root","style","setProperty","removeProperty","setAttribute","toString"],"mappings":"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"}