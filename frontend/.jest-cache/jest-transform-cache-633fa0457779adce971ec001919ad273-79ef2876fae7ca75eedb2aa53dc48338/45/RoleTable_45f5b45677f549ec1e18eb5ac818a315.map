{"version":3,"sources":["/Users/pavan/Desktop/Devops-app-dev-cursor/frontend/src/components/admin/role-management/RoleTable.tsx"],"sourcesContent":["import React, { useState, useEffect, forwardRef, useImperativeHandle } from 'react';\nimport { Role } from '../../../types/role';\n\ninterface RoleTableProps {\n  onEditRole: (role: Role) => void;\n  onCreateRole: () => void;\n  refreshTrigger?: number;\n}\n\ninterface RoleTableRef {\n  refreshRoles: () => void;\n}\n\n/**\n * Table displaying all roles with edit and create options.\n */\nconst RoleTable = forwardRef<RoleTableRef, RoleTableProps>(({ onEditRole, onCreateRole, refreshTrigger }, ref) => {\n  const [roles, setRoles] = useState<Role[]>([]);\n  const [loading, setLoading] = useState(true);\n  const [error, setError] = useState<string | null>(null);\n\n  // Fetch roles from API\n  const fetchRoles = async () => {\n    try {\n      setLoading(true);\n      setError(null);\n      const response = await fetch('/api/v1/roles');\n      if (!response.ok) {\n        throw new Error('Failed to fetch roles');\n      }\n      const data = await response.json();\n      setRoles(data);\n    } catch (err) {\n      setError(err instanceof Error ? err.message : 'An error occurred');\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  // Expose refresh method via ref\n  useImperativeHandle(ref, () => ({\n    refreshRoles: fetchRoles,\n  }));\n\n  // Fetch roles on mount and when refreshTrigger changes\n  useEffect(() => {\n    fetchRoles();\n  }, [refreshTrigger]);\n\n  if (loading) {\n    return (\n      <div className=\"bg-white dark:bg-gray-900 rounded shadow p-4 mb-6\">\n        <div className=\"animate-pulse\">\n          <div className=\"h-4 bg-gray-300 rounded w-1/4 mb-2\"></div>\n          <div className=\"h-32 bg-gray-300 rounded\"></div>\n        </div>\n      </div>\n    );\n  }\n\n  if (error) {\n    return (\n      <div className=\"bg-white dark:bg-gray-900 rounded shadow p-4 mb-6\">\n        <div className=\"text-red-600\">Error: {error}</div>\n      </div>\n    );\n  }\n\n  return (\n    <div className=\"bg-white dark:bg-gray-900 rounded shadow p-4 mb-6\">\n      <div className=\"flex justify-between items-center mb-2\">\n        <h2 className=\"text-xl font-semibold\">Roles</h2>\n        <button\n          className=\"bg-blue-600 text-white px-4 py-2 rounded hover:bg-blue-700\"\n          onClick={onCreateRole}\n        >\n          Create Role\n        </button>\n      </div>\n      <table className=\"min-w-full divide-y divide-gray-200\">\n        <thead>\n          <tr>\n            <th className=\"px-4 py-2 text-left\">Role Name</th>\n            <th className=\"px-4 py-2 text-left\">Description</th>\n            <th className=\"px-4 py-2 text-left\">Actions</th>\n          </tr>\n        </thead>\n        <tbody>\n          {roles.map((role) => (\n            <tr key={role.id} className=\"hover:bg-gray-100 dark:hover:bg-gray-800\">\n              <td className=\"px-4 py-2\">{role.name}</td>\n              <td className=\"px-4 py-2\">{role.description}</td>\n              <td className=\"px-4 py-2\">\n                <button\n                  className=\"text-blue-600 hover:underline mr-2\"\n                  onClick={() => onEditRole(role)}\n                >\n                  Edit\n                </button>\n                {/* Add Delete button if needed */}\n              </td>\n            </tr>\n          ))}\n        </tbody>\n      </table>\n    </div>\n  );\n});\n\nRoleTable.displayName = 'RoleTable';\n\nexport default RoleTable;\n"],"names":["RoleTable","forwardRef","onEditRole","onCreateRole","refreshTrigger","ref","roles","setRoles","useState","loading","setLoading","error","setError","fetchRoles","response","fetch","ok","Error","data","json","err","message","useImperativeHandle","refreshRoles","useEffect","div","className","h2","button","onClick","table","thead","tr","th","tbody","map","role","td","name","description","id","displayName"],"mappings":";;;;+BA+GA;;;eAAA;;;;+DA/G4E;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAa5E;;CAEC,GACD,MAAMA,0BAAYC,IAAAA,iBAAU,EAA+B,CAAC,EAAEC,UAAU,EAAEC,YAAY,EAAEC,cAAc,EAAE,EAAEC;IACxG,MAAM,CAACC,OAAOC,SAAS,GAAGC,IAAAA,eAAQ,EAAS,EAAE;IAC7C,MAAM,CAACC,SAASC,WAAW,GAAGF,IAAAA,eAAQ,EAAC;IACvC,MAAM,CAACG,OAAOC,SAAS,GAAGJ,IAAAA,eAAQ,EAAgB;IAElD,uBAAuB;IACvB,MAAMK,aAAa;QACjB,IAAI;YACFH,WAAW;YACXE,SAAS;YACT,MAAME,WAAW,MAAMC,MAAM;YAC7B,IAAI,CAACD,SAASE,EAAE,EAAE;gBAChB,MAAM,IAAIC,MAAM;YAClB;YACA,MAAMC,OAAO,MAAMJ,SAASK,IAAI;YAChCZ,SAASW;QACX,EAAE,OAAOE,KAAK;YACZR,SAASQ,eAAeH,QAAQG,IAAIC,OAAO,GAAG;QAChD,SAAU;YACRX,WAAW;QACb;IACF;IAEA,gCAAgC;IAChCY,IAAAA,0BAAmB,EAACjB,KAAK,IAAO,CAAA;YAC9BkB,cAAcV;QAChB,CAAA;IAEA,uDAAuD;IACvDW,IAAAA,gBAAS,EAAC;QACRX;IACF,GAAG;QAACT;KAAe;IAEnB,IAAIK,SAAS;QACX,qBACE,qBAACgB;YAAIC,WAAU;sBACb,cAAA,sBAACD;gBAAIC,WAAU;;kCACb,qBAACD;wBAAIC,WAAU;;kCACf,qBAACD;wBAAIC,WAAU;;;;;IAIvB;IAEA,IAAIf,OAAO;QACT,qBACE,qBAACc;YAAIC,WAAU;sBACb,cAAA,sBAACD;gBAAIC,WAAU;;oBAAe;oBAAQf;;;;IAG5C;IAEA,qBACE,sBAACc;QAAIC,WAAU;;0BACb,sBAACD;gBAAIC,WAAU;;kCACb,qBAACC;wBAAGD,WAAU;kCAAwB;;kCACtC,qBAACE;wBACCF,WAAU;wBACVG,SAAS1B;kCACV;;;;0BAIH,sBAAC2B;gBAAMJ,WAAU;;kCACf,qBAACK;kCACC,cAAA,sBAACC;;8CACC,qBAACC;oCAAGP,WAAU;8CAAsB;;8CACpC,qBAACO;oCAAGP,WAAU;8CAAsB;;8CACpC,qBAACO;oCAAGP,WAAU;8CAAsB;;;;;kCAGxC,qBAACQ;kCACE5B,MAAM6B,GAAG,CAAC,CAACC,qBACV,sBAACJ;gCAAiBN,WAAU;;kDAC1B,qBAACW;wCAAGX,WAAU;kDAAaU,KAAKE,IAAI;;kDACpC,qBAACD;wCAAGX,WAAU;kDAAaU,KAAKG,WAAW;;kDAC3C,qBAACF;wCAAGX,WAAU;kDACZ,cAAA,qBAACE;4CACCF,WAAU;4CACVG,SAAS,IAAM3B,WAAWkC;sDAC3B;;;;+BAPIA,KAAKI,EAAE;;;;;;AAkB5B;AAEAxC,UAAUyC,WAAW,GAAG;MAExB,WAAezC"}