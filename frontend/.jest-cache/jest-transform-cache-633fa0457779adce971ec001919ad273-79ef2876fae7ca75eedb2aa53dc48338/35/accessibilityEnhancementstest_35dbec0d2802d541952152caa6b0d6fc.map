{"version":3,"sources":["/Users/pavan/Desktop/Devops-app-dev-cursor/frontend/src/utils/__tests__/accessibilityEnhancements.test.ts"],"sourcesContent":["/**\n * Tests for accessibility enhancements in theme transitions\n * Ensures WCAG 2.1 AA compliance and proper accessibility features\n */\n\nimport {\n  accessibilityManager,\n  useAccessibility,\n  withAccessibilityEnhancements,\n  AccessibilityConfig,\n} from '../accessibilityEnhancements';\n\n// Mock DOM methods and APIs\nObject.defineProperty(window, 'matchMedia', {\n  writable: true,\n  value: jest.fn().mockImplementation(query => ({\n    matches: query.includes('prefers-reduced-motion: reduce') ? false : false,\n    media: query,\n    onchange: null,\n    addListener: jest.fn(),\n    removeListener: jest.fn(),\n    addEventListener: jest.fn(),\n    removeEventListener: jest.fn(),\n    dispatchEvent: jest.fn(),\n  })),\n});\n\n// Mock requestAnimationFrame\nglobal.requestAnimationFrame = jest.fn(cb => setTimeout(cb, 16));\nglobal.cancelAnimationFrame = jest.fn();\n\n// Mock getComputedStyle\nObject.defineProperty(window, 'getComputedStyle', {\n  value: jest.fn(() => ({\n    color: 'rgb(0, 0, 0)',\n    backgroundColor: 'rgb(255, 255, 255)',\n    getPropertyValue: jest.fn(),\n  })),\n});\n\n// Mock document methods\nObject.defineProperty(document, 'querySelectorAll', {\n  value: jest.fn(() => []),\n});\n\nObject.defineProperty(document, 'createElement', {\n  value: jest.fn(() => ({\n    setAttribute: jest.fn(),\n    style: {},\n    className: '',\n    textContent: '',\n  })),\n});\n\nObject.defineProperty(document, 'body', {\n  value: {\n    appendChild: jest.fn(),\n    removeChild: jest.fn(),\n    classList: {\n      add: jest.fn(),\n      remove: jest.fn(),\n    },\n  },\n  writable: true,\n});\n\ndescribe('AccessibilityManager', () => {\n  beforeEach(() => {\n    jest.clearAllMocks();\n    // Reset accessibility manager state\n    accessibilityManager.updateConfig({\n      respectReducedMotion: true,\n      announceThemeChanges: true,\n      manageFocusDuringTransitions: true,\n      enableHighContrastMode: false,\n      validateColorContrast: true,\n      enableKeyboardShortcuts: true,\n      motionSensitivityLevel: 'reduced',\n      screenReaderVerbosity: 'standard',\n    });\n  });\n\n  describe('Configuration Management', () => {\n    test('updates configuration correctly', () => {\n      const newConfig: Partial<AccessibilityConfig> = {\n        motionSensitivityLevel: 'none',\n        screenReaderVerbosity: 'verbose',\n      };\n\n      accessibilityManager.updateConfig(newConfig);\n      const report = accessibilityManager.getAccessibilityReport();\n\n      expect(report.reducedMotionEnabled).toBeDefined();\n      expect(report.screenReaderSupport).toBe(true);\n    });\n\n    test('respects system preferences', () => {\n      // Mock reduced motion preference\n      (window.matchMedia as jest.Mock).mockImplementation(query => ({\n        matches: query.includes('prefers-reduced-motion: reduce'),\n        media: query,\n        addEventListener: jest.fn(),\n        removeEventListener: jest.fn(),\n      }));\n\n      expect(accessibilityManager.prefersReducedMotion()).toBe(true);\n    });\n\n    test('respects high contrast preference', () => {\n      // Mock high contrast preference\n      (window.matchMedia as jest.Mock).mockImplementation(query => ({\n        matches: query.includes('prefers-contrast: high'),\n        media: query,\n        addEventListener: jest.fn(),\n        removeEventListener: jest.fn(),\n      }));\n\n      expect(accessibilityManager.prefersHighContrast()).toBe(true);\n    });\n  });\n\n  describe('Screen Reader Announcements', () => {\n    test('creates live region for announcements', () => {\n      const mockElement = {\n        setAttribute: jest.fn(),\n        style: { cssText: '' },\n        className: '',\n      };\n      \n      (document.createElement as jest.Mock).mockReturnValue(mockElement);\n\n      accessibilityManager.announceToScreenReader('Test announcement', 'polite');\n\n      expect(document.createElement).toHaveBeenCalledWith('div');\n      expect(mockElement.setAttribute).toHaveBeenCalledWith('aria-live', 'polite');\n      expect(mockElement.setAttribute).toHaveBeenCalledWith('aria-atomic', 'true');\n    });\n\n    test('formats announcements based on verbosity level', () => {\n      accessibilityManager.updateConfig({ screenReaderVerbosity: 'minimal' });\n      \n      const enhancement = accessibilityManager.enhanceThemeTransition('minimal', 'dark');\n      expect(enhancement.announcement).toBe('minimal theme');\n\n      accessibilityManager.updateConfig({ screenReaderVerbosity: 'verbose' });\n      const verboseEnhancement = accessibilityManager.enhanceThemeTransition('minimal', 'dark');\n      expect(verboseEnhancement.announcement).toContain('Theme changed to minimal in dark mode');\n      expect(verboseEnhancement.announcement).toContain('Alt+T');\n    });\n\n    test('handles different announcement priorities', () => {\n      const mockElement = {\n        setAttribute: jest.fn(),\n        style: { cssText: '' },\n        className: '',\n        textContent: '',\n      };\n      \n      (document.createElement as jest.Mock).mockReturnValue(mockElement);\n\n      accessibilityManager.announceToScreenReader('Urgent message', 'assertive');\n      expect(mockElement.setAttribute).toHaveBeenCalledWith('aria-live', 'assertive');\n\n      accessibilityManager.announceToScreenReader('Polite message', 'polite');\n      expect(mockElement.setAttribute).toHaveBeenCalledWith('aria-live', 'polite');\n    });\n  });\n\n  describe('Focus Management', () => {\n    test('captures and restores focus state', () => {\n      const mockActiveElement = { focus: jest.fn() };\n      Object.defineProperty(document, 'activeElement', {\n        value: mockActiveElement,\n        writable: true,\n      });\n\n      const mockFocusableElements = [\n        { focus: jest.fn() },\n        { focus: jest.fn() },\n        mockActiveElement,\n      ];\n\n      (document.querySelectorAll as jest.Mock).mockReturnValue(mockFocusableElements);\n\n      // Capture focus state\n      accessibilityManager.captureFocusState();\n\n      // Simulate focus change\n      Object.defineProperty(document, 'activeElement', {\n        value: mockFocusableElements[0],\n        writable: true,\n      });\n\n      // Restore focus state\n      accessibilityManager.restoreFocusState();\n\n      expect(mockActiveElement.focus).toHaveBeenCalled();\n    });\n\n    test('handles missing active element gracefully', () => {\n      Object.defineProperty(document, 'activeElement', {\n        value: null,\n        writable: true,\n      });\n\n      expect(() => {\n        accessibilityManager.captureFocusState();\n        accessibilityManager.restoreFocusState();\n      }).not.toThrow();\n    });\n  });\n\n  describe('Color Contrast Validation', () => {\n    test('calculates contrast ratios correctly', () => {\n      const result = accessibilityManager.calculateContrastRatio('#000000', '#ffffff');\n      expect(result.ratio).toBe(21);\n      expect(result.level).toBe('AAA');\n      expect(result.isValid).toBe(true);\n    });\n\n    test('identifies contrast violations', () => {\n      const result = accessibilityManager.calculateContrastRatio('#cccccc', '#ffffff');\n      expect(result.ratio).toBeLessThan(4.5);\n      expect(result.level).toBe('fail');\n      expect(result.isValid).toBe(false);\n    });\n\n    test('validates theme accessibility', () => {\n      const goodTheme = {\n        'text-primary': '#000000',\n        'bg-primary': '#ffffff',\n        'text-secondary': '#333333',\n      };\n\n      const result = accessibilityManager.validateThemeAccessibility(goodTheme);\n      expect(result.isValid).toBe(true);\n      expect(result.issues).toHaveLength(0);\n    });\n\n    test('detects theme accessibility issues', () => {\n      const badTheme = {\n        'text-primary': '#cccccc',\n        'bg-primary': '#ffffff',\n        'text-secondary': '#dddddd',\n      };\n\n      const result = accessibilityManager.validateThemeAccessibility(badTheme);\n      expect(result.isValid).toBe(false);\n      expect(result.issues.length).toBeGreaterThan(0);\n      expect(result.suggestions.length).toBeGreaterThan(0);\n    });\n  });\n\n  describe('Theme Transition Enhancements', () => {\n    test('provides comprehensive transition enhancements', () => {\n      const enhancement = accessibilityManager.enhanceThemeTransition('minimal', 'dark');\n\n      expect(enhancement).toHaveProperty('shouldReduceMotion');\n      expect(enhancement).toHaveProperty('announcement');\n      expect(enhancement).toHaveProperty('focusManagement');\n      expect(enhancement).toHaveProperty('contrastMonitoring');\n\n      expect(typeof enhancement.focusManagement.capture).toBe('function');\n      expect(typeof enhancement.focusManagement.restore).toBe('function');\n      expect(typeof enhancement.contrastMonitoring.startMonitoring).toBe('function');\n      expect(typeof enhancement.contrastMonitoring.stopMonitoring).toBe('function');\n      expect(typeof enhancement.contrastMonitoring.getViolations).toBe('function');\n    });\n\n    test('reduces motion when system preference is enabled', () => {\n      // Mock reduced motion preference\n      (window.matchMedia as jest.Mock).mockImplementation(query => ({\n        matches: query.includes('prefers-reduced-motion: reduce'),\n        media: query,\n        addEventListener: jest.fn(),\n        removeEventListener: jest.fn(),\n      }));\n\n      const enhancement = accessibilityManager.enhanceThemeTransition('minimal', 'dark');\n      expect(enhancement.shouldReduceMotion).toBe(true);\n    });\n\n    test('monitors contrast during transitions', (done) => {\n      const mockElements = [\n        {\n          style: {},\n          getAttribute: jest.fn(),\n          setAttribute: jest.fn(),\n        },\n      ];\n\n      (document.querySelectorAll as jest.Mock).mockReturnValue(mockElements);\n      (window.getComputedStyle as jest.Mock).mockReturnValue({\n        color: 'rgb(200, 200, 200)', // Low contrast\n        backgroundColor: 'rgb(255, 255, 255)',\n      });\n\n      const enhancement = accessibilityManager.enhanceThemeTransition('minimal', 'dark');\n      \n      enhancement.contrastMonitoring.startMonitoring();\n      \n      // Allow monitoring to run\n      setTimeout(() => {\n        enhancement.contrastMonitoring.stopMonitoring();\n        const violations = enhancement.contrastMonitoring.getViolations();\n        \n        expect(violations.length).toBeGreaterThan(0);\n        expect(violations[0]).toContain('contrast ratio');\n        done();\n      }, 100);\n    });\n\n    test('handles empty violation list', () => {\n      const enhancement = accessibilityManager.enhanceThemeTransition('minimal', 'dark');\n      \n      enhancement.contrastMonitoring.startMonitoring();\n      enhancement.contrastMonitoring.stopMonitoring();\n      \n      const violations = enhancement.contrastMonitoring.getViolations();\n      expect(Array.isArray(violations)).toBe(true);\n    });\n  });\n\n  describe('Keyboard Shortcuts', () => {\n    test('initializes keyboard shortcuts', () => {\n      const mockAddEventListener = jest.fn();\n      Object.defineProperty(document, 'addEventListener', {\n        value: mockAddEventListener,\n        writable: true,\n      });\n\n      accessibilityManager.updateConfig({ enableKeyboardShortcuts: true });\n      expect(mockAddEventListener).toHaveBeenCalledWith('keydown', expect.any(Function));\n    });\n\n    test('disables keyboard shortcuts when configured', () => {\n      const mockRemoveEventListener = jest.fn();\n      Object.defineProperty(document, 'removeEventListener', {\n        value: mockRemoveEventListener,\n        writable: true,\n      });\n\n      accessibilityManager.updateConfig({ enableKeyboardShortcuts: false });\n      expect(mockRemoveEventListener).toHaveBeenCalledWith('keydown', expect.any(Function));\n    });\n\n    test('dispatches custom events for keyboard shortcuts', () => {\n      const mockDispatchEvent = jest.fn();\n      Object.defineProperty(document, 'dispatchEvent', {\n        value: mockDispatchEvent,\n        writable: true,\n      });\n\n      // Simulate Alt+T keypress\n      const keyEvent = new KeyboardEvent('keydown', {\n        altKey: true,\n        code: 'KeyT',\n      });\n\n      // This would be called by the keyboard handler\n      document.dispatchEvent(new CustomEvent('theme:toggle'));\n      expect(mockDispatchEvent).toHaveBeenCalledWith(expect.any(CustomEvent));\n    });\n  });\n\n  describe('Accessibility Report', () => {\n    test('provides comprehensive accessibility status', () => {\n      const report = accessibilityManager.getAccessibilityReport();\n\n      expect(report).toHaveProperty('reducedMotionEnabled');\n      expect(report).toHaveProperty('highContrastEnabled');\n      expect(report).toHaveProperty('keyboardShortcutsEnabled');\n      expect(report).toHaveProperty('screenReaderSupport');\n      expect(report).toHaveProperty('focusManagementEnabled');\n      expect(report).toHaveProperty('colorContrastValidation');\n\n      expect(typeof report.reducedMotionEnabled).toBe('boolean');\n      expect(typeof report.screenReaderSupport).toBe('boolean');\n    });\n\n    test('reflects current configuration state', () => {\n      accessibilityManager.updateConfig({\n        enableKeyboardShortcuts: false,\n        validateColorContrast: false,\n      });\n\n      const report = accessibilityManager.getAccessibilityReport();\n      expect(report.keyboardShortcutsEnabled).toBe(false);\n      expect(report.colorContrastValidation).toBe(false);\n    });\n  });\n});\n\ndescribe('useAccessibility Hook', () => {\n  test('provides accessibility management functions', () => {\n    const {\n      updateConfig,\n      announceToScreenReader,\n      enhanceThemeTransition,\n      validateThemeAccessibility,\n      getReport,\n      prefersReducedMotion,\n      prefersHighContrast,\n    } = useAccessibility();\n\n    expect(typeof updateConfig).toBe('function');\n    expect(typeof announceToScreenReader).toBe('function');\n    expect(typeof enhanceThemeTransition).toBe('function');\n    expect(typeof validateThemeAccessibility).toBe('function');\n    expect(typeof getReport).toBe('function');\n    expect(typeof prefersReducedMotion).toBe('function');\n    expect(typeof prefersHighContrast).toBe('function');\n  });\n\n  test('updates configuration through hook', () => {\n    const { updateConfig, getReport } = useAccessibility();\n    \n    updateConfig({ motionSensitivityLevel: 'none' });\n    const report = getReport();\n    \n    expect(report).toBeDefined();\n  });\n});\n\ndescribe('withAccessibilityEnhancements Decorator', () => {\n  test('wraps async functions with accessibility features', async () => {\n    const mockFunction = jest.fn().mockResolvedValue('success');\n    const enhancedFunction = withAccessibilityEnhancements(mockFunction, 'minimal', 'dark');\n\n    const result = await enhancedFunction('test', 'args');\n\n    expect(mockFunction).toHaveBeenCalledWith('test', 'args');\n    expect(result).toBe('success');\n  });\n\n  test('handles function errors gracefully', async () => {\n    const mockFunction = jest.fn().mockRejectedValue(new Error('Test error'));\n    const enhancedFunction = withAccessibilityEnhancements(mockFunction, 'minimal', 'dark');\n\n    await expect(enhancedFunction()).rejects.toThrow('Test error');\n  });\n\n  test('announces transition start and completion', async () => {\n    const mockFunction = jest.fn().mockResolvedValue('success');\n    const enhancedFunction = withAccessibilityEnhancements(mockFunction, 'minimal', 'dark');\n\n    const announceSpy = jest.spyOn(accessibilityManager, 'announceToScreenReader');\n\n    await enhancedFunction();\n\n    expect(announceSpy).toHaveBeenCalledWith(\n      'Starting theme transition to minimal',\n      'polite'\n    );\n    expect(announceSpy).toHaveBeenCalledWith(\n      expect.stringContaining('Theme changed to minimal in dark mode'),\n      'polite'\n    );\n  });\n\n  test('manages focus state during transitions', async () => {\n    const mockFunction = jest.fn().mockResolvedValue('success');\n    const enhancedFunction = withAccessibilityEnhancements(mockFunction, 'minimal', 'dark');\n\n    const captureSpy = jest.spyOn(accessibilityManager, 'captureFocusState');\n    const restoreSpy = jest.spyOn(accessibilityManager, 'restoreFocusState');\n\n    await enhancedFunction();\n\n    expect(captureSpy).toHaveBeenCalled();\n    \n    // Restore is called with a timeout, so we need to wait\n    await new Promise(resolve => setTimeout(resolve, 150));\n    expect(restoreSpy).toHaveBeenCalled();\n  });\n});\n\ndescribe('Integration Tests', () => {\n  test('complete accessibility workflow', async () => {\n    // Setup\n    const { updateConfig, enhanceThemeTransition, getReport } = useAccessibility();\n    \n    // Configure accessibility\n    updateConfig({\n      respectReducedMotion: true,\n      announceThemeChanges: true,\n      validateColorContrast: true,\n    });\n\n    // Enhance theme transition\n    const enhancement = enhanceThemeTransition('minimal', 'dark');\n    \n    // Start monitoring\n    enhancement.contrastMonitoring.startMonitoring();\n    enhancement.focusManagement.capture();\n\n    // Simulate transition\n    await new Promise(resolve => setTimeout(resolve, 50));\n\n    // Stop monitoring\n    enhancement.contrastMonitoring.stopMonitoring();\n    enhancement.focusManagement.restore();\n\n    // Verify report\n    const report = getReport();\n    expect(report.colorContrastValidation).toBe(true);\n    expect(report.screenReaderSupport).toBe(true);\n  });\n\n  test('accessibility features work with reduced motion', () => {\n    // Mock reduced motion preference\n    (window.matchMedia as jest.Mock).mockImplementation(query => ({\n      matches: query.includes('prefers-reduced-motion: reduce'),\n      media: query,\n      addEventListener: jest.fn(),\n      removeEventListener: jest.fn(),\n    }));\n\n    const enhancement = accessibilityManager.enhanceThemeTransition('minimal', 'dark');\n    expect(enhancement.shouldReduceMotion).toBe(true);\n    \n    // Verify that motion-sensitive features are disabled\n    expect(enhancement.announcement).toBeTruthy();\n    expect(enhancement.focusManagement).toBeDefined();\n  });\n\n  test('accessibility features work with high contrast', () => {\n    // Mock high contrast preference\n    (window.matchMedia as jest.Mock).mockImplementation(query => ({\n      matches: query.includes('prefers-contrast: high'),\n      media: query,\n      addEventListener: jest.fn(),\n      removeEventListener: jest.fn(),\n    }));\n\n    accessibilityManager.updateConfig({ enableHighContrastMode: true });\n    const report = accessibilityManager.getAccessibilityReport();\n    expect(report.highContrastEnabled).toBe(true);\n  });\n}); "],"names":["Object","defineProperty","window","writable","value","jest","fn","mockImplementation","query","matches","includes","media","onchange","addListener","removeListener","addEventListener","removeEventListener","dispatchEvent","global","requestAnimationFrame","cb","setTimeout","cancelAnimationFrame","color","backgroundColor","getPropertyValue","document","setAttribute","style","className","textContent","appendChild","removeChild","classList","add","remove","describe","beforeEach","clearAllMocks","accessibilityManager","updateConfig","respectReducedMotion","announceThemeChanges","manageFocusDuringTransitions","enableHighContrastMode","validateColorContrast","enableKeyboardShortcuts","motionSensitivityLevel","screenReaderVerbosity","test","newConfig","report","getAccessibilityReport","expect","reducedMotionEnabled","toBeDefined","screenReaderSupport","toBe","matchMedia","prefersReducedMotion","prefersHighContrast","mockElement","cssText","createElement","mockReturnValue","announceToScreenReader","toHaveBeenCalledWith","enhancement","enhanceThemeTransition","announcement","verboseEnhancement","toContain","mockActiveElement","focus","mockFocusableElements","querySelectorAll","captureFocusState","restoreFocusState","toHaveBeenCalled","not","toThrow","result","calculateContrastRatio","ratio","level","isValid","toBeLessThan","goodTheme","validateThemeAccessibility","issues","toHaveLength","badTheme","length","toBeGreaterThan","suggestions","toHaveProperty","focusManagement","capture","restore","contrastMonitoring","startMonitoring","stopMonitoring","getViolations","shouldReduceMotion","done","mockElements","getAttribute","getComputedStyle","violations","Array","isArray","mockAddEventListener","any","Function","mockRemoveEventListener","mockDispatchEvent","keyEvent","KeyboardEvent","altKey","code","CustomEvent","keyboardShortcutsEnabled","colorContrastValidation","getReport","useAccessibility","mockFunction","mockResolvedValue","enhancedFunction","withAccessibilityEnhancements","mockRejectedValue","Error","rejects","announceSpy","spyOn","stringContaining","captureSpy","restoreSpy","Promise","resolve","toBeTruthy","highContrastEnabled"],"mappings":"AAAA;;;CAGC;;;;2CAOM;AAEP,4BAA4B;AAC5BA,OAAOC,cAAc,CAACC,QAAQ,cAAc;IAC1CC,UAAU;IACVC,OAAOC,KAAKC,EAAE,GAAGC,kBAAkB,CAACC,CAAAA,QAAU,CAAA;YAC5CC,SAASD,MAAME,QAAQ,CAAC,oCAAoC,QAAQ;YACpEC,OAAOH;YACPI,UAAU;YACVC,aAAaR,KAAKC,EAAE;YACpBQ,gBAAgBT,KAAKC,EAAE;YACvBS,kBAAkBV,KAAKC,EAAE;YACzBU,qBAAqBX,KAAKC,EAAE;YAC5BW,eAAeZ,KAAKC,EAAE;QACxB,CAAA;AACF;AAEA,6BAA6B;AAC7BY,OAAOC,qBAAqB,GAAGd,KAAKC,EAAE,CAACc,CAAAA,KAAMC,WAAWD,IAAI;AAC5DF,OAAOI,oBAAoB,GAAGjB,KAAKC,EAAE;AAErC,wBAAwB;AACxBN,OAAOC,cAAc,CAACC,QAAQ,oBAAoB;IAChDE,OAAOC,KAAKC,EAAE,CAAC,IAAO,CAAA;YACpBiB,OAAO;YACPC,iBAAiB;YACjBC,kBAAkBpB,KAAKC,EAAE;QAC3B,CAAA;AACF;AAEA,wBAAwB;AACxBN,OAAOC,cAAc,CAACyB,UAAU,oBAAoB;IAClDtB,OAAOC,KAAKC,EAAE,CAAC,IAAM,EAAE;AACzB;AAEAN,OAAOC,cAAc,CAACyB,UAAU,iBAAiB;IAC/CtB,OAAOC,KAAKC,EAAE,CAAC,IAAO,CAAA;YACpBqB,cAActB,KAAKC,EAAE;YACrBsB,OAAO,CAAC;YACRC,WAAW;YACXC,aAAa;QACf,CAAA;AACF;AAEA9B,OAAOC,cAAc,CAACyB,UAAU,QAAQ;IACtCtB,OAAO;QACL2B,aAAa1B,KAAKC,EAAE;QACpB0B,aAAa3B,KAAKC,EAAE;QACpB2B,WAAW;YACTC,KAAK7B,KAAKC,EAAE;YACZ6B,QAAQ9B,KAAKC,EAAE;QACjB;IACF;IACAH,UAAU;AACZ;AAEAiC,SAAS,wBAAwB;IAC/BC,WAAW;QACThC,KAAKiC,aAAa;QAClB,oCAAoC;QACpCC,+CAAoB,CAACC,YAAY,CAAC;YAChCC,sBAAsB;YACtBC,sBAAsB;YACtBC,8BAA8B;YAC9BC,wBAAwB;YACxBC,uBAAuB;YACvBC,yBAAyB;YACzBC,wBAAwB;YACxBC,uBAAuB;QACzB;IACF;IAEAZ,SAAS,4BAA4B;QACnCa,KAAK,mCAAmC;YACtC,MAAMC,YAA0C;gBAC9CH,wBAAwB;gBACxBC,uBAAuB;YACzB;YAEAT,+CAAoB,CAACC,YAAY,CAACU;YAClC,MAAMC,SAASZ,+CAAoB,CAACa,sBAAsB;YAE1DC,OAAOF,OAAOG,oBAAoB,EAAEC,WAAW;YAC/CF,OAAOF,OAAOK,mBAAmB,EAAEC,IAAI,CAAC;QAC1C;QAEAR,KAAK,+BAA+B;YAClC,iCAAiC;YAChC/C,OAAOwD,UAAU,CAAenD,kBAAkB,CAACC,CAAAA,QAAU,CAAA;oBAC5DC,SAASD,MAAME,QAAQ,CAAC;oBACxBC,OAAOH;oBACPO,kBAAkBV,KAAKC,EAAE;oBACzBU,qBAAqBX,KAAKC,EAAE;gBAC9B,CAAA;YAEA+C,OAAOd,+CAAoB,CAACoB,oBAAoB,IAAIF,IAAI,CAAC;QAC3D;QAEAR,KAAK,qCAAqC;YACxC,gCAAgC;YAC/B/C,OAAOwD,UAAU,CAAenD,kBAAkB,CAACC,CAAAA,QAAU,CAAA;oBAC5DC,SAASD,MAAME,QAAQ,CAAC;oBACxBC,OAAOH;oBACPO,kBAAkBV,KAAKC,EAAE;oBACzBU,qBAAqBX,KAAKC,EAAE;gBAC9B,CAAA;YAEA+C,OAAOd,+CAAoB,CAACqB,mBAAmB,IAAIH,IAAI,CAAC;QAC1D;IACF;IAEArB,SAAS,+BAA+B;QACtCa,KAAK,yCAAyC;YAC5C,MAAMY,cAAc;gBAClBlC,cAActB,KAAKC,EAAE;gBACrBsB,OAAO;oBAAEkC,SAAS;gBAAG;gBACrBjC,WAAW;YACb;YAECH,SAASqC,aAAa,CAAeC,eAAe,CAACH;YAEtDtB,+CAAoB,CAAC0B,sBAAsB,CAAC,qBAAqB;YAEjEZ,OAAO3B,SAASqC,aAAa,EAAEG,oBAAoB,CAAC;YACpDb,OAAOQ,YAAYlC,YAAY,EAAEuC,oBAAoB,CAAC,aAAa;YACnEb,OAAOQ,YAAYlC,YAAY,EAAEuC,oBAAoB,CAAC,eAAe;QACvE;QAEAjB,KAAK,kDAAkD;YACrDV,+CAAoB,CAACC,YAAY,CAAC;gBAAEQ,uBAAuB;YAAU;YAErE,MAAMmB,cAAc5B,+CAAoB,CAAC6B,sBAAsB,CAAC,WAAW;YAC3Ef,OAAOc,YAAYE,YAAY,EAAEZ,IAAI,CAAC;YAEtClB,+CAAoB,CAACC,YAAY,CAAC;gBAAEQ,uBAAuB;YAAU;YACrE,MAAMsB,qBAAqB/B,+CAAoB,CAAC6B,sBAAsB,CAAC,WAAW;YAClFf,OAAOiB,mBAAmBD,YAAY,EAAEE,SAAS,CAAC;YAClDlB,OAAOiB,mBAAmBD,YAAY,EAAEE,SAAS,CAAC;QACpD;QAEAtB,KAAK,6CAA6C;YAChD,MAAMY,cAAc;gBAClBlC,cAActB,KAAKC,EAAE;gBACrBsB,OAAO;oBAAEkC,SAAS;gBAAG;gBACrBjC,WAAW;gBACXC,aAAa;YACf;YAECJ,SAASqC,aAAa,CAAeC,eAAe,CAACH;YAEtDtB,+CAAoB,CAAC0B,sBAAsB,CAAC,kBAAkB;YAC9DZ,OAAOQ,YAAYlC,YAAY,EAAEuC,oBAAoB,CAAC,aAAa;YAEnE3B,+CAAoB,CAAC0B,sBAAsB,CAAC,kBAAkB;YAC9DZ,OAAOQ,YAAYlC,YAAY,EAAEuC,oBAAoB,CAAC,aAAa;QACrE;IACF;IAEA9B,SAAS,oBAAoB;QAC3Ba,KAAK,qCAAqC;YACxC,MAAMuB,oBAAoB;gBAAEC,OAAOpE,KAAKC,EAAE;YAAG;YAC7CN,OAAOC,cAAc,CAACyB,UAAU,iBAAiB;gBAC/CtB,OAAOoE;gBACPrE,UAAU;YACZ;YAEA,MAAMuE,wBAAwB;gBAC5B;oBAAED,OAAOpE,KAAKC,EAAE;gBAAG;gBACnB;oBAAEmE,OAAOpE,KAAKC,EAAE;gBAAG;gBACnBkE;aACD;YAEA9C,SAASiD,gBAAgB,CAAeX,eAAe,CAACU;YAEzD,sBAAsB;YACtBnC,+CAAoB,CAACqC,iBAAiB;YAEtC,wBAAwB;YACxB5E,OAAOC,cAAc,CAACyB,UAAU,iBAAiB;gBAC/CtB,OAAOsE,qBAAqB,CAAC,EAAE;gBAC/BvE,UAAU;YACZ;YAEA,sBAAsB;YACtBoC,+CAAoB,CAACsC,iBAAiB;YAEtCxB,OAAOmB,kBAAkBC,KAAK,EAAEK,gBAAgB;QAClD;QAEA7B,KAAK,6CAA6C;YAChDjD,OAAOC,cAAc,CAACyB,UAAU,iBAAiB;gBAC/CtB,OAAO;gBACPD,UAAU;YACZ;YAEAkD,OAAO;gBACLd,+CAAoB,CAACqC,iBAAiB;gBACtCrC,+CAAoB,CAACsC,iBAAiB;YACxC,GAAGE,GAAG,CAACC,OAAO;QAChB;IACF;IAEA5C,SAAS,6BAA6B;QACpCa,KAAK,wCAAwC;YAC3C,MAAMgC,SAAS1C,+CAAoB,CAAC2C,sBAAsB,CAAC,WAAW;YACtE7B,OAAO4B,OAAOE,KAAK,EAAE1B,IAAI,CAAC;YAC1BJ,OAAO4B,OAAOG,KAAK,EAAE3B,IAAI,CAAC;YAC1BJ,OAAO4B,OAAOI,OAAO,EAAE5B,IAAI,CAAC;QAC9B;QAEAR,KAAK,kCAAkC;YACrC,MAAMgC,SAAS1C,+CAAoB,CAAC2C,sBAAsB,CAAC,WAAW;YACtE7B,OAAO4B,OAAOE,KAAK,EAAEG,YAAY,CAAC;YAClCjC,OAAO4B,OAAOG,KAAK,EAAE3B,IAAI,CAAC;YAC1BJ,OAAO4B,OAAOI,OAAO,EAAE5B,IAAI,CAAC;QAC9B;QAEAR,KAAK,iCAAiC;YACpC,MAAMsC,YAAY;gBAChB,gBAAgB;gBAChB,cAAc;gBACd,kBAAkB;YACpB;YAEA,MAAMN,SAAS1C,+CAAoB,CAACiD,0BAA0B,CAACD;YAC/DlC,OAAO4B,OAAOI,OAAO,EAAE5B,IAAI,CAAC;YAC5BJ,OAAO4B,OAAOQ,MAAM,EAAEC,YAAY,CAAC;QACrC;QAEAzC,KAAK,sCAAsC;YACzC,MAAM0C,WAAW;gBACf,gBAAgB;gBAChB,cAAc;gBACd,kBAAkB;YACpB;YAEA,MAAMV,SAAS1C,+CAAoB,CAACiD,0BAA0B,CAACG;YAC/DtC,OAAO4B,OAAOI,OAAO,EAAE5B,IAAI,CAAC;YAC5BJ,OAAO4B,OAAOQ,MAAM,CAACG,MAAM,EAAEC,eAAe,CAAC;YAC7CxC,OAAO4B,OAAOa,WAAW,CAACF,MAAM,EAAEC,eAAe,CAAC;QACpD;IACF;IAEAzD,SAAS,iCAAiC;QACxCa,KAAK,kDAAkD;YACrD,MAAMkB,cAAc5B,+CAAoB,CAAC6B,sBAAsB,CAAC,WAAW;YAE3Ef,OAAOc,aAAa4B,cAAc,CAAC;YACnC1C,OAAOc,aAAa4B,cAAc,CAAC;YACnC1C,OAAOc,aAAa4B,cAAc,CAAC;YACnC1C,OAAOc,aAAa4B,cAAc,CAAC;YAEnC1C,OAAO,OAAOc,YAAY6B,eAAe,CAACC,OAAO,EAAExC,IAAI,CAAC;YACxDJ,OAAO,OAAOc,YAAY6B,eAAe,CAACE,OAAO,EAAEzC,IAAI,CAAC;YACxDJ,OAAO,OAAOc,YAAYgC,kBAAkB,CAACC,eAAe,EAAE3C,IAAI,CAAC;YACnEJ,OAAO,OAAOc,YAAYgC,kBAAkB,CAACE,cAAc,EAAE5C,IAAI,CAAC;YAClEJ,OAAO,OAAOc,YAAYgC,kBAAkB,CAACG,aAAa,EAAE7C,IAAI,CAAC;QACnE;QAEAR,KAAK,oDAAoD;YACvD,iCAAiC;YAChC/C,OAAOwD,UAAU,CAAenD,kBAAkB,CAACC,CAAAA,QAAU,CAAA;oBAC5DC,SAASD,MAAME,QAAQ,CAAC;oBACxBC,OAAOH;oBACPO,kBAAkBV,KAAKC,EAAE;oBACzBU,qBAAqBX,KAAKC,EAAE;gBAC9B,CAAA;YAEA,MAAM6D,cAAc5B,+CAAoB,CAAC6B,sBAAsB,CAAC,WAAW;YAC3Ef,OAAOc,YAAYoC,kBAAkB,EAAE9C,IAAI,CAAC;QAC9C;QAEAR,KAAK,wCAAwC,CAACuD;YAC5C,MAAMC,eAAe;gBACnB;oBACE7E,OAAO,CAAC;oBACR8E,cAAcrG,KAAKC,EAAE;oBACrBqB,cAActB,KAAKC,EAAE;gBACvB;aACD;YAEAoB,SAASiD,gBAAgB,CAAeX,eAAe,CAACyC;YACxDvG,OAAOyG,gBAAgB,CAAe3C,eAAe,CAAC;gBACrDzC,OAAO;gBACPC,iBAAiB;YACnB;YAEA,MAAM2C,cAAc5B,+CAAoB,CAAC6B,sBAAsB,CAAC,WAAW;YAE3ED,YAAYgC,kBAAkB,CAACC,eAAe;YAE9C,0BAA0B;YAC1B/E,WAAW;gBACT8C,YAAYgC,kBAAkB,CAACE,cAAc;gBAC7C,MAAMO,aAAazC,YAAYgC,kBAAkB,CAACG,aAAa;gBAE/DjD,OAAOuD,WAAWhB,MAAM,EAAEC,eAAe,CAAC;gBAC1CxC,OAAOuD,UAAU,CAAC,EAAE,EAAErC,SAAS,CAAC;gBAChCiC;YACF,GAAG;QACL;QAEAvD,KAAK,gCAAgC;YACnC,MAAMkB,cAAc5B,+CAAoB,CAAC6B,sBAAsB,CAAC,WAAW;YAE3ED,YAAYgC,kBAAkB,CAACC,eAAe;YAC9CjC,YAAYgC,kBAAkB,CAACE,cAAc;YAE7C,MAAMO,aAAazC,YAAYgC,kBAAkB,CAACG,aAAa;YAC/DjD,OAAOwD,MAAMC,OAAO,CAACF,aAAanD,IAAI,CAAC;QACzC;IACF;IAEArB,SAAS,sBAAsB;QAC7Ba,KAAK,kCAAkC;YACrC,MAAM8D,uBAAuB1G,KAAKC,EAAE;YACpCN,OAAOC,cAAc,CAACyB,UAAU,oBAAoB;gBAClDtB,OAAO2G;gBACP5G,UAAU;YACZ;YAEAoC,+CAAoB,CAACC,YAAY,CAAC;gBAAEM,yBAAyB;YAAK;YAClEO,OAAO0D,sBAAsB7C,oBAAoB,CAAC,WAAWb,OAAO2D,GAAG,CAACC;QAC1E;QAEAhE,KAAK,+CAA+C;YAClD,MAAMiE,0BAA0B7G,KAAKC,EAAE;YACvCN,OAAOC,cAAc,CAACyB,UAAU,uBAAuB;gBACrDtB,OAAO8G;gBACP/G,UAAU;YACZ;YAEAoC,+CAAoB,CAACC,YAAY,CAAC;gBAAEM,yBAAyB;YAAM;YACnEO,OAAO6D,yBAAyBhD,oBAAoB,CAAC,WAAWb,OAAO2D,GAAG,CAACC;QAC7E;QAEAhE,KAAK,mDAAmD;YACtD,MAAMkE,oBAAoB9G,KAAKC,EAAE;YACjCN,OAAOC,cAAc,CAACyB,UAAU,iBAAiB;gBAC/CtB,OAAO+G;gBACPhH,UAAU;YACZ;YAEA,0BAA0B;YAC1B,MAAMiH,WAAW,IAAIC,cAAc,WAAW;gBAC5CC,QAAQ;gBACRC,MAAM;YACR;YAEA,+CAA+C;YAC/C7F,SAAST,aAAa,CAAC,IAAIuG,YAAY;YACvCnE,OAAO8D,mBAAmBjD,oBAAoB,CAACb,OAAO2D,GAAG,CAACQ;QAC5D;IACF;IAEApF,SAAS,wBAAwB;QAC/Ba,KAAK,+CAA+C;YAClD,MAAME,SAASZ,+CAAoB,CAACa,sBAAsB;YAE1DC,OAAOF,QAAQ4C,cAAc,CAAC;YAC9B1C,OAAOF,QAAQ4C,cAAc,CAAC;YAC9B1C,OAAOF,QAAQ4C,cAAc,CAAC;YAC9B1C,OAAOF,QAAQ4C,cAAc,CAAC;YAC9B1C,OAAOF,QAAQ4C,cAAc,CAAC;YAC9B1C,OAAOF,QAAQ4C,cAAc,CAAC;YAE9B1C,OAAO,OAAOF,OAAOG,oBAAoB,EAAEG,IAAI,CAAC;YAChDJ,OAAO,OAAOF,OAAOK,mBAAmB,EAAEC,IAAI,CAAC;QACjD;QAEAR,KAAK,wCAAwC;YAC3CV,+CAAoB,CAACC,YAAY,CAAC;gBAChCM,yBAAyB;gBACzBD,uBAAuB;YACzB;YAEA,MAAMM,SAASZ,+CAAoB,CAACa,sBAAsB;YAC1DC,OAAOF,OAAOsE,wBAAwB,EAAEhE,IAAI,CAAC;YAC7CJ,OAAOF,OAAOuE,uBAAuB,EAAEjE,IAAI,CAAC;QAC9C;IACF;AACF;AAEArB,SAAS,yBAAyB;IAChCa,KAAK,+CAA+C;QAClD,MAAM,EACJT,YAAY,EACZyB,sBAAsB,EACtBG,sBAAsB,EACtBoB,0BAA0B,EAC1BmC,SAAS,EACThE,oBAAoB,EACpBC,mBAAmB,EACpB,GAAGgE,IAAAA,2CAAgB;QAEpBvE,OAAO,OAAOb,cAAciB,IAAI,CAAC;QACjCJ,OAAO,OAAOY,wBAAwBR,IAAI,CAAC;QAC3CJ,OAAO,OAAOe,wBAAwBX,IAAI,CAAC;QAC3CJ,OAAO,OAAOmC,4BAA4B/B,IAAI,CAAC;QAC/CJ,OAAO,OAAOsE,WAAWlE,IAAI,CAAC;QAC9BJ,OAAO,OAAOM,sBAAsBF,IAAI,CAAC;QACzCJ,OAAO,OAAOO,qBAAqBH,IAAI,CAAC;IAC1C;IAEAR,KAAK,sCAAsC;QACzC,MAAM,EAAET,YAAY,EAAEmF,SAAS,EAAE,GAAGC,IAAAA,2CAAgB;QAEpDpF,aAAa;YAAEO,wBAAwB;QAAO;QAC9C,MAAMI,SAASwE;QAEftE,OAAOF,QAAQI,WAAW;IAC5B;AACF;AAEAnB,SAAS,2CAA2C;IAClDa,KAAK,qDAAqD;QACxD,MAAM4E,eAAexH,KAAKC,EAAE,GAAGwH,iBAAiB,CAAC;QACjD,MAAMC,mBAAmBC,IAAAA,wDAA6B,EAACH,cAAc,WAAW;QAEhF,MAAM5C,SAAS,MAAM8C,iBAAiB,QAAQ;QAE9C1E,OAAOwE,cAAc3D,oBAAoB,CAAC,QAAQ;QAClDb,OAAO4B,QAAQxB,IAAI,CAAC;IACtB;IAEAR,KAAK,sCAAsC;QACzC,MAAM4E,eAAexH,KAAKC,EAAE,GAAG2H,iBAAiB,CAAC,IAAIC,MAAM;QAC3D,MAAMH,mBAAmBC,IAAAA,wDAA6B,EAACH,cAAc,WAAW;QAEhF,MAAMxE,OAAO0E,oBAAoBI,OAAO,CAACnD,OAAO,CAAC;IACnD;IAEA/B,KAAK,6CAA6C;QAChD,MAAM4E,eAAexH,KAAKC,EAAE,GAAGwH,iBAAiB,CAAC;QACjD,MAAMC,mBAAmBC,IAAAA,wDAA6B,EAACH,cAAc,WAAW;QAEhF,MAAMO,cAAc/H,KAAKgI,KAAK,CAAC9F,+CAAoB,EAAE;QAErD,MAAMwF;QAEN1E,OAAO+E,aAAalE,oBAAoB,CACtC,wCACA;QAEFb,OAAO+E,aAAalE,oBAAoB,CACtCb,OAAOiF,gBAAgB,CAAC,0CACxB;IAEJ;IAEArF,KAAK,0CAA0C;QAC7C,MAAM4E,eAAexH,KAAKC,EAAE,GAAGwH,iBAAiB,CAAC;QACjD,MAAMC,mBAAmBC,IAAAA,wDAA6B,EAACH,cAAc,WAAW;QAEhF,MAAMU,aAAalI,KAAKgI,KAAK,CAAC9F,+CAAoB,EAAE;QACpD,MAAMiG,aAAanI,KAAKgI,KAAK,CAAC9F,+CAAoB,EAAE;QAEpD,MAAMwF;QAEN1E,OAAOkF,YAAYzD,gBAAgB;QAEnC,uDAAuD;QACvD,MAAM,IAAI2D,QAAQC,CAAAA,UAAWrH,WAAWqH,SAAS;QACjDrF,OAAOmF,YAAY1D,gBAAgB;IACrC;AACF;AAEA1C,SAAS,qBAAqB;IAC5Ba,KAAK,mCAAmC;QACtC,QAAQ;QACR,MAAM,EAAET,YAAY,EAAE4B,sBAAsB,EAAEuD,SAAS,EAAE,GAAGC,IAAAA,2CAAgB;QAE5E,0BAA0B;QAC1BpF,aAAa;YACXC,sBAAsB;YACtBC,sBAAsB;YACtBG,uBAAuB;QACzB;QAEA,2BAA2B;QAC3B,MAAMsB,cAAcC,uBAAuB,WAAW;QAEtD,mBAAmB;QACnBD,YAAYgC,kBAAkB,CAACC,eAAe;QAC9CjC,YAAY6B,eAAe,CAACC,OAAO;QAEnC,sBAAsB;QACtB,MAAM,IAAIwC,QAAQC,CAAAA,UAAWrH,WAAWqH,SAAS;QAEjD,kBAAkB;QAClBvE,YAAYgC,kBAAkB,CAACE,cAAc;QAC7ClC,YAAY6B,eAAe,CAACE,OAAO;QAEnC,gBAAgB;QAChB,MAAM/C,SAASwE;QACftE,OAAOF,OAAOuE,uBAAuB,EAAEjE,IAAI,CAAC;QAC5CJ,OAAOF,OAAOK,mBAAmB,EAAEC,IAAI,CAAC;IAC1C;IAEAR,KAAK,mDAAmD;QACtD,iCAAiC;QAChC/C,OAAOwD,UAAU,CAAenD,kBAAkB,CAACC,CAAAA,QAAU,CAAA;gBAC5DC,SAASD,MAAME,QAAQ,CAAC;gBACxBC,OAAOH;gBACPO,kBAAkBV,KAAKC,EAAE;gBACzBU,qBAAqBX,KAAKC,EAAE;YAC9B,CAAA;QAEA,MAAM6D,cAAc5B,+CAAoB,CAAC6B,sBAAsB,CAAC,WAAW;QAC3Ef,OAAOc,YAAYoC,kBAAkB,EAAE9C,IAAI,CAAC;QAE5C,qDAAqD;QACrDJ,OAAOc,YAAYE,YAAY,EAAEsE,UAAU;QAC3CtF,OAAOc,YAAY6B,eAAe,EAAEzC,WAAW;IACjD;IAEAN,KAAK,kDAAkD;QACrD,gCAAgC;QAC/B/C,OAAOwD,UAAU,CAAenD,kBAAkB,CAACC,CAAAA,QAAU,CAAA;gBAC5DC,SAASD,MAAME,QAAQ,CAAC;gBACxBC,OAAOH;gBACPO,kBAAkBV,KAAKC,EAAE;gBACzBU,qBAAqBX,KAAKC,EAAE;YAC9B,CAAA;QAEAiC,+CAAoB,CAACC,YAAY,CAAC;YAAEI,wBAAwB;QAAK;QACjE,MAAMO,SAASZ,+CAAoB,CAACa,sBAAsB;QAC1DC,OAAOF,OAAOyF,mBAAmB,EAAEnF,IAAI,CAAC;IAC1C;AACF"}