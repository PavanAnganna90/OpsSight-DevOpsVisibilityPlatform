{"version":3,"sources":["/Users/pavan/Desktop/Devops-app-dev-cursor/frontend/src/components/charts/PipelineExecutionView.tsx"],"sourcesContent":["/**\n * Pipeline Execution View Component\n * \n * Main component for real-time pipeline execution monitoring with:\n * - Real-time WebSocket updates\n * - Gantt chart timeline visualization\n * - Live progress tracking\n * - Interactive pipeline control\n * - Connection status monitoring\n */\n\nimport React, { useState, useEffect, useCallback, useMemo } from 'react';\nimport { PipelineGanttChart, PipelineStage, PipelineJob, PipelineStep } from './PipelineGanttChart';\nimport { ExecutionProgressBar, ExecutionStatus } from './ExecutionProgressBar';\nimport { useWebSocket, PipelineUpdateMessage } from '../../hooks/useWebSocket';\nimport { formatDuration, formatRelativeTime } from '../../utils/time';\nimport { useResponsive } from '../../hooks/useResponsive';\n\nexport interface PipelineRun {\n  id: number;\n  pipeline_id: number;\n  run_number: number;\n  status: ExecutionStatus;\n  started_at: string;\n  finished_at?: string;\n  duration_seconds?: number;\n  branch: string;\n  commit_sha?: string;\n  commit_message?: string;\n  stages?: PipelineStage[];\n}\n\nexport interface PipelineExecutionViewProps {\n  /** Current pipeline run to monitor */\n  pipelineRun?: PipelineRun;\n  /** WebSocket server URL */\n  websocketUrl?: string;\n  /** Authentication token for WebSocket */\n  authToken?: string;\n  /** Whether to show detailed step information */\n  showSteps?: boolean;\n  /** Whether to auto-refresh data */\n  autoRefresh?: boolean;\n  /** Custom className for styling */\n  className?: string;\n  /** Callback when pipeline execution completes */\n  onExecutionComplete?: (run: PipelineRun) => void;\n  /** Callback when an error occurs */\n  onError?: (error: Error) => void;\n}\n\n/**\n * Generate mock pipeline data for demonstration\n */\nconst generateMockPipelineData = (status: ExecutionStatus = 'running'): PipelineStage[] => {\n  const now = new Date();\n  const stages: PipelineStage[] = [\n    {\n      id: 'build',\n      name: 'Build',\n      status: status === 'running' ? 'success' : status,\n      startTime: new Date(now.getTime() - 300000), // 5 minutes ago\n      endTime: status === 'running' ? new Date(now.getTime() - 240000) : new Date(now.getTime() - 240000), // 4 minutes ago\n      duration: 60,\n      progress: 100,\n      jobs: [\n        {\n          id: 'compile',\n          name: 'Compile Code',\n          status: 'success',\n          startTime: new Date(now.getTime() - 300000),\n          endTime: new Date(now.getTime() - 270000),\n          duration: 30,\n          progress: 100,\n          steps: [\n            {\n              id: 'install-deps',\n              name: 'Install Dependencies',\n              status: 'success',\n              startTime: new Date(now.getTime() - 300000),\n              endTime: new Date(now.getTime() - 285000),\n              duration: 15,\n              progress: 100\n            },\n            {\n              id: 'build-app',\n              name: 'Build Application',\n              status: 'success',\n              startTime: new Date(now.getTime() - 285000),\n              endTime: new Date(now.getTime() - 270000),\n              duration: 15,\n              progress: 100\n            }\n          ]\n        },\n        {\n          id: 'lint',\n          name: 'Code Linting',\n          status: 'success',\n          startTime: new Date(now.getTime() - 270000),\n          endTime: new Date(now.getTime() - 240000),\n          duration: 30,\n          progress: 100,\n          steps: [\n            {\n              id: 'eslint',\n              name: 'ESLint Check',\n              status: 'success',\n              startTime: new Date(now.getTime() - 270000),\n              endTime: new Date(now.getTime() - 255000),\n              duration: 15,\n              progress: 100\n            },\n            {\n              id: 'prettier',\n              name: 'Prettier Check',\n              status: 'success',\n              startTime: new Date(now.getTime() - 255000),\n              endTime: new Date(now.getTime() - 240000),\n              duration: 15,\n              progress: 100\n            }\n          ]\n        }\n      ]\n    },\n    {\n      id: 'test',\n      name: 'Test',\n      status: status === 'running' ? 'running' : status,\n      startTime: new Date(now.getTime() - 240000),\n      endTime: status === 'running' ? undefined : new Date(now.getTime() - 120000),\n      duration: status === 'running' ? undefined : 120,\n      progress: status === 'running' ? 75 : 100,\n      jobs: [\n        {\n          id: 'unit-tests',\n          name: 'Unit Tests',\n          status: status === 'running' ? 'success' : status,\n          startTime: new Date(now.getTime() - 240000),\n          endTime: status === 'running' ? new Date(now.getTime() - 180000) : new Date(now.getTime() - 180000),\n          duration: 60,\n          progress: 100,\n          steps: [\n            {\n              id: 'jest-tests',\n              name: 'Jest Tests',\n              status: 'success',\n              startTime: new Date(now.getTime() - 240000),\n              endTime: new Date(now.getTime() - 180000),\n              duration: 60,\n              progress: 100\n            }\n          ]\n        },\n        {\n          id: 'integration-tests',\n          name: 'Integration Tests',\n          status: status === 'running' ? 'running' : status,\n          startTime: new Date(now.getTime() - 180000),\n          endTime: status === 'running' ? undefined : new Date(now.getTime() - 120000),\n          duration: status === 'running' ? undefined : 60,\n          progress: status === 'running' ? 75 : 100,\n          steps: [\n            {\n              id: 'api-tests',\n              name: 'API Tests',\n              status: status === 'running' ? 'running' : status,\n              startTime: new Date(now.getTime() - 180000),\n              endTime: status === 'running' ? undefined : new Date(now.getTime() - 120000),\n              duration: status === 'running' ? undefined : 60,\n              progress: status === 'running' ? 75 : 100\n            }\n          ]\n        }\n      ]\n    },\n    {\n      id: 'deploy',\n      name: 'Deploy',\n      status: status === 'running' ? 'pending' : status,\n      startTime: status === 'running' ? undefined : new Date(now.getTime() - 120000),\n      endTime: status === 'running' ? undefined : new Date(now.getTime() - 60000),\n      duration: status === 'running' ? undefined : 60,\n      progress: status === 'running' ? 0 : 100,\n      jobs: [\n        {\n          id: 'deploy-staging',\n          name: 'Deploy to Staging',\n          status: status === 'running' ? 'pending' : status,\n          startTime: status === 'running' ? undefined : new Date(now.getTime() - 120000),\n          endTime: status === 'running' ? undefined : new Date(now.getTime() - 60000),\n          duration: status === 'running' ? undefined : 60,\n          progress: status === 'running' ? 0 : 100,\n          steps: [\n            {\n              id: 'build-image',\n              name: 'Build Docker Image',\n              status: status === 'running' ? 'pending' : status,\n              startTime: status === 'running' ? undefined : new Date(now.getTime() - 120000),\n              endTime: status === 'running' ? undefined : new Date(now.getTime() - 90000),\n              duration: status === 'running' ? undefined : 30,\n              progress: status === 'running' ? 0 : 100\n            },\n            {\n              id: 'deploy-k8s',\n              name: 'Deploy to Kubernetes',\n              status: status === 'running' ? 'pending' : status,\n              startTime: status === 'running' ? undefined : new Date(now.getTime() - 90000),\n              endTime: status === 'running' ? undefined : new Date(now.getTime() - 60000),\n              duration: status === 'running' ? undefined : 30,\n              progress: status === 'running' ? 0 : 100\n            }\n          ]\n        }\n      ]\n    }\n  ];\n\n  return stages;\n};\n\n/**\n * PipelineExecutionView Component\n */\nexport const PipelineExecutionView: React.FC<PipelineExecutionViewProps> = ({\n  pipelineRun,\n  websocketUrl = 'ws://localhost:8000/ws',\n  authToken,\n  showSteps = true,\n  autoRefresh = true,\n  className = '',\n  onExecutionComplete,\n  onError\n}) => {\n  const { isMobile } = useResponsive();\n  \n  // State\n  const [currentRun, setCurrentRun] = useState<PipelineRun | undefined>(pipelineRun);\n  const [stages, setStages] = useState<PipelineStage[]>([]);\n  const [selectedItem, setSelectedItem] = useState<{\n    item: PipelineStage | PipelineJob | PipelineStep;\n    type: 'stage' | 'job' | 'step';\n  } | null>(null);\n  const [showStepsView, setShowStepsView] = useState(showSteps && !isMobile);\n\n  // WebSocket connection\n  const {\n    connectionStatus,\n    subscribe,\n    lastError,\n    isReconnecting\n  } = useWebSocket({\n    url: websocketUrl,\n    token: authToken,\n    autoConnect: autoRefresh\n  });\n\n  // Handle WebSocket pipeline updates\n  const handlePipelineUpdate = useCallback((message: any) => {\n    // Type guard to ensure this is a pipeline update message\n    if (message.type !== 'pipeline_update' || !currentRun || message.payload.pipeline_id !== currentRun.pipeline_id) {\n      return;\n    }\n\n    // Update pipeline run status\n    if (message.payload.run_id === currentRun.id) {\n      setCurrentRun(prev => prev ? {\n        ...prev,\n        status: message.payload.status as ExecutionStatus,\n        duration_seconds: message.payload.duration\n      } : prev);\n\n      // Check if execution completed\n      if (['success', 'failure', 'cancelled'].includes(message.payload.status) && onExecutionComplete) {\n        onExecutionComplete({\n          ...currentRun,\n          status: message.payload.status as ExecutionStatus,\n          duration_seconds: message.payload.duration,\n          finished_at: new Date().toISOString()\n        });\n      }\n    }\n\n    // Update stage/job/step progress\n    setStages(prevStages => {\n      return prevStages.map(stage => {\n        if (message.payload.stage === stage.name) {\n          return {\n            ...stage,\n            status: message.payload.status as ExecutionStatus,\n            progress: message.payload.progress || stage.progress,\n            duration: message.payload.duration || stage.duration\n          };\n        }\n\n        // Update jobs within stages\n        const updatedJobs = stage.jobs.map(job => {\n          if (message.payload.job === job.name) {\n            return {\n              ...job,\n              status: message.payload.status as ExecutionStatus,\n              progress: message.payload.progress || job.progress,\n              duration: message.payload.duration || job.duration\n            };\n          }\n\n          // Update steps within jobs\n          const updatedSteps = job.steps.map(step => {\n            if (message.payload.step === step.name) {\n              return {\n                ...step,\n                status: message.payload.status as ExecutionStatus,\n                progress: message.payload.progress || step.progress,\n                duration: message.payload.duration || step.duration\n              };\n            }\n            return step;\n          });\n\n          return { ...job, steps: updatedSteps };\n        });\n\n        return { ...stage, jobs: updatedJobs };\n      });\n    });\n  }, [currentRun, onExecutionComplete]);\n\n  // Subscribe to pipeline updates\n  useEffect(() => {\n    if (autoRefresh) {\n      const unsubscribe = subscribe('pipeline_update', handlePipelineUpdate);\n      return unsubscribe;\n    }\n  }, [subscribe, handlePipelineUpdate, autoRefresh]);\n\n  // Handle WebSocket errors\n  useEffect(() => {\n    if (lastError && onError) {\n      onError(lastError);\n    }\n  }, [lastError, onError]);\n\n  // Initialize mock data or use provided pipeline run\n  useEffect(() => {\n    if (pipelineRun) {\n      setCurrentRun(pipelineRun);\n      setStages(pipelineRun.stages || generateMockPipelineData(pipelineRun.status));\n    } else {\n      // Generate mock data for demonstration\n      setStages(generateMockPipelineData('running'));\n      setCurrentRun({\n        id: 1,\n        pipeline_id: 1,\n        run_number: 42,\n        status: 'running',\n        started_at: new Date(Date.now() - 300000).toISOString(),\n        branch: 'main',\n        commit_sha: 'abc123def456',\n        commit_message: 'feat: add real-time pipeline execution view'\n      });\n    }\n  }, [pipelineRun]);\n\n  // Calculate overall progress\n  const overallProgress = useMemo(() => {\n    if (stages.length === 0) return 0;\n    \n    const totalProgress = stages.reduce((sum, stage) => sum + stage.progress, 0);\n    return Math.round(totalProgress / stages.length);\n  }, [stages]);\n\n  // Calculate total duration\n  const totalDuration = useMemo(() => {\n    if (!currentRun?.started_at) return undefined;\n    \n    const startTime = new Date(currentRun.started_at);\n    const endTime = currentRun.finished_at ? new Date(currentRun.finished_at) : new Date();\n    \n    return Math.floor((endTime.getTime() - startTime.getTime()) / 1000);\n  }, [currentRun]);\n\n  // Handle item selection\n  const handleItemClick = useCallback((\n    item: PipelineStage | PipelineJob | PipelineStep,\n    type: 'stage' | 'job' | 'step'\n  ) => {\n    setSelectedItem({ item, type });\n  }, []);\n\n  if (!currentRun) {\n    return (\n      <div className={`pipeline-execution-view ${className} p-8`}>\n        <div className=\"text-center text-gray-500 dark:text-gray-400\">\n          No pipeline execution data available\n        </div>\n      </div>\n    );\n  }\n\n  return (\n    <div className={`pipeline-execution-view ${className} space-y-6`}>\n      {/* Header */}\n      <div className=\"bg-white dark:bg-gray-800 rounded-lg border border-gray-200 dark:border-gray-700 p-6\">\n        <div className=\"flex flex-col lg:flex-row lg:items-center lg:justify-between space-y-4 lg:space-y-0\">\n          <div className=\"space-y-2\">\n            <div className=\"flex items-center space-x-3\">\n              <h2 className=\"text-xl font-semibold text-gray-900 dark:text-white\">\n                Pipeline Run #{currentRun.run_number}\n              </h2>\n              <span className={`px-3 py-1 text-sm rounded-full capitalize ${\n                currentRun.status === 'success' ? 'bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-200' :\n                currentRun.status === 'failure' ? 'bg-red-100 text-red-800 dark:bg-red-900 dark:text-red-200' :\n                currentRun.status === 'running' ? 'bg-blue-100 text-blue-800 dark:bg-blue-900 dark:text-blue-200' :\n                'bg-gray-100 text-gray-800 dark:bg-gray-900 dark:text-gray-200'\n              }`}>\n                {currentRun.status}\n              </span>\n              {autoRefresh && (\n                <div className={`flex items-center space-x-2 text-sm ${\n                  connectionStatus === 'connected' ? 'text-green-600 dark:text-green-400' :\n                  connectionStatus === 'connecting' || isReconnecting ? 'text-yellow-600 dark:text-yellow-400' :\n                  'text-red-600 dark:text-red-400'\n                }`}>\n                  <div className={`w-2 h-2 rounded-full ${\n                    connectionStatus === 'connected' ? 'bg-green-500' :\n                    connectionStatus === 'connecting' || isReconnecting ? 'bg-yellow-500 animate-pulse' :\n                    'bg-red-500'\n                  }`} />\n                  <span>\n                    {connectionStatus === 'connected' ? 'Live' :\n                     connectionStatus === 'connecting' ? 'Connecting...' :\n                     isReconnecting ? 'Reconnecting...' :\n                     'Disconnected'}\n                  </span>\n                </div>\n              )}\n            </div>\n            \n            <div className=\"flex flex-wrap items-center gap-4 text-sm text-gray-600 dark:text-gray-400\">\n              <span>Branch: {currentRun.branch}</span>\n              {currentRun.commit_sha && (\n                <span>Commit: {currentRun.commit_sha.substring(0, 8)}</span>\n              )}\n              <span>Started: {formatRelativeTime(currentRun.started_at)}</span>\n              {totalDuration && (\n                <span>Duration: {formatDuration(totalDuration)}</span>\n              )}\n            </div>\n            \n            {currentRun.commit_message && (\n              <p className=\"text-sm text-gray-700 dark:text-gray-300 mt-2\">\n                {currentRun.commit_message}\n              </p>\n            )}\n          </div>\n\n          <div className=\"flex flex-col lg:items-end space-y-2\">\n            <div className=\"flex items-center space-x-4\">\n              <button\n                onClick={() => setShowStepsView(!showStepsView)}\n                className=\"px-3 py-1 text-sm bg-gray-100 dark:bg-gray-700 text-gray-700 dark:text-gray-300 rounded hover:bg-gray-200 dark:hover:bg-gray-600 transition-colors\"\n              >\n                {showStepsView ? 'Hide Steps' : 'Show Steps'}\n              </button>\n            </div>\n            \n            <div className=\"w-64\">\n              <ExecutionProgressBar\n                progress={overallProgress}\n                status={currentRun.status}\n                duration={totalDuration}\n                name=\"Overall Progress\"\n                showDetails={false}\n              />\n            </div>\n          </div>\n        </div>\n      </div>\n\n      {/* Gantt Chart */}\n      <PipelineGanttChart\n        stages={stages}\n        totalDuration={totalDuration}\n        showSteps={showStepsView}\n        onItemClick={handleItemClick}\n        className=\"shadow-sm\"\n      />\n\n      {/* Selected Item Details */}\n      {selectedItem && (\n        <div className=\"bg-white dark:bg-gray-800 rounded-lg border border-gray-200 dark:border-gray-700 p-6\">\n          <div className=\"flex items-center justify-between mb-4\">\n            <h3 className=\"text-lg font-semibold text-gray-900 dark:text-white\">\n              {selectedItem.type.charAt(0).toUpperCase() + selectedItem.type.slice(1)} Details\n            </h3>\n            <button\n              onClick={() => setSelectedItem(null)}\n              className=\"text-gray-400 hover:text-gray-600 dark:hover:text-gray-300\"\n            >\n              <svg className=\"w-5 h-5\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n                <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M6 18L18 6M6 6l12 12\" />\n              </svg>\n            </button>\n          </div>\n          \n          <div className=\"grid grid-cols-1 md:grid-cols-2 gap-4\">\n            <div>\n              <h4 className=\"font-medium text-gray-900 dark:text-white mb-2\">\n                {selectedItem.item.name}\n              </h4>\n              <div className=\"space-y-1 text-sm text-gray-600 dark:text-gray-400\">\n                <div>Status: <span className=\"capitalize\">{selectedItem.item.status}</span></div>\n                <div>Progress: {selectedItem.item.progress}%</div>\n                {selectedItem.item.duration && (\n                  <div>Duration: {formatDuration(selectedItem.item.duration)}</div>\n                )}\n                {selectedItem.item.startTime && (\n                  <div>Started: {formatRelativeTime(selectedItem.item.startTime)}</div>\n                )}\n                {selectedItem.item.endTime && (\n                  <div>Finished: {formatRelativeTime(selectedItem.item.endTime)}</div>\n                )}\n              </div>\n            </div>\n            \n            <div>\n              <ExecutionProgressBar\n                progress={selectedItem.item.progress}\n                status={selectedItem.item.status}\n                duration={selectedItem.item.duration}\n                name={selectedItem.item.name}\n                size=\"lg\"\n              />\n            </div>\n          </div>\n        </div>\n      )}\n    </div>\n  );\n};\n\nexport default PipelineExecutionView; "],"names":["PipelineExecutionView","generateMockPipelineData","status","now","Date","stages","id","name","startTime","getTime","endTime","duration","progress","jobs","steps","undefined","pipelineRun","websocketUrl","authToken","showSteps","autoRefresh","className","onExecutionComplete","onError","isMobile","useResponsive","currentRun","setCurrentRun","useState","setStages","selectedItem","setSelectedItem","showStepsView","setShowStepsView","connectionStatus","subscribe","lastError","isReconnecting","useWebSocket","url","token","autoConnect","handlePipelineUpdate","useCallback","message","type","payload","pipeline_id","run_id","prev","duration_seconds","includes","finished_at","toISOString","prevStages","map","stage","updatedJobs","job","updatedSteps","step","useEffect","unsubscribe","run_number","started_at","branch","commit_sha","commit_message","overallProgress","useMemo","length","totalProgress","reduce","sum","Math","round","totalDuration","floor","handleItemClick","item","div","h2","span","substring","formatRelativeTime","formatDuration","p","button","onClick","ExecutionProgressBar","showDetails","PipelineGanttChart","onItemClick","h3","charAt","toUpperCase","slice","svg","fill","stroke","viewBox","path","strokeLinecap","strokeLinejoin","strokeWidth","d","h4","size"],"mappings":"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"}