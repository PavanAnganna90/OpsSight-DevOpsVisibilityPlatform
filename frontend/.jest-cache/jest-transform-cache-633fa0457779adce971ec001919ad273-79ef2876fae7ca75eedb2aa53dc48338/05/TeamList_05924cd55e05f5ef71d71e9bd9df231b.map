{"version":3,"sources":["/Users/pavan/Desktop/Devops-app-dev-cursor/frontend/src/components/teams/TeamList.tsx"],"sourcesContent":["/**\n * Team List Component\n * \n * Displays a list of teams with filtering, sorting, and management options.\n * Follows existing UI patterns and provides team overview functionality.\n */\n\nimport React, { useState, useEffect, useCallback } from 'react';\nimport { \n  Team, \n  TeamFilter, \n  TeamSortOptions, \n  TeamListResponse,\n  TeamRole \n} from '@/types/team';\nimport { teamApi } from '@/services/teamApi';\nimport { useTeamPermissions } from '@/hooks/usePermissions';\nimport { PermissionGuard } from '@/components/rbac/PermissionGuard';\nimport { Button } from '@/components/ui';\nimport { StatusIndicator } from '@/components/ui/StatusIndicator';\nimport { LoadingSkeleton } from '@/components/ui/LoadingSkeleton';\n\ninterface TeamListProps {\n  onTeamSelect?: (team: Team) => void;\n  onCreateTeam?: () => void;\n  onEditTeam?: (team: Team) => void;\n  showActions?: boolean;\n  compact?: boolean;\n}\n\n/**\n * Team List Component\n * \n * @param onTeamSelect - Callback when a team is selected\n * @param onCreateTeam - Callback when create team is clicked\n * @param onEditTeam - Callback when edit team is clicked\n * @param showActions - Whether to show action buttons\n * @param compact - Whether to use compact display\n */\nexport const TeamList: React.FC<TeamListProps> = ({\n  onTeamSelect,\n  onCreateTeam,\n  onEditTeam,\n  showActions = true,\n  compact = false\n}) => {\n  const [teams, setTeams] = useState<Team[]>([]);\n  const [loading, setLoading] = useState(true);\n  const [error, setError] = useState<string | null>(null);\n  const [filter, setFilter] = useState<TeamFilter>({});\n  const [sort, setSort] = useState<TeamSortOptions>({\n    field: 'name',\n    direction: 'asc'\n  });\n  const [currentPage, setCurrentPage] = useState(1);\n  const [totalPages, setTotalPages] = useState(1);\n  const [searchQuery, setSearchQuery] = useState('');\n  \n  const teamPerms = useTeamPermissions();\n  \n  // Early return if user can't view teams\n  if (!teamPerms.canViewTeams) {\n    return null;\n  }\n\n  /**\n   * Fetch teams from API\n   */\n  const fetchTeams = useCallback(async () => {\n    try {\n      setLoading(true);\n      setError(null);\n\n      const response: TeamListResponse = await teamApi.getTeams(\n        filter,\n        sort,\n        currentPage,\n        20 // items per page\n      );\n\n      setTeams(response.teams);\n      setTotalPages(response.pages);\n    } catch (err) {\n      setError(err instanceof Error ? err.message : 'Failed to load teams');\n      console.error('Failed to fetch teams:', err);\n    } finally {\n      setLoading(false);\n    }\n  }, [filter, sort, currentPage]);\n\n  /**\n   * Handle search input change\n   */\n  const handleSearchChange = (event: React.ChangeEvent<HTMLInputElement>) => {\n    const query = event.target.value;\n    setSearchQuery(query);\n    \n    // Debounce search\n    setTimeout(() => {\n      setFilter(prev => ({\n        ...prev,\n        search: query || undefined\n      }));\n      setCurrentPage(1);\n    }, 300);\n  };\n\n  /**\n   * Format team member count\n   */\n  const formatMemberCount = (count: number = 0): string => {\n    return count === 1 ? '1 member' : `${count} members`;\n  };\n\n  // Initial load and refetch on dependencies\n  useEffect(() => {\n    fetchTeams();\n  }, [fetchTeams]);\n\n  if (loading && teams.length === 0) {\n    return (\n      <div className=\"space-y-4\">\n        <LoadingSkeleton className=\"h-8 w-full\" />\n        <LoadingSkeleton className=\"h-24 w-full\" />\n        <LoadingSkeleton className=\"h-24 w-full\" />\n        <LoadingSkeleton className=\"h-24 w-full\" />\n      </div>\n    );\n  }\n\n  if (error) {\n    return (\n      <div className=\"text-center py-8\">\n        <div className=\"text-red-600 dark:text-red-400 mb-4\">\n          <svg className=\"w-12 h-12 mx-auto mb-2\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n            <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M12 8v4m0 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z\" />\n          </svg>\n          Error loading teams\n        </div>\n        <p className=\"text-gray-600 dark:text-gray-400 mb-4\">{error}</p>\n        <Button onClick={fetchTeams} variant=\"outline\">\n          Try Again\n        </Button>\n      </div>\n    );\n  }\n\n  return (\n    <div className=\"space-y-6\">\n      {/* Header */}\n      <div className=\"flex flex-col sm:flex-row gap-4 justify-between items-start sm:items-center\">\n        <div>\n          <h2 className=\"text-2xl font-bold text-gray-900 dark:text-white\">\n            Teams\n          </h2>\n          <p className=\"text-gray-600 dark:text-gray-400\">\n            Manage team access and collaboration\n          </p>\n        </div>\n        \n        {showActions && onCreateTeam && (\n          <PermissionGuard permission=\"create_teams\">\n            <Button \n              onClick={onCreateTeam} \n              className=\"flex items-center gap-2\"\n            >\n              <svg className=\"w-4 h-4\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n                <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M12 4v16m8-8H4\" />\n              </svg>\n              Create Team\n            </Button>\n          </PermissionGuard>\n        )}\n      </div>\n\n      {/* Search and Filters */}\n      <div className=\"flex flex-col sm:flex-row gap-4\">\n        <div className=\"flex-1\">\n          <input\n            type=\"text\"\n            placeholder=\"Search teams...\"\n            value={searchQuery}\n            onChange={handleSearchChange}\n            className=\"w-full px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg \n                     bg-white dark:bg-gray-800 text-gray-900 dark:text-white\n                     focus:ring-2 focus:ring-blue-500 focus:border-transparent\"\n          />\n        </div>\n      </div>\n\n      {/* Teams Grid */}\n      <div className={`grid gap-4 ${compact ? 'grid-cols-1' : 'grid-cols-1 md:grid-cols-2 lg:grid-cols-3'}`}>\n        {teams.map((team) => (\n          <div\n            key={team.id}\n            className=\"bg-white dark:bg-gray-800 rounded-lg border border-gray-200 dark:border-gray-700\n                     hover:shadow-md transition-shadow cursor-pointer\"\n            onClick={() => onTeamSelect?.(team)}\n          >\n            <div className=\"p-6\">\n              {/* Team Header */}\n              <div className=\"flex items-start justify-between mb-4\">\n                <div className=\"flex-1\">\n                  <h3 className=\"text-lg font-semibold text-gray-900 dark:text-white mb-1\">\n                    {team.display_name || team.name}\n                  </h3>\n                  <p className=\"text-sm text-gray-500 dark:text-gray-400\">\n                    @{team.slug}\n                  </p>\n                </div>\n                \n                <StatusIndicator \n                  status={team.is_active ? 'success' : 'warning'}\n                  size=\"sm\"\n                />\n              </div>\n\n              {/* Team Description */}\n              {team.description && (\n                <p className=\"text-gray-600 dark:text-gray-400 text-sm mb-4 line-clamp-2\">\n                  {team.description}\n                </p>\n              )}\n\n              {/* Team Stats */}\n              <div className=\"flex items-center justify-between text-sm\">\n                <span className=\"text-gray-500 dark:text-gray-400\">\n                  {formatMemberCount(team.member_count)}\n                </span>\n                \n                <div className=\"flex items-center gap-2\">\n                  {team.settings.visibility && (\n                    <span className={`px-2 py-1 rounded-full text-xs font-medium\n                      ${team.settings.visibility === 'public' \n                        ? 'bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-200'\n                        : team.settings.visibility === 'private'\n                        ? 'bg-red-100 text-red-800 dark:bg-red-900 dark:text-red-200'\n                        : 'bg-blue-100 text-blue-800 dark:bg-blue-900 dark:text-blue-200'\n                      }`}\n                    >\n                      {team.settings.visibility}\n                    </span>\n                  )}\n                </div>\n              </div>\n\n              {/* Action Buttons */}\n              {showActions && (\n                <div className=\"flex gap-2 mt-4 pt-4 border-t border-gray-200 dark:border-gray-700\">\n                  <PermissionGuard permission=\"update_teams\">\n                    <Button\n                      size=\"sm\"\n                      variant=\"outline\"\n                      onClick={(e: React.MouseEvent) => {\n                        e.stopPropagation();\n                        onEditTeam?.(team);\n                      }}\n                      className=\"flex-1\"\n                    >\n                      Manage\n                    </Button>\n                  </PermissionGuard>\n                  <Button\n                    size=\"sm\"\n                    onClick={(e: React.MouseEvent) => {\n                      e.stopPropagation();\n                      onTeamSelect?.(team);\n                    }}\n                    className=\"flex-1\"\n                  >\n                    View\n                  </Button>\n                </div>\n              )}\n            </div>\n          </div>\n        ))}\n      </div>\n\n      {/* Empty State */}\n      {teams.length === 0 && !loading && (\n        <div className=\"text-center py-12\">\n          <svg className=\"w-12 h-12 mx-auto mb-4 text-gray-400\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n            <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M17 20h5v-2a3 3 0 00-5.356-1.857M17 20H7m10 0v-2c0-.656-.126-1.283-.356-1.857M7 20H2v-2a3 3 0 015.356-1.857M7 20v-2c0-.656.126-1.283.356-1.857m0 0a5.002 5.002 0 019.288 0M15 7a3 3 0 11-6 0 3 3 0 016 0zm6 3a2 2 0 11-4 0 2 2 0 014 0zM7 10a2 2 0 11-4 0 2 2 0 014 0z\" />\n          </svg>\n          <h3 className=\"text-lg font-medium text-gray-900 dark:text-white mb-2\">\n            No teams found\n          </h3>\n          <p className=\"text-gray-600 dark:text-gray-400 mb-4\">\n            {searchQuery ? 'Try adjusting your search criteria.' : 'Get started by creating your first team.'}\n          </p>\n          {onCreateTeam && !searchQuery && (\n            <PermissionGuard permission=\"create_teams\">\n              <Button onClick={onCreateTeam}>\n                Create Your First Team\n              </Button>\n            </PermissionGuard>\n          )}\n        </div>\n      )}\n\n      {/* Pagination */}\n      {totalPages > 1 && (\n        <div className=\"flex justify-center items-center gap-2\">\n          <Button\n            variant=\"outline\"\n            size=\"sm\"\n            disabled={currentPage === 1}\n            onClick={() => setCurrentPage(prev => Math.max(1, prev - 1))}\n          >\n            Previous\n          </Button>\n          \n          <span className=\"text-sm text-gray-600 dark:text-gray-400\">\n            Page {currentPage} of {totalPages}\n          </span>\n          \n          <Button\n            variant=\"outline\"\n            size=\"sm\"\n            disabled={currentPage === totalPages}\n            onClick={() => setCurrentPage(prev => Math.min(totalPages, prev + 1))}\n          >\n            Next\n          </Button>\n        </div>\n      )}\n    </div>\n  );\n}; "],"names":["TeamList","onTeamSelect","onCreateTeam","onEditTeam","showActions","compact","teams","setTeams","useState","loading","setLoading","error","setError","filter","setFilter","sort","setSort","field","direction","currentPage","setCurrentPage","totalPages","setTotalPages","searchQuery","setSearchQuery","teamPerms","useTeamPermissions","canViewTeams","fetchTeams","useCallback","response","teamApi","getTeams","pages","err","Error","message","console","handleSearchChange","event","query","target","value","setTimeout","prev","search","undefined","formatMemberCount","count","useEffect","length","div","className","LoadingSkeleton","svg","fill","stroke","viewBox","path","strokeLinecap","strokeLinejoin","strokeWidth","d","p","Button","onClick","variant","h2","PermissionGuard","permission","input","type","placeholder","onChange","map","team","h3","display_name","name","slug","StatusIndicator","status","is_active","size","description","span","member_count","settings","visibility","e","stopPropagation","id","disabled","Math","max","min"],"mappings":"AAAA;;;;;CAKC;;;;+BAkCYA;;;eAAAA;;;;+DAhC2C;yBAQhC;gCACW;iCACH;oBACT;iCACS;iCACA;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAmBzB,MAAMA,WAAoC,CAAC,EAChDC,YAAY,EACZC,YAAY,EACZC,UAAU,EACVC,cAAc,IAAI,EAClBC,UAAU,KAAK,EAChB;IACC,MAAM,CAACC,OAAOC,SAAS,GAAGC,IAAAA,eAAQ,EAAS,EAAE;IAC7C,MAAM,CAACC,SAASC,WAAW,GAAGF,IAAAA,eAAQ,EAAC;IACvC,MAAM,CAACG,OAAOC,SAAS,GAAGJ,IAAAA,eAAQ,EAAgB;IAClD,MAAM,CAACK,QAAQC,UAAU,GAAGN,IAAAA,eAAQ,EAAa,CAAC;IAClD,MAAM,CAACO,MAAMC,QAAQ,GAAGR,IAAAA,eAAQ,EAAkB;QAChDS,OAAO;QACPC,WAAW;IACb;IACA,MAAM,CAACC,aAAaC,eAAe,GAAGZ,IAAAA,eAAQ,EAAC;IAC/C,MAAM,CAACa,YAAYC,cAAc,GAAGd,IAAAA,eAAQ,EAAC;IAC7C,MAAM,CAACe,aAAaC,eAAe,GAAGhB,IAAAA,eAAQ,EAAC;IAE/C,MAAMiB,YAAYC,IAAAA,kCAAkB;IAEpC,wCAAwC;IACxC,IAAI,CAACD,UAAUE,YAAY,EAAE;QAC3B,OAAO;IACT;IAEA;;GAEC,GACD,MAAMC,aAAaC,IAAAA,kBAAW,EAAC;QAC7B,IAAI;YACFnB,WAAW;YACXE,SAAS;YAET,MAAMkB,WAA6B,MAAMC,gBAAO,CAACC,QAAQ,CACvDnB,QACAE,MACAI,aACA,GAAG,iBAAiB;;YAGtBZ,SAASuB,SAASxB,KAAK;YACvBgB,cAAcQ,SAASG,KAAK;QAC9B,EAAE,OAAOC,KAAK;YACZtB,SAASsB,eAAeC,QAAQD,IAAIE,OAAO,GAAG;YAC9CC,QAAQ1B,KAAK,CAAC,0BAA0BuB;QAC1C,SAAU;YACRxB,WAAW;QACb;IACF,GAAG;QAACG;QAAQE;QAAMI;KAAY;IAE9B;;GAEC,GACD,MAAMmB,qBAAqB,CAACC;QAC1B,MAAMC,QAAQD,MAAME,MAAM,CAACC,KAAK;QAChClB,eAAegB;QAEf,kBAAkB;QAClBG,WAAW;YACT7B,UAAU8B,CAAAA,OAAS,CAAA;oBACjB,GAAGA,IAAI;oBACPC,QAAQL,SAASM;gBACnB,CAAA;YACA1B,eAAe;QACjB,GAAG;IACL;IAEA;;GAEC,GACD,MAAM2B,oBAAoB,CAACC,QAAgB,CAAC;QAC1C,OAAOA,UAAU,IAAI,aAAa,GAAGA,MAAM,QAAQ,CAAC;IACtD;IAEA,2CAA2C;IAC3CC,IAAAA,gBAAS,EAAC;QACRrB;IACF,GAAG;QAACA;KAAW;IAEf,IAAInB,WAAWH,MAAM4C,MAAM,KAAK,GAAG;QACjC,qBACE,sBAACC;YAAIC,WAAU;;8BACb,qBAACC,gCAAe;oBAACD,WAAU;;8BAC3B,qBAACC,gCAAe;oBAACD,WAAU;;8BAC3B,qBAACC,gCAAe;oBAACD,WAAU;;8BAC3B,qBAACC,gCAAe;oBAACD,WAAU;;;;IAGjC;IAEA,IAAIzC,OAAO;QACT,qBACE,sBAACwC;YAAIC,WAAU;;8BACb,sBAACD;oBAAIC,WAAU;;sCACb,qBAACE;4BAAIF,WAAU;4BAAyBG,MAAK;4BAAOC,QAAO;4BAAeC,SAAQ;sCAChF,cAAA,qBAACC;gCAAKC,eAAc;gCAAQC,gBAAe;gCAAQC,aAAa;gCAAGC,GAAE;;;wBACjE;;;8BAGR,qBAACC;oBAAEX,WAAU;8BAAyCzC;;8BACtD,qBAACqD,UAAM;oBAACC,SAASrC;oBAAYsC,SAAQ;8BAAU;;;;IAKrD;IAEA,qBACE,sBAACf;QAAIC,WAAU;;0BAEb,sBAACD;gBAAIC,WAAU;;kCACb,sBAACD;;0CACC,qBAACgB;gCAAGf,WAAU;0CAAmD;;0CAGjE,qBAACW;gCAAEX,WAAU;0CAAmC;;;;oBAKjDhD,eAAeF,8BACd,qBAACkE,gCAAe;wBAACC,YAAW;kCAC1B,cAAA,sBAACL,UAAM;4BACLC,SAAS/D;4BACTkD,WAAU;;8CAEV,qBAACE;oCAAIF,WAAU;oCAAUG,MAAK;oCAAOC,QAAO;oCAAeC,SAAQ;8CACjE,cAAA,qBAACC;wCAAKC,eAAc;wCAAQC,gBAAe;wCAAQC,aAAa;wCAAGC,GAAE;;;gCACjE;;;;;;0BAQd,qBAACX;gBAAIC,WAAU;0BACb,cAAA,qBAACD;oBAAIC,WAAU;8BACb,cAAA,qBAACkB;wBACCC,MAAK;wBACLC,aAAY;wBACZ9B,OAAOnB;wBACPkD,UAAUnC;wBACVc,WAAU;;;;0BAQhB,qBAACD;gBAAIC,WAAW,CAAC,WAAW,EAAE/C,UAAU,gBAAgB,6CAA6C;0BAClGC,MAAMoE,GAAG,CAAC,CAACC,qBACV,qBAACxB;wBAECC,WAAU;wBAEVa,SAAS,IAAMhE,eAAe0E;kCAE9B,cAAA,sBAACxB;4BAAIC,WAAU;;8CAEb,sBAACD;oCAAIC,WAAU;;sDACb,sBAACD;4CAAIC,WAAU;;8DACb,qBAACwB;oDAAGxB,WAAU;8DACXuB,KAAKE,YAAY,IAAIF,KAAKG,IAAI;;8DAEjC,sBAACf;oDAAEX,WAAU;;wDAA2C;wDACpDuB,KAAKI,IAAI;;;;;sDAIf,qBAACC,gCAAe;4CACdC,QAAQN,KAAKO,SAAS,GAAG,YAAY;4CACrCC,MAAK;;;;gCAKRR,KAAKS,WAAW,kBACf,qBAACrB;oCAAEX,WAAU;8CACVuB,KAAKS,WAAW;;8CAKrB,sBAACjC;oCAAIC,WAAU;;sDACb,qBAACiC;4CAAKjC,WAAU;sDACbL,kBAAkB4B,KAAKW,YAAY;;sDAGtC,qBAACnC;4CAAIC,WAAU;sDACZuB,KAAKY,QAAQ,CAACC,UAAU,kBACvB,qBAACH;gDAAKjC,WAAW,CAAC;sBAChB,EAAEuB,KAAKY,QAAQ,CAACC,UAAU,KAAK,WAC3B,sEACAb,KAAKY,QAAQ,CAACC,UAAU,KAAK,YAC7B,8DACA,iEACF;0DAEDb,KAAKY,QAAQ,CAACC,UAAU;;;;;gCAOhCpF,6BACC,sBAAC+C;oCAAIC,WAAU;;sDACb,qBAACgB,gCAAe;4CAACC,YAAW;sDAC1B,cAAA,qBAACL,UAAM;gDACLmB,MAAK;gDACLjB,SAAQ;gDACRD,SAAS,CAACwB;oDACRA,EAAEC,eAAe;oDACjBvF,aAAawE;gDACf;gDACAvB,WAAU;0DACX;;;sDAIH,qBAACY,UAAM;4CACLmB,MAAK;4CACLlB,SAAS,CAACwB;gDACRA,EAAEC,eAAe;gDACjBzF,eAAe0E;4CACjB;4CACAvB,WAAU;sDACX;;;;;;uBA3EFuB,KAAKgB,EAAE;;YAsFjBrF,MAAM4C,MAAM,KAAK,KAAK,CAACzC,yBACtB,sBAAC0C;gBAAIC,WAAU;;kCACb,qBAACE;wBAAIF,WAAU;wBAAuCG,MAAK;wBAAOC,QAAO;wBAAeC,SAAQ;kCAC9F,cAAA,qBAACC;4BAAKC,eAAc;4BAAQC,gBAAe;4BAAQC,aAAa;4BAAGC,GAAE;;;kCAEvE,qBAACc;wBAAGxB,WAAU;kCAAyD;;kCAGvE,qBAACW;wBAAEX,WAAU;kCACV7B,cAAc,wCAAwC;;oBAExDrB,gBAAgB,CAACqB,6BAChB,qBAAC6C,gCAAe;wBAACC,YAAW;kCAC1B,cAAA,qBAACL,UAAM;4BAACC,SAAS/D;sCAAc;;;;;YAStCmB,aAAa,mBACZ,sBAAC8B;gBAAIC,WAAU;;kCACb,qBAACY,UAAM;wBACLE,SAAQ;wBACRiB,MAAK;wBACLS,UAAUzE,gBAAgB;wBAC1B8C,SAAS,IAAM7C,eAAewB,CAAAA,OAAQiD,KAAKC,GAAG,CAAC,GAAGlD,OAAO;kCAC1D;;kCAID,sBAACyC;wBAAKjC,WAAU;;4BAA2C;4BACnDjC;4BAAY;4BAAKE;;;kCAGzB,qBAAC2C,UAAM;wBACLE,SAAQ;wBACRiB,MAAK;wBACLS,UAAUzE,gBAAgBE;wBAC1B4C,SAAS,IAAM7C,eAAewB,CAAAA,OAAQiD,KAAKE,GAAG,CAAC1E,YAAYuB,OAAO;kCACnE;;;;;;AAOX"}