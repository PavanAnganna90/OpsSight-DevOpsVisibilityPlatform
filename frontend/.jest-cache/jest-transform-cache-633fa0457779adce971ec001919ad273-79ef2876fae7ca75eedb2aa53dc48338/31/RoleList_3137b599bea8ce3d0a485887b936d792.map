{"version":3,"sources":["/Users/pavan/Desktop/Devops-app-dev-cursor/frontend/src/components/admin/RoleList.tsx"],"sourcesContent":["import React, { useState, useEffect, useRef } from 'react';\n\n/**\n * RoleList - List of roles with advanced keyboard navigation and accessibility.\n *\n * Props:\n *   roles: array of role objects\n *   onSelect: function(role)\n */\nconst RoleList = ({ roles = [], onSelect }: { roles?: any[]; onSelect: (role: any) => void }) => {\n  const [activeIdx, setActiveIdx] = useState(0);\n  const listRef = useRef<HTMLUListElement>(null);\n\n  // Reset active index if roles change\n  useEffect(() => {\n    setActiveIdx(0);\n  }, [roles?.length]);\n\n  // Focus the active item when activeIdx changes\n  useEffect(() => {\n    if (listRef.current && roles && roles.length > 0) {\n      const item = listRef.current.querySelectorAll('[role=\"option\"]')[activeIdx] as HTMLElement;\n      if (item) item.focus();\n    }\n  }, [activeIdx, roles]);\n\n  if (!roles || roles.length === 0) {\n    return (\n      <div aria-live=\"polite\" className=\"text-gray-500 p-4 text-center\">\n        No roles found. Create a new role to get started.\n      </div>\n    );\n  }\n\n  const handleKeyDown = (e: React.KeyboardEvent) => {\n    if (!roles || roles.length === 0) return;\n    if (e.key === 'ArrowDown') {\n      e.preventDefault();\n      setActiveIdx(idx => (idx + 1) % roles.length);\n    } else if (e.key === 'ArrowUp') {\n      e.preventDefault();\n      setActiveIdx(idx => (idx - 1 + roles.length) % roles.length);\n    } else if (e.key === 'Enter' || e.key === ' ') {\n      e.preventDefault();\n      onSelect(roles[activeIdx]);\n    }\n  };\n\n  return (\n    <ul\n      ref={listRef}\n      className=\"divide-y divide-gray-200 dark:divide-gray-700\"\n      role=\"listbox\"\n      aria-activedescendant={roles[activeIdx]?.id ? `role-option-${roles[activeIdx].id}` : undefined}\n      tabIndex={0}\n      onKeyDown={handleKeyDown}\n    >\n      {roles.map((role, idx) => (\n        <li\n          key={role.id}\n          id={`role-option-${role.id}`}\n          role=\"option\"\n          aria-selected={activeIdx === idx}\n          tabIndex={activeIdx === idx ? 0 : -1}\n          className={\n            `py-2 px-3 cursor-pointer rounded ` +\n            (activeIdx === idx\n              ? 'bg-blue-100 dark:bg-blue-900 text-blue-900 dark:text-white focus-visible:ring-2 focus-visible:ring-blue-500'\n              : 'hover:bg-blue-50 dark:hover:bg-gray-800 focus:outline-none focus-visible:ring-2 focus-visible:ring-blue-500')\n          }\n          onClick={() => onSelect(role)}\n          onKeyDown={e => {\n            if (e.key === 'Enter' || e.key === ' ') onSelect(role);\n          }}\n          onFocus={() => setActiveIdx(idx)}\n        >\n          <span className=\"font-medium\">{role.display_name || role.name}</span>\n        </li>\n      ))}\n    </ul>\n  );\n};\n\nexport default RoleList; "],"names":["RoleList","roles","onSelect","activeIdx","setActiveIdx","useState","listRef","useRef","useEffect","length","current","item","querySelectorAll","focus","div","aria-live","className","handleKeyDown","e","key","preventDefault","idx","ul","ref","role","aria-activedescendant","id","undefined","tabIndex","onKeyDown","map","li","aria-selected","onClick","onFocus","span","display_name","name"],"mappings":";;;;+BAmFA;;;eAAA;;;;+DAnFmD;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAEnD;;;;;;CAMC,GACD,MAAMA,WAAW,CAAC,EAAEC,QAAQ,EAAE,EAAEC,QAAQ,EAAoD;IAC1F,MAAM,CAACC,WAAWC,aAAa,GAAGC,IAAAA,eAAQ,EAAC;IAC3C,MAAMC,UAAUC,IAAAA,aAAM,EAAmB;IAEzC,qCAAqC;IACrCC,IAAAA,gBAAS,EAAC;QACRJ,aAAa;IACf,GAAG;QAACH,OAAOQ;KAAO;IAElB,+CAA+C;IAC/CD,IAAAA,gBAAS,EAAC;QACR,IAAIF,QAAQI,OAAO,IAAIT,SAASA,MAAMQ,MAAM,GAAG,GAAG;YAChD,MAAME,OAAOL,QAAQI,OAAO,CAACE,gBAAgB,CAAC,kBAAkB,CAACT,UAAU;YAC3E,IAAIQ,MAAMA,KAAKE,KAAK;QACtB;IACF,GAAG;QAACV;QAAWF;KAAM;IAErB,IAAI,CAACA,SAASA,MAAMQ,MAAM,KAAK,GAAG;QAChC,qBACE,qBAACK;YAAIC,aAAU;YAASC,WAAU;sBAAgC;;IAItE;IAEA,MAAMC,gBAAgB,CAACC;QACrB,IAAI,CAACjB,SAASA,MAAMQ,MAAM,KAAK,GAAG;QAClC,IAAIS,EAAEC,GAAG,KAAK,aAAa;YACzBD,EAAEE,cAAc;YAChBhB,aAAaiB,CAAAA,MAAO,AAACA,CAAAA,MAAM,CAAA,IAAKpB,MAAMQ,MAAM;QAC9C,OAAO,IAAIS,EAAEC,GAAG,KAAK,WAAW;YAC9BD,EAAEE,cAAc;YAChBhB,aAAaiB,CAAAA,MAAO,AAACA,CAAAA,MAAM,IAAIpB,MAAMQ,MAAM,AAAD,IAAKR,MAAMQ,MAAM;QAC7D,OAAO,IAAIS,EAAEC,GAAG,KAAK,WAAWD,EAAEC,GAAG,KAAK,KAAK;YAC7CD,EAAEE,cAAc;YAChBlB,SAASD,KAAK,CAACE,UAAU;QAC3B;IACF;IAEA,qBACE,qBAACmB;QACCC,KAAKjB;QACLU,WAAU;QACVQ,MAAK;QACLC,yBAAuBxB,KAAK,CAACE,UAAU,EAAEuB,KAAK,CAAC,YAAY,EAAEzB,KAAK,CAACE,UAAU,CAACuB,EAAE,EAAE,GAAGC;QACrFC,UAAU;QACVC,WAAWZ;kBAEVhB,MAAM6B,GAAG,CAAC,CAACN,MAAMH,oBAChB,qBAACU;gBAECL,IAAI,CAAC,YAAY,EAAEF,KAAKE,EAAE,EAAE;gBAC5BF,MAAK;gBACLQ,iBAAe7B,cAAckB;gBAC7BO,UAAUzB,cAAckB,MAAM,IAAI,CAAC;gBACnCL,WACE,CAAC,iCAAiC,CAAC,GAClCb,CAAAA,cAAckB,MACX,gHACA,6GAA4G;gBAElHY,SAAS,IAAM/B,SAASsB;gBACxBK,WAAWX,CAAAA;oBACT,IAAIA,EAAEC,GAAG,KAAK,WAAWD,EAAEC,GAAG,KAAK,KAAKjB,SAASsB;gBACnD;gBACAU,SAAS,IAAM9B,aAAaiB;0BAE5B,cAAA,qBAACc;oBAAKnB,WAAU;8BAAeQ,KAAKY,YAAY,IAAIZ,KAAKa,IAAI;;eAjBxDb,KAAKE,EAAE;;AAsBtB;MAEA,WAAe1B"}