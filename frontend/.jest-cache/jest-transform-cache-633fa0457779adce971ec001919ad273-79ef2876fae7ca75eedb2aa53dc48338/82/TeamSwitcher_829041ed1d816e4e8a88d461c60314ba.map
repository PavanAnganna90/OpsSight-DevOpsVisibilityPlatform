{"version":3,"sources":["/Users/pavan/Desktop/Devops-app-dev-cursor/frontend/src/components/dashboard/TeamSwitcher.tsx"],"sourcesContent":["/**\n * Team Switcher Component\n * \n * Dropdown component for switching between user's teams in the dashboard header.\n * Shows current team, available teams, and team management options.\n */\n\nimport React, { useState, useRef, useEffect } from 'react';\nimport { useTeam } from '@/contexts/TeamContext';\nimport { Team, TeamRole } from '@/types/team';\nimport { Button } from '@/components/ui';\n\ninterface TeamSwitcherProps {\n  /** Optional className for custom styling */\n  className?: string;\n  /** Show team management option for admins */\n  showManagement?: boolean;\n  /** Callback when team management is clicked */\n  onManageTeams?: () => void;\n}\n\n/**\n * TeamSwitcher Component\n * \n * Provides a dropdown interface for users to:\n * - View their current team\n * - Switch between available teams\n * - Access team management (for admins)\n * - Create new teams (if permitted)\n * \n * Features:\n * - Keyboard navigation support\n * - Role-based permissions display\n * - Loading states and error handling\n * - Responsive design\n * \n * @param className - Optional CSS classes for styling\n * @param showManagement - Whether to show team management option\n * @param onManageTeams - Callback for team management action\n */\nexport const TeamSwitcher: React.FC<TeamSwitcherProps> = ({\n  className = '',\n  showManagement = true,\n  onManageTeams,\n}) => {\n  const { state, selectTeam } = useTeam();\n  const [isOpen, setIsOpen] = useState(false);\n  const [isChanging, setIsChanging] = useState(false);\n  const dropdownRef = useRef<HTMLDivElement>(null);\n\n  /**\n   * Handle clicking outside dropdown to close it\n   */\n  useEffect(() => {\n    const handleClickOutside = (event: MouseEvent) => {\n      if (dropdownRef.current && !dropdownRef.current.contains(event.target as Node)) {\n        setIsOpen(false);\n      }\n    };\n\n    if (isOpen) {\n      document.addEventListener('mousedown', handleClickOutside);\n      return () => document.removeEventListener('mousedown', handleClickOutside);\n    }\n  }, [isOpen]);\n\n  /**\n   * Handle keyboard navigation\n   */\n  const handleKeyDown = (event: React.KeyboardEvent) => {\n    if (event.key === 'Escape') {\n      setIsOpen(false);\n    }\n  };\n\n  /**\n   * Handle team selection\n   */\n  const handleTeamSelect = async (teamId: number) => {\n    if (teamId === state.currentTeam?.id || isChanging) {\n      setIsOpen(false);\n      return;\n    }\n\n    setIsChanging(true);\n    try {\n      await selectTeam(teamId);\n      setIsOpen(false);\n    } catch (error) {\n      console.error('Failed to switch team:', error);\n    } finally {\n      setIsChanging(false);\n    }\n  };\n\n  /**\n   * Get role display text\n   */\n  const getRoleDisplay = (role: string | null): string => {\n    if (!role) return '';\n    const roleMap: Record<string, string> = {\n      OWNER: 'Owner',\n      ADMIN: 'Admin',\n      MEMBER: 'Member',\n      VIEWER: 'Viewer',\n    };\n    return roleMap[role] || role;\n  };\n\n  /**\n   * Get team initial for avatar\n   */\n  const getTeamInitial = (team: Team): string => {\n    return team.display_name?.[0]?.toUpperCase() || team.name[0]?.toUpperCase() || 'T';\n  };\n\n  // Don't render if no teams or loading\n  if (state.isLoading || !state.currentTeam) {\n    return (\n      <div className={`flex items-center space-x-2 ${className}`}>\n        <div className=\"h-8 w-8 bg-gray-200 dark:bg-gray-700 rounded-lg animate-pulse\" />\n        <div className=\"hidden sm:block\">\n          <div className=\"h-4 w-20 bg-gray-200 dark:bg-gray-700 rounded animate-pulse\" />\n        </div>\n      </div>\n    );\n  }\n\n  return (\n    <div className={`relative ${className}`} ref={dropdownRef}>\n      {/* Team Switcher Button */}\n      <button\n        type=\"button\"\n        onClick={() => setIsOpen(!isOpen)}\n        onKeyDown={handleKeyDown}\n        disabled={isChanging}\n        className=\"flex items-center space-x-3 p-2 rounded-lg text-left w-full\n                 hover:bg-gray-100 dark:hover:bg-gray-700 \n                 focus:outline-none focus:ring-2 focus:ring-blue-500 \n                 disabled:opacity-50 disabled:cursor-not-allowed\n                 transition-colors duration-200\"\n        aria-expanded={isOpen}\n        aria-haspopup=\"true\"\n        aria-label={`Current team: ${state.currentTeam.display_name || state.currentTeam.name}`}\n      >\n        {/* Team Avatar */}\n        <div className=\"flex-shrink-0\">\n          <div className=\"h-8 w-8 bg-blue-600 rounded-lg flex items-center justify-center\">\n            <span className=\"text-white font-medium text-sm\">\n              {getTeamInitial(state.currentTeam)}\n            </span>\n          </div>\n        </div>\n\n        {/* Team Info */}\n        <div className=\"flex-1 min-w-0 hidden sm:block\">\n          <div className=\"text-sm font-medium text-gray-900 dark:text-white truncate\">\n            {state.currentTeam.display_name || state.currentTeam.name}\n          </div>\n          {state.userRole && (\n            <div className=\"text-xs text-gray-500 dark:text-gray-400\">\n              {getRoleDisplay(state.userRole)}\n            </div>\n          )}\n        </div>\n\n        {/* Dropdown Arrow */}\n        <div className=\"flex-shrink-0\">\n          {isChanging ? (\n            <svg className=\"h-4 w-4 text-gray-400 animate-spin\" fill=\"none\" viewBox=\"0 0 24 24\">\n              <circle className=\"opacity-25\" cx=\"12\" cy=\"12\" r=\"10\" stroke=\"currentColor\" strokeWidth=\"4\" />\n              <path className=\"opacity-75\" fill=\"currentColor\" d=\"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z\" />\n            </svg>\n          ) : (\n            <svg \n              className={`h-4 w-4 text-gray-400 transition-transform duration-200 ${isOpen ? 'rotate-180' : ''}`}\n              fill=\"none\" \n              stroke=\"currentColor\" \n              viewBox=\"0 0 24 24\"\n            >\n              <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M19 9l-7 7-7-7\" />\n            </svg>\n          )}\n        </div>\n      </button>\n\n      {/* Dropdown Menu */}\n      {isOpen && (\n        <div className=\"absolute top-full left-0 mt-2 w-64 bg-white dark:bg-gray-800 \n                     rounded-lg shadow-lg border border-gray-200 dark:border-gray-700 \n                     py-2 z-50 max-h-96 overflow-y-auto\">\n          \n          {/* Current Team Section */}\n          <div className=\"px-4 py-2 border-b border-gray-200 dark:border-gray-700\">\n            <div className=\"text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wide\">\n              Current Team\n            </div>\n          </div>\n\n          {/* Teams List */}\n          <div className=\"py-1\">\n            {state.userTeams.map((team) => (\n              <button\n                key={team.id}\n                onClick={() => handleTeamSelect(team.id)}\n                disabled={isChanging}\n                className={`w-full flex items-center space-x-3 px-4 py-3 text-left\n                         hover:bg-gray-50 dark:hover:bg-gray-700 \n                         disabled:opacity-50 disabled:cursor-not-allowed\n                         transition-colors duration-150\n                         ${team.id === state.currentTeam?.id \n                           ? 'bg-blue-50 dark:bg-blue-900/20 text-blue-700 dark:text-blue-300' \n                           : 'text-gray-700 dark:text-gray-300'\n                         }`}\n              >\n                {/* Team Avatar */}\n                <div className=\"flex-shrink-0\">\n                  <div className={`h-6 w-6 rounded flex items-center justify-center\n                                 ${team.id === state.currentTeam?.id \n                                   ? 'bg-blue-600' \n                                   : 'bg-gray-600'\n                                 }`}>\n                    <span className=\"text-white font-medium text-xs\">\n                      {getTeamInitial(team)}\n                    </span>\n                  </div>\n                </div>\n\n                {/* Team Info */}\n                <div className=\"flex-1 min-w-0\">\n                  <div className=\"text-sm font-medium truncate\">\n                    {team.display_name || team.name}\n                  </div>\n                  <div className=\"text-xs opacity-75 flex items-center space-x-2\">\n                    <span>{team.member_count || 0} members</span>\n                    {team.settings.visibility && (\n                      <>\n                        <span>â€¢</span>\n                        <span className=\"capitalize\">{team.settings.visibility}</span>\n                      </>\n                    )}\n                  </div>\n                </div>\n\n                {/* Current Team Indicator */}\n                {team.id === state.currentTeam?.id && (\n                  <div className=\"flex-shrink-0\">\n                    <svg className=\"h-4 w-4 text-blue-600\" fill=\"currentColor\" viewBox=\"0 0 20 20\">\n                      <path fillRule=\"evenodd\" d=\"M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z\" clipRule=\"evenodd\" />\n                    </svg>\n                  </div>\n                )}\n              </button>\n            ))}\n          </div>\n\n          {/* Actions Section */}\n          {showManagement && (\n            <>\n              <div className=\"border-t border-gray-200 dark:border-gray-700 my-1\" />\n              <div className=\"py-1\">\n                <button\n                  onClick={() => {\n                    setIsOpen(false);\n                    onManageTeams?.();\n                  }}\n                  className=\"w-full flex items-center space-x-3 px-4 py-2 text-left text-sm\n                           text-gray-700 dark:text-gray-300 \n                           hover:bg-gray-50 dark:hover:bg-gray-700 \n                           transition-colors duration-150\"\n                >\n                  <svg className=\"h-4 w-4\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n                    <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M10.325 4.317c.426-1.756 2.924-1.756 3.35 0a1.724 1.724 0 002.573 1.066c1.543-.94 3.31.826 2.37 2.37a1.724 1.724 0 001.065 2.572c1.756.426 1.756 2.924 0 3.35a1.724 1.724 0 00-1.066 2.573c.94 1.543-.826 3.31-2.37 2.37a1.724 1.724 0 00-2.572 1.065c-.426 1.756-2.924 1.756-3.35 0a1.724 1.724 0 00-2.573-1.066c-1.543.94-3.31-.826-2.37-2.37a1.724 1.724 0 00-1.065-2.572c-1.756-.426-1.756-2.924 0-3.35a1.724 1.724 0 001.066-2.573c-.94-1.543.826-3.31 2.37-2.37.996.608 2.296.07 2.572-1.065z\" />\n                    <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M15 12a3 3 0 11-6 0 3 3 0 016 0z\" />\n                  </svg>\n                  <span>Manage Teams</span>\n                </button>\n              </div>\n            </>\n          )}\n        </div>\n      )}\n    </div>\n  );\n};\n\nexport default TeamSwitcher; "],"names":["TeamSwitcher","className","showManagement","onManageTeams","state","selectTeam","useTeam","isOpen","setIsOpen","useState","isChanging","setIsChanging","dropdownRef","useRef","useEffect","handleClickOutside","event","current","contains","target","document","addEventListener","removeEventListener","handleKeyDown","key","handleTeamSelect","teamId","currentTeam","id","error","console","getRoleDisplay","role","roleMap","OWNER","ADMIN","MEMBER","VIEWER","getTeamInitial","team","display_name","toUpperCase","name","isLoading","div","ref","button","type","onClick","onKeyDown","disabled","aria-expanded","aria-haspopup","aria-label","span","userRole","svg","fill","viewBox","circle","cx","cy","r","stroke","strokeWidth","path","d","strokeLinecap","strokeLinejoin","userTeams","map","member_count","settings","visibility","fillRule","clipRule"],"mappings":"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"}