{"version":3,"sources":["/Users/pavan/Desktop/Devops-app-dev-cursor/frontend/src/components/dashboard/ContainerLogsViewer.tsx"],"sourcesContent":["/**\n * Container Logs Viewer Component\n * \n * Real-time log streaming component with search, filtering, and color-coded log levels.\n * Features auto-refresh, scroll-to-bottom, and log level filtering.\n */\n\nimport React, { useState, useEffect, useCallback, useRef, useMemo } from 'react';\nimport { Button } from '../ui';\nimport { useResponsive } from '../../hooks/useResponsive';\n\n// Log interfaces\ninterface LogEntry {\n  timestamp: string;\n  level: 'error' | 'warn' | 'info' | 'debug' | 'trace' | 'unknown';\n  message: string;\n  source?: string;\n}\n\ninterface ContainerLogsViewerProps {\n  clusterId: string;\n  podName: string;\n  containerName: string;\n  namespace?: string;\n  maxLines?: number;\n  autoRefresh?: boolean;\n  refreshInterval?: number;\n  onClose?: () => void;\n  className?: string;\n}\n\n/**\n * ContainerLogsViewer Component\n * \n * Displays real-time container logs with filtering, search, and automatic scrolling.\n */\nexport const ContainerLogsViewer: React.FC<ContainerLogsViewerProps> = ({\n  clusterId,\n  podName,\n  containerName,\n  namespace,\n  maxLines = 1000,\n  autoRefresh = true,\n  refreshInterval = 5000,\n  onClose,\n  className = ''\n}) => {\n  // State management\n  const [logs, setLogs] = useState<LogEntry[]>([]);\n  const [loading, setLoading] = useState(true);\n  const [error, setError] = useState<string | null>(null);\n  const [searchQuery, setSearchQuery] = useState('');\n  const [levelFilter, setLevelFilter] = useState<string>('');\n  const [autoScroll, setAutoScroll] = useState(true);\n  const [isStreaming, setIsStreaming] = useState(false);\n  const [lastRefresh, setLastRefresh] = useState<Date>(new Date());\n\n  // Refs\n  const logsContainerRef = useRef<HTMLDivElement>(null);\n  const intervalRef = useRef<NodeJS.Timeout | null>(null);\n\n  // Responsive design\n  const { isMobile } = useResponsive();\n\n  // Parse log line to extract level and format message\n  const parseLogEntry = useCallback((line: string, timestamp: string): LogEntry => {\n    // Common log level patterns\n    const levelPatterns = [\n      { pattern: /\\b(ERROR|ERR)\\b/i, level: 'error' as const },\n      { pattern: /\\b(WARN|WARNING)\\b/i, level: 'warn' as const },\n      { pattern: /\\b(INFO|INFORMATION)\\b/i, level: 'info' as const },\n      { pattern: /\\b(DEBUG|DBG)\\b/i, level: 'debug' as const },\n      { pattern: /\\b(TRACE|TRC)\\b/i, level: 'trace' as const }\n    ];\n\n    let level: LogEntry['level'] = 'unknown';\n    for (const { pattern, level: patternLevel } of levelPatterns) {\n      if (pattern.test(line)) {\n        level = patternLevel;\n        break;\n      }\n    }\n\n    return {\n      timestamp,\n      level,\n      message: line,\n      source: containerName\n    };\n  }, [containerName]);\n\n  // Fetch logs\n  const fetchLogs = useCallback(async () => {\n    try {\n      setError(null);\n      const params = new URLSearchParams();\n      params.append('lines', maxLines.toString());\n      if (namespace) params.append('namespace', namespace);\n\n      const response = await fetch(\n        `/api/v1/kubernetes/clusters/${clusterId}/pods/${podName}/containers/${containerName}/logs?${params}`,\n        {\n          headers: {\n            'Authorization': `Bearer ${localStorage.getItem('access_token')}`,\n            'Content-Type': 'application/json',\n          },\n        }\n      );\n\n      if (!response.ok) {\n        throw new Error(`Failed to fetch logs: ${response.statusText}`);\n      }\n\n      const data = await response.json();\n      const logLines = data.logs || [];\n      \n      const parsedLogs = logLines.map((line: any) => \n        parseLogEntry(line.message || line, line.timestamp || new Date().toISOString())\n      );\n\n      setLogs(parsedLogs);\n      setLastRefresh(new Date());\n      \n      // Auto-scroll to bottom if enabled\n      if (autoScroll && logsContainerRef.current) {\n        setTimeout(() => {\n          if (logsContainerRef.current) {\n            logsContainerRef.current.scrollTop = logsContainerRef.current.scrollHeight;\n          }\n        }, 100);\n      }\n      \n    } catch (err) {\n      setError(err instanceof Error ? err.message : 'Failed to fetch logs');\n    } finally {\n      setLoading(false);\n    }\n  }, [clusterId, podName, containerName, namespace, maxLines, parseLogEntry, autoScroll]);\n\n  // Stream logs (WebSocket or polling simulation)\n  const startStreaming = useCallback(() => {\n    if (intervalRef.current) {\n      clearInterval(intervalRef.current);\n    }\n\n    setIsStreaming(true);\n    intervalRef.current = setInterval(() => {\n      fetchLogs();\n    }, refreshInterval);\n  }, [fetchLogs, refreshInterval]);\n\n  // Stop streaming\n  const stopStreaming = useCallback(() => {\n    if (intervalRef.current) {\n      clearInterval(intervalRef.current);\n      intervalRef.current = null;\n    }\n    setIsStreaming(false);\n  }, []);\n\n  // Initial load\n  useEffect(() => {\n    fetchLogs();\n    \n    if (autoRefresh) {\n      startStreaming();\n    }\n\n    return () => {\n      if (intervalRef.current) {\n        clearInterval(intervalRef.current);\n      }\n    };\n  }, [fetchLogs, autoRefresh, startStreaming]);\n\n  // Filter logs based on search and level\n  const filteredLogs = useMemo(() => {\n    return logs.filter(log => {\n      const matchesSearch = !searchQuery || \n        log.message.toLowerCase().includes(searchQuery.toLowerCase());\n      const matchesLevel = !levelFilter || log.level === levelFilter;\n      \n      return matchesSearch && matchesLevel;\n    });\n  }, [logs, searchQuery, levelFilter]);\n\n  // Get color class for log level\n  const getLogLevelColor = (level: LogEntry['level']): string => {\n    switch (level) {\n      case 'error': return 'text-red-400';\n      case 'warn': return 'text-yellow-400';\n      case 'info': return 'text-blue-400';\n      case 'debug': return 'text-green-400';\n      case 'trace': return 'text-purple-400';\n      default: return 'text-gray-400';\n    }\n  };\n\n  // Get background color for log level\n  const getLogLevelBg = (level: LogEntry['level']): string => {\n    switch (level) {\n      case 'error': return 'bg-red-900/20 border-l-red-500';\n      case 'warn': return 'bg-yellow-900/20 border-l-yellow-500';\n      case 'info': return 'bg-blue-900/20 border-l-blue-500';\n      case 'debug': return 'bg-green-900/20 border-l-green-500';\n      case 'trace': return 'bg-purple-900/20 border-l-purple-500';\n      default: return 'bg-gray-900/20 border-l-gray-500';\n    }\n  };\n\n  // Format timestamp\n  const formatTimestamp = (timestamp: string): string => {\n    const date = new Date(timestamp);\n    return date.toLocaleTimeString();\n  };\n\n  // Clear logs\n  const clearLogs = () => {\n    setLogs([]);\n  };\n\n  // Download logs\n  const downloadLogs = () => {\n    const logText = filteredLogs.map(log => \n      `${log.timestamp} [${log.level.toUpperCase()}] ${log.message}`\n    ).join('\\n');\n    \n    const blob = new Blob([logText], { type: 'text/plain' });\n    const url = URL.createObjectURL(blob);\n    const a = document.createElement('a');\n    a.href = url;\n    a.download = `${podName}-${containerName}-logs.txt`;\n    document.body.appendChild(a);\n    a.click();\n    document.body.removeChild(a);\n    URL.revokeObjectURL(url);\n  };\n\n  // Handle scroll to detect if user is at bottom\n  const handleScroll = () => {\n    if (logsContainerRef.current) {\n      const { scrollTop, scrollHeight, clientHeight } = logsContainerRef.current;\n      const isAtBottom = scrollTop + clientHeight >= scrollHeight - 10;\n      setAutoScroll(isAtBottom);\n    }\n  };\n\n  return (\n    <div className={`bg-white dark:bg-gray-800 rounded-lg shadow ${className}`}>\n      {/* Header */}\n      <div className=\"flex items-center justify-between p-4 border-b border-gray-200 dark:border-gray-700\">\n        <div>\n          <h3 className=\"text-lg font-medium text-gray-900 dark:text-gray-100\">\n            Container Logs\n          </h3>\n          <p className=\"text-sm text-gray-500 dark:text-gray-400\">\n            {podName} â€º {containerName}\n          </p>\n        </div>\n        \n        {onClose && (\n          <Button\n            onClick={onClose}\n            size=\"sm\"\n            variant=\"ghost\"\n          >\n            <svg className=\"h-4 w-4\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n              <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M6 18L18 6M6 6l12 12\" />\n            </svg>\n          </Button>\n        )}\n      </div>\n\n      {/* Controls */}\n      <div className=\"p-4 border-b border-gray-200 dark:border-gray-700 space-y-4\">\n        {/* Search and Filters Row */}\n        <div className=\"grid grid-cols-1 md:grid-cols-3 gap-4\">\n          {/* Search */}\n          <div>\n            <label className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1\">\n              Search logs\n            </label>\n            <input\n              type=\"text\"\n              placeholder=\"Search in logs...\"\n              value={searchQuery}\n              onChange={(e) => setSearchQuery(e.target.value)}\n              className=\"w-full px-3 py-2 border border-gray-300 dark:border-gray-700 rounded-md text-sm bg-white dark:bg-gray-800\"\n            />\n          </div>\n\n          {/* Level Filter */}\n          <div>\n            <label className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1\">\n              Log Level\n            </label>\n            <select\n              value={levelFilter}\n              onChange={(e) => setLevelFilter(e.target.value)}\n              className=\"w-full px-3 py-2 border border-gray-300 dark:border-gray-700 rounded-md text-sm bg-white dark:bg-gray-800\"\n            >\n              <option value=\"\">All Levels</option>\n              <option value=\"error\">Error</option>\n              <option value=\"warn\">Warning</option>\n              <option value=\"info\">Info</option>\n              <option value=\"debug\">Debug</option>\n              <option value=\"trace\">Trace</option>\n            </select>\n          </div>\n\n          {/* Max Lines */}\n          <div>\n            <label className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1\">\n              Max Lines\n            </label>\n            <select\n              value={maxLines}\n              onChange={(e) => {\n                // This would require updating the parent component or state\n                console.log('Max lines changed:', e.target.value);\n              }}\n              className=\"w-full px-3 py-2 border border-gray-300 dark:border-gray-700 rounded-md text-sm bg-white dark:bg-gray-800\"\n            >\n              <option value=\"100\">100</option>\n              <option value=\"500\">500</option>\n              <option value=\"1000\">1000</option>\n              <option value=\"5000\">5000</option>\n            </select>\n          </div>\n        </div>\n\n        {/* Action Buttons */}\n        <div className=\"flex items-center justify-between\">\n          <div className=\"flex items-center space-x-2\">\n            <Button\n              onClick={isStreaming ? stopStreaming : startStreaming}\n              size=\"sm\"\n              variant={isStreaming ? \"default\" : \"outline\"}\n            >\n              <svg className=\"h-4 w-4 mr-2\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n                <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} \n                  d={isStreaming ? \"M10 9v6m4-6v6\" : \"M14.828 14.828a4 4 0 01-5.656 0M9 10h6m2 8H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z\"} \n                />\n              </svg>\n              {isStreaming ? 'Stop' : 'Start'} Stream\n            </Button>\n\n            <Button\n              onClick={fetchLogs}\n              size=\"sm\"\n              variant=\"outline\"\n              disabled={loading}\n            >\n              <svg className=\"h-4 w-4 mr-2\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n                <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15\" />\n              </svg>\n              Refresh\n            </Button>\n\n            <Button\n              onClick={clearLogs}\n              size=\"sm\"\n              variant=\"outline\"\n            >\n              <svg className=\"h-4 w-4 mr-2\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n                <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16\" />\n              </svg>\n              Clear\n            </Button>\n          </div>\n\n          <div className=\"flex items-center space-x-4\">\n            <div className=\"flex items-center space-x-2\">\n              <input\n                type=\"checkbox\"\n                id=\"autoScroll\"\n                checked={autoScroll}\n                onChange={(e) => setAutoScroll(e.target.checked)}\n                className=\"rounded border-gray-300 dark:border-gray-700\"\n              />\n              <label htmlFor=\"autoScroll\" className=\"text-sm text-gray-700 dark:text-gray-300\">\n                Auto-scroll\n              </label>\n            </div>\n\n            <Button\n              onClick={downloadLogs}\n              size=\"sm\"\n              variant=\"outline\"\n            >\n              <svg className=\"h-4 w-4 mr-2\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n                <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M12 10v6m0 0l-3-3m3 3l3-3m2 8H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z\" />\n              </svg>\n              Download\n            </Button>\n\n            <div className=\"text-xs text-gray-500 dark:text-gray-400\">\n              {filteredLogs.length} / {logs.length} lines\n            </div>\n          </div>\n        </div>\n\n        {/* Status */}\n        <div className=\"flex items-center justify-between text-sm\">\n          <div className=\"flex items-center space-x-4\">\n            <div className=\"flex items-center space-x-2\">\n              <div className={`w-2 h-2 rounded-full ${isStreaming ? 'bg-green-500 animate-pulse' : 'bg-gray-400'}`} />\n              <span className=\"text-gray-600 dark:text-gray-400\">\n                {isStreaming ? 'Streaming' : 'Not streaming'}\n              </span>\n            </div>\n            <span className=\"text-gray-600 dark:text-gray-400\">\n              Last update: {formatTimestamp(lastRefresh.toISOString())}\n            </span>\n          </div>\n        </div>\n      </div>\n\n      {/* Logs Content */}\n      <div className=\"relative\">\n        {error ? (\n          <div className=\"p-4 text-center\">\n            <div className=\"text-red-500 dark:text-red-400 mb-2\">\n              <svg className=\"h-8 w-8 mx-auto\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n                <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M12 8v4m0 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z\" />\n              </svg>\n            </div>\n            <p className=\"text-red-600 dark:text-red-400\">{error}</p>\n            <Button\n              onClick={fetchLogs}\n              size=\"sm\"\n              variant=\"outline\"\n              className=\"mt-2\"\n            >\n              Retry\n            </Button>\n          </div>\n        ) : (\n          <div \n            ref={logsContainerRef}\n            onScroll={handleScroll}\n            className=\"h-96 overflow-y-auto bg-gray-900 text-gray-100 font-mono text-sm\"\n          >\n            {loading && logs.length === 0 ? (\n              <div className=\"flex items-center justify-center h-full\">\n                <div className=\"text-gray-400\">Loading logs...</div>\n              </div>\n            ) : filteredLogs.length === 0 ? (\n              <div className=\"flex items-center justify-center h-full\">\n                <div className=\"text-gray-400\">\n                  {logs.length === 0 ? 'No logs available' : 'No logs match current filters'}\n                </div>\n              </div>\n            ) : (\n              <div className=\"p-2\">\n                {filteredLogs.map((log, index) => (\n                  <div \n                    key={index} \n                    className={`py-1 px-2 border-l-2 ${getLogLevelBg(log.level)} hover:bg-gray-800/50`}\n                  >\n                    <div className=\"flex items-start space-x-2\">\n                      <span className=\"text-gray-500 text-xs flex-shrink-0 mt-0.5\">\n                        {formatTimestamp(log.timestamp)}\n                      </span>\n                      <span className={`text-xs font-medium flex-shrink-0 mt-0.5 ${getLogLevelColor(log.level)} uppercase`}>\n                        {log.level}\n                      </span>\n                      <span className=\"text-gray-100 whitespace-pre-wrap break-words flex-1\">\n                        {log.message}\n                      </span>\n                    </div>\n                  </div>\n                ))}\n              </div>\n            )}\n          </div>\n        )}\n      </div>\n    </div>\n  );\n};\n\nexport default ContainerLogsViewer; "],"names":["ContainerLogsViewer","clusterId","podName","containerName","namespace","maxLines","autoRefresh","refreshInterval","onClose","className","logs","setLogs","useState","loading","setLoading","error","setError","searchQuery","setSearchQuery","levelFilter","setLevelFilter","autoScroll","setAutoScroll","isStreaming","setIsStreaming","lastRefresh","setLastRefresh","Date","logsContainerRef","useRef","intervalRef","isMobile","useResponsive","parseLogEntry","useCallback","line","timestamp","levelPatterns","pattern","level","patternLevel","test","message","source","fetchLogs","params","URLSearchParams","append","toString","response","fetch","headers","localStorage","getItem","ok","Error","statusText","data","json","logLines","parsedLogs","map","toISOString","current","setTimeout","scrollTop","scrollHeight","err","startStreaming","clearInterval","setInterval","stopStreaming","useEffect","filteredLogs","useMemo","filter","log","matchesSearch","toLowerCase","includes","matchesLevel","getLogLevelColor","getLogLevelBg","formatTimestamp","date","toLocaleTimeString","clearLogs","downloadLogs","logText","toUpperCase","join","blob","Blob","type","url","URL","createObjectURL","a","document","createElement","href","download","body","appendChild","click","removeChild","revokeObjectURL","handleScroll","clientHeight","isAtBottom","div","h3","p","Button","onClick","size","variant","svg","fill","stroke","viewBox","path","strokeLinecap","strokeLinejoin","strokeWidth","d","label","input","placeholder","value","onChange","e","target","select","option","console","disabled","id","checked","htmlFor","length","span","ref","onScroll","index"],"mappings":"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"}