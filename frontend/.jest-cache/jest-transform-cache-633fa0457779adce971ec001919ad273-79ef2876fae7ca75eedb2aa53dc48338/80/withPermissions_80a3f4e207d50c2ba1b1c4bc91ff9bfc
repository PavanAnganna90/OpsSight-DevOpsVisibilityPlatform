8d60052ed0c159527a89397706591527
/**
 * Higher-Order Component for Route Protection
 * 
 * Protects routes based on user permissions and roles
 */ "use strict";
Object.defineProperty(exports, "__esModule", {
    value: true
});
function _export(target, all) {
    for(var name in all)Object.defineProperty(target, name, {
        enumerable: true,
        get: all[name]
    });
}
_export(exports, {
    UnauthorizedPage: function() {
        return UnauthorizedPage;
    },
    default: function() {
        return _default;
    },
    withAdminAccess: function() {
        return withAdminAccess;
    },
    withAuth: function() {
        return withAuth;
    },
    withPermission: function() {
        return withPermission;
    },
    withPermissions: function() {
        return withPermissions;
    },
    withResourceAccess: function() {
        return withResourceAccess;
    },
    withRoles: function() {
        return withRoles;
    }
});
const _jsxruntime = require("react/jsx-runtime");
const _react = /*#__PURE__*/ _interop_require_default(require("react"));
const _navigation = require("next/navigation");
const _AuthContext = require("../../contexts/AuthContext");
const _usePermissions = require("../../hooks/usePermissions");
function _interop_require_default(obj) {
    return obj && obj.__esModule ? obj : {
        default: obj
    };
}
function withPermissions(WrappedComponent, options = {}) {
    const { permissions = [], roles = [], requireAll = false, adminOnly = false, resource, action, organizationId, redirectTo = '/unauthorized', fallback: FallbackComponent } = options;
    const ProtectedComponent = (props)=>{
        const router = (0, _navigation.useRouter)();
        const { state } = (0, _AuthContext.useAuth)();
        const { hasPermission, hasRole, hasAnyRole, hasAnyPermission, canAccess, isAdmin } = (0, _usePermissions.usePermissions)();
        // Check if user is authenticated
        if (!state.isAuthenticated) {
            _react.default.useEffect(()=>{
                router.push('/login');
            }, [
                router
            ]);
            return /*#__PURE__*/ (0, _jsxruntime.jsx)("div", {
                className: "min-h-screen flex items-center justify-center bg-gray-50",
                children: /*#__PURE__*/ (0, _jsxruntime.jsxs)("div", {
                    className: "text-center",
                    children: [
                        /*#__PURE__*/ (0, _jsxruntime.jsx)("h2", {
                            className: "text-2xl font-bold text-gray-900 mb-2",
                            children: "Authentication Required"
                        }),
                        /*#__PURE__*/ (0, _jsxruntime.jsx)("p", {
                            className: "text-gray-600",
                            children: "Redirecting to login..."
                        })
                    ]
                })
            });
        }
        // Check admin requirement
        if (adminOnly && !isAdmin()) {
            _react.default.useEffect(()=>{
                router.push(redirectTo);
            }, [
                router
            ]);
            if (FallbackComponent) {
                return /*#__PURE__*/ (0, _jsxruntime.jsx)(FallbackComponent, {});
            }
            return /*#__PURE__*/ (0, _jsxruntime.jsx)("div", {
                className: "min-h-screen flex items-center justify-center bg-gray-50",
                children: /*#__PURE__*/ (0, _jsxruntime.jsxs)("div", {
                    className: "text-center",
                    children: [
                        /*#__PURE__*/ (0, _jsxruntime.jsx)("h2", {
                            className: "text-2xl font-bold text-gray-900 mb-2",
                            children: "Access Denied"
                        }),
                        /*#__PURE__*/ (0, _jsxruntime.jsx)("p", {
                            className: "text-gray-600",
                            children: "Administrator access required."
                        })
                    ]
                })
            });
        }
        // Check resource/action permission
        if (resource && action) {
            const hasResourceAccess = canAccess(resource, action, organizationId);
            if (!hasResourceAccess) {
                _react.default.useEffect(()=>{
                    router.push(redirectTo);
                }, [
                    router
                ]);
                if (FallbackComponent) {
                    return /*#__PURE__*/ (0, _jsxruntime.jsx)(FallbackComponent, {});
                }
                return /*#__PURE__*/ (0, _jsxruntime.jsx)("div", {
                    className: "min-h-screen flex items-center justify-center bg-gray-50",
                    children: /*#__PURE__*/ (0, _jsxruntime.jsxs)("div", {
                        className: "text-center",
                        children: [
                            /*#__PURE__*/ (0, _jsxruntime.jsx)("h2", {
                                className: "text-2xl font-bold text-gray-900 mb-2",
                                children: "Access Denied"
                            }),
                            /*#__PURE__*/ (0, _jsxruntime.jsxs)("p", {
                                className: "text-gray-600",
                                children: [
                                    "You don't have permission to ",
                                    action,
                                    " ",
                                    resource,
                                    "."
                                ]
                            })
                        ]
                    })
                });
            }
        }
        // Check specific permissions
        if (permissions.length > 0) {
            const hasRequiredPermissions = requireAll ? permissions.every((permission)=>hasPermission(permission, organizationId)) : hasAnyPermission(permissions);
            if (!hasRequiredPermissions) {
                _react.default.useEffect(()=>{
                    router.push(redirectTo);
                }, [
                    router
                ]);
                if (FallbackComponent) {
                    return /*#__PURE__*/ (0, _jsxruntime.jsx)(FallbackComponent, {});
                }
                return /*#__PURE__*/ (0, _jsxruntime.jsx)("div", {
                    className: "min-h-screen flex items-center justify-center bg-gray-50",
                    children: /*#__PURE__*/ (0, _jsxruntime.jsxs)("div", {
                        className: "text-center",
                        children: [
                            /*#__PURE__*/ (0, _jsxruntime.jsx)("h2", {
                                className: "text-2xl font-bold text-gray-900 mb-2",
                                children: "Access Denied"
                            }),
                            /*#__PURE__*/ (0, _jsxruntime.jsxs)("p", {
                                className: "text-gray-600",
                                children: [
                                    "Required permissions: ",
                                    permissions.join(requireAll ? ' and ' : ' or ')
                                ]
                            })
                        ]
                    })
                });
            }
        }
        // Check specific roles
        if (roles.length > 0) {
            const hasRequiredRoles = requireAll ? roles.every((role)=>hasRole(role)) : hasAnyRole(roles);
            if (!hasRequiredRoles) {
                _react.default.useEffect(()=>{
                    router.push(redirectTo);
                }, [
                    router
                ]);
                if (FallbackComponent) {
                    return /*#__PURE__*/ (0, _jsxruntime.jsx)(FallbackComponent, {});
                }
                return /*#__PURE__*/ (0, _jsxruntime.jsx)("div", {
                    className: "min-h-screen flex items-center justify-center bg-gray-50",
                    children: /*#__PURE__*/ (0, _jsxruntime.jsxs)("div", {
                        className: "text-center",
                        children: [
                            /*#__PURE__*/ (0, _jsxruntime.jsx)("h2", {
                                className: "text-2xl font-bold text-gray-900 mb-2",
                                children: "Access Denied"
                            }),
                            /*#__PURE__*/ (0, _jsxruntime.jsxs)("p", {
                                className: "text-gray-600",
                                children: [
                                    "Required roles: ",
                                    roles.join(requireAll ? ' and ' : ' or ')
                                ]
                            })
                        ]
                    })
                });
            }
        }
        // All checks passed, render the component
        return /*#__PURE__*/ (0, _jsxruntime.jsx)(WrappedComponent, {
            ...props
        });
    };
    ProtectedComponent.displayName = `withPermissions(${WrappedComponent.displayName || WrappedComponent.name})`;
    return ProtectedComponent;
}
const withAuth = (Component)=>withPermissions(Component, {});
const withAdminAccess = (Component)=>withPermissions(Component, {
        adminOnly: true
    });
const withRoles = (Component, roles, requireAll = false)=>withPermissions(Component, {
        roles,
        requireAll
    });
const withPermission = (Component, permission, organizationId)=>withPermissions(Component, {
        permissions: [
            permission
        ],
        organizationId
    });
const withResourceAccess = (Component, resource, action, organizationId)=>withPermissions(Component, {
        resource,
        action,
        organizationId
    });
const UnauthorizedPage = ()=>/*#__PURE__*/ (0, _jsxruntime.jsx)("div", {
        className: "min-h-screen flex items-center justify-center bg-gray-50",
        children: /*#__PURE__*/ (0, _jsxruntime.jsx)("div", {
            className: "max-w-md w-full text-center",
            children: /*#__PURE__*/ (0, _jsxruntime.jsxs)("div", {
                className: "bg-white shadow-lg rounded-lg p-8",
                children: [
                    /*#__PURE__*/ (0, _jsxruntime.jsx)("div", {
                        className: "w-16 h-16 mx-auto mb-4 bg-red-100 rounded-full flex items-center justify-center",
                        children: /*#__PURE__*/ (0, _jsxruntime.jsx)("svg", {
                            className: "w-8 h-8 text-red-600",
                            fill: "none",
                            stroke: "currentColor",
                            viewBox: "0 0 24 24",
                            children: /*#__PURE__*/ (0, _jsxruntime.jsx)("path", {
                                strokeLinecap: "round",
                                strokeLinejoin: "round",
                                strokeWidth: 2,
                                d: "M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-2.5L13.732 4c-.77-.833-1.964-.833-2.732 0L3.732 16.5c-.77.833.192 2.5 1.732 2.5z"
                            })
                        })
                    }),
                    /*#__PURE__*/ (0, _jsxruntime.jsx)("h1", {
                        className: "text-2xl font-bold text-gray-900 mb-2",
                        children: "Access Denied"
                    }),
                    /*#__PURE__*/ (0, _jsxruntime.jsx)("p", {
                        className: "text-gray-600 mb-6",
                        children: "You don't have permission to access this page. Please contact your administrator if you believe this is an error."
                    }),
                    /*#__PURE__*/ (0, _jsxruntime.jsx)("button", {
                        onClick: ()=>window.history.back(),
                        className: "inline-flex items-center px-4 py-2 border border-transparent text-sm font-medium rounded-md text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500",
                        children: "Go Back"
                    })
                ]
            })
        })
    });
const _default = withPermissions;

//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi9Vc2Vycy9wYXZhbi9EZXNrdG9wL0Rldm9wcy1hcHAtZGV2LWN1cnNvci9mcm9udGVuZC9zcmMvY29tcG9uZW50cy9yYmFjL3dpdGhQZXJtaXNzaW9ucy50c3giXSwic291cmNlc0NvbnRlbnQiOlsiLyoqXG4gKiBIaWdoZXItT3JkZXIgQ29tcG9uZW50IGZvciBSb3V0ZSBQcm90ZWN0aW9uXG4gKiBcbiAqIFByb3RlY3RzIHJvdXRlcyBiYXNlZCBvbiB1c2VyIHBlcm1pc3Npb25zIGFuZCByb2xlc1xuICovXG5cbmltcG9ydCBSZWFjdCBmcm9tICdyZWFjdCc7XG5pbXBvcnQgeyB1c2VSb3V0ZXIgfSBmcm9tICduZXh0L25hdmlnYXRpb24nO1xuaW1wb3J0IHsgdXNlQXV0aCB9IGZyb20gJ0AvY29udGV4dHMvQXV0aENvbnRleHQnO1xuaW1wb3J0IHsgdXNlUGVybWlzc2lvbnMgfSBmcm9tICdAL2hvb2tzL3VzZVBlcm1pc3Npb25zJztcblxuaW50ZXJmYWNlIFdpdGhQZXJtaXNzaW9uc09wdGlvbnMge1xuICBwZXJtaXNzaW9ucz86IHN0cmluZ1tdO1xuICByb2xlcz86IHN0cmluZ1tdO1xuICByZXF1aXJlQWxsPzogYm9vbGVhbjtcbiAgYWRtaW5Pbmx5PzogYm9vbGVhbjtcbiAgcmVzb3VyY2U/OiBzdHJpbmc7XG4gIGFjdGlvbj86IHN0cmluZztcbiAgb3JnYW5pemF0aW9uSWQ/OiBzdHJpbmc7XG4gIHJlZGlyZWN0VG8/OiBzdHJpbmc7XG4gIGZhbGxiYWNrPzogUmVhY3QuQ29tcG9uZW50VHlwZTtcbn1cblxuLyoqXG4gKiBIT0MgdG8gcHJvdGVjdCBjb21wb25lbnRzL3BhZ2VzIHdpdGggcGVybWlzc2lvbiBjaGVja3NcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIHdpdGhQZXJtaXNzaW9uczxUIGV4dGVuZHMgb2JqZWN0PihcbiAgV3JhcHBlZENvbXBvbmVudDogUmVhY3QuQ29tcG9uZW50VHlwZTxUPixcbiAgb3B0aW9uczogV2l0aFBlcm1pc3Npb25zT3B0aW9ucyA9IHt9XG4pIHtcbiAgY29uc3Qge1xuICAgIHBlcm1pc3Npb25zID0gW10sXG4gICAgcm9sZXMgPSBbXSxcbiAgICByZXF1aXJlQWxsID0gZmFsc2UsXG4gICAgYWRtaW5Pbmx5ID0gZmFsc2UsXG4gICAgcmVzb3VyY2UsXG4gICAgYWN0aW9uLFxuICAgIG9yZ2FuaXphdGlvbklkLFxuICAgIHJlZGlyZWN0VG8gPSAnL3VuYXV0aG9yaXplZCcsXG4gICAgZmFsbGJhY2s6IEZhbGxiYWNrQ29tcG9uZW50LFxuICB9ID0gb3B0aW9ucztcblxuICBjb25zdCBQcm90ZWN0ZWRDb21wb25lbnQ6IFJlYWN0LkZDPFQ+ID0gKHByb3BzKSA9PiB7XG4gICAgY29uc3Qgcm91dGVyID0gdXNlUm91dGVyKCk7XG4gICAgY29uc3QgeyBzdGF0ZSB9ID0gdXNlQXV0aCgpO1xuICAgIGNvbnN0IHsgaGFzUGVybWlzc2lvbiwgaGFzUm9sZSwgaGFzQW55Um9sZSwgaGFzQW55UGVybWlzc2lvbiwgY2FuQWNjZXNzLCBpc0FkbWluIH0gPSB1c2VQZXJtaXNzaW9ucygpO1xuXG4gICAgLy8gQ2hlY2sgaWYgdXNlciBpcyBhdXRoZW50aWNhdGVkXG4gICAgaWYgKCFzdGF0ZS5pc0F1dGhlbnRpY2F0ZWQpIHtcbiAgICAgIFJlYWN0LnVzZUVmZmVjdCgoKSA9PiB7XG4gICAgICAgIHJvdXRlci5wdXNoKCcvbG9naW4nKTtcbiAgICAgIH0sIFtyb3V0ZXJdKTtcbiAgICAgIFxuICAgICAgcmV0dXJuIChcbiAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJtaW4taC1zY3JlZW4gZmxleCBpdGVtcy1jZW50ZXIganVzdGlmeS1jZW50ZXIgYmctZ3JheS01MFwiPlxuICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwidGV4dC1jZW50ZXJcIj5cbiAgICAgICAgICAgIDxoMiBjbGFzc05hbWU9XCJ0ZXh0LTJ4bCBmb250LWJvbGQgdGV4dC1ncmF5LTkwMCBtYi0yXCI+QXV0aGVudGljYXRpb24gUmVxdWlyZWQ8L2gyPlxuICAgICAgICAgICAgPHAgY2xhc3NOYW1lPVwidGV4dC1ncmF5LTYwMFwiPlJlZGlyZWN0aW5nIHRvIGxvZ2luLi4uPC9wPlxuICAgICAgICAgIDwvZGl2PlxuICAgICAgICA8L2Rpdj5cbiAgICAgICk7XG4gICAgfVxuXG4gICAgLy8gQ2hlY2sgYWRtaW4gcmVxdWlyZW1lbnRcbiAgICBpZiAoYWRtaW5Pbmx5ICYmICFpc0FkbWluKCkpIHtcbiAgICAgIFJlYWN0LnVzZUVmZmVjdCgoKSA9PiB7XG4gICAgICAgIHJvdXRlci5wdXNoKHJlZGlyZWN0VG8pO1xuICAgICAgfSwgW3JvdXRlcl0pO1xuXG4gICAgICBpZiAoRmFsbGJhY2tDb21wb25lbnQpIHtcbiAgICAgICAgcmV0dXJuIDxGYWxsYmFja0NvbXBvbmVudCAvPjtcbiAgICAgIH1cblxuICAgICAgcmV0dXJuIChcbiAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJtaW4taC1zY3JlZW4gZmxleCBpdGVtcy1jZW50ZXIganVzdGlmeS1jZW50ZXIgYmctZ3JheS01MFwiPlxuICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwidGV4dC1jZW50ZXJcIj5cbiAgICAgICAgICAgIDxoMiBjbGFzc05hbWU9XCJ0ZXh0LTJ4bCBmb250LWJvbGQgdGV4dC1ncmF5LTkwMCBtYi0yXCI+QWNjZXNzIERlbmllZDwvaDI+XG4gICAgICAgICAgICA8cCBjbGFzc05hbWU9XCJ0ZXh0LWdyYXktNjAwXCI+QWRtaW5pc3RyYXRvciBhY2Nlc3MgcmVxdWlyZWQuPC9wPlxuICAgICAgICAgIDwvZGl2PlxuICAgICAgICA8L2Rpdj5cbiAgICAgICk7XG4gICAgfVxuXG4gICAgLy8gQ2hlY2sgcmVzb3VyY2UvYWN0aW9uIHBlcm1pc3Npb25cbiAgICBpZiAocmVzb3VyY2UgJiYgYWN0aW9uKSB7XG4gICAgICBjb25zdCBoYXNSZXNvdXJjZUFjY2VzcyA9IGNhbkFjY2VzcyhyZXNvdXJjZSwgYWN0aW9uLCBvcmdhbml6YXRpb25JZCk7XG4gICAgICBpZiAoIWhhc1Jlc291cmNlQWNjZXNzKSB7XG4gICAgICAgIFJlYWN0LnVzZUVmZmVjdCgoKSA9PiB7XG4gICAgICAgICAgcm91dGVyLnB1c2gocmVkaXJlY3RUbyk7XG4gICAgICAgIH0sIFtyb3V0ZXJdKTtcblxuICAgICAgICBpZiAoRmFsbGJhY2tDb21wb25lbnQpIHtcbiAgICAgICAgICByZXR1cm4gPEZhbGxiYWNrQ29tcG9uZW50IC8+O1xuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIChcbiAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cIm1pbi1oLXNjcmVlbiBmbGV4IGl0ZW1zLWNlbnRlciBqdXN0aWZ5LWNlbnRlciBiZy1ncmF5LTUwXCI+XG4gICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cInRleHQtY2VudGVyXCI+XG4gICAgICAgICAgICAgIDxoMiBjbGFzc05hbWU9XCJ0ZXh0LTJ4bCBmb250LWJvbGQgdGV4dC1ncmF5LTkwMCBtYi0yXCI+QWNjZXNzIERlbmllZDwvaDI+XG4gICAgICAgICAgICAgIDxwIGNsYXNzTmFtZT1cInRleHQtZ3JheS02MDBcIj5cbiAgICAgICAgICAgICAgICBZb3UgZG9uJ3QgaGF2ZSBwZXJtaXNzaW9uIHRvIHthY3Rpb259IHtyZXNvdXJjZX0uXG4gICAgICAgICAgICAgIDwvcD5cbiAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgIDwvZGl2PlxuICAgICAgICApO1xuICAgICAgfVxuICAgIH1cblxuICAgIC8vIENoZWNrIHNwZWNpZmljIHBlcm1pc3Npb25zXG4gICAgaWYgKHBlcm1pc3Npb25zLmxlbmd0aCA+IDApIHtcbiAgICAgIGNvbnN0IGhhc1JlcXVpcmVkUGVybWlzc2lvbnMgPSByZXF1aXJlQWxsXG4gICAgICAgID8gcGVybWlzc2lvbnMuZXZlcnkocGVybWlzc2lvbiA9PiBoYXNQZXJtaXNzaW9uKHBlcm1pc3Npb24sIG9yZ2FuaXphdGlvbklkKSlcbiAgICAgICAgOiBoYXNBbnlQZXJtaXNzaW9uKHBlcm1pc3Npb25zKTtcblxuICAgICAgaWYgKCFoYXNSZXF1aXJlZFBlcm1pc3Npb25zKSB7XG4gICAgICAgIFJlYWN0LnVzZUVmZmVjdCgoKSA9PiB7XG4gICAgICAgICAgcm91dGVyLnB1c2gocmVkaXJlY3RUbyk7XG4gICAgICAgIH0sIFtyb3V0ZXJdKTtcblxuICAgICAgICBpZiAoRmFsbGJhY2tDb21wb25lbnQpIHtcbiAgICAgICAgICByZXR1cm4gPEZhbGxiYWNrQ29tcG9uZW50IC8+O1xuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIChcbiAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cIm1pbi1oLXNjcmVlbiBmbGV4IGl0ZW1zLWNlbnRlciBqdXN0aWZ5LWNlbnRlciBiZy1ncmF5LTUwXCI+XG4gICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cInRleHQtY2VudGVyXCI+XG4gICAgICAgICAgICAgIDxoMiBjbGFzc05hbWU9XCJ0ZXh0LTJ4bCBmb250LWJvbGQgdGV4dC1ncmF5LTkwMCBtYi0yXCI+QWNjZXNzIERlbmllZDwvaDI+XG4gICAgICAgICAgICAgIDxwIGNsYXNzTmFtZT1cInRleHQtZ3JheS02MDBcIj5cbiAgICAgICAgICAgICAgICBSZXF1aXJlZCBwZXJtaXNzaW9uczoge3Blcm1pc3Npb25zLmpvaW4ocmVxdWlyZUFsbCA/ICcgYW5kICcgOiAnIG9yICcpfVxuICAgICAgICAgICAgICA8L3A+XG4gICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgKTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICAvLyBDaGVjayBzcGVjaWZpYyByb2xlc1xuICAgIGlmIChyb2xlcy5sZW5ndGggPiAwKSB7XG4gICAgICBjb25zdCBoYXNSZXF1aXJlZFJvbGVzID0gcmVxdWlyZUFsbFxuICAgICAgICA/IHJvbGVzLmV2ZXJ5KHJvbGUgPT4gaGFzUm9sZShyb2xlKSlcbiAgICAgICAgOiBoYXNBbnlSb2xlKHJvbGVzKTtcblxuICAgICAgaWYgKCFoYXNSZXF1aXJlZFJvbGVzKSB7XG4gICAgICAgIFJlYWN0LnVzZUVmZmVjdCgoKSA9PiB7XG4gICAgICAgICAgcm91dGVyLnB1c2gocmVkaXJlY3RUbyk7XG4gICAgICAgIH0sIFtyb3V0ZXJdKTtcblxuICAgICAgICBpZiAoRmFsbGJhY2tDb21wb25lbnQpIHtcbiAgICAgICAgICByZXR1cm4gPEZhbGxiYWNrQ29tcG9uZW50IC8+O1xuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIChcbiAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cIm1pbi1oLXNjcmVlbiBmbGV4IGl0ZW1zLWNlbnRlciBqdXN0aWZ5LWNlbnRlciBiZy1ncmF5LTUwXCI+XG4gICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cInRleHQtY2VudGVyXCI+XG4gICAgICAgICAgICAgIDxoMiBjbGFzc05hbWU9XCJ0ZXh0LTJ4bCBmb250LWJvbGQgdGV4dC1ncmF5LTkwMCBtYi0yXCI+QWNjZXNzIERlbmllZDwvaDI+XG4gICAgICAgICAgICAgIDxwIGNsYXNzTmFtZT1cInRleHQtZ3JheS02MDBcIj5cbiAgICAgICAgICAgICAgICBSZXF1aXJlZCByb2xlczoge3JvbGVzLmpvaW4ocmVxdWlyZUFsbCA/ICcgYW5kICcgOiAnIG9yICcpfVxuICAgICAgICAgICAgICA8L3A+XG4gICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgKTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICAvLyBBbGwgY2hlY2tzIHBhc3NlZCwgcmVuZGVyIHRoZSBjb21wb25lbnRcbiAgICByZXR1cm4gPFdyYXBwZWRDb21wb25lbnQgey4uLnByb3BzfSAvPjtcbiAgfTtcblxuICBQcm90ZWN0ZWRDb21wb25lbnQuZGlzcGxheU5hbWUgPSBgd2l0aFBlcm1pc3Npb25zKCR7V3JhcHBlZENvbXBvbmVudC5kaXNwbGF5TmFtZSB8fCBXcmFwcGVkQ29tcG9uZW50Lm5hbWV9KWA7XG5cbiAgcmV0dXJuIFByb3RlY3RlZENvbXBvbmVudDtcbn1cblxuLy8gQ29udmVuaWVuY2UgSE9DcyBmb3IgY29tbW9uIHVzZSBjYXNlc1xuZXhwb3J0IGNvbnN0IHdpdGhBdXRoID0gPFQgZXh0ZW5kcyBvYmplY3Q+KENvbXBvbmVudDogUmVhY3QuQ29tcG9uZW50VHlwZTxUPikgPT5cbiAgd2l0aFBlcm1pc3Npb25zKENvbXBvbmVudCwge30pO1xuXG5leHBvcnQgY29uc3Qgd2l0aEFkbWluQWNjZXNzID0gPFQgZXh0ZW5kcyBvYmplY3Q+KENvbXBvbmVudDogUmVhY3QuQ29tcG9uZW50VHlwZTxUPikgPT5cbiAgd2l0aFBlcm1pc3Npb25zKENvbXBvbmVudCwgeyBhZG1pbk9ubHk6IHRydWUgfSk7XG5cbmV4cG9ydCBjb25zdCB3aXRoUm9sZXMgPSA8VCBleHRlbmRzIG9iamVjdD4oXG4gIENvbXBvbmVudDogUmVhY3QuQ29tcG9uZW50VHlwZTxUPixcbiAgcm9sZXM6IHN0cmluZ1tdLFxuICByZXF1aXJlQWxsID0gZmFsc2VcbikgPT5cbiAgd2l0aFBlcm1pc3Npb25zKENvbXBvbmVudCwgeyByb2xlcywgcmVxdWlyZUFsbCB9KTtcblxuZXhwb3J0IGNvbnN0IHdpdGhQZXJtaXNzaW9uID0gPFQgZXh0ZW5kcyBvYmplY3Q+KFxuICBDb21wb25lbnQ6IFJlYWN0LkNvbXBvbmVudFR5cGU8VD4sXG4gIHBlcm1pc3Npb246IHN0cmluZyxcbiAgb3JnYW5pemF0aW9uSWQ/OiBzdHJpbmdcbikgPT5cbiAgd2l0aFBlcm1pc3Npb25zKENvbXBvbmVudCwgeyBwZXJtaXNzaW9uczogW3Blcm1pc3Npb25dLCBvcmdhbml6YXRpb25JZCB9KTtcblxuZXhwb3J0IGNvbnN0IHdpdGhSZXNvdXJjZUFjY2VzcyA9IDxUIGV4dGVuZHMgb2JqZWN0PihcbiAgQ29tcG9uZW50OiBSZWFjdC5Db21wb25lbnRUeXBlPFQ+LFxuICByZXNvdXJjZTogc3RyaW5nLFxuICBhY3Rpb246IHN0cmluZyxcbiAgb3JnYW5pemF0aW9uSWQ/OiBzdHJpbmdcbikgPT5cbiAgd2l0aFBlcm1pc3Npb25zKENvbXBvbmVudCwgeyByZXNvdXJjZSwgYWN0aW9uLCBvcmdhbml6YXRpb25JZCB9KTtcblxuLy8gRGVmYXVsdCB1bmF1dGhvcml6ZWQgcGFnZSBjb21wb25lbnRcbmV4cG9ydCBjb25zdCBVbmF1dGhvcml6ZWRQYWdlOiBSZWFjdC5GQyA9ICgpID0+IChcbiAgPGRpdiBjbGFzc05hbWU9XCJtaW4taC1zY3JlZW4gZmxleCBpdGVtcy1jZW50ZXIganVzdGlmeS1jZW50ZXIgYmctZ3JheS01MFwiPlxuICAgIDxkaXYgY2xhc3NOYW1lPVwibWF4LXctbWQgdy1mdWxsIHRleHQtY2VudGVyXCI+XG4gICAgICA8ZGl2IGNsYXNzTmFtZT1cImJnLXdoaXRlIHNoYWRvdy1sZyByb3VuZGVkLWxnIHAtOFwiPlxuICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cInctMTYgaC0xNiBteC1hdXRvIG1iLTQgYmctcmVkLTEwMCByb3VuZGVkLWZ1bGwgZmxleCBpdGVtcy1jZW50ZXIganVzdGlmeS1jZW50ZXJcIj5cbiAgICAgICAgICA8c3ZnIFxuICAgICAgICAgICAgY2xhc3NOYW1lPVwidy04IGgtOCB0ZXh0LXJlZC02MDBcIiBcbiAgICAgICAgICAgIGZpbGw9XCJub25lXCIgXG4gICAgICAgICAgICBzdHJva2U9XCJjdXJyZW50Q29sb3JcIiBcbiAgICAgICAgICAgIHZpZXdCb3g9XCIwIDAgMjQgMjRcIlxuICAgICAgICAgID5cbiAgICAgICAgICAgIDxwYXRoIFxuICAgICAgICAgICAgICBzdHJva2VMaW5lY2FwPVwicm91bmRcIiBcbiAgICAgICAgICAgICAgc3Ryb2tlTGluZWpvaW49XCJyb3VuZFwiIFxuICAgICAgICAgICAgICBzdHJva2VXaWR0aD17Mn0gXG4gICAgICAgICAgICAgIGQ9XCJNMTIgOXYybTAgNGguMDFtLTYuOTM4IDRoMTMuODU2YzEuNTQgMCAyLjUwMi0xLjY2NyAxLjczMi0yLjVMMTMuNzMyIDRjLS43Ny0uODMzLTEuOTY0LS44MzMtMi43MzIgMEwzLjczMiAxNi41Yy0uNzcuODMzLjE5MiAyLjUgMS43MzIgMi41elwiIFxuICAgICAgICAgICAgLz5cbiAgICAgICAgICA8L3N2Zz5cbiAgICAgICAgPC9kaXY+XG4gICAgICAgIDxoMSBjbGFzc05hbWU9XCJ0ZXh0LTJ4bCBmb250LWJvbGQgdGV4dC1ncmF5LTkwMCBtYi0yXCI+QWNjZXNzIERlbmllZDwvaDE+XG4gICAgICAgIDxwIGNsYXNzTmFtZT1cInRleHQtZ3JheS02MDAgbWItNlwiPlxuICAgICAgICAgIFlvdSBkb24ndCBoYXZlIHBlcm1pc3Npb24gdG8gYWNjZXNzIHRoaXMgcGFnZS4gUGxlYXNlIGNvbnRhY3QgeW91ciBhZG1pbmlzdHJhdG9yIGlmIHlvdSBiZWxpZXZlIHRoaXMgaXMgYW4gZXJyb3IuXG4gICAgICAgIDwvcD5cbiAgICAgICAgPGJ1dHRvblxuICAgICAgICAgIG9uQ2xpY2s9eygpID0+IHdpbmRvdy5oaXN0b3J5LmJhY2soKX1cbiAgICAgICAgICBjbGFzc05hbWU9XCJpbmxpbmUtZmxleCBpdGVtcy1jZW50ZXIgcHgtNCBweS0yIGJvcmRlciBib3JkZXItdHJhbnNwYXJlbnQgdGV4dC1zbSBmb250LW1lZGl1bSByb3VuZGVkLW1kIHRleHQtd2hpdGUgYmctYmx1ZS02MDAgaG92ZXI6YmctYmx1ZS03MDAgZm9jdXM6b3V0bGluZS1ub25lIGZvY3VzOnJpbmctMiBmb2N1czpyaW5nLW9mZnNldC0yIGZvY3VzOnJpbmctYmx1ZS01MDBcIlxuICAgICAgICA+XG4gICAgICAgICAgR28gQmFja1xuICAgICAgICA8L2J1dHRvbj5cbiAgICAgIDwvZGl2PlxuICAgIDwvZGl2PlxuICA8L2Rpdj5cbik7XG5cbmV4cG9ydCBkZWZhdWx0IHdpdGhQZXJtaXNzaW9uczsiXSwibmFtZXMiOlsiVW5hdXRob3JpemVkUGFnZSIsIndpdGhBZG1pbkFjY2VzcyIsIndpdGhBdXRoIiwid2l0aFBlcm1pc3Npb24iLCJ3aXRoUGVybWlzc2lvbnMiLCJ3aXRoUmVzb3VyY2VBY2Nlc3MiLCJ3aXRoUm9sZXMiLCJXcmFwcGVkQ29tcG9uZW50Iiwib3B0aW9ucyIsInBlcm1pc3Npb25zIiwicm9sZXMiLCJyZXF1aXJlQWxsIiwiYWRtaW5Pbmx5IiwicmVzb3VyY2UiLCJhY3Rpb24iLCJvcmdhbml6YXRpb25JZCIsInJlZGlyZWN0VG8iLCJmYWxsYmFjayIsIkZhbGxiYWNrQ29tcG9uZW50IiwiUHJvdGVjdGVkQ29tcG9uZW50IiwicHJvcHMiLCJyb3V0ZXIiLCJ1c2VSb3V0ZXIiLCJzdGF0ZSIsInVzZUF1dGgiLCJoYXNQZXJtaXNzaW9uIiwiaGFzUm9sZSIsImhhc0FueVJvbGUiLCJoYXNBbnlQZXJtaXNzaW9uIiwiY2FuQWNjZXNzIiwiaXNBZG1pbiIsInVzZVBlcm1pc3Npb25zIiwiaXNBdXRoZW50aWNhdGVkIiwiUmVhY3QiLCJ1c2VFZmZlY3QiLCJwdXNoIiwiZGl2IiwiY2xhc3NOYW1lIiwiaDIiLCJwIiwiaGFzUmVzb3VyY2VBY2Nlc3MiLCJsZW5ndGgiLCJoYXNSZXF1aXJlZFBlcm1pc3Npb25zIiwiZXZlcnkiLCJwZXJtaXNzaW9uIiwiam9pbiIsImhhc1JlcXVpcmVkUm9sZXMiLCJyb2xlIiwiZGlzcGxheU5hbWUiLCJuYW1lIiwiQ29tcG9uZW50Iiwic3ZnIiwiZmlsbCIsInN0cm9rZSIsInZpZXdCb3giLCJwYXRoIiwic3Ryb2tlTGluZWNhcCIsInN0cm9rZUxpbmVqb2luIiwic3Ryb2tlV2lkdGgiLCJkIiwiaDEiLCJidXR0b24iLCJvbkNsaWNrIiwid2luZG93IiwiaGlzdG9yeSIsImJhY2siXSwibWFwcGluZ3MiOiJBQUFBOzs7O0NBSUM7Ozs7Ozs7Ozs7O0lBdU1ZQSxnQkFBZ0I7ZUFBaEJBOztJQWtDYixPQUErQjtlQUEvQjs7SUE1RGFDLGVBQWU7ZUFBZkE7O0lBSEFDLFFBQVE7ZUFBUkE7O0lBYUFDLGNBQWM7ZUFBZEE7O0lBaktHQyxlQUFlO2VBQWZBOztJQXdLSEMsa0JBQWtCO2VBQWxCQTs7SUFkQUMsU0FBUztlQUFUQTs7Ozs4REE5S0s7NEJBQ1E7NkJBQ0Y7Z0NBQ087Ozs7OztBQWlCeEIsU0FBU0YsZ0JBQ2RHLGdCQUF3QyxFQUN4Q0MsVUFBa0MsQ0FBQyxDQUFD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