{"version":3,"names":["SystemPulsePanel","cov_2ef22abkzm","f","data","isLoading","error","refetch","s","_useSystemMetrics","useSystemMetrics","showUnhealthy","setShowUnhealthy","_react","default","useState","panelVisibility","refreshInterval","_SettingsContext","useSettings","systemPulse","b","useEffect","interval","setInterval","_analytics","trackEvent","panel","clearInterval","handleRefresh","metrics","Array","isArray","filteredMetrics","filter","m","status","_jsxruntime","jsxs","className","jsx","String","_EmptyState","illustration","title","description","action","label","onClick","type","checked","onChange","e","target","length","map","metric","_AnimatedIllustration","name","id","alt","_StatusIndicator","value","detail"],"sources":["/Users/pavan/Desktop/Devops-app-dev-cursor/frontend/src/components/dashboard/SystemPulsePanel.tsx"],"sourcesContent":["'use client';\n\nimport React, { useContext, useEffect } from 'react';\nimport AnimatedIllustration from '../ui/AnimatedIllustration';\nimport StatusIndicator from '../ui/StatusIndicator';\nimport EmptyState from '../ui/EmptyState';\nimport { useSystemMetrics } from '../../hooks/useSystemMetrics';\nimport { trackEvent } from '../../utils/analytics';\nimport type { StatusType } from '../ui/StatusIndicator';\nimport { useSettings } from '../../contexts/SettingsContext';\n// import { SettingsContext } from '../../contexts/SettingsContext'; // Uncomment when context is ready\n\ninterface Metric {\n  id: string;\n  title: string;\n  status: string;\n  value: string;\n  detail: string;\n}\n\n/**\n * Left panel component displaying system health signals.\n * Shows key metrics with color-coded status indicators.\n */\nexport default function SystemPulsePanel() {\n  // const { refreshInterval } = useContext(SettingsContext) || { refreshInterval: 0 };\n  const { data, isLoading, error, refetch } = useSystemMetrics();\n  const [showUnhealthy, setShowUnhealthy] = React.useState(false);\n  const { panelVisibility, refreshInterval } = useSettings();\n\n  // Hide panel if not visible\n  if (!panelVisibility.systemPulse) return null;\n\n  // Auto-refresh logic\n  useEffect(() => {\n    if (refreshInterval > 0) {\n      const interval = setInterval(() => {\n        trackEvent('auto-refresh', { panel: 'SystemPulse' });\n        refetch();\n      }, refreshInterval * 1000);\n      return () => clearInterval(interval);\n    }\n  }, [refreshInterval, refetch]);\n\n  const handleRefresh = async () => {\n    trackEvent('refresh', { panel: 'SystemPulse' });\n    await refetch();\n  };\n\n  let metrics: Metric[] = Array.isArray(data) ? data : [];\n  const filteredMetrics = showUnhealthy\n    ? metrics.filter(m => m.status !== 'success')\n    : metrics;\n\n  if (isLoading) {\n    return (\n      <section className=\"bg-white/80 dark:bg-gray-900/80 rounded-xl shadow-lg p-6 flex flex-col gap-6 min-h-[320px] items-center justify-center\">\n        <div className=\"animate-spin rounded-full h-10 w-10 border-b-2 border-blue-500 mb-2\" aria-label=\"Loading system metrics\" />\n        <span className=\"text-gray-500\">Loading system metrics...</span>\n      </section>\n    );\n  }\n\n  if (error) {\n    trackEvent('error', { panel: 'SystemPulse', error: String(error) });\n    return (\n      <section className=\"bg-white/80 dark:bg-gray-900/80 rounded-xl shadow-lg p-6 flex flex-col gap-6 min-h-[320px] items-center justify-center\">\n        <EmptyState\n          illustration=\"mascot\"\n          title=\"Error Loading Metrics\"\n          description=\"We couldn't load your system metrics. Please try again.\"\n          action={{ label: 'Retry', onClick: handleRefresh }}\n        />\n      </section>\n    );\n  }\n\n  return (\n    <section className=\"bg-white/80 dark:bg-gray-900/80 rounded-xl shadow-lg p-6 flex flex-col gap-6 relative overflow-hidden min-h-[320px]\">\n      {/* Panel Controls */}\n      <div className=\"flex items-center justify-between mb-2\">\n        <label className=\"flex items-center gap-2 text-sm cursor-pointer\">\n          <input\n            type=\"checkbox\"\n            checked={showUnhealthy}\n            onChange={e => setShowUnhealthy(e.target.checked)}\n            className=\"accent-blue-500\"\n            aria-label=\"Show only unhealthy systems\"\n          />\n          Show only unhealthy systems\n        </label>\n        <div className=\"flex items-center gap-2\">\n          {refreshInterval > 0 && (\n            <span className=\"text-xs text-blue-400\" title=\"Auto-refresh enabled\">\n              Auto-refresh: {refreshInterval}s\n            </span>\n          )}\n          <button\n            onClick={handleRefresh}\n            className=\"px-3 py-1 rounded bg-blue-500 text-white font-medium hover:bg-blue-600 focus:outline-none focus:ring-2 focus:ring-blue-400 transition\"\n          >\n            Refresh\n          </button>\n        </div>\n      </div>\n      {/* Metrics or Empty State */}\n      {filteredMetrics.length === 0 ? (\n        <EmptyState\n          illustration=\"mascot\"\n          title=\"No System Metrics\"\n          description=\"Everything is quiet. Enjoy your coffee â˜•\"\n          action={{ label: 'Refresh', onClick: handleRefresh }}\n        />\n      ) : (\n        <div className=\"flex flex-col gap-4\">\n          {filteredMetrics.map(metric => (\n            <div key={metric.id} className=\"relative flex items-center gap-4 group hover:bg-blue-50 dark:hover:bg-blue-900/20 transition rounded-lg p-4\">\n              <AnimatedIllustration\n                name={metric.id === 'cicd' ? 'pipeline' : metric.id === 'k8s' ? 'k8s' : 'cloud'}\n                className=\"absolute right-2 bottom-2 w-20 h-20 opacity-15 pointer-events-none group-hover:scale-105 transition-transform duration-300\"\n                alt={metric.title}\n              />\n              <StatusIndicator status={metric.status as StatusType} />\n              <div className=\"z-10\">\n                <div className=\"font-medium\">{metric.title}</div>\n                <div className=\"text-xs text-gray-500\">{metric.value}</div>\n                {metric.detail && <div className=\"text-xs text-blue-400 mt-1\">{metric.detail}</div>}\n              </div>\n            </div>\n          ))}\n        </div>\n      )}\n    </section>\n  );\n} "],"mappings":"AAAA;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;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","ignoreList":[]}