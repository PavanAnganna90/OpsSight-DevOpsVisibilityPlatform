801c9b8e1d8fd49f6d69de5d4c270b4d
/**
 * Time utility functions for formatting durations and timestamps
 */ /**
 * Format duration in seconds to human-readable string
 * @param seconds Duration in seconds
 * @returns Formatted duration string (e.g., "2m 30s", "1h 15m", "45s")
 */ "use strict";
Object.defineProperty(exports, "__esModule", {
    value: true
});
function _export(target, all) {
    for(var name in all)Object.defineProperty(target, name, {
        enumerable: true,
        get: all[name]
    });
}
_export(exports, {
    formatDuration: function() {
        return formatDuration;
    },
    formatPreciseDuration: function() {
        return formatPreciseDuration;
    },
    formatRelativeTime: function() {
        return formatRelativeTime;
    },
    parseDurationToSeconds: function() {
        return parseDurationToSeconds;
    }
});
const formatDuration = (seconds)=>{
    if (seconds < 0 || !Number.isFinite(seconds)) return '0s';
    const hours = Math.floor(seconds / 3600);
    const minutes = Math.floor(seconds % 3600 / 60);
    const remainingSeconds = Math.floor(seconds % 60);
    const parts = [];
    if (hours > 0) {
        parts.push(`${hours}h`);
    }
    if (minutes > 0) {
        parts.push(`${minutes}m`);
    }
    if (remainingSeconds > 0 || parts.length === 0) {
        parts.push(`${remainingSeconds}s`);
    }
    return parts.join(' ');
};
const formatPreciseDuration = (seconds)=>{
    if (seconds < 0 || !Number.isFinite(seconds)) return '0s';
    if (seconds < 1) {
        return `${Math.round(seconds * 1000)}ms`;
    }
    if (seconds < 60) {
        return `${seconds.toFixed(1)}s`;
    }
    return formatDuration(seconds);
};
const formatRelativeTime = (timestamp)=>{
    const date = new Date(timestamp);
    const now = new Date();
    const diffMs = now.getTime() - date.getTime();
    const diffSeconds = Math.floor(diffMs / 1000);
    const diffMinutes = Math.floor(diffSeconds / 60);
    const diffHours = Math.floor(diffMinutes / 60);
    const diffDays = Math.floor(diffHours / 24);
    if (Math.abs(diffSeconds) < 60) {
        return diffSeconds > 0 ? 'just now' : 'in a moment';
    }
    if (Math.abs(diffMinutes) < 60) {
        const minutes = Math.abs(diffMinutes);
        return diffMinutes > 0 ? `${minutes} minute${minutes !== 1 ? 's' : ''} ago` : `in ${minutes} minute${minutes !== 1 ? 's' : ''}`;
    }
    if (Math.abs(diffHours) < 24) {
        const hours = Math.abs(diffHours);
        return diffHours > 0 ? `${hours} hour${hours !== 1 ? 's' : ''} ago` : `in ${hours} hour${hours !== 1 ? 's' : ''}`;
    }
    const days = Math.abs(diffDays);
    return diffDays > 0 ? `${days} day${days !== 1 ? 's' : ''} ago` : `in ${days} day${days !== 1 ? 's' : ''}`;
};
const parseDurationToSeconds = (duration)=>{
    // Process patterns in order of specificity to avoid conflicts
    // ms must come before s to avoid partial matches
    const patterns = [
        {
            pattern: /(\d+)h/g,
            multiplier: 3600
        },
        {
            pattern: /(\d+)ms/g,
            multiplier: 0.001
        },
        {
            pattern: /(\d+)m(?!s)/g,
            multiplier: 60
        },
        {
            pattern: /(\d+)s(?![\w])/g,
            multiplier: 1
        } // negative lookahead to exclude 'ms'
    ];
    let totalSeconds = 0;
    patterns.forEach(({ pattern, multiplier })=>{
        // Create new regex instance to avoid global state issues
        const regex = new RegExp(pattern.source, 'g');
        let match;
        while((match = regex.exec(duration)) !== null){
            totalSeconds += parseInt(match[1], 10) * multiplier;
        }
    });
    return totalSeconds;
};

//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi9Vc2Vycy9wYXZhbi9EZXNrdG9wL0Rldm9wcy1hcHAtZGV2LWN1cnNvci9mcm9udGVuZC9zcmMvdXRpbHMvdGltZS50cyJdLCJzb3VyY2VzQ29udGVudCI6WyIvKipcbiAqIFRpbWUgdXRpbGl0eSBmdW5jdGlvbnMgZm9yIGZvcm1hdHRpbmcgZHVyYXRpb25zIGFuZCB0aW1lc3RhbXBzXG4gKi9cblxuLyoqXG4gKiBGb3JtYXQgZHVyYXRpb24gaW4gc2Vjb25kcyB0byBodW1hbi1yZWFkYWJsZSBzdHJpbmdcbiAqIEBwYXJhbSBzZWNvbmRzIER1cmF0aW9uIGluIHNlY29uZHNcbiAqIEByZXR1cm5zIEZvcm1hdHRlZCBkdXJhdGlvbiBzdHJpbmcgKGUuZy4sIFwiMm0gMzBzXCIsIFwiMWggMTVtXCIsIFwiNDVzXCIpXG4gKi9cbmV4cG9ydCBjb25zdCBmb3JtYXREdXJhdGlvbiA9IChzZWNvbmRzOiBudW1iZXIpOiBzdHJpbmcgPT4ge1xuICBpZiAoc2Vjb25kcyA8IDAgfHwgIU51bWJlci5pc0Zpbml0ZShzZWNvbmRzKSkgcmV0dXJuICcwcyc7XG4gIFxuICBjb25zdCBob3VycyA9IE1hdGguZmxvb3Ioc2Vjb25kcyAvIDM2MDApO1xuICBjb25zdCBtaW51dGVzID0gTWF0aC5mbG9vcigoc2Vjb25kcyAlIDM2MDApIC8gNjApO1xuICBjb25zdCByZW1haW5pbmdTZWNvbmRzID0gTWF0aC5mbG9vcihzZWNvbmRzICUgNjApO1xuXG4gIGNvbnN0IHBhcnRzOiBzdHJpbmdbXSA9IFtdO1xuICBcbiAgaWYgKGhvdXJzID4gMCkge1xuICAgIHBhcnRzLnB1c2goYCR7aG91cnN9aGApO1xuICB9XG4gIFxuICBpZiAobWludXRlcyA+IDApIHtcbiAgICBwYXJ0cy5wdXNoKGAke21pbnV0ZXN9bWApO1xuICB9XG4gIFxuICBpZiAocmVtYWluaW5nU2Vjb25kcyA+IDAgfHwgcGFydHMubGVuZ3RoID09PSAwKSB7XG4gICAgcGFydHMucHVzaChgJHtyZW1haW5pbmdTZWNvbmRzfXNgKTtcbiAgfVxuXG4gIHJldHVybiBwYXJ0cy5qb2luKCcgJyk7XG59O1xuXG4vKipcbiAqIEZvcm1hdCBkdXJhdGlvbiB3aXRoIG1vcmUgcHJlY2lzaW9uIGZvciBzaG9ydGVyIGR1cmF0aW9uc1xuICogQHBhcmFtIHNlY29uZHMgRHVyYXRpb24gaW4gc2Vjb25kcyAoY2FuIGluY2x1ZGUgbWlsbGlzZWNvbmRzIGFzIGRlY2ltYWwpXG4gKiBAcmV0dXJucyBGb3JtYXR0ZWQgZHVyYXRpb24gc3RyaW5nIHdpdGggYXBwcm9wcmlhdGUgcHJlY2lzaW9uXG4gKi9cbmV4cG9ydCBjb25zdCBmb3JtYXRQcmVjaXNlRHVyYXRpb24gPSAoc2Vjb25kczogbnVtYmVyKTogc3RyaW5nID0+IHtcbiAgaWYgKHNlY29uZHMgPCAwIHx8ICFOdW1iZXIuaXNGaW5pdGUoc2Vjb25kcykpIHJldHVybiAnMHMnO1xuICBcbiAgaWYgKHNlY29uZHMgPCAxKSB7XG4gICAgcmV0dXJuIGAke01hdGgucm91bmQoc2Vjb25kcyAqIDEwMDApfW1zYDtcbiAgfVxuICBcbiAgaWYgKHNlY29uZHMgPCA2MCkge1xuICAgIHJldHVybiBgJHtzZWNvbmRzLnRvRml4ZWQoMSl9c2A7XG4gIH1cbiAgXG4gIHJldHVybiBmb3JtYXREdXJhdGlvbihzZWNvbmRzKTtcbn07XG5cbi8qKlxuICogRm9ybWF0IHRpbWVzdGFtcCB0byByZWxhdGl2ZSB0aW1lIChlLmcuLCBcIjIgbWludXRlcyBhZ29cIiwgXCJpbiAxIGhvdXJcIilcbiAqIEBwYXJhbSB0aW1lc3RhbXAgRGF0ZSBvciB0aW1lc3RhbXAgdG8gZm9ybWF0XG4gKiBAcmV0dXJucyBSZWxhdGl2ZSB0aW1lIHN0cmluZ1xuICovXG5leHBvcnQgY29uc3QgZm9ybWF0UmVsYXRpdmVUaW1lID0gKHRpbWVzdGFtcDogRGF0ZSB8IHN0cmluZyB8IG51bWJlcik6IHN0cmluZyA9PiB7XG4gIGNvbnN0IGRhdGUgPSBuZXcgRGF0ZSh0aW1lc3RhbXApO1xuICBjb25zdCBub3cgPSBuZXcgRGF0ZSgpO1xuICBjb25zdCBkaWZmTXMgPSBub3cuZ2V0VGltZSgpIC0gZGF0ZS5nZXRUaW1lKCk7XG4gIGNvbnN0IGRpZmZTZWNvbmRzID0gTWF0aC5mbG9vcihkaWZmTXMgLyAxMDAwKTtcbiAgY29uc3QgZGlmZk1pbnV0ZXMgPSBNYXRoLmZsb29yKGRpZmZTZWNvbmRzIC8gNjApO1xuICBjb25zdCBkaWZmSG91cnMgPSBNYXRoLmZsb29yKGRpZmZNaW51dGVzIC8gNjApO1xuICBjb25zdCBkaWZmRGF5cyA9IE1hdGguZmxvb3IoZGlmZkhvdXJzIC8gMjQpO1xuXG4gIGlmIChNYXRoLmFicyhkaWZmU2Vjb25kcykgPCA2MCkge1xuICAgIHJldHVybiBkaWZmU2Vjb25kcyA+IDAgPyAnanVzdCBub3cnIDogJ2luIGEgbW9tZW50JztcbiAgfVxuICBcbiAgaWYgKE1hdGguYWJzKGRpZmZNaW51dGVzKSA8IDYwKSB7XG4gICAgY29uc3QgbWludXRlcyA9IE1hdGguYWJzKGRpZmZNaW51dGVzKTtcbiAgICByZXR1cm4gZGlmZk1pbnV0ZXMgPiAwIFxuICAgICAgPyBgJHttaW51dGVzfSBtaW51dGUke21pbnV0ZXMgIT09IDEgPyAncycgOiAnJ30gYWdvYFxuICAgICAgOiBgaW4gJHttaW51dGVzfSBtaW51dGUke21pbnV0ZXMgIT09IDEgPyAncycgOiAnJ31gO1xuICB9XG4gIFxuICBpZiAoTWF0aC5hYnMoZGlmZkhvdXJzKSA8IDI0KSB7XG4gICAgY29uc3QgaG91cnMgPSBNYXRoLmFicyhkaWZmSG91cnMpO1xuICAgIHJldHVybiBkaWZmSG91cnMgPiAwIFxuICAgICAgPyBgJHtob3Vyc30gaG91ciR7aG91cnMgIT09IDEgPyAncycgOiAnJ30gYWdvYFxuICAgICAgOiBgaW4gJHtob3Vyc30gaG91ciR7aG91cnMgIT09IDEgPyAncycgOiAnJ31gO1xuICB9XG4gIFxuICBjb25zdCBkYXlzID0gTWF0aC5hYnMoZGlmZkRheXMpO1xuICByZXR1cm4gZGlmZkRheXMgPiAwIFxuICAgID8gYCR7ZGF5c30gZGF5JHtkYXlzICE9PSAxID8gJ3MnIDogJyd9IGFnb2BcbiAgICA6IGBpbiAke2RheXN9IGRheSR7ZGF5cyAhPT0gMSA/ICdzJyA6ICcnfWA7XG59O1xuXG4vKipcbiAqIFBhcnNlIGR1cmF0aW9uIHN0cmluZyB0byBzZWNvbmRzXG4gKiBAcGFyYW0gZHVyYXRpb24gRHVyYXRpb24gc3RyaW5nIChlLmcuLCBcIjJtIDMwc1wiLCBcIjFoIDE1bVwiLCBcIjQ1c1wiKVxuICogQHJldHVybnMgRHVyYXRpb24gaW4gc2Vjb25kc1xuICovXG5leHBvcnQgY29uc3QgcGFyc2VEdXJhdGlvblRvU2Vjb25kcyA9IChkdXJhdGlvbjogc3RyaW5nKTogbnVtYmVyID0+IHtcbiAgLy8gUHJvY2VzcyBwYXR0ZXJucyBpbiBvcmRlciBvZiBzcGVjaWZpY2l0eSB0byBhdm9pZCBjb25mbGljdHNcbiAgLy8gbXMgbXVzdCBjb21lIGJlZm9yZSBzIHRvIGF2b2lkIHBhcnRpYWwgbWF0Y2hlc1xuICBjb25zdCBwYXR0ZXJucyA9IFtcbiAgICB7IHBhdHRlcm46IC8oXFxkKyloL2csIG11bHRpcGxpZXI6IDM2MDAgfSxcbiAgICB7IHBhdHRlcm46IC8oXFxkKyltcy9nLCBtdWx0aXBsaWVyOiAwLjAwMSB9LFxuICAgIHsgcGF0dGVybjogLyhcXGQrKW0oPyFzKS9nLCBtdWx0aXBsaWVyOiA2MCB9LCAvLyBuZWdhdGl2ZSBsb29rYWhlYWQgdG8gZXhjbHVkZSAnbXMnXG4gICAgeyBwYXR0ZXJuOiAvKFxcZCspcyg/IVtcXHddKS9nLCBtdWx0aXBsaWVyOiAxIH0gLy8gbmVnYXRpdmUgbG9va2FoZWFkIHRvIGV4Y2x1ZGUgJ21zJ1xuICBdO1xuXG4gIGxldCB0b3RhbFNlY29uZHMgPSAwO1xuXG4gIHBhdHRlcm5zLmZvckVhY2goKHsgcGF0dGVybiwgbXVsdGlwbGllciB9KSA9PiB7XG4gICAgLy8gQ3JlYXRlIG5ldyByZWdleCBpbnN0YW5jZSB0byBhdm9pZCBnbG9iYWwgc3RhdGUgaXNzdWVzXG4gICAgY29uc3QgcmVnZXggPSBuZXcgUmVnRXhwKHBhdHRlcm4uc291cmNlLCAnZycpO1xuICAgIGxldCBtYXRjaDtcbiAgICB3aGlsZSAoKG1hdGNoID0gcmVnZXguZXhlYyhkdXJhdGlvbikpICE9PSBudWxsKSB7XG4gICAgICB0b3RhbFNlY29uZHMgKz0gcGFyc2VJbnQobWF0Y2hbMV0sIDEwKSAqIG11bHRpcGxpZXI7XG4gICAgfVxuICB9KTtcblxuICByZXR1cm4gdG90YWxTZWNvbmRzO1xufTsgIl0sIm5hbWVzIjpbImZvcm1hdER1cmF0aW9uIiwiZm9ybWF0UHJlY2lzZUR1cmF0aW9uIiwiZm9ybWF0UmVsYXRpdmVUaW1lIiwicGFyc2VEdXJhdGlvblRvU2Vjb25kcyIsInNlY29uZHMiLCJOdW1iZXIiLCJpc0Zpbml0ZSIsImhvdXJzIiwiTWF0aCIsImZsb29yIiwibWludXRlcyIsInJlbWFpbmluZ1NlY29uZHMiLCJwYXJ0cyIsInB1c2giLCJsZW5ndGgiLCJqb2luIiwicm91bmQiLCJ0b0ZpeGVkIiwidGltZXN0YW1wIiwiZGF0ZSIsIkRhdGUiLCJub3ciLCJkaWZmTXMiLCJnZXRUaW1lIiwiZGlmZlNlY29uZHMiLCJkaWZmTWludXRlcyIsImRpZmZIb3VycyIsImRpZmZEYXlzIiwiYWJzIiwiZGF5cyIsImR1cmF0aW9uIiwicGF0dGVybnMiLCJwYXR0ZXJuIiwibXVsdGlwbGllciIsInRvdGFsU2Vjb25kcyIsImZvckVhY2giLCJyZWdleCIsIlJlZ0V4cCIsInNvdXJjZSIsIm1hdGNoIiwiZXhlYyIsInBhcnNlSW50Il0sIm1hcHBpbmdzIjoiQUFBQTs7Q0FFQyxHQUVEOzs7O0NBSUM7Ozs7Ozs7Ozs7O0lBQ1lBLGNBQWM7ZUFBZEE7O0lBNkJBQyxxQkFBcUI7ZUFBckJBOztJQW1CQUMsa0JBQWtCO2VBQWxCQTs7SUFzQ0FDLHNCQUFzQjtlQUF0QkE7OztBQXRGTixNQUFNSCxpQkFBaUIsQ0FBQ0k7SUFDN0IsSUFBSUEsVUFBVSxLQUFLLENBQUNDLE9BQU9DLFFBQVEsQ0FBQ0YsVUFBVSxPQUFPO0lBRXJELE1BQU1HLFFBQVFDLEtBQUtDLEtBQUssQ0FBQ0wsVUFBVTtJQUNuQyxNQUFNTSxVQUFVRixLQUFLQyxLQUFLLENBQUMsQUFBQ0wsVUFBVSxPQUFRO0lBQzlDLE1BQU1PLG1CQUFtQkgsS0FBS0MsS0FBSyxDQUFDTCxVQUFVO0lBRTlDLE1BQU1RLFFBQWtCLEVBQUU7SUFFMUIsSUFBSUwsUUFBUSxHQUFHO1FBQ2JLLE1BQU1DLElBQUksQ0FBQyxHQUFHTixNQUFNLENBQUMsQ0FBQztJQUN4QjtJQUVBLElBQUlHLFVBQVUsR0FBRztRQUNmRSxNQUFNQyxJQUFJLENBQUMsR0FBR0gsUUFBUSxDQUFDLENBQUM7SUFDMUI7SUFFQSxJQUFJQyxtQkFBbUIsS0FBS0MsTUFBTUUsTUFBTSxLQUFLLEdBQUc7UUFDOUNGLE1BQU1DLElBQUksQ0FBQyxHQUFHRixpQkFBaUIsQ0FBQyxDQUFDO0lBQ25DO0lBRUEsT0FBT0MsTUFBTUcsSUFBSSxDQUFDO0FBQ3BCO0FBT08sTUFBTWQsd0JBQXdCLENBQUNHO0lBQ3BDLElBQUlBLFVBQVUsS0FBSyxDQUFDQyxPQUFPQyxRQUFRLENBQUNGLFVBQVUsT0FBTztJQUVyRCxJQUFJQSxVQUFVLEdBQUc7UUFDZixPQUFPLEdBQUdJLEtBQUtRLEtBQUssQ0FBQ1osVUFBVSxNQUFNLEVBQUUsQ0FBQztJQUMxQztJQUVBLElBQUlBLFVBQVUsSUFBSTtRQUNoQixPQUFPLEdBQUdBLFFBQVFhLE9BQU8sQ0FBQyxHQUFHLENBQUMsQ0FBQztJQUNqQztJQUVBLE9BQU9qQixlQUFlSTtBQUN4QjtBQU9PLE1BQU1GLHFCQUFxQixDQUFDZ0I7SUFDakMsTUFBTUMsT0FBTyxJQUFJQyxLQUFLRjtJQUN0QixNQUFNRyxNQUFNLElBQUlEO0lBQ2hCLE1BQU1FLFNBQVNELElBQUlFLE9BQU8sS0FBS0osS0FBS0ksT0FBTztJQUMzQyxNQUFNQyxjQUFjaEIsS0FBS0MsS0FBSyxDQUFDYSxTQUFTO0lBQ3hDLE1BQU1HLGNBQWNqQixLQUFLQyxLQUFLLENBQUNlLGNBQWM7SUFDN0MsTUFBTUUsWUFBWWxCLEtBQUtDLEtBQUssQ0FBQ2dCLGNBQWM7SUFDM0MsTUFBTUUsV0FBV25CLEtBQUtDLEtBQUssQ0FBQ2lCLFlBQVk7SUFFeEMsSUFBSWxCLEtBQUtvQixHQUFHLENBQUNKLGVBQWUsSUFBSTtRQUM5QixPQUFPQSxjQUFjLElBQUksYUFBYTtJQUN4QztJQUVBLElBQUloQixLQUFLb0IsR0FBRyxDQUFDSCxlQUFlLElBQUk7UUFDOUIsTUFBTWYsVUFBVUYsS0FBS29CLEdBQUcsQ0FBQ0g7UUFDekIsT0FBT0EsY0FBYyxJQUNqQixHQUFHZixRQUFRLE9BQU8sRUFBRUEsWUFBWSxJQUFJLE1BQU0sR0FBRyxJQUFJLENBQUMsR0FDbEQsQ0FBQyxHQUFHLEVBQUVBLFFBQVEsT0FBTyxFQUFFQSxZQUFZLElBQUksTUFBTSxJQUFJO0lBQ3ZEO0lBRUEsSUFBSUYsS0FBS29CLEdBQUcsQ0FBQ0YsYUFBYSxJQUFJO1FBQzVCLE1BQU1uQixRQUFRQyxLQUFLb0IsR0FBRyxDQUFDRjtRQUN2QixPQUFPQSxZQUFZLElBQ2YsR0FBR25CLE1BQU0sS0FBSyxFQUFFQSxVQUFVLElBQUksTUFBTSxHQUFHLElBQUksQ0FBQyxHQUM1QyxDQUFDLEdBQUcsRUFBRUEsTUFBTSxLQUFLLEVBQUVBLFVBQVUsSUFBSSxNQUFNLElBQUk7SUFDakQ7SUFFQSxNQUFNc0IsT0FBT3JCLEtBQUtvQixHQUFHLENBQUNEO0lBQ3RCLE9BQU9BLFdBQVcsSUFDZCxHQUFHRSxLQUFLLElBQUksRUFBRUEsU0FBUyxJQUFJLE1BQU0sR0FBRyxJQUFJLENBQUMsR0FDekMsQ0FBQyxHQUFHLEVBQUVBLEtBQUssSUFBSSxFQUFFQSxTQUFTLElBQUksTUFBTSxJQUFJO0FBQzlDO0FBT08sTUFBTTFCLHlCQUF5QixDQUFDMkI7SUFDckMsOERBQThEO0lBQzlELGlEQUFpRDtJQUNqRCxNQUFNQyxXQUFXO1FBQ2Y7WUFBRUMsU0FBUztZQUFXQyxZQUFZO1FBQUs7UUFDdkM7WUFBRUQsU0FBUztZQUFZQyxZQUFZO1FBQU07UUFDekM7WUFBRUQsU0FBUztZQUFnQkMsWUFBWTtRQUFHO1FBQzFDO1lBQUVELFNBQVM7WUFBbUJDLFlBQVk7UUFBRSxFQUFFLHFDQUFxQztLQUNwRjtJQUVELElBQUlDLGVBQWU7SUFFbkJILFNBQVNJLE9BQU8sQ0FBQyxDQUFDLEVBQUVILE9BQU8sRUFBRUMsVUFBVSxFQUFFO1FBQ3ZDLHlEQUF5RDtRQUN6RCxNQUFNRyxRQUFRLElBQUlDLE9BQU9MLFFBQVFNLE1BQU0sRUFBRTtRQUN6QyxJQUFJQztRQUNKLE1BQU8sQUFBQ0EsQ0FBQUEsUUFBUUgsTUFBTUksSUFBSSxDQUFDVixTQUFRLE1BQU8sS0FBTTtZQUM5Q0ksZ0JBQWdCTyxTQUFTRixLQUFLLENBQUMsRUFBRSxFQUFFLE1BQU1OO1FBQzNDO0lBQ0Y7SUFFQSxPQUFPQztBQUNUIn0=