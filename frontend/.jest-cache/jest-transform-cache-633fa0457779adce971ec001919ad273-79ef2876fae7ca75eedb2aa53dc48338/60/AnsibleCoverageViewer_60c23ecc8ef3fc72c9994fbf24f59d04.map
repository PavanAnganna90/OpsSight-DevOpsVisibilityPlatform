{"version":3,"sources":["/Users/pavan/Desktop/Devops-app-dev-cursor/frontend/src/components/automation/AnsibleCoverageViewer.tsx"],"sourcesContent":["/**\n * Ansible Automation Coverage Viewer\n * \n * Interactive component for analyzing Ansible playbook executions,\n * tracking automation coverage, and visualizing infrastructure automation patterns.\n */\n\nimport React, { useState, useCallback, useRef } from 'react';\nimport { useMutation } from '@tanstack/react-query';\nimport { Upload, Play, AlertTriangle, CheckCircle, Clock, Activity } from 'lucide-react';\nimport { Card, CardContent, CardHeader, CardTitle } from '@/components/ui/card';\nimport { Button } from '@/components/ui/Button';\nimport { Badge } from '@/components/ui/badge';\nimport { Progress } from '@/components/ui/progress';\n\n// Types for Ansible analysis data\ninterface AnsibleExecutionSummary {\n  total_tasks: number;\n  total_hosts: number;\n  total_plays: number;\n  success_rate: number;\n  failure_rate: number;\n  change_rate: number;\n  execution_time_seconds?: number;\n  status_breakdown: Record<string, number>;\n}\n\ninterface AutomationCoverage {\n  overall_score: number;\n  total_unique_modules: number;\n  total_module_executions: number;\n  automation_breadth: number;\n  automation_depth: number;\n}\n\ninterface HostReliability {\n  host_count: number;\n  overall_reliability: number;\n  problematic_hosts: Array<{\n    host: string;\n    issues: string[];\n  }>;\n}\n\ninterface Recommendation {\n  category: string;\n  priority: 'high' | 'medium' | 'low';\n  title: string;\n  description: string;\n  action: string;\n}\n\ninterface AnsibleAnalysis {\n  execution_summary: AnsibleExecutionSummary;\n  automation_coverage: AutomationCoverage;\n  host_reliability: HostReliability;\n  recommendations: Recommendation[];\n  metadata: {\n    analysis_timestamp: string;\n    log_format: string;\n    total_lines_processed: number;\n  };\n}\n\nconst PRIORITY_COLORS = {\n  high: 'bg-red-100 text-red-800 border-red-200',\n  medium: 'bg-yellow-100 text-yellow-800 border-yellow-200',\n  low: 'bg-gray-100 text-gray-800 border-gray-200'\n} as const;\n\nexport const AnsibleCoverageViewer: React.FC = () => {\n  const [selectedFile, setSelectedFile] = useState<File | null>(null);\n  const [logContent, setLogContent] = useState<string>('');\n  const [logFormat, setLogFormat] = useState<string>('auto');\n  const [uploadMethod, setUploadMethod] = useState<'file' | 'paste'>('file');\n  const [dragActive, setDragActive] = useState(false);\n  const [analysis, setAnalysis] = useState<AnsibleAnalysis | null>(null);\n  const [activeTab, setActiveTab] = useState<'overview' | 'recommendations'>('overview');\n  const fileInputRef = useRef<HTMLInputElement>(null);\n\n  // API endpoints\n  const API_BASE = '/api/v1/ansible';\n\n  // Mutation for parsing logs\n  const parseLogsMutation = useMutation({\n    mutationFn: async ({ content, format }: { content: string; format: string }) => {\n      const response = await fetch(`${API_BASE}/parse-log`, {\n        method: 'POST',\n        headers: {\n          'Content-Type': 'application/json',\n        },\n        body: JSON.stringify({\n          log_content: content,\n          log_format: format\n        }),\n      });\n\n      if (!response.ok) {\n        const error = await response.json();\n        throw new Error(error.detail || 'Failed to parse logs');\n      }\n\n      return response.json();\n    },\n    onSuccess: (data) => {\n      // Transform backend response to match UI expected format\n      const transformedAnalysis: AnsibleAnalysis = {\n        execution_summary: {\n          total_tasks: data.summary?.total_tasks || 0,\n          total_hosts: data.summary?.total_hosts || 0,\n          total_plays: data.summary?.total_plays || 0,\n          success_rate: data.summary?.success_rate || 0,\n          failure_rate: data.summary?.failure_rate || 0,\n          change_rate: data.summary?.change_rate || 0,\n          execution_time_seconds: data.metadata?.execution_time || 0,\n          status_breakdown: data.summary?.status_breakdown || {}\n        },\n        automation_coverage: {\n          overall_score: data.coverage_metrics?.automation_coverage || 0,\n          total_unique_modules: data.coverage_metrics?.total_unique_modules || 0,\n          total_module_executions: data.coverage_metrics?.total_module_executions || 0,\n          automation_breadth: data.coverage_metrics?.automation_breadth || 0,\n          automation_depth: data.coverage_metrics?.automation_depth || 0\n        },\n        host_reliability: {\n          host_count: data.summary?.total_hosts || 0,\n          overall_reliability: data.coverage_metrics?.host_reliability || 0,\n          problematic_hosts: data.coverage_metrics?.problematic_hosts || []\n        },\n        recommendations: data.coverage_metrics?.recommendations || [],\n        metadata: {\n          analysis_timestamp: new Date().toISOString(),\n          log_format: data.format || 'unknown',\n          total_lines_processed: data.metadata?.total_lines_processed || 0\n        }\n      };\n      setAnalysis(transformedAnalysis);\n    },\n  });\n\n  // Mutation for uploading files\n  const uploadFileMutation = useMutation({\n    mutationFn: async ({ file, format }: { file: File; format: string }) => {\n      const formData = new FormData();\n      formData.append('file', file);\n      formData.append('log_format', format);\n\n      const response = await fetch(`${API_BASE}/parse-log-file`, {\n        method: 'POST',\n        body: formData,\n      });\n\n      if (!response.ok) {\n        const error = await response.json();\n        throw new Error(error.detail || 'Failed to upload file');\n      }\n\n      return response.json();\n    },\n    onSuccess: (data) => {\n      // Transform backend response to match UI expected format\n      const transformedAnalysis: AnsibleAnalysis = {\n        execution_summary: {\n          total_tasks: data.summary?.total_tasks || 0,\n          total_hosts: data.summary?.total_hosts || 0,\n          total_plays: data.summary?.total_plays || 0,\n          success_rate: data.summary?.success_rate || 0,\n          failure_rate: data.summary?.failure_rate || 0,\n          change_rate: data.summary?.change_rate || 0,\n          execution_time_seconds: data.metadata?.execution_time || 0,\n          status_breakdown: data.summary?.status_breakdown || {}\n        },\n        automation_coverage: {\n          overall_score: data.coverage_metrics?.automation_coverage || 0,\n          total_unique_modules: data.coverage_metrics?.total_unique_modules || 0,\n          total_module_executions: data.coverage_metrics?.total_module_executions || 0,\n          automation_breadth: data.coverage_metrics?.automation_breadth || 0,\n          automation_depth: data.coverage_metrics?.automation_depth || 0\n        },\n        host_reliability: {\n          host_count: data.summary?.total_hosts || 0,\n          overall_reliability: data.coverage_metrics?.host_reliability || 0,\n          problematic_hosts: data.coverage_metrics?.problematic_hosts || []\n        },\n        recommendations: data.coverage_metrics?.recommendations || [],\n        metadata: {\n          analysis_timestamp: new Date().toISOString(),\n          log_format: data.format || 'unknown',\n          total_lines_processed: data.metadata?.total_lines_processed || 0\n        }\n      };\n      setAnalysis(transformedAnalysis);\n    },\n  });\n\n  // Drag and drop handlers\n  const handleDrag = useCallback((e: React.DragEvent) => {\n    e.preventDefault();\n    e.stopPropagation();\n    if (e.type === 'dragenter' || e.type === 'dragover') {\n      setDragActive(true);\n    } else if (e.type === 'dragleave') {\n      setDragActive(false);\n    }\n  }, []);\n\n  const handleDrop = useCallback((e: React.DragEvent) => {\n    e.preventDefault();\n    e.stopPropagation();\n    setDragActive(false);\n\n    const files = e.dataTransfer.files;\n    if (files && files[0]) {\n      setSelectedFile(files[0]);\n      setUploadMethod('file');\n    }\n  }, []);\n\n  const handleFileSelect = (e: React.ChangeEvent<HTMLInputElement>) => {\n    const files = e.target.files;\n    if (files && files[0]) {\n      setSelectedFile(files[0]);\n    }\n  };\n\n  const handleAnalyze = () => {\n    if (uploadMethod === 'file' && selectedFile) {\n      uploadFileMutation.mutate({ file: selectedFile, format: logFormat });\n    } else if (uploadMethod === 'paste' && logContent.trim()) {\n      parseLogsMutation.mutate({ content: logContent, format: logFormat });\n    }\n  };\n\n  const isLoading = parseLogsMutation.isPending || uploadFileMutation.isPending;\n  const error = parseLogsMutation.error || uploadFileMutation.error;\n\n  return (\n    <div className=\"space-y-6\">\n      {/* Header */}\n      <div className=\"flex items-center justify-between\">\n        <div>\n          <h1 className=\"text-3xl font-bold\">Ansible Automation Coverage</h1>\n          <p className=\"text-muted-foreground mt-1\">\n            Analyze playbook executions and track automation coverage across your infrastructure\n          </p>\n        </div>\n      </div>\n\n      {/* Upload Section */}\n      <Card>\n        <CardHeader>\n          <CardTitle className=\"flex items-center gap-2\">\n            <Upload className=\"w-5 h-5\" />\n            Upload Ansible Logs\n          </CardTitle>\n        </CardHeader>\n        <CardContent className=\"space-y-4\">\n          <div className=\"flex gap-4 mb-4\">\n            <Button\n              variant={uploadMethod === 'file' ? 'primary' : 'outline'}\n              onClick={() => setUploadMethod('file')}\n              size=\"sm\"\n            >\n              Upload File\n            </Button>\n            <Button\n              variant={uploadMethod === 'paste' ? 'primary' : 'outline'}\n              onClick={() => setUploadMethod('paste')}\n              size=\"sm\"\n            >\n              Paste Content\n            </Button>\n          </div>\n\n          <div className=\"flex gap-4 items-end\">\n            <div className=\"flex-1\">\n              <label htmlFor=\"format\" className=\"block text-sm font-medium mb-2\">Log Format</label>\n              <select \n                id=\"format\"\n                value={logFormat} \n                onChange={(e) => setLogFormat(e.target.value)}\n                className=\"w-full px-3 py-2 border rounded-md bg-white dark:bg-gray-800 border-gray-300 dark:border-gray-600\"\n              >\n                <option value=\"auto\">Auto-detect</option>\n                <option value=\"json\">JSON (with callbacks)</option>\n                <option value=\"standard\">Standard Output</option>\n                <option value=\"awx\">AWX/Tower Format</option>\n              </select>\n            </div>\n          </div>\n\n          {uploadMethod === 'file' ? (\n            <div\n              className={`border-2 border-dashed rounded-lg p-8 text-center transition-colors ${\n                dragActive ? 'border-primary bg-primary/5' : 'border-muted-foreground/25'\n              }`}\n              onDragEnter={handleDrag}\n              onDragLeave={handleDrag}\n              onDragOver={handleDrag}\n              onDrop={handleDrop}\n              onClick={() => fileInputRef.current?.click()}\n            >\n              <input\n                ref={fileInputRef}\n                type=\"file\"\n                className=\"hidden\"\n                onChange={handleFileSelect}\n                accept=\".log,.txt,.out\"\n              />\n              \n              <Upload className=\"w-10 h-10 mx-auto mb-4 text-muted-foreground\" />\n              \n              {selectedFile ? (\n                <div>\n                  <p className=\"text-sm font-medium\">{selectedFile.name}</p>\n                  <p className=\"text-xs text-muted-foreground\">\n                    {(selectedFile.size / 1024 / 1024).toFixed(2)} MB\n                  </p>\n                </div>\n              ) : (\n                <div>\n                  <p className=\"text-sm font-medium\">\n                    Drag and drop your Ansible log file here, or click to browse\n                  </p>\n                  <p className=\"text-xs text-muted-foreground mt-1\">\n                    Supports .log, .txt, .out files up to 50MB\n                  </p>\n                </div>\n              )}\n            </div>\n          ) : (\n            <div className=\"space-y-2\">\n              <label htmlFor=\"log-content\" className=\"block text-sm font-medium\">Log Content</label>\n              <textarea\n                id=\"log-content\"\n                value={logContent}\n                onChange={(e: React.ChangeEvent<HTMLTextAreaElement>) => setLogContent(e.target.value)}\n                placeholder=\"Paste your Ansible playbook execution logs here...\"\n                className=\"w-full min-h-[200px] px-3 py-2 font-mono text-sm border rounded-md bg-white dark:bg-gray-800 border-gray-300 dark:border-gray-600\"\n              />\n            </div>\n          )}\n\n          {error && (\n            <div className=\"p-4 border border-red-200 bg-red-50 rounded-md\">\n              <div className=\"flex items-center\">\n                <AlertTriangle className=\"w-4 h-4 text-red-500 mr-2\" />\n                <span className=\"text-red-700\">\n                  {error instanceof Error ? error.message : 'An error occurred while processing the logs'}\n                </span>\n              </div>\n            </div>\n          )}\n\n          <Button\n            onClick={handleAnalyze}\n            disabled={isLoading || (!selectedFile && !logContent.trim())}\n            className=\"w-full\"\n          >\n            {isLoading ? (\n              <>\n                <Activity className=\"w-4 h-4 mr-2 animate-spin\" />\n                Analyzing Logs...\n              </>\n            ) : (\n              <>\n                <Play className=\"w-4 h-4 mr-2\" />\n                Analyze Automation Coverage\n              </>\n            )}\n          </Button>\n        </CardContent>\n      </Card>\n\n      {/* Analysis Results */}\n      {analysis && (\n        <div className=\"space-y-6\">\n          {/* Tab Navigation */}\n          <div className=\"border-b\">\n            <nav className=\"flex space-x-8\">\n              <button\n                onClick={() => setActiveTab('overview')}\n                className={`py-2 px-1 border-b-2 font-medium text-sm ${\n                  activeTab === 'overview'\n                    ? 'border-blue-500 text-blue-600'\n                    : 'border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300'\n                }`}\n              >\n                Overview\n              </button>\n              <button\n                onClick={() => setActiveTab('recommendations')}\n                className={`py-2 px-1 border-b-2 font-medium text-sm ${\n                  activeTab === 'recommendations'\n                    ? 'border-blue-500 text-blue-600'\n                    : 'border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300'\n                }`}\n              >\n                Recommendations\n              </button>\n            </nav>\n          </div>\n\n          {/* Overview Tab */}\n          {activeTab === 'overview' && (\n            <div className=\"space-y-6\">\n              {/* Summary Cards */}\n              <div className=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4\">\n                <Card>\n                  <CardContent className=\"p-6\">\n                    <div className=\"flex items-center justify-between\">\n                      <div>\n                        <p className=\"text-sm font-medium text-muted-foreground\">Success Rate</p>\n                        <p className=\"text-2xl font-bold text-green-600\">\n                          {analysis.execution_summary.success_rate.toFixed(1)}%\n                        </p>\n                      </div>\n                      <CheckCircle className=\"w-8 h-8 text-green-600\" />\n                    </div>\n                  </CardContent>\n                </Card>\n\n                <Card>\n                  <CardContent className=\"p-6\">\n                    <div className=\"flex items-center justify-between\">\n                      <div>\n                        <p className=\"text-sm font-medium text-muted-foreground\">Total Tasks</p>\n                        <p className=\"text-2xl font-bold\">{analysis.execution_summary.total_tasks}</p>\n                      </div>\n                      <Activity className=\"w-8 h-8 text-blue-600\" />\n                    </div>\n                  </CardContent>\n                </Card>\n\n                <Card>\n                  <CardContent className=\"p-6\">\n                    <div className=\"flex items-center justify-between\">\n                      <div>\n                        <p className=\"text-sm font-medium text-muted-foreground\">Hosts</p>\n                        <p className=\"text-2xl font-bold\">{analysis.execution_summary.total_hosts}</p>\n                      </div>\n                      <Activity className=\"w-8 h-8 text-purple-600\" />\n                    </div>\n                  </CardContent>\n                </Card>\n\n                <Card>\n                  <CardContent className=\"p-6\">\n                    <div className=\"flex items-center justify-between\">\n                      <div>\n                        <p className=\"text-sm font-medium text-muted-foreground\">Execution Time</p>\n                        <p className=\"text-2xl font-bold\">\n                          {analysis.execution_summary.execution_time_seconds \n                            ? `${(analysis.execution_summary.execution_time_seconds / 60).toFixed(1)}m` \n                            : 'N/A'}\n                        </p>\n                      </div>\n                      <Clock className=\"w-8 h-8 text-orange-600\" />\n                    </div>\n                  </CardContent>\n                </Card>\n              </div>\n\n              {/* Coverage Score */}\n              <Card>\n                <CardHeader>\n                  <CardTitle>Automation Coverage</CardTitle>\n                </CardHeader>\n                <CardContent className=\"space-y-4\">\n                  <div className=\"space-y-2\">\n                    <div className=\"flex justify-between text-sm\">\n                      <span>Overall Coverage Score</span>\n                      <span>{analysis.automation_coverage.overall_score}%</span>\n                    </div>\n                    <Progress value={analysis.automation_coverage.overall_score} className=\"h-2\" />\n                  </div>\n                  \n                  <div className=\"grid grid-cols-2 gap-4 text-sm\">\n                    <div>\n                      <p className=\"text-muted-foreground\">Unique Modules</p>\n                      <p className=\"font-medium\">{analysis.automation_coverage.total_unique_modules}</p>\n                    </div>\n                    <div>\n                      <p className=\"text-muted-foreground\">Module Categories</p>\n                      <p className=\"font-medium\">{analysis.automation_coverage.automation_breadth}</p>\n                    </div>\n                    <div>\n                      <p className=\"text-muted-foreground\">Automation Depth</p>\n                      <p className=\"font-medium\">{analysis.automation_coverage.automation_depth.toFixed(1)}</p>\n                    </div>\n                    <div>\n                      <p className=\"text-muted-foreground\">Host Reliability</p>\n                      <p className=\"font-medium\">{analysis.host_reliability.overall_reliability.toFixed(1)}%</p>\n                    </div>\n                  </div>\n                </CardContent>\n              </Card>\n\n              {/* Problematic Hosts */}\n              {analysis.host_reliability.problematic_hosts.length > 0 && (\n                <Card>\n                  <CardHeader>\n                    <CardTitle className=\"flex items-center gap-2\">\n                      <AlertTriangle className=\"w-5 h-5 text-orange-500\" />\n                      Problematic Hosts\n                    </CardTitle>\n                  </CardHeader>\n                  <CardContent>\n                    <div className=\"space-y-3\">\n                      {analysis.host_reliability.problematic_hosts.map((host, index) => (\n                        <div key={index} className=\"p-3 border rounded-md bg-orange-50 border-orange-200\">\n                          <span className=\"font-medium\">{host.host}:</span> {host.issues.join(', ')}\n                        </div>\n                      ))}\n                    </div>\n                  </CardContent>\n                </Card>\n              )}\n            </div>\n          )}\n\n          {/* Recommendations Tab */}\n          {activeTab === 'recommendations' && (\n            <div className=\"space-y-6\">\n              <Card>\n                <CardHeader>\n                  <CardTitle>Automation Insights & Recommendations</CardTitle>\n                </CardHeader>\n                <CardContent>\n                  <div className=\"space-y-4\">\n                    {analysis.recommendations.map((rec, index) => (\n                      <div key={index} className={`p-4 border rounded-md ${PRIORITY_COLORS[rec.priority]}`}>\n                        <div className=\"space-y-2\">\n                          <div className=\"flex items-center justify-between\">\n                            <h4 className=\"font-medium\">{rec.title}</h4>\n                            <Badge variant=\"outline\" className=\"capitalize\">\n                              {rec.priority}\n                            </Badge>\n                          </div>\n                          <p className=\"text-sm opacity-90\">{rec.description}</p>\n                          <p className=\"text-sm\"><strong>Action:</strong> {rec.action}</p>\n                        </div>\n                      </div>\n                    ))}\n                    \n                    {analysis.recommendations.length === 0 && (\n                      <div className=\"text-center py-8\">\n                        <CheckCircle className=\"w-12 h-12 mx-auto text-green-600 mb-4\" />\n                        <p className=\"text-lg font-medium\">Excellent automation coverage!</p>\n                        <p className=\"text-muted-foreground\">No specific recommendations at this time.</p>\n                      </div>\n                    )}\n                  </div>\n                </CardContent>\n              </Card>\n\n              {/* Metadata */}\n              <Card>\n                <CardHeader>\n                  <CardTitle>Analysis Metadata</CardTitle>\n                </CardHeader>\n                <CardContent>\n                  <div className=\"grid grid-cols-2 gap-4 text-sm\">\n                    <div>\n                      <p className=\"text-muted-foreground\">Analysis Time</p>\n                      <p className=\"font-medium\">\n                        {new Date(analysis.metadata.analysis_timestamp).toLocaleString()}\n                      </p>\n                    </div>\n                    <div>\n                      <p className=\"text-muted-foreground\">Log Format</p>\n                      <p className=\"font-medium\">{analysis.metadata.log_format}</p>\n                    </div>\n                    <div>\n                      <p className=\"text-muted-foreground\">Lines Processed</p>\n                      <p className=\"font-medium\">{analysis.metadata.total_lines_processed.toLocaleString()}</p>\n                    </div>\n                    <div>\n                      <p className=\"text-muted-foreground\">Unique Modules</p>\n                      <p className=\"font-medium\">{analysis.automation_coverage.total_unique_modules}</p>\n                    </div>\n                  </div>\n                </CardContent>\n              </Card>\n            </div>\n          )}\n        </div>\n      )}\n    </div>\n  );\n}; "],"names":["AnsibleCoverageViewer","PRIORITY_COLORS","high","medium","low","selectedFile","setSelectedFile","useState","logContent","setLogContent","logFormat","setLogFormat","uploadMethod","setUploadMethod","dragActive","setDragActive","analysis","setAnalysis","activeTab","setActiveTab","fileInputRef","useRef","API_BASE","parseLogsMutation","useMutation","mutationFn","content","format","response","fetch","method","headers","body","JSON","stringify","log_content","log_format","ok","error","json","Error","detail","onSuccess","data","transformedAnalysis","execution_summary","total_tasks","summary","total_hosts","total_plays","success_rate","failure_rate","change_rate","execution_time_seconds","metadata","execution_time","status_breakdown","automation_coverage","overall_score","coverage_metrics","total_unique_modules","total_module_executions","automation_breadth","automation_depth","host_reliability","host_count","overall_reliability","problematic_hosts","recommendations","analysis_timestamp","Date","toISOString","total_lines_processed","uploadFileMutation","file","formData","FormData","append","handleDrag","useCallback","e","preventDefault","stopPropagation","type","handleDrop","files","dataTransfer","handleFileSelect","target","handleAnalyze","mutate","trim","isLoading","isPending","div","className","h1","p","Card","CardHeader","CardTitle","Upload","CardContent","Button","variant","onClick","size","label","htmlFor","select","id","value","onChange","option","onDragEnter","onDragLeave","onDragOver","onDrop","current","click","input","ref","accept","name","toFixed","textarea","placeholder","AlertTriangle","span","message","disabled","Activity","Play","nav","button","CheckCircle","Clock","Progress","length","map","host","index","issues","join","rec","priority","h4","title","Badge","description","strong","action","toLocaleString"],"mappings":"AAAA;;;;;CAKC;;;;+BAiEYA;;;eAAAA;;;;+DA/DwC;4BACzB;6BAC8C;sBACjB;wBAClC;uBACD;0BACG;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAmDzB,MAAMC,kBAAkB;IACtBC,MAAM;IACNC,QAAQ;IACRC,KAAK;AACP;AAEO,MAAMJ,wBAAkC;IAC7C,MAAM,CAACK,cAAcC,gBAAgB,GAAGC,IAAAA,eAAQ,EAAc;IAC9D,MAAM,CAACC,YAAYC,cAAc,GAAGF,IAAAA,eAAQ,EAAS;IACrD,MAAM,CAACG,WAAWC,aAAa,GAAGJ,IAAAA,eAAQ,EAAS;IACnD,MAAM,CAACK,cAAcC,gBAAgB,GAAGN,IAAAA,eAAQ,EAAmB;IACnE,MAAM,CAACO,YAAYC,cAAc,GAAGR,IAAAA,eAAQ,EAAC;IAC7C,MAAM,CAACS,UAAUC,YAAY,GAAGV,IAAAA,eAAQ,EAAyB;IACjE,MAAM,CAACW,WAAWC,aAAa,GAAGZ,IAAAA,eAAQ,EAAiC;IAC3E,MAAMa,eAAeC,IAAAA,aAAM,EAAmB;IAE9C,gBAAgB;IAChB,MAAMC,WAAW;IAEjB,4BAA4B;IAC5B,MAAMC,oBAAoBC,IAAAA,uBAAW,EAAC;QACpCC,YAAY,OAAO,EAAEC,OAAO,EAAEC,MAAM,EAAuC;YACzE,MAAMC,WAAW,MAAMC,MAAM,GAAGP,SAAS,UAAU,CAAC,EAAE;gBACpDQ,QAAQ;gBACRC,SAAS;oBACP,gBAAgB;gBAClB;gBACAC,MAAMC,KAAKC,SAAS,CAAC;oBACnBC,aAAaT;oBACbU,YAAYT;gBACd;YACF;YAEA,IAAI,CAACC,SAASS,EAAE,EAAE;gBAChB,MAAMC,QAAQ,MAAMV,SAASW,IAAI;gBACjC,MAAM,IAAIC,MAAMF,MAAMG,MAAM,IAAI;YAClC;YAEA,OAAOb,SAASW,IAAI;QACtB;QACAG,WAAW,CAACC;YACV,yDAAyD;YACzD,MAAMC,sBAAuC;gBAC3CC,mBAAmB;oBACjBC,aAAaH,KAAKI,OAAO,EAAED,eAAe;oBAC1CE,aAAaL,KAAKI,OAAO,EAAEC,eAAe;oBAC1CC,aAAaN,KAAKI,OAAO,EAAEE,eAAe;oBAC1CC,cAAcP,KAAKI,OAAO,EAAEG,gBAAgB;oBAC5CC,cAAcR,KAAKI,OAAO,EAAEI,gBAAgB;oBAC5CC,aAAaT,KAAKI,OAAO,EAAEK,eAAe;oBAC1CC,wBAAwBV,KAAKW,QAAQ,EAAEC,kBAAkB;oBACzDC,kBAAkBb,KAAKI,OAAO,EAAES,oBAAoB,CAAC;gBACvD;gBACAC,qBAAqB;oBACnBC,eAAef,KAAKgB,gBAAgB,EAAEF,uBAAuB;oBAC7DG,sBAAsBjB,KAAKgB,gBAAgB,EAAEC,wBAAwB;oBACrEC,yBAAyBlB,KAAKgB,gBAAgB,EAAEE,2BAA2B;oBAC3EC,oBAAoBnB,KAAKgB,gBAAgB,EAAEG,sBAAsB;oBACjEC,kBAAkBpB,KAAKgB,gBAAgB,EAAEI,oBAAoB;gBAC/D;gBACAC,kBAAkB;oBAChBC,YAAYtB,KAAKI,OAAO,EAAEC,eAAe;oBACzCkB,qBAAqBvB,KAAKgB,gBAAgB,EAAEK,oBAAoB;oBAChEG,mBAAmBxB,KAAKgB,gBAAgB,EAAEQ,qBAAqB,EAAE;gBACnE;gBACAC,iBAAiBzB,KAAKgB,gBAAgB,EAAES,mBAAmB,EAAE;gBAC7Dd,UAAU;oBACRe,oBAAoB,IAAIC,OAAOC,WAAW;oBAC1CnC,YAAYO,KAAKhB,MAAM,IAAI;oBAC3B6C,uBAAuB7B,KAAKW,QAAQ,EAAEkB,yBAAyB;gBACjE;YACF;YACAvD,YAAY2B;QACd;IACF;IAEA,+BAA+B;IAC/B,MAAM6B,qBAAqBjD,IAAAA,uBAAW,EAAC;QACrCC,YAAY,OAAO,EAAEiD,IAAI,EAAE/C,MAAM,EAAkC;YACjE,MAAMgD,WAAW,IAAIC;YACrBD,SAASE,MAAM,CAAC,QAAQH;YACxBC,SAASE,MAAM,CAAC,cAAclD;YAE9B,MAAMC,WAAW,MAAMC,MAAM,GAAGP,SAAS,eAAe,CAAC,EAAE;gBACzDQ,QAAQ;gBACRE,MAAM2C;YACR;YAEA,IAAI,CAAC/C,SAASS,EAAE,EAAE;gBAChB,MAAMC,QAAQ,MAAMV,SAASW,IAAI;gBACjC,MAAM,IAAIC,MAAMF,MAAMG,MAAM,IAAI;YAClC;YAEA,OAAOb,SAASW,IAAI;QACtB;QACAG,WAAW,CAACC;YACV,yDAAyD;YACzD,MAAMC,sBAAuC;gBAC3CC,mBAAmB;oBACjBC,aAAaH,KAAKI,OAAO,EAAED,eAAe;oBAC1CE,aAAaL,KAAKI,OAAO,EAAEC,eAAe;oBAC1CC,aAAaN,KAAKI,OAAO,EAAEE,eAAe;oBAC1CC,cAAcP,KAAKI,OAAO,EAAEG,gBAAgB;oBAC5CC,cAAcR,KAAKI,OAAO,EAAEI,gBAAgB;oBAC5CC,aAAaT,KAAKI,OAAO,EAAEK,eAAe;oBAC1CC,wBAAwBV,KAAKW,QAAQ,EAAEC,kBAAkB;oBACzDC,kBAAkBb,KAAKI,OAAO,EAAES,oBAAoB,CAAC;gBACvD;gBACAC,qBAAqB;oBACnBC,eAAef,KAAKgB,gBAAgB,EAAEF,uBAAuB;oBAC7DG,sBAAsBjB,KAAKgB,gBAAgB,EAAEC,wBAAwB;oBACrEC,yBAAyBlB,KAAKgB,gBAAgB,EAAEE,2BAA2B;oBAC3EC,oBAAoBnB,KAAKgB,gBAAgB,EAAEG,sBAAsB;oBACjEC,kBAAkBpB,KAAKgB,gBAAgB,EAAEI,oBAAoB;gBAC/D;gBACAC,kBAAkB;oBAChBC,YAAYtB,KAAKI,OAAO,EAAEC,eAAe;oBACzCkB,qBAAqBvB,KAAKgB,gBAAgB,EAAEK,oBAAoB;oBAChEG,mBAAmBxB,KAAKgB,gBAAgB,EAAEQ,qBAAqB,EAAE;gBACnE;gBACAC,iBAAiBzB,KAAKgB,gBAAgB,EAAES,mBAAmB,EAAE;gBAC7Dd,UAAU;oBACRe,oBAAoB,IAAIC,OAAOC,WAAW;oBAC1CnC,YAAYO,KAAKhB,MAAM,IAAI;oBAC3B6C,uBAAuB7B,KAAKW,QAAQ,EAAEkB,yBAAyB;gBACjE;YACF;YACAvD,YAAY2B;QACd;IACF;IAEA,yBAAyB;IACzB,MAAMkC,aAAaC,IAAAA,kBAAW,EAAC,CAACC;QAC9BA,EAAEC,cAAc;QAChBD,EAAEE,eAAe;QACjB,IAAIF,EAAEG,IAAI,KAAK,eAAeH,EAAEG,IAAI,KAAK,YAAY;YACnDpE,cAAc;QAChB,OAAO,IAAIiE,EAAEG,IAAI,KAAK,aAAa;YACjCpE,cAAc;QAChB;IACF,GAAG,EAAE;IAEL,MAAMqE,aAAaL,IAAAA,kBAAW,EAAC,CAACC;QAC9BA,EAAEC,cAAc;QAChBD,EAAEE,eAAe;QACjBnE,cAAc;QAEd,MAAMsE,QAAQL,EAAEM,YAAY,CAACD,KAAK;QAClC,IAAIA,SAASA,KAAK,CAAC,EAAE,EAAE;YACrB/E,gBAAgB+E,KAAK,CAAC,EAAE;YACxBxE,gBAAgB;QAClB;IACF,GAAG,EAAE;IAEL,MAAM0E,mBAAmB,CAACP;QACxB,MAAMK,QAAQL,EAAEQ,MAAM,CAACH,KAAK;QAC5B,IAAIA,SAASA,KAAK,CAAC,EAAE,EAAE;YACrB/E,gBAAgB+E,KAAK,CAAC,EAAE;QAC1B;IACF;IAEA,MAAMI,gBAAgB;QACpB,IAAI7E,iBAAiB,UAAUP,cAAc;YAC3CoE,mBAAmBiB,MAAM,CAAC;gBAAEhB,MAAMrE;gBAAcsB,QAAQjB;YAAU;QACpE,OAAO,IAAIE,iBAAiB,WAAWJ,WAAWmF,IAAI,IAAI;YACxDpE,kBAAkBmE,MAAM,CAAC;gBAAEhE,SAASlB;gBAAYmB,QAAQjB;YAAU;QACpE;IACF;IAEA,MAAMkF,YAAYrE,kBAAkBsE,SAAS,IAAIpB,mBAAmBoB,SAAS;IAC7E,MAAMvD,QAAQf,kBAAkBe,KAAK,IAAImC,mBAAmBnC,KAAK;IAEjE,qBACE,sBAACwD;QAAIC,WAAU;;0BAEb,qBAACD;gBAAIC,WAAU;0BACb,cAAA,sBAACD;;sCACC,qBAACE;4BAAGD,WAAU;sCAAqB;;sCACnC,qBAACE;4BAAEF,WAAU;sCAA6B;;;;;0BAO9C,sBAACG,UAAI;;kCACH,qBAACC,gBAAU;kCACT,cAAA,sBAACC,eAAS;4BAACL,WAAU;;8CACnB,qBAACM,mBAAM;oCAACN,WAAU;;gCAAY;;;;kCAIlC,sBAACO,iBAAW;wBAACP,WAAU;;0CACrB,sBAACD;gCAAIC,WAAU;;kDACb,qBAACQ,cAAM;wCACLC,SAAS5F,iBAAiB,SAAS,YAAY;wCAC/C6F,SAAS,IAAM5F,gBAAgB;wCAC/B6F,MAAK;kDACN;;kDAGD,qBAACH,cAAM;wCACLC,SAAS5F,iBAAiB,UAAU,YAAY;wCAChD6F,SAAS,IAAM5F,gBAAgB;wCAC/B6F,MAAK;kDACN;;;;0CAKH,qBAACZ;gCAAIC,WAAU;0CACb,cAAA,sBAACD;oCAAIC,WAAU;;sDACb,qBAACY;4CAAMC,SAAQ;4CAASb,WAAU;sDAAiC;;sDACnE,sBAACc;4CACCC,IAAG;4CACHC,OAAOrG;4CACPsG,UAAU,CAAChC,IAAMrE,aAAaqE,EAAEQ,MAAM,CAACuB,KAAK;4CAC5ChB,WAAU;;8DAEV,qBAACkB;oDAAOF,OAAM;8DAAO;;8DACrB,qBAACE;oDAAOF,OAAM;8DAAO;;8DACrB,qBAACE;oDAAOF,OAAM;8DAAW;;8DACzB,qBAACE;oDAAOF,OAAM;8DAAM;;;;;;;4BAKzBnG,iBAAiB,uBAChB,sBAACkF;gCACCC,WAAW,CAAC,oEAAoE,EAC9EjF,aAAa,gCAAgC,8BAC7C;gCACFoG,aAAapC;gCACbqC,aAAarC;gCACbsC,YAAYtC;gCACZuC,QAAQjC;gCACRqB,SAAS,IAAMrF,aAAakG,OAAO,EAAEC;;kDAErC,qBAACC;wCACCC,KAAKrG;wCACL+D,MAAK;wCACLY,WAAU;wCACViB,UAAUzB;wCACVmC,QAAO;;kDAGT,qBAACrB,mBAAM;wCAACN,WAAU;;oCAEjB1F,6BACC,sBAACyF;;0DACC,qBAACG;gDAAEF,WAAU;0DAAuB1F,aAAasH,IAAI;;0DACrD,sBAAC1B;gDAAEF,WAAU;;oDACT1F,CAAAA,aAAaqG,IAAI,GAAG,OAAO,IAAG,EAAGkB,OAAO,CAAC;oDAAG;;;;uDAIlD,sBAAC9B;;0DACC,qBAACG;gDAAEF,WAAU;0DAAsB;;0DAGnC,qBAACE;gDAAEF,WAAU;0DAAqC;;;;;+CAOxD,sBAACD;gCAAIC,WAAU;;kDACb,qBAACY;wCAAMC,SAAQ;wCAAcb,WAAU;kDAA4B;;kDACnE,qBAAC8B;wCACCf,IAAG;wCACHC,OAAOvG;wCACPwG,UAAU,CAAChC,IAA8CvE,cAAcuE,EAAEQ,MAAM,CAACuB,KAAK;wCACrFe,aAAY;wCACZ/B,WAAU;;;;4BAKfzD,uBACC,qBAACwD;gCAAIC,WAAU;0CACb,cAAA,sBAACD;oCAAIC,WAAU;;sDACb,qBAACgC,0BAAa;4CAAChC,WAAU;;sDACzB,qBAACiC;4CAAKjC,WAAU;sDACbzD,iBAAiBE,QAAQF,MAAM2F,OAAO,GAAG;;;;;0CAMlD,qBAAC1B,cAAM;gCACLE,SAAShB;gCACTyC,UAAUtC,aAAc,CAACvF,gBAAgB,CAACG,WAAWmF,IAAI;gCACzDI,WAAU;0CAETH,0BACC;;sDACE,qBAACuC,qBAAQ;4CAACpC,WAAU;;wCAA8B;;mDAIpD;;sDACE,qBAACqC,iBAAI;4CAACrC,WAAU;;wCAAiB;;;;;;;;YAS1C/E,0BACC,sBAAC8E;gBAAIC,WAAU;;kCAEb,qBAACD;wBAAIC,WAAU;kCACb,cAAA,sBAACsC;4BAAItC,WAAU;;8CACb,qBAACuC;oCACC7B,SAAS,IAAMtF,aAAa;oCAC5B4E,WAAW,CAAC,yCAAyC,EACnD7E,cAAc,aACV,kCACA,8EACJ;8CACH;;8CAGD,qBAACoH;oCACC7B,SAAS,IAAMtF,aAAa;oCAC5B4E,WAAW,CAAC,yCAAyC,EACnD7E,cAAc,oBACV,kCACA,8EACJ;8CACH;;;;;oBAOJA,cAAc,4BACb,sBAAC4E;wBAAIC,WAAU;;0CAEb,sBAACD;gCAAIC,WAAU;;kDACb,qBAACG,UAAI;kDACH,cAAA,qBAACI,iBAAW;4CAACP,WAAU;sDACrB,cAAA,sBAACD;gDAAIC,WAAU;;kEACb,sBAACD;;0EACC,qBAACG;gEAAEF,WAAU;0EAA4C;;0EACzD,sBAACE;gEAAEF,WAAU;;oEACV/E,SAAS6B,iBAAiB,CAACK,YAAY,CAAC0E,OAAO,CAAC;oEAAG;;;;;kEAGxD,qBAACW,wBAAW;wDAACxC,WAAU;;;;;;kDAK7B,qBAACG,UAAI;kDACH,cAAA,qBAACI,iBAAW;4CAACP,WAAU;sDACrB,cAAA,sBAACD;gDAAIC,WAAU;;kEACb,sBAACD;;0EACC,qBAACG;gEAAEF,WAAU;0EAA4C;;0EACzD,qBAACE;gEAAEF,WAAU;0EAAsB/E,SAAS6B,iBAAiB,CAACC,WAAW;;;;kEAE3E,qBAACqF,qBAAQ;wDAACpC,WAAU;;;;;;kDAK1B,qBAACG,UAAI;kDACH,cAAA,qBAACI,iBAAW;4CAACP,WAAU;sDACrB,cAAA,sBAACD;gDAAIC,WAAU;;kEACb,sBAACD;;0EACC,qBAACG;gEAAEF,WAAU;0EAA4C;;0EACzD,qBAACE;gEAAEF,WAAU;0EAAsB/E,SAAS6B,iBAAiB,CAACG,WAAW;;;;kEAE3E,qBAACmF,qBAAQ;wDAACpC,WAAU;;;;;;kDAK1B,qBAACG,UAAI;kDACH,cAAA,qBAACI,iBAAW;4CAACP,WAAU;sDACrB,cAAA,sBAACD;gDAAIC,WAAU;;kEACb,sBAACD;;0EACC,qBAACG;gEAAEF,WAAU;0EAA4C;;0EACzD,qBAACE;gEAAEF,WAAU;0EACV/E,SAAS6B,iBAAiB,CAACQ,sBAAsB,GAC9C,GAAG,AAACrC,CAAAA,SAAS6B,iBAAiB,CAACQ,sBAAsB,GAAG,EAAC,EAAGuE,OAAO,CAAC,GAAG,CAAC,CAAC,GACzE;;;;kEAGR,qBAACY,kBAAK;wDAACzC,WAAU;;;;;;;;0CAOzB,sBAACG,UAAI;;kDACH,qBAACC,gBAAU;kDACT,cAAA,qBAACC,eAAS;sDAAC;;;kDAEb,sBAACE,iBAAW;wCAACP,WAAU;;0DACrB,sBAACD;gDAAIC,WAAU;;kEACb,sBAACD;wDAAIC,WAAU;;0EACb,qBAACiC;0EAAK;;0EACN,sBAACA;;oEAAMhH,SAASyC,mBAAmB,CAACC,aAAa;oEAAC;;;;;kEAEpD,qBAAC+E,kBAAQ;wDAAC1B,OAAO/F,SAASyC,mBAAmB,CAACC,aAAa;wDAAEqC,WAAU;;;;0DAGzE,sBAACD;gDAAIC,WAAU;;kEACb,sBAACD;;0EACC,qBAACG;gEAAEF,WAAU;0EAAwB;;0EACrC,qBAACE;gEAAEF,WAAU;0EAAe/E,SAASyC,mBAAmB,CAACG,oBAAoB;;;;kEAE/E,sBAACkC;;0EACC,qBAACG;gEAAEF,WAAU;0EAAwB;;0EACrC,qBAACE;gEAAEF,WAAU;0EAAe/E,SAASyC,mBAAmB,CAACK,kBAAkB;;;;kEAE7E,sBAACgC;;0EACC,qBAACG;gEAAEF,WAAU;0EAAwB;;0EACrC,qBAACE;gEAAEF,WAAU;0EAAe/E,SAASyC,mBAAmB,CAACM,gBAAgB,CAAC6D,OAAO,CAAC;;;;kEAEpF,sBAAC9B;;0EACC,qBAACG;gEAAEF,WAAU;0EAAwB;;0EACrC,sBAACE;gEAAEF,WAAU;;oEAAe/E,SAASgD,gBAAgB,CAACE,mBAAmB,CAAC0D,OAAO,CAAC;oEAAG;;;;;;;;;;;4BAO5F5G,SAASgD,gBAAgB,CAACG,iBAAiB,CAACuE,MAAM,GAAG,mBACpD,sBAACxC,UAAI;;kDACH,qBAACC,gBAAU;kDACT,cAAA,sBAACC,eAAS;4CAACL,WAAU;;8DACnB,qBAACgC,0BAAa;oDAAChC,WAAU;;gDAA4B;;;;kDAIzD,qBAACO,iBAAW;kDACV,cAAA,qBAACR;4CAAIC,WAAU;sDACZ/E,SAASgD,gBAAgB,CAACG,iBAAiB,CAACwE,GAAG,CAAC,CAACC,MAAMC,sBACtD,sBAAC/C;oDAAgBC,WAAU;;sEACzB,sBAACiC;4DAAKjC,WAAU;;gEAAe6C,KAAKA,IAAI;gEAAC;;;wDAAQ;wDAAEA,KAAKE,MAAM,CAACC,IAAI,CAAC;;mDAD5DF;;;;;;;oBAYvB3H,cAAc,mCACb,sBAAC4E;wBAAIC,WAAU;;0CACb,sBAACG,UAAI;;kDACH,qBAACC,gBAAU;kDACT,cAAA,qBAACC,eAAS;sDAAC;;;kDAEb,qBAACE,iBAAW;kDACV,cAAA,sBAACR;4CAAIC,WAAU;;gDACZ/E,SAASoD,eAAe,CAACuE,GAAG,CAAC,CAACK,KAAKH,sBAClC,qBAAC/C;wDAAgBC,WAAW,CAAC,sBAAsB,EAAE9F,eAAe,CAAC+I,IAAIC,QAAQ,CAAC,EAAE;kEAClF,cAAA,sBAACnD;4DAAIC,WAAU;;8EACb,sBAACD;oEAAIC,WAAU;;sFACb,qBAACmD;4EAAGnD,WAAU;sFAAeiD,IAAIG,KAAK;;sFACtC,qBAACC,YAAK;4EAAC5C,SAAQ;4EAAUT,WAAU;sFAChCiD,IAAIC,QAAQ;;;;8EAGjB,qBAAChD;oEAAEF,WAAU;8EAAsBiD,IAAIK,WAAW;;8EAClD,sBAACpD;oEAAEF,WAAU;;sFAAU,qBAACuD;sFAAO;;wEAAgB;wEAAEN,IAAIO,MAAM;;;;;uDATrDV;gDAcX7H,SAASoD,eAAe,CAACsE,MAAM,KAAK,mBACnC,sBAAC5C;oDAAIC,WAAU;;sEACb,qBAACwC,wBAAW;4DAACxC,WAAU;;sEACvB,qBAACE;4DAAEF,WAAU;sEAAsB;;sEACnC,qBAACE;4DAAEF,WAAU;sEAAwB;;;;;;;;;0CAQ/C,sBAACG,UAAI;;kDACH,qBAACC,gBAAU;kDACT,cAAA,qBAACC,eAAS;sDAAC;;;kDAEb,qBAACE,iBAAW;kDACV,cAAA,sBAACR;4CAAIC,WAAU;;8DACb,sBAACD;;sEACC,qBAACG;4DAAEF,WAAU;sEAAwB;;sEACrC,qBAACE;4DAAEF,WAAU;sEACV,IAAIzB,KAAKtD,SAASsC,QAAQ,CAACe,kBAAkB,EAAEmF,cAAc;;;;8DAGlE,sBAAC1D;;sEACC,qBAACG;4DAAEF,WAAU;sEAAwB;;sEACrC,qBAACE;4DAAEF,WAAU;sEAAe/E,SAASsC,QAAQ,CAAClB,UAAU;;;;8DAE1D,sBAAC0D;;sEACC,qBAACG;4DAAEF,WAAU;sEAAwB;;sEACrC,qBAACE;4DAAEF,WAAU;sEAAe/E,SAASsC,QAAQ,CAACkB,qBAAqB,CAACgF,cAAc;;;;8DAEpF,sBAAC1D;;sEACC,qBAACG;4DAAEF,WAAU;sEAAwB;;sEACrC,qBAACE;4DAAEF,WAAU;sEAAe/E,SAASyC,mBAAmB,CAACG,oBAAoB;;;;;;;;;;;;;;;AAWnG"}