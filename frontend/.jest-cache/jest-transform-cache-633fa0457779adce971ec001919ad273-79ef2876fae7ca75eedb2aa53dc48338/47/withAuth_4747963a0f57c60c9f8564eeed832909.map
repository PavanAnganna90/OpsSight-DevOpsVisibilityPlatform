{"version":3,"sources":["/Users/pavan/Desktop/Devops-app-dev-cursor/frontend/src/components/auth/withAuth.tsx"],"sourcesContent":["'use client';\n\nimport { useEffect } from 'react';\nimport { useRouter } from 'next/navigation';\nimport { useAuth } from '@/contexts/AuthContext';\n\n/**\n * Higher-order component for protecting routes that require authentication\n * @param WrappedComponent - The component to wrap with authentication\n * @returns A new component with authentication checks\n */\nexport function withAuth<P extends object>(\n  WrappedComponent: React.ComponentType<P>\n) {\n  return function ProtectedRoute(props: P) {\n    const router = useRouter();\n    const { state } = useAuth();\n\n    useEffect(() => {\n      // Only redirect after the initial loading is complete\n      if (!state.isLoading && !state.isAuthenticated) {\n        // Store the current path for redirect after login\n        const currentPath = window.location.pathname;\n        router.push(`/login?redirect=${encodeURIComponent(currentPath)}`);\n      }\n    }, [state.isAuthenticated, state.isLoading, router]);\n\n    // Show nothing while loading\n    if (state.isLoading) {\n      return (\n        <div className=\"min-h-screen flex items-center justify-center bg-gray-50\">\n          <div className=\"animate-spin rounded-full h-12 w-12 border-b-2 border-gray-900\"></div>\n        </div>\n      );\n    }\n\n    // Only render the component if authenticated\n    return state.isAuthenticated ? <WrappedComponent {...props} /> : null;\n  };\n} "],"names":["withAuth","WrappedComponent","ProtectedRoute","props","router","useRouter","state","useAuth","useEffect","isLoading","isAuthenticated","currentPath","window","location","pathname","push","encodeURIComponent","div","className"],"mappings":"AAAA;;;;;+BAWgBA;;;eAAAA;;;;uBATU;4BACA;6BACF;AAOjB,SAASA,SACdC,gBAAwC;IAExC,OAAO,SAASC,eAAeC,KAAQ;QACrC,MAAMC,SAASC,IAAAA,qBAAS;QACxB,MAAM,EAAEC,KAAK,EAAE,GAAGC,IAAAA,oBAAO;QAEzBC,IAAAA,gBAAS,EAAC;YACR,sDAAsD;YACtD,IAAI,CAACF,MAAMG,SAAS,IAAI,CAACH,MAAMI,eAAe,EAAE;gBAC9C,kDAAkD;gBAClD,MAAMC,cAAcC,OAAOC,QAAQ,CAACC,QAAQ;gBAC5CV,OAAOW,IAAI,CAAC,CAAC,gBAAgB,EAAEC,mBAAmBL,cAAc;YAClE;QACF,GAAG;YAACL,MAAMI,eAAe;YAAEJ,MAAMG,SAAS;YAAEL;SAAO;QAEnD,6BAA6B;QAC7B,IAAIE,MAAMG,SAAS,EAAE;YACnB,qBACE,qBAACQ;gBAAIC,WAAU;0BACb,cAAA,qBAACD;oBAAIC,WAAU;;;QAGrB;QAEA,6CAA6C;QAC7C,OAAOZ,MAAMI,eAAe,iBAAG,qBAACT;YAAkB,GAAGE,KAAK;aAAO;IACnE;AACF"}