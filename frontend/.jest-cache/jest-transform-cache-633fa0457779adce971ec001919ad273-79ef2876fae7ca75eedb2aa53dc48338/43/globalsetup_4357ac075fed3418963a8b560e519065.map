{"version":3,"sources":["/Users/pavan/Desktop/Devops-app-dev-cursor/frontend/src/__tests__/e2e/global-setup.ts"],"sourcesContent":["import { chromium, type FullConfig } from '@playwright/test';\n\n/**\n * Global setup for Playwright tests\n * Handles authentication, database seeding, and test environment preparation\n */\nasync function globalSetup(config: FullConfig) {\n  const { baseURL } = config.projects[0].use;\n  \n  console.log('üöÄ Starting global setup for cross-browser testing...');\n  \n  // Launch browser for setup\n  const browser = await chromium.launch();\n  const context = await browser.newContext();\n  const page = await context.newPage();\n  \n  try {\n    // Wait for the application to be ready\n    console.log('‚è≥ Waiting for application to be ready...');\n    await page.goto(baseURL || 'http://localhost:3000');\n    \n    // Wait for the app to load completely\n    await page.waitForSelector('[data-testid=\"app-loaded\"]', { \n      timeout: 30000,\n      state: 'visible'\n    }).catch(() => {\n      // If no app-loaded marker exists, wait for any content to load\n      console.log('No app-loaded marker found, checking for basic content...');\n      return page.waitForLoadState('networkidle');\n    });\n    \n    // Check if the app is accessible\n    const title = await page.title();\n    console.log(`‚úÖ Application loaded successfully: ${title}`);\n    \n    // Setup test data if needed\n    await setupTestData(page);\n    \n    // Setup authentication if needed\n    await setupAuthentication(page);\n    \n    console.log('‚úÖ Global setup completed successfully');\n    \n  } catch (error) {\n    console.error('‚ùå Global setup failed:', error);\n    throw error;\n  } finally {\n    await context.close();\n    await browser.close();\n  }\n}\n\n/**\n * Setup test data for consistent testing\n */\nasync function setupTestData(page: any) {\n  try {\n    console.log('üìä Setting up test data...');\n    \n    // Check if we can access the API health endpoint\n    const response = await page.request.get('/api/health').catch(() => null);\n    \n    if (response && response.ok()) {\n      console.log('‚úÖ API is accessible');\n      \n      // Setup mock data via API if available\n      // This would typically seed the database or setup mock responses\n      // await page.request.post('/api/test/seed', { data: testData });\n      \n    } else {\n      console.log('‚ö†Ô∏è API not accessible, using frontend-only testing');\n    }\n    \n    console.log('‚úÖ Test data setup completed');\n  } catch (error) {\n    console.log('‚ö†Ô∏è Test data setup failed, continuing with default data:', error);\n  }\n}\n\n/**\n * Setup authentication for tests that require it\n */\nasync function setupAuthentication(page: any) {\n  try {\n    console.log('üîê Setting up authentication...');\n    \n    // Check if authentication is required\n    const hasAuthElements = await page.locator('[data-testid=\"login\"], [data-testid=\"auth-required\"]').count();\n    \n    if (hasAuthElements > 0) {\n      console.log('üîê Authentication required, setting up test user...');\n      \n      // This would typically create a test user session\n      // For now, we'll just log that authentication is available\n      console.log('‚ÑπÔ∏è Authentication system detected');\n      \n      // Store authentication state for reuse in tests\n      // await page.context().storageState({ path: 'auth-state.json' });\n    } else {\n      console.log('‚ÑπÔ∏è No authentication required');\n    }\n    \n    console.log('‚úÖ Authentication setup completed');\n  } catch (error) {\n    console.log('‚ö†Ô∏è Authentication setup failed, continuing without auth:', error);\n  }\n}\n\nexport default globalSetup; "],"names":["globalSetup","config","baseURL","projects","use","console","log","browser","chromium","launch","context","newContext","page","newPage","goto","waitForSelector","timeout","state","catch","waitForLoadState","title","setupTestData","setupAuthentication","error","close","response","request","get","ok","hasAuthElements","locator","count"],"mappings":";;;;+BA4GA;;;eAAA;;;sBA5G0C;AAE1C;;;CAGC,GACD,eAAeA,YAAYC,MAAkB;IAC3C,MAAM,EAAEC,OAAO,EAAE,GAAGD,OAAOE,QAAQ,CAAC,EAAE,CAACC,GAAG;IAE1CC,QAAQC,GAAG,CAAC;IAEZ,2BAA2B;IAC3B,MAAMC,UAAU,MAAMC,cAAQ,CAACC,MAAM;IACrC,MAAMC,UAAU,MAAMH,QAAQI,UAAU;IACxC,MAAMC,OAAO,MAAMF,QAAQG,OAAO;IAElC,IAAI;QACF,uCAAuC;QACvCR,QAAQC,GAAG,CAAC;QACZ,MAAMM,KAAKE,IAAI,CAACZ,WAAW;QAE3B,sCAAsC;QACtC,MAAMU,KAAKG,eAAe,CAAC,8BAA8B;YACvDC,SAAS;YACTC,OAAO;QACT,GAAGC,KAAK,CAAC;YACP,+DAA+D;YAC/Db,QAAQC,GAAG,CAAC;YACZ,OAAOM,KAAKO,gBAAgB,CAAC;QAC/B;QAEA,iCAAiC;QACjC,MAAMC,QAAQ,MAAMR,KAAKQ,KAAK;QAC9Bf,QAAQC,GAAG,CAAC,CAAC,mCAAmC,EAAEc,OAAO;QAEzD,4BAA4B;QAC5B,MAAMC,cAAcT;QAEpB,iCAAiC;QACjC,MAAMU,oBAAoBV;QAE1BP,QAAQC,GAAG,CAAC;IAEd,EAAE,OAAOiB,OAAO;QACdlB,QAAQkB,KAAK,CAAC,0BAA0BA;QACxC,MAAMA;IACR,SAAU;QACR,MAAMb,QAAQc,KAAK;QACnB,MAAMjB,QAAQiB,KAAK;IACrB;AACF;AAEA;;CAEC,GACD,eAAeH,cAAcT,IAAS;IACpC,IAAI;QACFP,QAAQC,GAAG,CAAC;QAEZ,iDAAiD;QACjD,MAAMmB,WAAW,MAAMb,KAAKc,OAAO,CAACC,GAAG,CAAC,eAAeT,KAAK,CAAC,IAAM;QAEnE,IAAIO,YAAYA,SAASG,EAAE,IAAI;YAC7BvB,QAAQC,GAAG,CAAC;QAEZ,uCAAuC;QACvC,iEAAiE;QACjE,iEAAiE;QAEnE,OAAO;YACLD,QAAQC,GAAG,CAAC;QACd;QAEAD,QAAQC,GAAG,CAAC;IACd,EAAE,OAAOiB,OAAO;QACdlB,QAAQC,GAAG,CAAC,4DAA4DiB;IAC1E;AACF;AAEA;;CAEC,GACD,eAAeD,oBAAoBV,IAAS;IAC1C,IAAI;QACFP,QAAQC,GAAG,CAAC;QAEZ,sCAAsC;QACtC,MAAMuB,kBAAkB,MAAMjB,KAAKkB,OAAO,CAAC,wDAAwDC,KAAK;QAExG,IAAIF,kBAAkB,GAAG;YACvBxB,QAAQC,GAAG,CAAC;YAEZ,kDAAkD;YAClD,2DAA2D;YAC3DD,QAAQC,GAAG,CAAC;QAEZ,gDAAgD;QAChD,kEAAkE;QACpE,OAAO;YACLD,QAAQC,GAAG,CAAC;QACd;QAEAD,QAAQC,GAAG,CAAC;IACd,EAAE,OAAOiB,OAAO;QACdlB,QAAQC,GAAG,CAAC,4DAA4DiB;IAC1E;AACF;MAEA,WAAevB"}