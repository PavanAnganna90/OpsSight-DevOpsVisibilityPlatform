{"version":3,"sources":["/Users/pavan/Desktop/Devops-app-dev-cursor/frontend/src/contexts/ColorModeContext.tsx"],"sourcesContent":["/**\n * ColorModeProvider component and context for managing color modes across the application\n * Integrates with the useColorMode hook and theme system\n */\n\nimport React, { createContext, useContext, useEffect, ReactNode } from 'react';\nimport { useColorMode, ColorMode } from '../hooks/useColorMode';\n\ninterface ColorModeContextValue {\n  colorMode: ColorMode;\n  resolvedColorMode: Exclude<ColorMode, 'system'>;\n  setColorMode: (mode: ColorMode) => void;\n  toggleColorMode: () => void;\n  isSystemMode: boolean;\n  systemPreference: 'light' | 'dark';\n}\n\n// Create the context\nconst ColorModeContext = createContext<ColorModeContextValue | undefined>(undefined);\n\ninterface ColorModeProviderProps {\n  children: ReactNode;\n  defaultMode?: ColorMode;\n  enableTransitions?: boolean;\n  storageKey?: string;\n}\n\n/**\n * ColorModeProvider component that wraps the app and provides color mode context\n * \n * Features:\n * - Automatic theme application based on color mode\n * - Smooth transitions between color modes\n * - Integration with CSS custom properties\n * - Support for prefers-reduced-motion\n * \n * Props:\n *   children: React components to wrap\n *   defaultMode: Default color mode (defaults to 'system')\n *   enableTransitions: Whether to enable smooth transitions (default: true)\n *   storageKey: Custom storage key for persistence\n */\nexport function ColorModeProvider({\n  children,\n  defaultMode,\n  enableTransitions = true,\n  storageKey,\n}: ColorModeProviderProps) {\n  const colorModeHook = useColorMode();\n\n  // Apply color mode transitions\n  useEffect(() => {\n    if (typeof window === 'undefined') return;\n\n    const root = document.documentElement;\n    \n    // Check if user prefers reduced motion\n    const prefersReducedMotion = window.matchMedia('(prefers-reduced-motion: reduce)').matches;\n    \n    if (enableTransitions && !prefersReducedMotion) {\n      // Add transition for smooth color mode changes\n      root.style.setProperty('--color-mode-transition', 'background-color 0.3s ease, color 0.3s ease, border-color 0.3s ease, box-shadow 0.3s ease');\n      \n      // Apply transitions to all elements\n      const transitionStyle = document.createElement('style');\n      transitionStyle.textContent = `\n        *, *::before, *::after {\n          transition: var(--color-mode-transition);\n        }\n        \n        /* Disable transitions on elements that shouldn't animate */\n        .no-transition,\n        .no-transition *,\n        [data-no-transition],\n        [data-no-transition] * {\n          transition: none !important;\n        }\n        \n        /* Specific transitions for different elements */\n        .theme-transition {\n          transition: background-color 0.3s ease, color 0.3s ease, border-color 0.3s ease, box-shadow 0.3s ease;\n        }\n        \n        /* Smooth opacity transitions for theme-specific elements */\n        .theme-specific {\n          transition: opacity 0.2s ease;\n        }\n        \n        /* Handle focus states during transitions */\n        :focus-visible {\n          transition: outline-color 0.2s ease, box-shadow 0.2s ease;\n        }\n      `;\n      \n      document.head.appendChild(transitionStyle);\n      \n      // Cleanup function\n      return () => {\n        root.style.removeProperty('--color-mode-transition');\n        if (document.head.contains(transitionStyle)) {\n          document.head.removeChild(transitionStyle);\n        }\n      };\n    }\n  }, [enableTransitions]);\n\n  // Apply color mode specific CSS custom properties\n  useEffect(() => {\n    if (typeof window === 'undefined') return;\n\n    const root = document.documentElement;\n    const { resolvedColorMode } = colorModeHook;\n\n    // Define color mode specific CSS custom properties\n    const colorModeProperties = {\n      light: {\n        '--mode-background': '#ffffff',\n        '--mode-foreground': '#000000',\n        '--mode-surface': '#f8f9fa',\n        '--mode-border': '#e9ecef',\n        '--mode-shadow': 'rgba(0, 0, 0, 0.1)',\n        '--mode-overlay': 'rgba(0, 0, 0, 0.5)',\n        '--mode-filter': 'none',\n        '--mode-opacity': '1',\n      },\n      dark: {\n        '--mode-background': '#0a0a0a',\n        '--mode-foreground': '#ffffff',\n        '--mode-surface': '#1a1a1a',\n        '--mode-border': '#2a2a2a',\n        '--mode-shadow': 'rgba(0, 0, 0, 0.3)',\n        '--mode-overlay': 'rgba(0, 0, 0, 0.7)',\n        '--mode-filter': 'invert(0)',\n        '--mode-opacity': '1',\n      },\n      'high-contrast': {\n        '--mode-background': '#000000',\n        '--mode-foreground': '#ffffff',\n        '--mode-surface': '#000000',\n        '--mode-border': '#ffffff',\n        '--mode-shadow': 'none',\n        '--mode-overlay': 'rgba(0, 0, 0, 0.9)',\n        '--mode-filter': 'contrast(2)',\n        '--mode-opacity': '1',\n      },\n    };\n\n    const properties = colorModeProperties[resolvedColorMode];\n    \n    // Apply properties\n    Object.entries(properties).forEach(([property, value]) => {\n      root.style.setProperty(property, value);\n    });\n\n    // Set color scheme for native form controls\n    root.style.setProperty('color-scheme', resolvedColorMode === 'light' ? 'light' : 'dark');\n\n  }, [colorModeHook.resolvedColorMode]);\n\n  // Handle system changes for better UX\n  useEffect(() => {\n    if (typeof window === 'undefined') return;\n\n    // Add event listener for visibility changes to sync with system\n    const handleVisibilityChange = () => {\n      if (!document.hidden && colorModeHook.isSystemMode) {\n        // Refresh system preference when page becomes visible\n        // This helps sync with system changes that happened while page was hidden\n        const event = new Event('change');\n        window.matchMedia('(prefers-color-scheme: dark)').dispatchEvent(event);\n      }\n    };\n\n    document.addEventListener('visibilitychange', handleVisibilityChange);\n\n    return () => {\n      document.removeEventListener('visibilitychange', handleVisibilityChange);\n    };\n  }, [colorModeHook.isSystemMode]);\n\n  return (\n    <ColorModeContext.Provider value={colorModeHook}>\n      {children}\n    </ColorModeContext.Provider>\n  );\n}\n\n/**\n * Hook to access color mode context\n * Must be used within a ColorModeProvider\n */\nexport function useColorModeContext(): ColorModeContextValue {\n  const context = useContext(ColorModeContext);\n  \n  if (context === undefined) {\n    throw new Error('useColorModeContext must be used within a ColorModeProvider');\n  }\n  \n  return context;\n}\n\n// Re-export types for convenience\nexport type { ColorMode };\n\n// Higher-order component for class-based components\nexport function withColorMode<P extends object>(\n  Component: React.ComponentType<P & ColorModeContextValue>\n) {\n  const WrappedComponent = (props: P) => {\n    const colorMode = useColorModeContext();\n    return <Component {...props} {...colorMode} />;\n  };\n\n  WrappedComponent.displayName = `withColorMode(${Component.displayName || Component.name})`;\n  \n  return WrappedComponent;\n} "],"names":["ColorModeProvider","useColorModeContext","withColorMode","ColorModeContext","createContext","undefined","children","defaultMode","enableTransitions","storageKey","colorModeHook","useColorMode","useEffect","window","root","document","documentElement","prefersReducedMotion","matchMedia","matches","style","setProperty","transitionStyle","createElement","textContent","head","appendChild","removeProperty","contains","removeChild","resolvedColorMode","colorModeProperties","light","dark","properties","Object","entries","forEach","property","value","handleVisibilityChange","hidden","isSystemMode","event","Event","dispatchEvent","addEventListener","removeEventListener","Provider","context","useContext","Error","Component","WrappedComponent","props","colorMode","displayName","name"],"mappings":"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"}