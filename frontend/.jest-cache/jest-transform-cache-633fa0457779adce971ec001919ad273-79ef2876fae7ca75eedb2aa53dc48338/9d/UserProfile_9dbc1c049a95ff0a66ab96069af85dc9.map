{"version":3,"sources":["/Users/pavan/Desktop/Devops-app-dev-cursor/frontend/src/components/auth/UserProfile.tsx"],"sourcesContent":["/**\n * User profile component for displaying authenticated user information.\n * Shows user avatar, name, GitHub profile details, and provides logout functionality.\n */\n\nimport React, { useState } from 'react';\nimport { useAuth } from '../../contexts/AuthContext';\nimport { Avatar } from '../ui/Avatar';\n\ninterface UserProfileProps {\n  /** Display variant - compact for headers, full for profile pages */\n  variant?: 'compact' | 'full';\n  /** Show logout button */\n  showLogout?: boolean;\n  /** Custom CSS classes */\n  className?: string;\n  /** Optional click handler for profile interaction */\n  onClick?: () => void;\n}\n\n/**\n * User Profile Component\n * \n * Displays authenticated user information with flexible layouts.\n * Supports both compact (for headers/navbars) and full (for profile pages) variants.\n * \n * Features:\n * - Responsive user avatar with fallback\n * - GitHub profile information display\n * - Logout functionality with confirmation\n * - Loading states during user operations\n * - Accessible keyboard navigation\n * - Design token integration\n * \n * @param variant - Display variant (compact or full)\n * @param showLogout - Whether to show logout button\n * @param className - Additional CSS classes\n * @param onClick - Optional click handler\n */\nexport const UserProfile: React.FC<UserProfileProps> = ({\n  variant = 'compact',\n  showLogout = true,\n  className = '',\n  onClick,\n}) => {\n  const { state, logout } = useAuth();\n  const [isLoggingOut, setIsLoggingOut] = useState(false);\n  const [showConfirm, setShowConfirm] = useState(false);\n\n  const { user } = state;\n\n  /**\n   * Handle logout with confirmation.\n   */\n  const handleLogout = async () => {\n    if (!showConfirm) {\n      setShowConfirm(true);\n      return;\n    }\n\n    try {\n      setIsLoggingOut(true);\n      await logout();\n    } catch (error) {\n      console.error('Logout failed:', error);\n      // Reason: Continue with logout even if API call fails\n    } finally {\n      setIsLoggingOut(false);\n      setShowConfirm(false);\n    }\n  };\n\n  /**\n   * Cancel logout confirmation.\n   */\n  const cancelLogout = () => {\n    setShowConfirm(false);\n  };\n\n\n\n  /**\n   * Format date for display.\n   */\n  const formatDate = (dateString: string | null): string => {\n    if (!dateString) return 'Not available';\n    \n    try {\n      const date = new Date(dateString);\n      return new Intl.DateTimeFormat('en-US', {\n        year: 'numeric',\n        month: 'short',\n        day: 'numeric',\n      }).format(date);\n    } catch {\n      return 'Invalid date';\n    }\n  };\n\n  if (!user) {\n    return null;\n  }\n\n  /**\n   * Render compact variant for headers/navbars.\n   */\n  const renderCompact = () => (\n    <div \n      className={`flex items-center space-x-3 ${onClick ? 'cursor-pointer' : ''} ${className}`}\n      onClick={onClick}\n      onKeyDown={(e) => {\n        if ((e.key === 'Enter' || e.key === ' ') && onClick) {\n          e.preventDefault();\n          onClick();\n        }\n      }}\n      tabIndex={onClick ? 0 : undefined}\n      role={onClick ? 'button' : undefined}\n      aria-label={onClick ? `User profile: ${user.github_username}` : undefined}\n    >\n      {/* Avatar */}\n      <Avatar\n        src={user.avatar_url}\n        alt={`${user.github_username} avatar`}\n        name={user.full_name || user.github_username}\n        size=\"sm\"\n        priority={true} // Above-fold avatar should load immediately\n      />\n\n      {/* User info */}\n      <div className=\"flex-1 min-w-0\">\n        <p className=\"text-sm font-medium text-gray-900 truncate\">\n          {user.full_name || user.github_username}\n        </p>\n        <p className=\"text-xs text-gray-500 truncate\">\n          @{user.github_username}\n        </p>\n      </div>\n\n      {/* Logout button */}\n      {showLogout && (\n        <div className=\"relative\">\n          {!showConfirm ? (\n            <button\n              onClick={(e) => {\n                e.stopPropagation();\n                handleLogout();\n              }}\n              disabled={isLoggingOut}\n              className=\"p-1 text-gray-400 hover:text-gray-600 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2 rounded disabled:opacity-50\"\n              aria-label=\"Logout\"\n              title=\"Logout\"\n            >\n              <svg className=\"h-4 w-4\" fill=\"none\" viewBox=\"0 0 24 24\" stroke=\"currentColor\">\n                <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M17 16l4-4m0 0l-4-4m4 4H7m6 4v1a3 3 0 01-3 3H6a3 3 0 01-3-3V7a3 3 0 013-3h4a3 3 0 013 3v1\" />\n              </svg>\n            </button>\n          ) : (\n            <div className=\"flex items-center space-x-2\">\n              <button\n                onClick={(e) => {\n                  e.stopPropagation();\n                  handleLogout();\n                }}\n                disabled={isLoggingOut}\n                className=\"px-2 py-1 text-xs bg-red-600 text-white rounded hover:bg-red-700 focus:outline-none focus:ring-2 focus:ring-red-500 focus:ring-offset-2 disabled:opacity-50\"\n              >\n                {isLoggingOut ? 'Logging out...' : 'Confirm'}\n              </button>\n              <button\n                onClick={(e) => {\n                  e.stopPropagation();\n                  cancelLogout();\n                }}\n                disabled={isLoggingOut}\n                className=\"px-2 py-1 text-xs text-gray-600 hover:text-gray-800 focus:outline-none focus:ring-2 focus:ring-gray-500 focus:ring-offset-2\"\n              >\n                Cancel\n              </button>\n            </div>\n          )}\n        </div>\n      )}\n    </div>\n  );\n\n  /**\n   * Render full variant for profile pages.\n   */\n  const renderFull = () => (\n    <div className={`bg-white shadow rounded-lg p-6 ${className}`}>\n      <div className=\"flex items-start space-x-6\">\n        {/* Large avatar */}\n        <div className=\"flex-shrink-0\">\n          <Avatar\n            src={user.avatar_url}\n            alt={`${user.github_username} avatar`}\n            name={user.full_name || user.github_username}\n            size=\"2xl\"\n            priority={false} // Profile page avatar can use lazy loading\n          />\n        </div>\n\n        {/* User details */}\n        <div className=\"flex-1 min-w-0\">\n          <div className=\"flex items-center justify-between\">\n            <div>\n              <h1 className=\"text-2xl font-bold text-gray-900\">\n                {user.full_name || user.github_username}\n              </h1>\n              <p className=\"text-lg text-gray-600\">@{user.github_username}</p>\n            </div>\n            \n            {showLogout && (\n              <div>\n                {!showConfirm ? (\n                  <button\n                    onClick={handleLogout}\n                    disabled={isLoggingOut}\n                    className=\"inline-flex items-center px-4 py-2 border border-transparent text-sm font-medium rounded-md text-white bg-red-600 hover:bg-red-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-red-500 disabled:opacity-50\"\n                  >\n                    <svg className=\"mr-2 h-4 w-4\" fill=\"none\" viewBox=\"0 0 24 24\" stroke=\"currentColor\">\n                      <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M17 16l4-4m0 0l-4-4m4 4H7m6 4v1a3 3 0 01-3 3H6a3 3 0 01-3-3V7a3 3 0 013-3h4a3 3 0 013 3v1\" />\n                    </svg>\n                    Logout\n                  </button>\n                ) : (\n                  <div className=\"flex items-center space-x-3\">\n                    <button\n                      onClick={handleLogout}\n                      disabled={isLoggingOut}\n                      className=\"inline-flex items-center px-4 py-2 border border-transparent text-sm font-medium rounded-md text-white bg-red-600 hover:bg-red-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-red-500 disabled:opacity-50\"\n                    >\n                      {isLoggingOut ? 'Logging out...' : 'Confirm Logout'}\n                    </button>\n                    <button\n                      onClick={cancelLogout}\n                      disabled={isLoggingOut}\n                      className=\"inline-flex items-center px-4 py-2 border border-gray-300 text-sm font-medium rounded-md text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500\"\n                    >\n                      Cancel\n                    </button>\n                  </div>\n                )}\n              </div>\n            )}\n          </div>\n\n          {/* Bio */}\n          {user.bio && (\n            <p className=\"mt-4 text-gray-700\">{user.bio}</p>\n          )}\n\n          {/* Profile details */}\n          <div className=\"mt-6 grid grid-cols-1 gap-6 sm:grid-cols-2\">\n            {user.email && (\n              <div>\n                <dt className=\"text-sm font-medium text-gray-500\">Email</dt>\n                <dd className=\"mt-1 text-sm text-gray-900\">{user.email}</dd>\n              </div>\n            )}\n            \n            {user.company && (\n              <div>\n                <dt className=\"text-sm font-medium text-gray-500\">Company</dt>\n                <dd className=\"mt-1 text-sm text-gray-900\">{user.company}</dd>\n              </div>\n            )}\n            \n            {user.location && (\n              <div>\n                <dt className=\"text-sm font-medium text-gray-500\">Location</dt>\n                <dd className=\"mt-1 text-sm text-gray-900\">{user.location}</dd>\n              </div>\n            )}\n            \n            {user.blog && (\n              <div>\n                <dt className=\"text-sm font-medium text-gray-500\">Website</dt>\n                <dd className=\"mt-1 text-sm text-gray-900\">\n                  <a \n                    href={user.blog.startsWith('http') ? user.blog : `https://${user.blog}`}\n                    target=\"_blank\"\n                    rel=\"noopener noreferrer\"\n                    className=\"text-blue-600 hover:text-blue-500\"\n                  >\n                    {user.blog}\n                  </a>\n                </dd>\n              </div>\n            )}\n            \n            <div>\n              <dt className=\"text-sm font-medium text-gray-500\">Member since</dt>\n              <dd className=\"mt-1 text-sm text-gray-900\">{formatDate(user.created_at)}</dd>\n            </div>\n            \n            {user.last_login && (\n              <div>\n                <dt className=\"text-sm font-medium text-gray-500\">Last login</dt>\n                <dd className=\"mt-1 text-sm text-gray-900\">{formatDate(user.last_login)}</dd>\n              </div>\n            )}\n          </div>\n        </div>\n      </div>\n    </div>\n  );\n\n  return variant === 'compact' ? renderCompact() : renderFull();\n};\n\nexport default UserProfile; "],"names":["UserProfile","variant","showLogout","className","onClick","state","logout","useAuth","isLoggingOut","setIsLoggingOut","useState","showConfirm","setShowConfirm","user","handleLogout","error","console","cancelLogout","formatDate","dateString","date","Date","Intl","DateTimeFormat","year","month","day","format","renderCompact","div","onKeyDown","e","key","preventDefault","tabIndex","undefined","role","aria-label","github_username","Avatar","src","avatar_url","alt","name","full_name","size","priority","p","button","stopPropagation","disabled","title","svg","fill","viewBox","stroke","path","strokeLinecap","strokeLinejoin","strokeWidth","d","renderFull","h1","bio","email","dt","dd","company","location","blog","a","href","startsWith","target","rel","created_at","last_login"],"mappings":"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"}