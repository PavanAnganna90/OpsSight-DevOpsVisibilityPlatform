{"version":3,"sources":["/Users/pavan/Desktop/Devops-app-dev-cursor/frontend/src/components/dashboard/AutomationCoveragePanel.tsx"],"sourcesContent":["/**\n * Automation Coverage Panel Component\n * \n * Main dashboard component for Ansible automation coverage and visibility.\n * Features:\n * - Comprehensive automation statistics and metrics\n * - Host coverage map and playbook execution charts\n * - Real-time updates and filtering capabilities\n * - Integration with multiple chart components\n * - Responsive design with mobile optimization\n * - Error handling and loading states\n */\n\nimport React, { useState, useEffect, useCallback, useMemo } from 'react';\nimport { HostCoverageMap } from '../charts/HostCoverageMap';\nimport { PlaybookExecutionChart } from '../charts/PlaybookExecutionChart';\nimport { MetricCard } from '../ui/MetricCard';\nimport { StatusIndicator } from '../ui/StatusIndicator';\nimport { LoadingSkeleton } from '../ui/LoadingSkeleton';\nimport { useResponsive } from '../../hooks/useResponsive';\nimport { formatRelativeTime, formatDuration } from '../../utils/time';\nimport { automationApi } from '../../services/automationApi';\nimport {\n  AutomationCoverageData,\n  AutomationRun,\n  AutomationFilter,\n  AutomationStatus,\n  Environment,\n  HostCoverage,\n  PlaybookMetrics\n} from '../../types/automation';\n\ninterface AutomationCoveragePanelProps {\n  /** Project ID for filtering data */\n  projectId?: number;\n  /** Whether to enable real-time updates */\n  enableRealTime?: boolean;\n  /** Refresh interval in seconds */\n  refreshInterval?: number;\n  /** Custom className for styling */\n  className?: string;\n  /** Callback when an automation run is clicked */\n  onRunClick?: (run: AutomationRun) => void;\n  /** Callback when a host is clicked */\n  onHostClick?: (host: HostCoverage) => void;\n  /** Callback when sync is requested */\n  onSync?: () => Promise<void>;\n}\n\n/**\n * AutomationCoveragePanel Component\n */\nexport const AutomationCoveragePanel: React.FC<AutomationCoveragePanelProps> = ({\n  projectId,\n  enableRealTime = true,\n  refreshInterval = 30,\n  className = '',\n  onRunClick,\n  onHostClick,\n  onSync\n}) => {\n  // State management\n  const [data, setData] = useState<AutomationCoverageData | null>(null);\n  const [loading, setLoading] = useState(true);\n  const [error, setError] = useState<string | null>(null);\n  const [lastUpdated, setLastUpdated] = useState<Date | null>(null);\n  const [isRefreshing, setIsRefreshing] = useState(false);\n  const [isSyncing, setIsSyncing] = useState(false);\n  \n  // Filter state\n  const [selectedEnvironment, setSelectedEnvironment] = useState<string | undefined>();\n  const [selectedPlaybook, setSelectedPlaybook] = useState<string | undefined>();\n  const [statusFilter, setStatusFilter] = useState<AutomationStatus[]>([]);\n  const [minSuccessRate, setMinSuccessRate] = useState<number | undefined>();\n  const [timeRange, setTimeRange] = useState<'day' | 'week' | 'month' | 'quarter'>('week');\n\n  // Responsive design\n  const { isMobile, isTablet } = useResponsive();\n\n  /**\n   * Fetch automation coverage data from API\n   */\n  const fetchData = useCallback(async (showLoading = true) => {\n    try {\n      if (showLoading) {\n        setLoading(true);\n      } else {\n        setIsRefreshing(true);\n      }\n      setError(null);\n\n      if (!projectId) {\n        throw new Error('Project ID is required');\n      }\n\n      // Get basic stats\n      const stats = await automationApi.getStats(projectId);\n      \n      // Get trend data for visualization\n      const trendData = await automationApi.getCoverageTrends(\n        projectId,\n        timeRange === 'day' ? 'daily' : timeRange === 'week' ? 'weekly' : 'monthly',\n        timeRange === 'day' ? 7 : timeRange === 'week' ? 30 : 90\n      );\n\n      // Transform trend data into expected format\n      const coverageData: AutomationCoverageData = {\n        stats,\n        playbook_metrics: [], // TODO: Implement when endpoint available\n        host_coverage: [], // TODO: Implement when endpoint available\n        environments: [], // TODO: Implement when endpoint available\n        recent_runs: [], // TODO: Implement when endpoint available\n        trends: trendData.data_points.map(dp => ({\n          date: dp.period,\n          date_label: dp.period,\n          total_runs: dp.total_runs,\n          successful_runs: Math.round(dp.total_runs * (dp.success_rate / 100)),\n          failed_runs: dp.failed_runs,\n          success_rate: dp.success_rate,\n          average_duration: dp.avg_execution_time,\n          hosts_managed: dp.total_hosts,\n          coverage_percentage: dp.coverage_percentage\n        }))\n      };\n\n      setData(coverageData);\n      setLastUpdated(new Date());\n    } catch (err) {\n      console.error('Failed to fetch automation coverage data:', err);\n      setError(err instanceof Error ? err.message : 'Failed to load automation coverage data');\n    } finally {\n      setLoading(false);\n      setIsRefreshing(false);\n    }\n  }, [projectId, selectedEnvironment, timeRange]);\n\n  /**\n   * Handle sync functionality\n   */\n  const handleSync = useCallback(async () => {\n    if (!onSync) return;\n\n    try {\n      setIsSyncing(true);\n      await onSync();\n      await fetchData(false);\n    } catch (err) {\n      console.error('Sync failed:', err);\n      setError('Sync failed. Please try again.');\n    } finally {\n      setIsSyncing(false);\n    }\n  }, [onSync, fetchData]);\n\n  /**\n   * Handle retry functionality\n   */\n  const handleRetry = useCallback(() => {\n    fetchData(true);\n  }, [fetchData]);\n\n  // Initial data loading\n  useEffect(() => {\n    fetchData(true);\n  }, [fetchData]);\n\n  // Real-time updates\n  useEffect(() => {\n    if (!enableRealTime || refreshInterval <= 0) return;\n\n    const interval = setInterval(() => {\n      fetchData(false);\n    }, refreshInterval * 1000);\n\n    return () => clearInterval(interval);\n  }, [enableRealTime, refreshInterval, fetchData]);\n\n  // Memoized statistics\n  const statistics = useMemo(() => {\n    if (!data) return null;\n\n    const { stats, environments, recent_runs } = data;\n    \n    // Calculate aggregate environment health\n    const healthyEnvironments = environments.filter(env => env.status === 'healthy').length;\n    const environmentHealth = environments.length > 0 \n      ? (healthyEnvironments / environments.length) * 100 \n      : 0;\n\n    // Recent activity stats\n    const recentSuccessfulRuns = recent_runs.filter(run => run.status === 'success').length;\n    const recentFailedRuns = recent_runs.filter(run => run.status === 'failed').length;\n    const runningRuns = recent_runs.filter(run => run.status === 'running').length;\n\n    return {\n      totalRuns: stats.total_runs,\n      successRate: stats.success_rate,\n      totalHosts: stats.total_hosts_managed,\n      healthyEnvironments,\n      environmentHealth,\n      recentSuccessfulRuns,\n      recentFailedRuns,\n      runningRuns,\n      avgDuration: stats.average_duration\n    };\n  }, [data]);\n\n  // Filter handlers\n  const handleFiltersChange = useCallback((newFilters: any) => {\n    if (newFilters.playbook !== undefined) setSelectedPlaybook(newFilters.playbook);\n    if (newFilters.timeRange !== undefined) setTimeRange(newFilters.timeRange);\n  }, []);\n\n  // Loading state\n  if (loading && !data) {\n    return (\n      <div className={`space-y-6 ${className}`}>\n        <LoadingSkeleton height=\"120px\" />\n        <div className=\"grid grid-cols-1 lg:grid-cols-2 gap-6\">\n          <LoadingSkeleton height=\"400px\" />\n          <LoadingSkeleton height=\"400px\" />\n        </div>\n        <LoadingSkeleton height=\"300px\" />\n      </div>\n    );\n  }\n\n  // Error state\n  if (error && !data) {\n    return (\n      <div className={`bg-white dark:bg-gray-800 rounded-lg border border-gray-200 dark:border-gray-700 p-8 text-center ${className}`}>\n        <div className=\"text-red-600 dark:text-red-400 mb-4\">\n          <svg className=\"w-12 h-12 mx-auto mb-4\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n            <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M12 8v4m0 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z\" />\n          </svg>\n          <h3 className=\"text-lg font-semibold mb-2\">Failed to Load Automation Data</h3>\n          <p className=\"text-gray-600 dark:text-gray-400 mb-4\">{error}</p>\n        </div>\n        <div className=\"space-x-3\">\n          <button\n            onClick={handleRetry}\n            className=\"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors\"\n          >\n            Retry\n          </button>\n          {onSync && (\n            <button\n              onClick={handleSync}\n              disabled={isSyncing}\n              className=\"px-4 py-2 bg-gray-600 text-white rounded-lg hover:bg-gray-700 transition-colors disabled:opacity-50\"\n            >\n              {isSyncing ? 'Syncing...' : 'Sync Data'}\n            </button>\n          )}\n        </div>\n      </div>\n    );\n  }\n\n  if (!data || !statistics) {\n    return null;\n  }\n\n  return (\n    <div className={`space-y-6 ${className}`}>\n      {/* Header */}\n      <div className=\"flex flex-col lg:flex-row lg:items-center lg:justify-between\">\n        <div>\n          <h2 className=\"text-2xl font-bold text-gray-900 dark:text-white\">\n            Automation Coverage\n          </h2>\n          <p className=\"text-gray-600 dark:text-gray-400 mt-1\">\n            Monitor Ansible automation execution and infrastructure coverage\n          </p>\n        </div>\n\n        <div className=\"flex items-center space-x-3 mt-4 lg:mt-0\">\n          {/* Last updated */}\n          {lastUpdated && (\n            <span className=\"text-sm text-gray-500 dark:text-gray-400\">\n              Updated {formatRelativeTime(lastUpdated.toISOString())}\n            </span>\n          )}\n\n          {/* Refresh indicator */}\n          {isRefreshing && (\n            <div className=\"flex items-center space-x-2 text-blue-600 dark:text-blue-400\">\n              <svg className=\"w-4 h-4 animate-spin\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n                <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15\" />\n              </svg>\n              <span className=\"text-sm\">Refreshing...</span>\n            </div>\n          )}\n\n          {/* Sync button */}\n          {onSync && (\n            <button\n              onClick={handleSync}\n              disabled={isSyncing}\n              className=\"px-3 py-1.5 text-sm bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors disabled:opacity-50 flex items-center space-x-2\"\n            >\n              {isSyncing ? (\n                <>\n                  <svg className=\"w-4 h-4 animate-spin\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n                    <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15\" />\n                  </svg>\n                  <span>Syncing</span>\n                </>\n              ) : (\n                <>\n                  <svg className=\"w-4 h-4\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n                    <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15\" />\n                  </svg>\n                  <span>Sync</span>\n                </>\n              )}\n            </button>\n          )}\n        </div>\n      </div>\n\n      {/* Statistics Cards */}\n      <div className=\"grid grid-cols-2 md:grid-cols-4 lg:grid-cols-6 gap-4\">\n        <MetricCard\n          title=\"Total Runs\"\n          value={statistics.totalRuns.toLocaleString()}\n          icon=\"ðŸš€\"\n          trend={statistics.totalRuns > 0 ? { value: '', direction: 'up' } : { value: '', direction: 'neutral' }}\n        />\n        <MetricCard\n          title=\"Success Rate\"\n          value={`${statistics.successRate.toFixed(1)}%`}\n          icon=\"âœ…\"\n          trend={statistics.successRate >= 90 ? { value: '', direction: 'up' } : statistics.successRate >= 80 ? { value: '', direction: 'neutral' } : { value: '', direction: 'down' }}\n        />\n        <MetricCard\n          title=\"Managed Hosts\"\n          value={statistics.totalHosts.toLocaleString()}\n          icon=\"ðŸ–¥ï¸\"\n          trend={statistics.totalHosts > 0 ? { value: '', direction: 'up' } : { value: '', direction: 'neutral' }}\n        />\n        <MetricCard\n          title=\"Environment Health\"\n          value={`${statistics.environmentHealth.toFixed(0)}%`}\n          icon=\"ðŸŒ\"\n          trend={statistics.environmentHealth >= 90 ? { value: '', direction: 'up' } : statistics.environmentHealth >= 80 ? { value: '', direction: 'neutral' } : { value: '', direction: 'down' }}\n        />\n        <MetricCard\n          title=\"Running Now\"\n          value={statistics.runningRuns.toString()}\n          icon=\"â³\"\n          trend={{ value: '', direction: 'neutral' }}\n        />\n        <MetricCard\n          title=\"Avg Duration\"\n          value={statistics.avgDuration ? formatDuration(statistics.avgDuration * 1000) : 'N/A'}\n          icon=\"â±ï¸\"\n          trend={{ value: '', direction: 'neutral' }}\n        />\n      </div>\n\n      {/* Main Content Grid */}\n      <div className=\"grid grid-cols-1 lg:grid-cols-2 gap-6\">\n        {/* Host Coverage Map */}\n        <HostCoverageMap\n          hostCoverage={data.host_coverage}\n          environments={data.environments}\n          selectedEnvironment={selectedEnvironment}\n          minSuccessRate={minSuccessRate}\n          columns={isMobile ? 4 : isTablet ? 6 : 8}\n          onHostClick={onHostClick}\n          onEnvironmentChange={setSelectedEnvironment}\n          onSuccessRateChange={setMinSuccessRate}\n        />\n\n        {/* Playbook Execution Chart */}\n        <PlaybookExecutionChart\n          automationRuns={data.recent_runs}\n          trends={data.trends}\n          playbookMetrics={data.playbook_metrics}\n          chartType=\"timeline\"\n          timeRange={timeRange}\n          selectedPlaybook={selectedPlaybook}\n          statusFilter={statusFilter}\n          onRunClick={onRunClick}\n          onFiltersChange={handleFiltersChange}\n        />\n      </div>\n\n      {/* Detailed Tables Section */}\n      <div className=\"grid grid-cols-1 xl:grid-cols-2 gap-6\">\n        {/* Environment Status */}\n        <div className=\"bg-white dark:bg-gray-800 rounded-lg border border-gray-200 dark:border-gray-700 p-6\">\n          <h3 className=\"text-lg font-semibold text-gray-900 dark:text-white mb-4\">\n            Environment Status\n          </h3>\n          <div className=\"space-y-3\">\n            {data.environments.map((env) => (\n              <div key={env.name} className=\"flex items-center justify-between p-3 bg-gray-50 dark:bg-gray-700 rounded-lg\">\n                <div className=\"flex items-center space-x-3\">\n                  <StatusIndicator status={\n                   env.status === 'healthy' ? 'success' :\n                   env.status === 'warning' ? 'warning' :\n                   env.status === 'critical' ? 'error' : 'neutral'\n                 } />\n                  <div>\n                    <div className=\"font-medium text-gray-900 dark:text-white\">{env.name}</div>\n                    <div className=\"text-sm text-gray-500 dark:text-gray-400\">\n                      {env.host_count} hosts â€¢ {env.playbook_count} playbooks\n                    </div>\n                  </div>\n                </div>\n                <div className=\"text-right\">\n                  <div className=\"font-medium text-gray-900 dark:text-white\">\n                    {env.success_rate.toFixed(1)}%\n                  </div>\n                  <div className=\"text-sm text-gray-500 dark:text-gray-400\">\n                    {env.coverage_percentage.toFixed(0)}% coverage\n                  </div>\n                </div>\n              </div>\n            ))}\n          </div>\n        </div>\n\n        {/* Top Playbooks */}\n        <div className=\"bg-white dark:bg-gray-800 rounded-lg border border-gray-200 dark:border-gray-700 p-6\">\n          <h3 className=\"text-lg font-semibold text-gray-900 dark:text-white mb-4\">\n            Top Performing Playbooks\n          </h3>\n          <div className=\"space-y-3\">\n            {data.playbook_metrics\n              .sort((a, b) => b.success_rate - a.success_rate)\n              .slice(0, 5)\n              .map((playbook) => (\n                <div key={playbook.name} className=\"flex items-center justify-between p-3 bg-gray-50 dark:bg-gray-700 rounded-lg\">\n                  <div className=\"flex-1 min-w-0\">\n                    <div className=\"font-medium text-gray-900 dark:text-white truncate\">\n                      {playbook.name}\n                    </div>\n                    <div className=\"text-sm text-gray-500 dark:text-gray-400\">\n                      {playbook.total_runs} runs â€¢ {playbook.environments.length} environments\n                    </div>\n                  </div>\n                  <div className=\"text-right ml-4\">\n                    <div className=\"font-medium text-gray-900 dark:text-white\">\n                      {playbook.success_rate.toFixed(1)}%\n                    </div>\n                    <div className=\"text-sm text-gray-500 dark:text-gray-400\">\n                      {playbook.average_duration ? formatDuration(playbook.average_duration * 1000) : 'N/A'}\n                    </div>\n                  </div>\n                </div>\n              ))}\n          </div>\n        </div>\n      </div>\n\n      {/* Error notification */}\n      {error && (\n        <div className=\"bg-red-50 dark:bg-red-900/50 border border-red-200 dark:border-red-800 rounded-lg p-4\">\n          <div className=\"flex items-center\">\n            <svg className=\"w-5 h-5 text-red-600 dark:text-red-400 mr-3\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n              <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M12 8v4m0 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z\" />\n            </svg>\n            <div className=\"flex-1\">\n              <h4 className=\"text-sm font-medium text-red-800 dark:text-red-200\">Update Error</h4>\n              <p className=\"text-sm text-red-700 dark:text-red-300 mt-1\">{error}</p>\n            </div>\n            <button\n              onClick={() => setError(null)}\n              className=\"text-red-600 dark:text-red-400 hover:text-red-800 dark:hover:text-red-200\"\n            >\n              <svg className=\"w-5 h-5\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n                <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M6 18L18 6M6 6l12 12\" />\n              </svg>\n            </button>\n          </div>\n        </div>\n      )}\n    </div>\n  );\n}; "],"names":["AutomationCoveragePanel","projectId","enableRealTime","refreshInterval","className","onRunClick","onHostClick","onSync","data","setData","useState","loading","setLoading","error","setError","lastUpdated","setLastUpdated","isRefreshing","setIsRefreshing","isSyncing","setIsSyncing","selectedEnvironment","setSelectedEnvironment","selectedPlaybook","setSelectedPlaybook","statusFilter","setStatusFilter","minSuccessRate","setMinSuccessRate","timeRange","setTimeRange","isMobile","isTablet","useResponsive","fetchData","useCallback","showLoading","Error","stats","automationApi","getStats","trendData","getCoverageTrends","coverageData","playbook_metrics","host_coverage","environments","recent_runs","trends","data_points","map","dp","date","period","date_label","total_runs","successful_runs","Math","round","success_rate","failed_runs","average_duration","avg_execution_time","hosts_managed","total_hosts","coverage_percentage","Date","err","console","message","handleSync","handleRetry","useEffect","interval","setInterval","clearInterval","statistics","useMemo","healthyEnvironments","filter","env","status","length","environmentHealth","recentSuccessfulRuns","run","recentFailedRuns","runningRuns","totalRuns","successRate","totalHosts","total_hosts_managed","avgDuration","handleFiltersChange","newFilters","playbook","undefined","div","LoadingSkeleton","height","svg","fill","stroke","viewBox","path","strokeLinecap","strokeLinejoin","strokeWidth","d","h3","p","button","onClick","disabled","h2","span","formatRelativeTime","toISOString","MetricCard","title","value","toLocaleString","icon","trend","direction","toFixed","toString","formatDuration","HostCoverageMap","hostCoverage","columns","onEnvironmentChange","onSuccessRateChange","PlaybookExecutionChart","automationRuns","playbookMetrics","chartType","onFiltersChange","StatusIndicator","name","host_count","playbook_count","sort","a","b","slice","h4"],"mappings":"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"}