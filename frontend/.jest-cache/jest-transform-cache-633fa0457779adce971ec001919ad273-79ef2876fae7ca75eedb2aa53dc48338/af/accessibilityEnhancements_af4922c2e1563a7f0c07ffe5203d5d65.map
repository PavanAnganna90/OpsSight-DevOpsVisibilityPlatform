{"version":3,"sources":["/Users/pavan/Desktop/Devops-app-dev-cursor/frontend/src/utils/accessibilityEnhancements.ts"],"sourcesContent":["/**\n * Accessibility Enhancements for Theme Transitions\n * \n * Comprehensive accessibility utilities for theme transitions including:\n * - Reduced motion support and detection\n * - Screen reader announcements and live regions\n * - Focus management during transitions\n * - WCAG 2.1 AA compliance features\n * - High contrast mode support\n * - Keyboard navigation enhancements\n * - Color contrast validation\n * - Motion sensitivity controls\n */\n\n// Accessibility configuration interface\nexport interface AccessibilityConfig {\n  respectReducedMotion: boolean;\n  announceThemeChanges: boolean;\n  manageFocusDuringTransitions: boolean;\n  enableHighContrastMode: boolean;\n  validateColorContrast: boolean;\n  enableKeyboardShortcuts: boolean;\n  motionSensitivityLevel: 'none' | 'reduced' | 'minimal';\n  screenReaderVerbosity: 'minimal' | 'standard' | 'verbose';\n}\n\n// Default accessibility configuration\nconst DEFAULT_ACCESSIBILITY_CONFIG: AccessibilityConfig = {\n  respectReducedMotion: true,\n  announceThemeChanges: true,\n  manageFocusDuringTransitions: true,\n  enableHighContrastMode: true,\n  validateColorContrast: true,\n  enableKeyboardShortcuts: true,\n  motionSensitivityLevel: 'reduced',\n  screenReaderVerbosity: 'standard',\n};\n\n// Screen reader announcement types\nexport type AnnouncementType = 'polite' | 'assertive' | 'off';\n\n// Focus management state\ninterface FocusState {\n  activeElement: Element | null;\n  focusableElements: Element[];\n  focusIndex: number;\n}\n\n// Color contrast result\ninterface ContrastResult {\n  ratio: number;\n  level: 'AAA' | 'AA' | 'A' | 'fail';\n  isValid: boolean;\n}\n\n// Accessibility enhancement manager\nclass AccessibilityManager {\n  private config: AccessibilityConfig = DEFAULT_ACCESSIBILITY_CONFIG;\n  private liveRegion: HTMLElement | null = null;\n  private focusState: FocusState | null = null;\n  private keyboardShortcuts = new Map<string, () => void>();\n  private motionMediaQuery: MediaQueryList | null = null;\n  private contrastMediaQuery: MediaQueryList | null = null;\n\n  constructor() {\n    this.initializeLiveRegion();\n    this.initializeMediaQueries();\n    this.initializeKeyboardShortcuts();\n  }\n\n  /**\n   * Update accessibility configuration\n   */\n  public updateConfig(newConfig: Partial<AccessibilityConfig>): void {\n    this.config = { ...this.config, ...newConfig };\n    \n    if (newConfig.enableKeyboardShortcuts !== undefined) {\n      if (newConfig.enableKeyboardShortcuts) {\n        this.enableKeyboardShortcuts();\n      } else {\n        this.disableKeyboardShortcuts();\n      }\n    }\n  }\n\n  /**\n   * Initialize live region for screen reader announcements\n   */\n  private initializeLiveRegion(): void {\n    if (typeof document === 'undefined') return;\n\n    this.liveRegion = document.createElement('div');\n    this.liveRegion.setAttribute('aria-live', 'polite');\n    this.liveRegion.setAttribute('aria-atomic', 'true');\n    this.liveRegion.setAttribute('aria-relevant', 'text');\n    this.liveRegion.className = 'sr-only';\n    this.liveRegion.style.cssText = `\n      position: absolute !important;\n      width: 1px !important;\n      height: 1px !important;\n      padding: 0 !important;\n      margin: -1px !important;\n      overflow: hidden !important;\n      clip: rect(0, 0, 0, 0) !important;\n      white-space: nowrap !important;\n      border: 0 !important;\n    `;\n    \n    document.body.appendChild(this.liveRegion);\n  }\n\n  /**\n   * Initialize media queries for accessibility preferences\n   */\n  private initializeMediaQueries(): void {\n    if (typeof window === 'undefined') return;\n\n    // Reduced motion media query\n    this.motionMediaQuery = window.matchMedia('(prefers-reduced-motion: reduce)');\n    this.motionMediaQuery.addEventListener('change', this.handleMotionPreferenceChange.bind(this));\n\n    // High contrast media query\n    this.contrastMediaQuery = window.matchMedia('(prefers-contrast: high)');\n    this.contrastMediaQuery.addEventListener('change', this.handleContrastPreferenceChange.bind(this));\n  }\n\n  /**\n   * Handle motion preference changes\n   */\n  private handleMotionPreferenceChange(event: MediaQueryListEvent): void {\n    if (event.matches) {\n      this.announceToScreenReader('Motion reduced for accessibility', 'polite');\n      this.updateConfig({ motionSensitivityLevel: 'none' });\n    } else {\n      this.updateConfig({ motionSensitivityLevel: 'reduced' });\n    }\n  }\n\n  /**\n   * Handle contrast preference changes\n   */\n  private handleContrastPreferenceChange(event: MediaQueryListEvent): void {\n    if (event.matches) {\n      this.announceToScreenReader('High contrast mode enabled', 'polite');\n      this.updateConfig({ enableHighContrastMode: true });\n    } else {\n      this.updateConfig({ enableHighContrastMode: false });\n    }\n  }\n\n  /**\n   * Initialize keyboard shortcuts for theme switching\n   */\n  private initializeKeyboardShortcuts(): void {\n    // Alt + T: Toggle theme\n    this.keyboardShortcuts.set('Alt+KeyT', () => {\n      this.announceToScreenReader('Theme toggle shortcut activated', 'assertive');\n      // This would be connected to the theme context\n      document.dispatchEvent(new CustomEvent('theme:toggle'));\n    });\n\n    // Alt + D: Toggle dark mode\n    this.keyboardShortcuts.set('Alt+KeyD', () => {\n      this.announceToScreenReader('Dark mode toggle shortcut activated', 'assertive');\n      document.dispatchEvent(new CustomEvent('theme:toggleDarkMode'));\n    });\n\n    // Alt + H: Toggle high contrast\n    this.keyboardShortcuts.set('Alt+KeyH', () => {\n      this.announceToScreenReader('High contrast toggle shortcut activated', 'assertive');\n      document.dispatchEvent(new CustomEvent('theme:toggleHighContrast'));\n    });\n\n    // Alt + M: Toggle reduced motion\n    this.keyboardShortcuts.set('Alt+KeyM', () => {\n      this.announceToScreenReader('Motion preference toggle shortcut activated', 'assertive');\n      document.dispatchEvent(new CustomEvent('accessibility:toggleMotion'));\n    });\n\n    this.enableKeyboardShortcuts();\n  }\n\n  /**\n   * Enable keyboard shortcuts\n   */\n  private enableKeyboardShortcuts(): void {\n    if (typeof document === 'undefined') return;\n\n    document.addEventListener('keydown', this.handleKeyboardShortcut.bind(this));\n  }\n\n  /**\n   * Disable keyboard shortcuts\n   */\n  private disableKeyboardShortcuts(): void {\n    if (typeof document === 'undefined') return;\n\n    document.removeEventListener('keydown', this.handleKeyboardShortcut.bind(this));\n  }\n\n  /**\n   * Handle keyboard shortcut events\n   */\n  private handleKeyboardShortcut(event: KeyboardEvent): void {\n    if (!this.config.enableKeyboardShortcuts) return;\n\n    const key = `${event.altKey ? 'Alt+' : ''}${event.ctrlKey ? 'Ctrl+' : ''}${event.shiftKey ? 'Shift+' : ''}${event.code}`;\n    const handler = this.keyboardShortcuts.get(key);\n\n    if (handler) {\n      event.preventDefault();\n      handler();\n    }\n  }\n\n  /**\n   * Announce message to screen readers\n   */\n  public announceToScreenReader(\n    message: string, \n    priority: AnnouncementType = 'polite',\n    delay: number = 100\n  ): void {\n    if (!this.config.announceThemeChanges || !this.liveRegion) return;\n\n    // Clear previous announcement\n    this.liveRegion.textContent = '';\n    this.liveRegion.setAttribute('aria-live', priority);\n\n    // Add announcement with slight delay to ensure it's picked up\n    setTimeout(() => {\n      if (this.liveRegion) {\n        this.liveRegion.textContent = this.formatAnnouncementMessage(message);\n      }\n    }, delay);\n  }\n\n  /**\n   * Format announcement message based on verbosity level\n   */\n  private formatAnnouncementMessage(message: string): string {\n    const { screenReaderVerbosity } = this.config;\n\n    switch (screenReaderVerbosity) {\n      case 'minimal':\n        return message.split('.')[0]; // First sentence only\n      case 'verbose':\n        return `Theme system: ${message}. Use Alt+T to toggle themes, Alt+D for dark mode, Alt+H for high contrast.`;\n      default:\n        return message;\n    }\n  }\n\n  /**\n   * Capture focus state before transition\n   */\n  public captureFocusState(): void {\n    if (!this.config.manageFocusDuringTransitions) return;\n\n    const activeElement = document.activeElement;\n    const focusableElements = this.getFocusableElements();\n    const focusIndex = Array.from(focusableElements).indexOf(activeElement as Element);\n\n    this.focusState = {\n      activeElement,\n      focusableElements: Array.from(focusableElements),\n      focusIndex: Math.max(0, focusIndex),\n    };\n  }\n\n  /**\n   * Restore focus state after transition\n   */\n  public restoreFocusState(): void {\n    if (!this.config.manageFocusDuringTransitions || !this.focusState) return;\n\n    const { activeElement, focusableElements, focusIndex } = this.focusState;\n\n    // Try to restore focus to the same element\n    if (activeElement && document.contains(activeElement)) {\n      (activeElement as HTMLElement).focus();\n      return;\n    }\n\n    // If original element is not available, focus the element at the same index\n    const currentFocusableElements = this.getFocusableElements();\n    const targetElement = currentFocusableElements[Math.min(focusIndex, currentFocusableElements.length - 1)];\n\n    if (targetElement) {\n      (targetElement as HTMLElement).focus();\n    }\n\n    this.focusState = null;\n  }\n\n  /**\n   * Get all focusable elements in the document\n   */\n  private getFocusableElements(): NodeListOf<Element> {\n    return document.querySelectorAll(\n      'button, [href], input, select, textarea, [tabindex]:not([tabindex=\"-1\"]), [contenteditable=\"true\"]'\n    );\n  }\n\n  /**\n   * Check if reduced motion is preferred\n   */\n  public prefersReducedMotion(): boolean {\n    if (!this.config.respectReducedMotion) return false;\n    \n    if (this.motionMediaQuery) {\n      return this.motionMediaQuery.matches;\n    }\n\n    // Fallback check\n    if (typeof window !== 'undefined') {\n      return window.matchMedia('(prefers-reduced-motion: reduce)').matches;\n    }\n\n    return false;\n  }\n\n  /**\n   * Check if high contrast is preferred\n   */\n  public prefersHighContrast(): boolean {\n    if (!this.config.enableHighContrastMode) return false;\n    \n    if (this.contrastMediaQuery) {\n      return this.contrastMediaQuery.matches;\n    }\n\n    // Fallback check\n    if (typeof window !== 'undefined') {\n      return window.matchMedia('(prefers-contrast: high)').matches;\n    }\n\n    return false;\n  }\n\n  /**\n   * Calculate color contrast ratio\n   */\n  public calculateContrastRatio(color1: string, color2: string): ContrastResult {\n    const luminance1 = this.getLuminance(color1);\n    const luminance2 = this.getLuminance(color2);\n    \n    const lighter = Math.max(luminance1, luminance2);\n    const darker = Math.min(luminance1, luminance2);\n    \n    const ratio = (lighter + 0.05) / (darker + 0.05);\n    \n    let level: ContrastResult['level'];\n    let isValid: boolean;\n\n    if (ratio >= 7) {\n      level = 'AAA';\n      isValid = true;\n    } else if (ratio >= 4.5) {\n      level = 'AA';\n      isValid = true;\n    } else if (ratio >= 3) {\n      level = 'A';\n      isValid = false;\n    } else {\n      level = 'fail';\n      isValid = false;\n    }\n\n    return { ratio, level, isValid };\n  }\n\n  /**\n   * Get relative luminance of a color\n   */\n  private getLuminance(color: string): number {\n    // Convert color to RGB values\n    const rgb = this.parseColor(color);\n    if (!rgb) return 0;\n\n    // Convert to relative luminance\n    const [r, g, b] = rgb.map(c => {\n      c = c / 255;\n      return c <= 0.03928 ? c / 12.92 : Math.pow((c + 0.055) / 1.055, 2.4);\n    });\n\n    return 0.2126 * r + 0.7152 * g + 0.0722 * b;\n  }\n\n  /**\n   * Parse color string to RGB values\n   */\n  private parseColor(color: string): [number, number, number] | null {\n    // Create a temporary element to parse the color\n    const div = document.createElement('div');\n    div.style.color = color;\n    document.body.appendChild(div);\n    \n    const computedColor = window.getComputedStyle(div).color;\n    document.body.removeChild(div);\n\n    // Parse RGB values from computed style\n    const match = computedColor.match(/rgb\\((\\d+),\\s*(\\d+),\\s*(\\d+)\\)/);\n    if (match) {\n      return [parseInt(match[1]), parseInt(match[2]), parseInt(match[3])];\n    }\n\n    return null;\n  }\n\n  /**\n   * Validate theme colors for accessibility\n   */\n  public validateThemeAccessibility(theme: Record<string, string>): {\n    isValid: boolean;\n    issues: string[];\n    suggestions: string[];\n  } {\n    const issues: string[] = [];\n    const suggestions: string[] = [];\n\n    // Check background/text contrast\n    const background = theme['--theme-background-primary'] || theme['background'];\n    const text = theme['--theme-text-primary'] || theme['color'];\n\n    if (background && text) {\n      const contrast = this.calculateContrastRatio(background, text);\n      if (!contrast.isValid) {\n        issues.push(`Text contrast ratio ${contrast.ratio.toFixed(2)} does not meet WCAG AA standards (4.5:1 required)`);\n        suggestions.push('Increase contrast between background and text colors');\n      }\n    }\n\n    // Check focus indicator contrast\n    const focusColor = theme['--theme-border-focus'] || theme['--focus-color'];\n    if (background && focusColor) {\n      const focusContrast = this.calculateContrastRatio(background, focusColor);\n      if (focusContrast.ratio < 3) {\n        issues.push(`Focus indicator contrast ratio ${focusContrast.ratio.toFixed(2)} is too low (3:1 minimum required)`);\n        suggestions.push('Use a more contrasting color for focus indicators');\n      }\n    }\n\n    return {\n      isValid: issues.length === 0,\n      issues,\n      suggestions,\n    };\n  }\n\n  /**\n   * Apply accessibility enhancements to theme transition\n   * Including real-time color contrast monitoring during transitions\n   */\n  public enhanceThemeTransition(\n    themeName: string,\n    colorMode: string,\n    onTransitionStart?: () => void,\n    onTransitionComplete?: () => void\n  ): {\n    shouldReduceMotion: boolean;\n    announcement: string;\n    focusManagement: {\n      capture: () => void;\n      restore: () => void;\n    };\n    contrastMonitoring: {\n      startMonitoring: () => void;\n      stopMonitoring: () => void;\n      getViolations: () => string[];\n    };\n  } {\n    const shouldReduceMotion = this.prefersReducedMotion() || this.config.motionSensitivityLevel === 'none';\n    let contrastViolations: string[] = [];\n    let monitoringInterval: NodeJS.Timeout | null = null;\n    \n    // Generate appropriate announcement\n    let announcement = '';\n    switch (this.config.screenReaderVerbosity) {\n      case 'minimal':\n        announcement = `${themeName} theme`;\n        break;\n      case 'verbose':\n        announcement = `Theme changed to ${themeName} in ${colorMode} mode. The page appearance has been updated. Use Alt+T to toggle themes or Alt+D for dark mode.`;\n        break;\n      default:\n        announcement = `Theme changed to ${themeName} in ${colorMode} mode`;\n    }\n\n    // Enhanced contrast monitoring for transitions\n    const startContrastMonitoring = () => {\n      if (!this.config.validateColorContrast) return;\n\n      contrastViolations = [];\n      \n      const monitorContrast = () => {\n        // Monitor key UI elements for contrast violations during transition\n        const elementsToCheck = [\n          { selector: 'button', description: 'buttons' },\n          { selector: 'a', description: 'links' },\n          { selector: 'input', description: 'form inputs' },\n          { selector: '[role=\"tab\"]', description: 'tabs' },\n          { selector: '.text-primary', description: 'primary text' },\n          { selector: '.bg-primary', description: 'primary backgrounds' },\n        ];\n\n        elementsToCheck.forEach(({ selector, description }) => {\n          const elements = document.querySelectorAll(selector);\n          elements.forEach((element, index) => {\n            if (element instanceof HTMLElement) {\n              const computedStyle = window.getComputedStyle(element);\n              const textColor = computedStyle.color;\n              const backgroundColor = computedStyle.backgroundColor;\n              \n              if (textColor && backgroundColor && backgroundColor !== 'rgba(0, 0, 0, 0)') {\n                const contrastResult = this.calculateContrastRatio(textColor, backgroundColor);\n                \n                if (!contrastResult.isValid) {\n                  const violation = `${description} element ${index + 1}: contrast ratio ${contrastResult.ratio.toFixed(2)} (${contrastResult.level})`;\n                  \n                  if (!contrastViolations.includes(violation)) {\n                    contrastViolations.push(violation);\n                    \n                    // Announce serious violations immediately\n                    if (contrastResult.level === 'fail') {\n                      this.announceToScreenReader(\n                        `Accessibility warning: Low contrast detected in ${description}`, \n                        'assertive'\n                      );\n                    }\n                  }\n                }\n              }\n            }\n          });\n        });\n      };\n\n      // Start monitoring at intervals during transition\n      monitoringInterval = setInterval(monitorContrast, 50); // Check every 50ms during transition\n      monitorContrast(); // Initial check\n    };\n\n    const stopContrastMonitoring = () => {\n      if (monitoringInterval) {\n        clearInterval(monitoringInterval);\n        monitoringInterval = null;\n      }\n\n      // Final contrast validation\n      if (contrastViolations.length > 0 && this.config.announceThemeChanges) {\n        const violationCount = contrastViolations.length;\n        this.announceToScreenReader(\n          `Theme transition completed. ${violationCount} contrast ${violationCount === 1 ? 'issue' : 'issues'} detected. Check accessibility settings for details.`,\n          'polite'\n        );\n      }\n    };\n\n    const getViolations = () => [...contrastViolations];\n\n    return {\n      shouldReduceMotion,\n      announcement,\n      focusManagement: {\n        capture: () => this.captureFocusState(),\n        restore: () => this.restoreFocusState(),\n      },\n      contrastMonitoring: {\n        startMonitoring: startContrastMonitoring,\n        stopMonitoring: stopContrastMonitoring,\n        getViolations,\n      },\n    };\n  }\n\n  /**\n   * Add accessibility attributes to theme-related elements\n   */\n  public enhanceThemeElements(): void {\n    // Enhance theme toggle buttons\n    const themeButtons = document.querySelectorAll('[data-theme-toggle]');\n    themeButtons.forEach(button => {\n      if (!button.getAttribute('aria-label')) {\n        button.setAttribute('aria-label', 'Toggle theme');\n      }\n      if (!button.getAttribute('role')) {\n        button.setAttribute('role', 'button');\n      }\n      button.setAttribute('aria-describedby', 'theme-toggle-description');\n    });\n\n    // Add description for theme toggles\n    if (!document.getElementById('theme-toggle-description')) {\n      const description = document.createElement('div');\n      description.id = 'theme-toggle-description';\n      description.className = 'sr-only';\n      description.textContent = 'Changes the visual theme of the application. Use Alt+T for keyboard shortcut.';\n      document.body.appendChild(description);\n    }\n\n    // Enhance color mode selectors\n    const colorModeSelectors = document.querySelectorAll('[data-color-mode]');\n    colorModeSelectors.forEach(selector => {\n      selector.setAttribute('role', 'radiogroup');\n      selector.setAttribute('aria-label', 'Color mode selection');\n    });\n  }\n\n  /**\n   * Get accessibility status report\n   */\n  public getAccessibilityReport(): {\n    reducedMotionEnabled: boolean;\n    highContrastEnabled: boolean;\n    keyboardShortcutsEnabled: boolean;\n    screenReaderSupport: boolean;\n    focusManagementEnabled: boolean;\n    colorContrastValidation: boolean;\n  } {\n    return {\n      reducedMotionEnabled: this.prefersReducedMotion(),\n      highContrastEnabled: this.prefersHighContrast(),\n      keyboardShortcutsEnabled: this.config.enableKeyboardShortcuts,\n      screenReaderSupport: this.config.announceThemeChanges && !!this.liveRegion,\n      focusManagementEnabled: this.config.manageFocusDuringTransitions,\n      colorContrastValidation: this.config.validateColorContrast,\n    };\n  }\n\n  /**\n   * Cleanup and destroy\n   */\n  public destroy(): void {\n    if (this.liveRegion) {\n      document.body.removeChild(this.liveRegion);\n      this.liveRegion = null;\n    }\n\n    this.disableKeyboardShortcuts();\n\n    if (this.motionMediaQuery) {\n      this.motionMediaQuery.removeEventListener('change', this.handleMotionPreferenceChange.bind(this));\n    }\n\n    if (this.contrastMediaQuery) {\n      this.contrastMediaQuery.removeEventListener('change', this.handleContrastPreferenceChange.bind(this));\n    }\n\n    this.keyboardShortcuts.clear();\n    this.focusState = null;\n  }\n}\n\n// Global accessibility manager instance\nexport const accessibilityManager = new AccessibilityManager();\n\n/**\n * React hook for accessibility management\n */\nexport function useAccessibility() {\n  const updateConfig = (config: Partial<AccessibilityConfig>) => {\n    accessibilityManager.updateConfig(config);\n  };\n\n  const announceToScreenReader = (message: string, priority?: AnnouncementType) => {\n    accessibilityManager.announceToScreenReader(message, priority);\n  };\n\n  const enhanceThemeTransition = (themeName: string, colorMode: string) => {\n    return accessibilityManager.enhanceThemeTransition(themeName, colorMode);\n  };\n\n  const validateThemeAccessibility = (theme: Record<string, string>) => {\n    return accessibilityManager.validateThemeAccessibility(theme);\n  };\n\n  const getReport = () => accessibilityManager.getAccessibilityReport();\n\n  const prefersReducedMotion = () => accessibilityManager.prefersReducedMotion();\n\n  const prefersHighContrast = () => accessibilityManager.prefersHighContrast();\n\n  return {\n    updateConfig,\n    announceToScreenReader,\n    enhanceThemeTransition,\n    validateThemeAccessibility,\n    getReport,\n    prefersReducedMotion,\n    prefersHighContrast,\n  };\n}\n\n/**\n * Accessibility decorator for theme transition functions\n */\nexport function withAccessibilityEnhancements<T extends (...args: any[]) => Promise<any>>(\n  fn: T,\n  themeName: string,\n  colorMode: string\n): T {\n  return (async (...args: any[]) => {\n    const enhancements = accessibilityManager.enhanceThemeTransition(themeName, colorMode);\n    \n    // Capture focus state\n    enhancements.focusManagement.capture();\n    \n    // Announce transition start\n    accessibilityManager.announceToScreenReader(`Starting theme transition to ${themeName}`, 'polite');\n    \n    try {\n      const result = await fn(...args);\n      \n      // Announce completion\n      accessibilityManager.announceToScreenReader(enhancements.announcement, 'polite');\n      \n      // Restore focus\n      setTimeout(() => {\n        enhancements.focusManagement.restore();\n      }, 100);\n      \n      return result;\n    } catch (error) {\n      accessibilityManager.announceToScreenReader('Theme transition failed', 'assertive');\n      enhancements.focusManagement.restore();\n      throw error;\n    }\n  }) as T;\n}\n\nexport default accessibilityManager; "],"names":["accessibilityManager","useAccessibility","withAccessibilityEnhancements","DEFAULT_ACCESSIBILITY_CONFIG","respectReducedMotion","announceThemeChanges","manageFocusDuringTransitions","enableHighContrastMode","validateColorContrast","enableKeyboardShortcuts","motionSensitivityLevel","screenReaderVerbosity","AccessibilityManager","constructor","config","liveRegion","focusState","keyboardShortcuts","Map","motionMediaQuery","contrastMediaQuery","initializeLiveRegion","initializeMediaQueries","initializeKeyboardShortcuts","updateConfig","newConfig","undefined","disableKeyboardShortcuts","document","createElement","setAttribute","className","style","cssText","body","appendChild","window","matchMedia","addEventListener","handleMotionPreferenceChange","bind","handleContrastPreferenceChange","event","matches","announceToScreenReader","set","dispatchEvent","CustomEvent","handleKeyboardShortcut","removeEventListener","key","altKey","ctrlKey","shiftKey","code","handler","get","preventDefault","message","priority","delay","textContent","setTimeout","formatAnnouncementMessage","split","captureFocusState","activeElement","focusableElements","getFocusableElements","focusIndex","Array","from","indexOf","Math","max","restoreFocusState","contains","focus","currentFocusableElements","targetElement","min","length","querySelectorAll","prefersReducedMotion","prefersHighContrast","calculateContrastRatio","color1","color2","luminance1","getLuminance","luminance2","lighter","darker","ratio","level","isValid","color","rgb","parseColor","r","g","b","map","c","pow","div","computedColor","getComputedStyle","removeChild","match","parseInt","validateThemeAccessibility","theme","issues","suggestions","background","text","contrast","push","toFixed","focusColor","focusContrast","enhanceThemeTransition","themeName","colorMode","onTransitionStart","onTransitionComplete","shouldReduceMotion","contrastViolations","monitoringInterval","announcement","startContrastMonitoring","monitorContrast","elementsToCheck","selector","description","forEach","elements","element","index","HTMLElement","computedStyle","textColor","backgroundColor","contrastResult","violation","includes","setInterval","stopContrastMonitoring","clearInterval","violationCount","getViolations","focusManagement","capture","restore","contrastMonitoring","startMonitoring","stopMonitoring","enhanceThemeElements","themeButtons","button","getAttribute","getElementById","id","colorModeSelectors","getAccessibilityReport","reducedMotionEnabled","highContrastEnabled","keyboardShortcutsEnabled","screenReaderSupport","focusManagementEnabled","colorContrastValidation","destroy","clear","getReport","fn","args","enhancements","result","error"],"mappings":"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"}