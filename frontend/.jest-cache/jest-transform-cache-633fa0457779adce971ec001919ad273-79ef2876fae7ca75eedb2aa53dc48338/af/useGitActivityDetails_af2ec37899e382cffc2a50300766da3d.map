{"version":3,"sources":["/Users/pavan/Desktop/Devops-app-dev-cursor/frontend/src/hooks/useGitActivityDetails.ts"],"sourcesContent":["/**\n * useGitActivityDetails Hook\n * \n * Custom React hook for managing detailed Git activity data for specific dates,\n * including commits, pull requests, and contributor information.\n */\n\nimport { useState, useCallback, useRef } from 'react';\nimport { useQuery, useQueryClient } from '@tanstack/react-query';\nimport gitActivityService from '../services/gitActivityService';\nimport {\n  DetailedActivityView,\n  GitCommit,\n  GitPullRequest,\n  GitContributor,\n  GitActivityError\n} from '../types/git-activity';\n\n/**\n * Hook for fetching detailed activity data for a specific date\n */\nexport const useGitActivityDetails = (\n  owner: string,\n  repo: string,\n  provider: 'github' | 'gitlab' = 'github'\n) => {\n  const [selectedDate, setSelectedDate] = useState<string | null>(null);\n  const [isDetailViewOpen, setIsDetailViewOpen] = useState(false);\n  const queryClient = useQueryClient();\n  const loadingRef = useRef<string | null>(null);\n\n  // Query for detailed data\n  const {\n    data: detailedData,\n    isLoading,\n    error,\n    refetch\n  } = useQuery<DetailedActivityView, GitActivityError>({\n    queryKey: ['git-activity-details', owner, repo, provider, selectedDate],\n    queryFn: async () => {\n      if (!selectedDate) throw new Error('No date selected');\n      \n      // This would be implemented in the backend\n      // For now, we'll simulate the API call\n      const response = await gitActivityService.getRepositoryActivity({\n        owner,\n        repo,\n        provider,\n        days_back: 1,\n        use_cache: true,\n        force_refresh: false\n      });\n\n      // Extract data for the specific date\n      const dayData = response.activity_heatmap.find(item => item.date === selectedDate);\n      \n      if (!dayData) {\n        throw new Error('No data found for selected date');\n      }\n\n      // Simulate detailed data structure\n      // In a real implementation, this would come from a dedicated endpoint\n      const detailedView: DetailedActivityView = {\n        date: selectedDate,\n        commits: [], // Would be populated from API\n        pullRequests: [], // Would be populated from API\n        contributors: [], // Would be populated from API\n        metrics: {\n          total_activity: dayData.activity_count,\n          lines_added: dayData.lines_added,\n          lines_deleted: dayData.lines_deleted,\n          files_changed: dayData.files_changed,\n          code_churn: dayData.lines_added + dayData.lines_deleted\n        }\n      };\n\n      return detailedView;\n    },\n    enabled: !!selectedDate && !!owner && !!repo,\n    staleTime: 5 * 60 * 1000, // 5 minutes\n    retry: 2\n  });\n\n  /**\n   * Open detail view for a specific date\n   */\n  const openDetailView = useCallback((date: string) => {\n    setSelectedDate(date);\n    setIsDetailViewOpen(true);\n  }, []);\n\n  /**\n   * Close detail view\n   */\n  const closeDetailView = useCallback(() => {\n    setIsDetailViewOpen(false);\n    setSelectedDate(null);\n  }, []);\n\n  /**\n   * Load detailed data for a specific date\n   */\n  const loadDetails = useCallback(async (date: string) => {\n    if (loadingRef.current === date) return; // Prevent duplicate requests\n    \n    loadingRef.current = date;\n    setSelectedDate(date);\n    \n    try {\n      await refetch();\n    } finally {\n      loadingRef.current = null;\n    }\n  }, [refetch]);\n\n  /**\n   * Prefetch details for a date (for hover previews)\n   */\n  const prefetchDetails = useCallback((date: string) => {\n    queryClient.prefetchQuery({\n      queryKey: ['git-activity-details', owner, repo, provider, date],\n      queryFn: async () => {\n        // Same logic as main query but for prefetching\n        const response = await gitActivityService.getRepositoryActivity({\n          owner,\n          repo,\n          provider,\n          days_back: 1,\n          use_cache: true,\n          force_refresh: false\n        });\n\n        const dayData = response.activity_heatmap.find(item => item.date === date);\n        \n        if (!dayData) {\n          throw new Error('No data found for selected date');\n        }\n\n        return {\n          date,\n          commits: [],\n          pullRequests: [],\n          contributors: [],\n          metrics: {\n            total_activity: dayData.activity_count,\n            lines_added: dayData.lines_added,\n            lines_deleted: dayData.lines_deleted,\n            files_changed: dayData.files_changed,\n            code_churn: dayData.lines_added + dayData.lines_deleted\n          }\n        } as DetailedActivityView;\n      },\n      staleTime: 5 * 60 * 1000\n    });\n  }, [queryClient, owner, repo, provider]);\n\n  /**\n   * Clear cached details for a specific date\n   */\n  const clearDetailsCache = useCallback((date?: string) => {\n    if (date) {\n      queryClient.removeQueries({\n        queryKey: ['git-activity-details', owner, repo, provider, date]\n      });\n    } else {\n      queryClient.removeQueries({\n        queryKey: ['git-activity-details', owner, repo, provider]\n      });\n    }\n  }, [queryClient, owner, repo, provider]);\n\n  return {\n    // State\n    selectedDate,\n    isDetailViewOpen,\n    detailedData,\n    isLoading,\n    error: error?.message || null,\n\n    // Actions\n    openDetailView,\n    closeDetailView,\n    loadDetails,\n    prefetchDetails,\n    clearDetailsCache,\n    refetch\n  };\n};\n\n/**\n * Hook for managing multiple date selections and bulk operations\n */\nexport const useGitActivityBulkDetails = (\n  owner: string,\n  repo: string,\n  provider: 'github' | 'gitlab' = 'github'\n) => {\n  const [selectedDates, setSelectedDates] = useState<Set<string>>(new Set());\n  const [isLoading, setIsLoading] = useState(false);\n  const [errors, setErrors] = useState<Record<string, string>>({});\n  const queryClient = useQueryClient();\n\n  /**\n   * Add date to selection\n   */\n  const addDateToSelection = useCallback((date: string) => {\n    setSelectedDates(prev => new Set([...prev, date]));\n  }, []);\n\n  /**\n   * Remove date from selection\n   */\n  const removeDateFromSelection = useCallback((date: string) => {\n    setSelectedDates(prev => {\n      const newSet = new Set(prev);\n      newSet.delete(date);\n      return newSet;\n    });\n  }, []);\n\n  /**\n   * Toggle date selection\n   */\n  const toggleDateSelection = useCallback((date: string) => {\n    setSelectedDates(prev => {\n      const newSet = new Set(prev);\n      if (newSet.has(date)) {\n        newSet.delete(date);\n      } else {\n        newSet.add(date);\n      }\n      return newSet;\n    });\n  }, []);\n\n  /**\n   * Clear all selections\n   */\n  const clearSelection = useCallback(() => {\n    setSelectedDates(new Set());\n    setErrors({});\n  }, []);\n\n  /**\n   * Load details for all selected dates\n   */\n  const loadAllSelectedDetails = useCallback(async () => {\n    if (selectedDates.size === 0) return;\n\n    setIsLoading(true);\n    const newErrors: Record<string, string> = {};\n\n    const promises = Array.from(selectedDates).map(async (date) => {\n      try {\n        await queryClient.fetchQuery({\n          queryKey: ['git-activity-details', owner, repo, provider, date],\n          queryFn: async () => {\n            const response = await gitActivityService.getRepositoryActivity({\n              owner,\n              repo,\n              provider,\n              days_back: 1,\n              use_cache: true,\n              force_refresh: false\n            });\n\n            const dayData = response.activity_heatmap.find(item => item.date === date);\n            \n            if (!dayData) {\n              throw new Error('No data found for selected date');\n            }\n\n            return {\n              date,\n              commits: [],\n              pullRequests: [],\n              contributors: [],\n              metrics: {\n                total_activity: dayData.activity_count,\n                lines_added: dayData.lines_added,\n                lines_deleted: dayData.lines_deleted,\n                files_changed: dayData.files_changed,\n                code_churn: dayData.lines_added + dayData.lines_deleted\n              }\n            } as DetailedActivityView;\n          }\n        });\n      } catch (error) {\n        newErrors[date] = error instanceof Error ? error.message : 'Unknown error';\n      }\n    });\n\n    await Promise.allSettled(promises);\n    setErrors(newErrors);\n    setIsLoading(false);\n  }, [selectedDates, queryClient, owner, repo, provider]);\n\n  /**\n   * Export selected dates data\n   */\n  const exportSelectedData = useCallback(async (format: 'csv' | 'json' = 'json') => {\n    if (selectedDates.size === 0) return;\n\n    const data: Record<string, DetailedActivityView | null> = {};\n    \n    for (const date of selectedDates) {\n      const cachedData = queryClient.getQueryData<DetailedActivityView>([\n        'git-activity-details', owner, repo, provider, date\n      ]);\n      data[date] = cachedData || null;\n    }\n\n    const exportData = {\n      repository: `${owner}/${repo}`,\n      provider,\n      selectedDates: Array.from(selectedDates),\n      data,\n      exportedAt: new Date().toISOString()\n    };\n\n    const blob = new Blob([JSON.stringify(exportData, null, 2)], {\n      type: format === 'json' ? 'application/json' : 'text/csv'\n    });\n    \n    const url = URL.createObjectURL(blob);\n    const a = document.createElement('a');\n    a.href = url;\n    a.download = `git-activity-details-${owner}-${repo}-${new Date().toISOString().split('T')[0]}.${format}`;\n    document.body.appendChild(a);\n    a.click();\n    document.body.removeChild(a);\n    URL.revokeObjectURL(url);\n  }, [selectedDates, queryClient, owner, repo, provider]);\n\n  return {\n    // State\n    selectedDates: Array.from(selectedDates),\n    selectedDatesSet: selectedDates,\n    isLoading,\n    errors,\n\n    // Actions\n    addDateToSelection,\n    removeDateFromSelection,\n    toggleDateSelection,\n    clearSelection,\n    loadAllSelectedDetails,\n    exportSelectedData\n  };\n};\n\n/**\n * Hook for activity comparison between dates\n */\nexport const useGitActivityComparison = () => {\n  const [comparisonDates, setComparisonDates] = useState<[string, string] | null>(null);\n  const [comparisonData, setComparisonData] = useState<{\n    date1: DetailedActivityView | null;\n    date2: DetailedActivityView | null;\n    comparison: any | null;\n  }>({\n    date1: null,\n    date2: null,\n    comparison: null\n  });\n\n  /**\n   * Set dates for comparison\n   */\n  const setDatesForComparison = useCallback((date1: string, date2: string) => {\n    setComparisonDates([date1, date2]);\n  }, []);\n\n  /**\n   * Clear comparison\n   */\n  const clearComparison = useCallback(() => {\n    setComparisonDates(null);\n    setComparisonData({\n      date1: null,\n      date2: null,\n      comparison: null\n    });\n  }, []);\n\n  /**\n   * Calculate comparison metrics\n   */\n  const calculateComparison = useCallback((data1: DetailedActivityView, data2: DetailedActivityView) => {\n    return {\n      activityDiff: data2.metrics.total_activity - data1.metrics.total_activity,\n      commitsDiff: data2.commits.length - data1.commits.length,\n      prsDiff: data2.pullRequests.length - data1.pullRequests.length,\n      contributorsDiff: data2.contributors.length - data1.contributors.length,\n      linesAddedDiff: data2.metrics.lines_added - data1.metrics.lines_added,\n      linesDeletedDiff: data2.metrics.lines_deleted - data1.metrics.lines_deleted,\n      filesChangedDiff: data2.metrics.files_changed - data1.metrics.files_changed\n    };\n  }, []);\n\n  return {\n    comparisonDates,\n    comparisonData,\n    setDatesForComparison,\n    clearComparison,\n    calculateComparison\n  };\n}; "],"names":["useGitActivityBulkDetails","useGitActivityComparison","useGitActivityDetails","owner","repo","provider","selectedDate","setSelectedDate","useState","isDetailViewOpen","setIsDetailViewOpen","queryClient","useQueryClient","loadingRef","useRef","data","detailedData","isLoading","error","refetch","useQuery","queryKey","queryFn","Error","response","gitActivityService","getRepositoryActivity","days_back","use_cache","force_refresh","dayData","activity_heatmap","find","item","date","detailedView","commits","pullRequests","contributors","metrics","total_activity","activity_count","lines_added","lines_deleted","files_changed","code_churn","enabled","staleTime","retry","openDetailView","useCallback","closeDetailView","loadDetails","current","prefetchDetails","prefetchQuery","clearDetailsCache","removeQueries","message","selectedDates","setSelectedDates","Set","setIsLoading","errors","setErrors","addDateToSelection","prev","removeDateFromSelection","newSet","delete","toggleDateSelection","has","add","clearSelection","loadAllSelectedDetails","size","newErrors","promises","Array","from","map","fetchQuery","Promise","allSettled","exportSelectedData","format","cachedData","getQueryData","exportData","repository","exportedAt","Date","toISOString","blob","Blob","JSON","stringify","type","url","URL","createObjectURL","a","document","createElement","href","download","split","body","appendChild","click","removeChild","revokeObjectURL","selectedDatesSet","comparisonDates","setComparisonDates","comparisonData","setComparisonData","date1","date2","comparison","setDatesForComparison","clearComparison","calculateComparison","data1","data2","activityDiff","commitsDiff","length","prsDiff","contributorsDiff","linesAddedDiff","linesDeletedDiff","filesChangedDiff"],"mappings":"AAAA;;;;;CAKC;;;;;;;;;;;IA2LYA,yBAAyB;eAAzBA;;IAkKAC,wBAAwB;eAAxBA;;IA7UAC,qBAAqB;eAArBA;;;uBAdiC;4BACL;2EACV;;;;;;AAYxB,MAAMA,wBAAwB,CACnCC,OACAC,MACAC,WAAgC,QAAQ;IAExC,MAAM,CAACC,cAAcC,gBAAgB,GAAGC,IAAAA,eAAQ,EAAgB;IAChE,MAAM,CAACC,kBAAkBC,oBAAoB,GAAGF,IAAAA,eAAQ,EAAC;IACzD,MAAMG,cAAcC,IAAAA,0BAAc;IAClC,MAAMC,aAAaC,IAAAA,aAAM,EAAgB;IAEzC,0BAA0B;IAC1B,MAAM,EACJC,MAAMC,YAAY,EAClBC,SAAS,EACTC,KAAK,EACLC,OAAO,EACR,GAAGC,IAAAA,oBAAQ,EAAyC;QACnDC,UAAU;YAAC;YAAwBlB;YAAOC;YAAMC;YAAUC;SAAa;QACvEgB,SAAS;YACP,IAAI,CAAChB,cAAc,MAAM,IAAIiB,MAAM;YAEnC,2CAA2C;YAC3C,uCAAuC;YACvC,MAAMC,WAAW,MAAMC,2BAAkB,CAACC,qBAAqB,CAAC;gBAC9DvB;gBACAC;gBACAC;gBACAsB,WAAW;gBACXC,WAAW;gBACXC,eAAe;YACjB;YAEA,qCAAqC;YACrC,MAAMC,UAAUN,SAASO,gBAAgB,CAACC,IAAI,CAACC,CAAAA,OAAQA,KAAKC,IAAI,KAAK5B;YAErE,IAAI,CAACwB,SAAS;gBACZ,MAAM,IAAIP,MAAM;YAClB;YAEA,mCAAmC;YACnC,sEAAsE;YACtE,MAAMY,eAAqC;gBACzCD,MAAM5B;gBACN8B,SAAS,EAAE;gBACXC,cAAc,EAAE;gBAChBC,cAAc,EAAE;gBAChBC,SAAS;oBACPC,gBAAgBV,QAAQW,cAAc;oBACtCC,aAAaZ,QAAQY,WAAW;oBAChCC,eAAeb,QAAQa,aAAa;oBACpCC,eAAed,QAAQc,aAAa;oBACpCC,YAAYf,QAAQY,WAAW,GAAGZ,QAAQa,aAAa;gBACzD;YACF;YAEA,OAAOR;QACT;QACAW,SAAS,CAAC,CAACxC,gBAAgB,CAAC,CAACH,SAAS,CAAC,CAACC;QACxC2C,WAAW,IAAI,KAAK;QACpBC,OAAO;IACT;IAEA;;GAEC,GACD,MAAMC,iBAAiBC,IAAAA,kBAAW,EAAC,CAAChB;QAClC3B,gBAAgB2B;QAChBxB,oBAAoB;IACtB,GAAG,EAAE;IAEL;;GAEC,GACD,MAAMyC,kBAAkBD,IAAAA,kBAAW,EAAC;QAClCxC,oBAAoB;QACpBH,gBAAgB;IAClB,GAAG,EAAE;IAEL;;GAEC,GACD,MAAM6C,cAAcF,IAAAA,kBAAW,EAAC,OAAOhB;QACrC,IAAIrB,WAAWwC,OAAO,KAAKnB,MAAM,QAAQ,6BAA6B;QAEtErB,WAAWwC,OAAO,GAAGnB;QACrB3B,gBAAgB2B;QAEhB,IAAI;YACF,MAAMf;QACR,SAAU;YACRN,WAAWwC,OAAO,GAAG;QACvB;IACF,GAAG;QAAClC;KAAQ;IAEZ;;GAEC,GACD,MAAMmC,kBAAkBJ,IAAAA,kBAAW,EAAC,CAAChB;QACnCvB,YAAY4C,aAAa,CAAC;YACxBlC,UAAU;gBAAC;gBAAwBlB;gBAAOC;gBAAMC;gBAAU6B;aAAK;YAC/DZ,SAAS;gBACP,+CAA+C;gBAC/C,MAAME,WAAW,MAAMC,2BAAkB,CAACC,qBAAqB,CAAC;oBAC9DvB;oBACAC;oBACAC;oBACAsB,WAAW;oBACXC,WAAW;oBACXC,eAAe;gBACjB;gBAEA,MAAMC,UAAUN,SAASO,gBAAgB,CAACC,IAAI,CAACC,CAAAA,OAAQA,KAAKC,IAAI,KAAKA;gBAErE,IAAI,CAACJ,SAAS;oBACZ,MAAM,IAAIP,MAAM;gBAClB;gBAEA,OAAO;oBACLW;oBACAE,SAAS,EAAE;oBACXC,cAAc,EAAE;oBAChBC,cAAc,EAAE;oBAChBC,SAAS;wBACPC,gBAAgBV,QAAQW,cAAc;wBACtCC,aAAaZ,QAAQY,WAAW;wBAChCC,eAAeb,QAAQa,aAAa;wBACpCC,eAAed,QAAQc,aAAa;wBACpCC,YAAYf,QAAQY,WAAW,GAAGZ,QAAQa,aAAa;oBACzD;gBACF;YACF;YACAI,WAAW,IAAI,KAAK;QACtB;IACF,GAAG;QAACpC;QAAaR;QAAOC;QAAMC;KAAS;IAEvC;;GAEC,GACD,MAAMmD,oBAAoBN,IAAAA,kBAAW,EAAC,CAAChB;QACrC,IAAIA,MAAM;YACRvB,YAAY8C,aAAa,CAAC;gBACxBpC,UAAU;oBAAC;oBAAwBlB;oBAAOC;oBAAMC;oBAAU6B;iBAAK;YACjE;QACF,OAAO;YACLvB,YAAY8C,aAAa,CAAC;gBACxBpC,UAAU;oBAAC;oBAAwBlB;oBAAOC;oBAAMC;iBAAS;YAC3D;QACF;IACF,GAAG;QAACM;QAAaR;QAAOC;QAAMC;KAAS;IAEvC,OAAO;QACL,QAAQ;QACRC;QACAG;QACAO;QACAC;QACAC,OAAOA,OAAOwC,WAAW;QAEzB,UAAU;QACVT;QACAE;QACAC;QACAE;QACAE;QACArC;IACF;AACF;AAKO,MAAMnB,4BAA4B,CACvCG,OACAC,MACAC,WAAgC,QAAQ;IAExC,MAAM,CAACsD,eAAeC,iBAAiB,GAAGpD,IAAAA,eAAQ,EAAc,IAAIqD;IACpE,MAAM,CAAC5C,WAAW6C,aAAa,GAAGtD,IAAAA,eAAQ,EAAC;IAC3C,MAAM,CAACuD,QAAQC,UAAU,GAAGxD,IAAAA,eAAQ,EAAyB,CAAC;IAC9D,MAAMG,cAAcC,IAAAA,0BAAc;IAElC;;GAEC,GACD,MAAMqD,qBAAqBf,IAAAA,kBAAW,EAAC,CAAChB;QACtC0B,iBAAiBM,CAAAA,OAAQ,IAAIL,IAAI;mBAAIK;gBAAMhC;aAAK;IAClD,GAAG,EAAE;IAEL;;GAEC,GACD,MAAMiC,0BAA0BjB,IAAAA,kBAAW,EAAC,CAAChB;QAC3C0B,iBAAiBM,CAAAA;YACf,MAAME,SAAS,IAAIP,IAAIK;YACvBE,OAAOC,MAAM,CAACnC;YACd,OAAOkC;QACT;IACF,GAAG,EAAE;IAEL;;GAEC,GACD,MAAME,sBAAsBpB,IAAAA,kBAAW,EAAC,CAAChB;QACvC0B,iBAAiBM,CAAAA;YACf,MAAME,SAAS,IAAIP,IAAIK;YACvB,IAAIE,OAAOG,GAAG,CAACrC,OAAO;gBACpBkC,OAAOC,MAAM,CAACnC;YAChB,OAAO;gBACLkC,OAAOI,GAAG,CAACtC;YACb;YACA,OAAOkC;QACT;IACF,GAAG,EAAE;IAEL;;GAEC,GACD,MAAMK,iBAAiBvB,IAAAA,kBAAW,EAAC;QACjCU,iBAAiB,IAAIC;QACrBG,UAAU,CAAC;IACb,GAAG,EAAE;IAEL;;GAEC,GACD,MAAMU,yBAAyBxB,IAAAA,kBAAW,EAAC;QACzC,IAAIS,cAAcgB,IAAI,KAAK,GAAG;QAE9Bb,aAAa;QACb,MAAMc,YAAoC,CAAC;QAE3C,MAAMC,WAAWC,MAAMC,IAAI,CAACpB,eAAeqB,GAAG,CAAC,OAAO9C;YACpD,IAAI;gBACF,MAAMvB,YAAYsE,UAAU,CAAC;oBAC3B5D,UAAU;wBAAC;wBAAwBlB;wBAAOC;wBAAMC;wBAAU6B;qBAAK;oBAC/DZ,SAAS;wBACP,MAAME,WAAW,MAAMC,2BAAkB,CAACC,qBAAqB,CAAC;4BAC9DvB;4BACAC;4BACAC;4BACAsB,WAAW;4BACXC,WAAW;4BACXC,eAAe;wBACjB;wBAEA,MAAMC,UAAUN,SAASO,gBAAgB,CAACC,IAAI,CAACC,CAAAA,OAAQA,KAAKC,IAAI,KAAKA;wBAErE,IAAI,CAACJ,SAAS;4BACZ,MAAM,IAAIP,MAAM;wBAClB;wBAEA,OAAO;4BACLW;4BACAE,SAAS,EAAE;4BACXC,cAAc,EAAE;4BAChBC,cAAc,EAAE;4BAChBC,SAAS;gCACPC,gBAAgBV,QAAQW,cAAc;gCACtCC,aAAaZ,QAAQY,WAAW;gCAChCC,eAAeb,QAAQa,aAAa;gCACpCC,eAAed,QAAQc,aAAa;gCACpCC,YAAYf,QAAQY,WAAW,GAAGZ,QAAQa,aAAa;4BACzD;wBACF;oBACF;gBACF;YACF,EAAE,OAAOzB,OAAO;gBACd0D,SAAS,CAAC1C,KAAK,GAAGhB,iBAAiBK,QAAQL,MAAMwC,OAAO,GAAG;YAC7D;QACF;QAEA,MAAMwB,QAAQC,UAAU,CAACN;QACzBb,UAAUY;QACVd,aAAa;IACf,GAAG;QAACH;QAAehD;QAAaR;QAAOC;QAAMC;KAAS;IAEtD;;GAEC,GACD,MAAM+E,qBAAqBlC,IAAAA,kBAAW,EAAC,OAAOmC,SAAyB,MAAM;QAC3E,IAAI1B,cAAcgB,IAAI,KAAK,GAAG;QAE9B,MAAM5D,OAAoD,CAAC;QAE3D,KAAK,MAAMmB,QAAQyB,cAAe;YAChC,MAAM2B,aAAa3E,YAAY4E,YAAY,CAAuB;gBAChE;gBAAwBpF;gBAAOC;gBAAMC;gBAAU6B;aAChD;YACDnB,IAAI,CAACmB,KAAK,GAAGoD,cAAc;QAC7B;QAEA,MAAME,aAAa;YACjBC,YAAY,GAAGtF,MAAM,CAAC,EAAEC,MAAM;YAC9BC;YACAsD,eAAemB,MAAMC,IAAI,CAACpB;YAC1B5C;YACA2E,YAAY,IAAIC,OAAOC,WAAW;QACpC;QAEA,MAAMC,OAAO,IAAIC,KAAK;YAACC,KAAKC,SAAS,CAACR,YAAY,MAAM;SAAG,EAAE;YAC3DS,MAAMZ,WAAW,SAAS,qBAAqB;QACjD;QAEA,MAAMa,MAAMC,IAAIC,eAAe,CAACP;QAChC,MAAMQ,IAAIC,SAASC,aAAa,CAAC;QACjCF,EAAEG,IAAI,GAAGN;QACTG,EAAEI,QAAQ,GAAG,CAAC,qBAAqB,EAAEtG,MAAM,CAAC,EAAEC,KAAK,CAAC,EAAE,IAAIuF,OAAOC,WAAW,GAAGc,KAAK,CAAC,IAAI,CAAC,EAAE,CAAC,CAAC,EAAErB,QAAQ;QACxGiB,SAASK,IAAI,CAACC,WAAW,CAACP;QAC1BA,EAAEQ,KAAK;QACPP,SAASK,IAAI,CAACG,WAAW,CAACT;QAC1BF,IAAIY,eAAe,CAACb;IACtB,GAAG;QAACvC;QAAehD;QAAaR;QAAOC;QAAMC;KAAS;IAEtD,OAAO;QACL,QAAQ;QACRsD,eAAemB,MAAMC,IAAI,CAACpB;QAC1BqD,kBAAkBrD;QAClB1C;QACA8C;QAEA,UAAU;QACVE;QACAE;QACAG;QACAG;QACAC;QACAU;IACF;AACF;AAKO,MAAMnF,2BAA2B;IACtC,MAAM,CAACgH,iBAAiBC,mBAAmB,GAAG1G,IAAAA,eAAQ,EAA0B;IAChF,MAAM,CAAC2G,gBAAgBC,kBAAkB,GAAG5G,IAAAA,eAAQ,EAIjD;QACD6G,OAAO;QACPC,OAAO;QACPC,YAAY;IACd;IAEA;;GAEC,GACD,MAAMC,wBAAwBtE,IAAAA,kBAAW,EAAC,CAACmE,OAAeC;QACxDJ,mBAAmB;YAACG;YAAOC;SAAM;IACnC,GAAG,EAAE;IAEL;;GAEC,GACD,MAAMG,kBAAkBvE,IAAAA,kBAAW,EAAC;QAClCgE,mBAAmB;QACnBE,kBAAkB;YAChBC,OAAO;YACPC,OAAO;YACPC,YAAY;QACd;IACF,GAAG,EAAE;IAEL;;GAEC,GACD,MAAMG,sBAAsBxE,IAAAA,kBAAW,EAAC,CAACyE,OAA6BC;QACpE,OAAO;YACLC,cAAcD,MAAMrF,OAAO,CAACC,cAAc,GAAGmF,MAAMpF,OAAO,CAACC,cAAc;YACzEsF,aAAaF,MAAMxF,OAAO,CAAC2F,MAAM,GAAGJ,MAAMvF,OAAO,CAAC2F,MAAM;YACxDC,SAASJ,MAAMvF,YAAY,CAAC0F,MAAM,GAAGJ,MAAMtF,YAAY,CAAC0F,MAAM;YAC9DE,kBAAkBL,MAAMtF,YAAY,CAACyF,MAAM,GAAGJ,MAAMrF,YAAY,CAACyF,MAAM;YACvEG,gBAAgBN,MAAMrF,OAAO,CAACG,WAAW,GAAGiF,MAAMpF,OAAO,CAACG,WAAW;YACrEyF,kBAAkBP,MAAMrF,OAAO,CAACI,aAAa,GAAGgF,MAAMpF,OAAO,CAACI,aAAa;YAC3EyF,kBAAkBR,MAAMrF,OAAO,CAACK,aAAa,GAAG+E,MAAMpF,OAAO,CAACK,aAAa;QAC7E;IACF,GAAG,EAAE;IAEL,OAAO;QACLqE;QACAE;QACAK;QACAC;QACAC;IACF;AACF"}