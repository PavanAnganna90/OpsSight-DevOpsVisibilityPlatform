{"version":3,"names":["CallbackPage","CallbackPageContent","cov_e8zmaevgf","f","router","s","_navigation","useRouter","searchParams","useSearchParams","state","_AuthContext","useAuth","_react","useEffect","handleCallback","code","get","b","Error","response","fetch","method","headers","body","JSON","stringify","ok","error","json","message","push","console","isAuthenticated","_jsxruntime","jsx","className","jsxs","Suspense","fallback"],"sources":["/Users/pavan/Desktop/Devops-app-dev-cursor/frontend/src/app/auth/callback/page.tsx"],"sourcesContent":["'use client';\n\nimport { useEffect, Suspense } from 'react';\nimport { useRouter, useSearchParams } from 'next/navigation';\nimport { useAuth } from '@/contexts/AuthContext';\n\n/**\n * OAuth callback handler component content\n * Processes the GitHub OAuth response and updates auth state\n */\nfunction CallbackPageContent() {\n  const router = useRouter();\n  const searchParams = useSearchParams();\n  const { state } = useAuth();\n\n  useEffect(() => {\n    async function handleCallback() {\n      try {\n        // Get the code from URL params\n        const code = searchParams?.get('code');\n        if (!code) {\n          throw new Error('No authorization code received');\n        }\n\n        // Exchange code for tokens\n        const response = await fetch('/api/v1/auth/github/callback', {\n          method: 'POST',\n          headers: {\n            'Content-Type': 'application/json',\n          },\n          body: JSON.stringify({ code }),\n        });\n\n        if (!response.ok) {\n          const error = await response.json();\n          throw new Error(error.message || 'Failed to authenticate');\n        }\n\n        // Redirect to dashboard on success\n        router.push('/dashboard');\n      } catch (error) {\n        console.error('Authentication error:', error);\n        router.push('/login');\n      }\n    }\n\n    handleCallback();\n  }, [searchParams, router]);\n\n  // Redirect based on auth state\n  useEffect(() => {\n    if (state.isAuthenticated) {\n      router.push('/dashboard');\n    } else if (state.error) {\n      router.push('/login');\n    }\n  }, [state.isAuthenticated, state.error, router]);\n\n  return (\n    <div className=\"min-h-screen flex items-center justify-center bg-gray-50\">\n      <div className=\"max-w-md w-full space-y-8 p-8 text-center\">\n        <div className=\"animate-spin rounded-full h-12 w-12 border-b-2 border-gray-900 mx-auto\"></div>\n        <h2 className=\"mt-6 text-xl font-medium text-gray-900\">\n          Completing authentication...\n        </h2>\n      </div>\n    </div>\n  );\n}\n\n/**\n * OAuth callback handler component\n * Wrapped in Suspense to handle useSearchParams\n */\nexport default function CallbackPage() {\n  return (\n    <Suspense fallback={\n      <div className=\"min-h-screen flex items-center justify-center bg-gray-50\">\n        <div className=\"max-w-md w-full space-y-8 p-8 text-center\">\n          <div className=\"animate-spin rounded-full h-12 w-12 border-b-2 border-gray-900 mx-auto\"></div>\n          <h2 className=\"mt-6 text-xl font-medium text-gray-900\">\n            Loading...\n          </h2>\n        </div>\n      </div>\n    }>\n      <CallbackPageContent />\n    </Suspense>\n  );\n}"],"mappings":"AAAA;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAsEA;;;;AAIA;;;;;;WAAwBA,YAAA;;;;;;;;iCAxEY;;;iCACO;;;iCACnB;AAExB;;;;AAIA,SAASC,oBAAA;EAAA;EAAAC,aAAA,GAAAC,CAAA;EACP,MAAMC,MAAA;EAAA;EAAA,CAAAF,aAAA,GAAAG,CAAA,OAAS,IAAAC,WAAA,CAAAC,SAAS;EACxB,MAAMC,YAAA;EAAA;EAAA,CAAAN,aAAA,GAAAG,CAAA,OAAe,IAAAC,WAAA,CAAAG,eAAe;EACpC,MAAM;IAAEC;EAAK,CAAE;EAAA;EAAA,CAAAR,aAAA,GAAAG,CAAA,OAAG,IAAAM,YAAA,CAAAC,OAAO;EAAA;EAAAV,aAAA,GAAAG,CAAA;EAEzB,IAAAQ,MAAA,CAAAC,SAAS,EAAC;IAAA;IAAAZ,aAAA,GAAAC,CAAA;IACR,eAAeY,eAAA;MAAA;MAAAb,aAAA,GAAAC,CAAA;MAAAD,aAAA,GAAAG,CAAA;MACb,IAAI;QACF;QACA,MAAMW,IAAA;QAAA;QAAA,CAAAd,aAAA,GAAAG,CAAA,QAAOG,YAAA,EAAcS,GAAA,CAAI;QAAA;QAAAf,aAAA,GAAAG,CAAA;QAC/B,IAAI,CAACW,IAAA,EAAM;UAAA;UAAAd,aAAA,GAAAgB,CAAA;UAAAhB,aAAA,GAAAG,CAAA;UACT,MAAM,IAAIc,KAAA,CAAM;QAClB;QAAA;QAAA;UAAAjB,aAAA,GAAAgB,CAAA;QAAA;QAEA;QACA,MAAME,QAAA;QAAA;QAAA,CAAAlB,aAAA,GAAAG,CAAA,QAAW,MAAMgB,KAAA,CAAM,gCAAgC;UAC3DC,MAAA,EAAQ;UACRC,OAAA,EAAS;YACP,gBAAgB;UAClB;UACAC,IAAA,EAAMC,IAAA,CAAKC,SAAS,CAAC;YAAEV;UAAK;QAC9B;QAAA;QAAAd,aAAA,GAAAG,CAAA;QAEA,IAAI,CAACe,QAAA,CAASO,EAAE,EAAE;UAAA;UAAAzB,aAAA,GAAAgB,CAAA;UAChB,MAAMU,KAAA;UAAA;UAAA,CAAA1B,aAAA,GAAAG,CAAA,QAAQ,MAAMe,QAAA,CAASS,IAAI;UAAA;UAAA3B,aAAA,GAAAG,CAAA;UACjC,MAAM,IAAIc,KAAA;UAAM;UAAA,CAAAjB,aAAA,GAAAgB,CAAA,UAAAU,KAAA,CAAME,OAAO;UAAA;UAAA,CAAA5B,aAAA,GAAAgB,CAAA,UAAI;QACnC;QAAA;QAAA;UAAAhB,aAAA,GAAAgB,CAAA;QAAA;QAEA;QAAAhB,aAAA,GAAAG,CAAA;QACAD,MAAA,CAAO2B,IAAI,CAAC;MACd,EAAE,OAAOH,KAAA,EAAO;QAAA;QAAA1B,aAAA,GAAAG,CAAA;QACd2B,OAAA,CAAQJ,KAAK,CAAC,yBAAyBA,KAAA;QAAA;QAAA1B,aAAA,GAAAG,CAAA;QACvCD,MAAA,CAAO2B,IAAI,CAAC;MACd;IACF;IAAA;IAAA7B,aAAA,GAAAG,CAAA;IAEAU,cAAA;EACF,GAAG,CAACP,YAAA,EAAcJ,MAAA,CAAO;EAEzB;EAAA;EAAAF,aAAA,GAAAG,CAAA;EACA,IAAAQ,MAAA,CAAAC,SAAS,EAAC;IAAA;IAAAZ,aAAA,GAAAC,CAAA;IAAAD,aAAA,GAAAG,CAAA;IACR,IAAIK,KAAA,CAAMuB,eAAe,EAAE;MAAA;MAAA/B,aAAA,GAAAgB,CAAA;MAAAhB,aAAA,GAAAG,CAAA;MACzBD,MAAA,CAAO2B,IAAI,CAAC;IACd,OAAO;MAAA;MAAA7B,aAAA,GAAAgB,CAAA;MAAAhB,aAAA,GAAAG,CAAA;MAAA,IAAIK,KAAA,CAAMkB,KAAK,EAAE;QAAA;QAAA1B,aAAA,GAAAgB,CAAA;QAAAhB,aAAA,GAAAG,CAAA;QACtBD,MAAA,CAAO2B,IAAI,CAAC;MACd;MAAA;MAAA;QAAA7B,aAAA,GAAAgB,CAAA;MAAA;IAAA;EACF,GAAG,CAACR,KAAA,CAAMuB,eAAe,EAAEvB,KAAA,CAAMkB,KAAK,EAAExB,MAAA,CAAO;EAAA;EAAAF,aAAA,GAAAG,CAAA;EAE/C,oBACE,IAAA6B,WAAA,CAAAC,GAAA,EAAC;IAAIC,SAAA,EAAU;cACb,iBAAAF,WAAA,CAAAG,IAAA,EAAC;MAAID,SAAA,EAAU;8BACb,IAAAF,WAAA,CAAAC,GAAA,EAAC;QAAIC,SAAA,EAAU;uBACf,IAAAF,WAAA,CAAAC,GAAA,EAAC;QAAGC,SAAA,EAAU;kBAAyC;;;;AAM/D;AAMe,SAASpC,aAAA;EAAA;EAAAE,aAAA,GAAAC,CAAA;EAAAD,aAAA,GAAAG,CAAA;EACtB,oBACE,IAAA6B,WAAA,CAAAC,GAAA,EAACtB,MAAA,CAAAyB,QAAQ;IAACC,QAAA,eACR,IAAAL,WAAA,CAAAC,GAAA,EAAC;MAAIC,SAAA,EAAU;gBACb,iBAAAF,WAAA,CAAAG,IAAA,EAAC;QAAID,SAAA,EAAU;gCACb,IAAAF,WAAA,CAAAC,GAAA,EAAC;UAAIC,SAAA,EAAU;yBACf,IAAAF,WAAA,CAAAC,GAAA,EAAC;UAAGC,SAAA,EAAU;oBAAyC;;;;cAM3D,iBAAAF,WAAA,CAAAC,GAAA,EAAClC,mBAAA;;AAGP","ignoreList":[]}