{"version":3,"sources":["/Users/pavan/Desktop/Devops-app-dev-cursor/frontend/src/components/charts/TestCoverageWidget.tsx"],"sourcesContent":["/**\n * Test Coverage Widget Component\n * \n * Displays test coverage metrics with historical trends and visual indicators.\n * Features:\n * - Unit, integration, and end-to-end coverage percentages\n * - Circular progress indicators with color-coded thresholds\n * - Historical trend visualization using line charts\n * - Responsive design with mobile optimization\n * - Interactive tooltips and trend analysis\n * - Accessibility compliance\n */\n\nimport React, { useMemo, useState } from 'react';\nimport {\n  LineChart,\n  Line,\n  XAxis,\n  YAxis,\n  CartesianGrid,\n  Tooltip,\n  ResponsiveContainer\n} from 'recharts';\nimport { format, subDays } from 'date-fns';\nimport { useResponsive } from '../../hooks/useResponsive';\n\n// Types\ninterface PipelineRun {\n  id: number;\n  pipeline_id: number;\n  run_number: number;\n  status: 'pending' | 'running' | 'success' | 'failure' | 'cancelled';\n  commit_sha: string;\n  commit_message?: string;\n  triggered_by: string;\n  trigger_event: string;\n  started_at?: string;\n  finished_at?: string;\n  duration_seconds?: number;\n  branch: string;\n  logs_url?: string;\n  artifacts_url?: string;\n  error_message?: string;\n}\n\ninterface Pipeline {\n  id: number;\n  name: string;\n  description?: string;\n  repository_url: string;\n  branch: string;\n  pipeline_type: 'ci' | 'cd' | 'ci_cd';\n  last_run_status?: 'pending' | 'running' | 'success' | 'failure' | 'cancelled';\n  last_run_at?: string;\n  total_runs: number;\n  success_rate: number;\n  average_duration?: number;\n  is_active: boolean;\n  project_id: number;\n  runs?: PipelineRun[];\n}\n\ninterface TestCoverageWidgetProps {\n  pipelines: Pipeline[];\n  timeRange?: number; // Days to look back for trends\n  className?: string;\n}\n\ninterface CoverageData {\n  unit: number;\n  integration: number;\n  e2e: number;\n  overall: number;\n}\n\ninterface TrendData {\n  date: string;\n  dateLabel: string;\n  unit: number;\n  integration: number;\n  e2e: number;\n  overall: number;\n}\n\n// Coverage thresholds for color coding\nconst COVERAGE_THRESHOLDS = {\n  excellent: 90,\n  good: 75,\n  warning: 60,\n  poor: 0\n};\n\n// Mock coverage data extraction (in real implementation, this would come from test reports)\nconst extractCoverageFromPipeline = (pipeline: Pipeline): CoverageData => {\n  // Simulate coverage extraction based on pipeline characteristics\n  const baseUnit = Math.min(95, 70 + (pipeline.success_rate * 25));\n  const baseIntegration = Math.min(90, 50 + (pipeline.success_rate * 35));\n  const baseE2e = Math.min(85, 40 + (pipeline.success_rate * 40));\n  \n  // Add some variance based on pipeline type\n  const unitCoverage = pipeline.pipeline_type === 'ci' || pipeline.pipeline_type === 'ci_cd' \n    ? baseUnit + Math.random() * 5 - 2.5 \n    : baseUnit * 0.8;\n  \n  const integrationCoverage = pipeline.pipeline_type === 'ci_cd' \n    ? baseIntegration + Math.random() * 5 - 2.5\n    : baseIntegration * 0.9;\n    \n  const e2eCoverage = pipeline.pipeline_type === 'cd' || pipeline.pipeline_type === 'ci_cd'\n    ? baseE2e + Math.random() * 5 - 2.5\n    : baseE2e * 0.7;\n\n  const unit = Math.max(0, Math.min(100, unitCoverage));\n  const integration = Math.max(0, Math.min(100, integrationCoverage));\n  const e2e = Math.max(0, Math.min(100, e2eCoverage));\n  const overall = (unit * 0.5 + integration * 0.3 + e2e * 0.2);\n\n  return {\n    unit: Math.round(unit * 10) / 10,\n    integration: Math.round(integration * 10) / 10,\n    e2e: Math.round(e2e * 10) / 10,\n    overall: Math.round(overall * 10) / 10\n  };\n};\n\n// Get coverage level and color\nconst getCoverageLevel = (percentage: number): { level: string; color: string; bgColor: string } => {\n  if (percentage >= COVERAGE_THRESHOLDS.excellent) {\n    return { level: 'Excellent', color: '#10B981', bgColor: '#D1FAE5' };\n  } else if (percentage >= COVERAGE_THRESHOLDS.good) {\n    return { level: 'Good', color: '#059669', bgColor: '#A7F3D0' };\n  } else if (percentage >= COVERAGE_THRESHOLDS.warning) {\n    return { level: 'Warning', color: '#F59E0B', bgColor: '#FEF3C7' };\n  } else {\n    return { level: 'Poor', color: '#EF4444', bgColor: '#FEE2E2' };\n  }\n};\n\n// Circular progress component\ninterface CircularProgressProps {\n  percentage: number;\n  size?: number;\n  strokeWidth?: number;\n  title: string;\n}\n\nconst CircularProgress: React.FC<CircularProgressProps> = ({\n  percentage,\n  size = 120,\n  strokeWidth = 8,\n  title\n}) => {\n  const { color, level } = getCoverageLevel(percentage);\n  const radius = (size - strokeWidth) / 2;\n  const circumference = radius * 2 * Math.PI;\n  const offset = circumference - (percentage / 100) * circumference;\n\n  return (\n    <div className=\"flex flex-col items-center\">\n      <div className=\"relative\">\n        <svg width={size} height={size} className=\"transform -rotate-90\">\n          {/* Background circle */}\n          <circle\n            cx={size / 2}\n            cy={size / 2}\n            r={radius}\n            stroke=\"#E5E7EB\"\n            strokeWidth={strokeWidth}\n            fill=\"transparent\"\n          />\n          {/* Progress circle */}\n          <circle\n            cx={size / 2}\n            cy={size / 2}\n            r={radius}\n            stroke={color}\n            strokeWidth={strokeWidth}\n            fill=\"transparent\"\n            strokeLinecap=\"round\"\n            strokeDasharray={circumference}\n            strokeDashoffset={offset}\n            className=\"transition-all duration-300 ease-in-out\"\n          />\n        </svg>\n        {/* Percentage text */}\n        <div className=\"absolute inset-0 flex items-center justify-center\">\n          <div className=\"text-center\">\n            <div className=\"text-2xl font-bold text-gray-900 dark:text-white\">\n              {percentage.toFixed(1)}%\n            </div>\n            <div className=\"text-xs text-gray-500 dark:text-gray-400 font-medium\">\n              {level}\n            </div>\n          </div>\n        </div>\n      </div>\n      <div className=\"mt-3 text-center\">\n        <div className=\"text-sm font-medium text-gray-900 dark:text-white\">\n          {title}\n        </div>\n      </div>\n    </div>\n  );\n};\n\nconst TestCoverageWidget: React.FC<TestCoverageWidgetProps> = ({\n  pipelines,\n  timeRange = 30,\n  className = ''\n}) => {\n  const { isMobile } = useResponsive();\n  const [showTrends, setShowTrends] = useState(false);\n\n  // Calculate current coverage from all active pipelines\n  const currentCoverage = useMemo(() => {\n    if (pipelines.length === 0) {\n      return { unit: 0, integration: 0, e2e: 0, overall: 0 };\n    }\n\n    const activePipelines = pipelines.filter(p => p.is_active);\n    if (activePipelines.length === 0) {\n      return { unit: 0, integration: 0, e2e: 0, overall: 0 };\n    }\n\n    const coverageData = activePipelines.map(extractCoverageFromPipeline);\n    \n    const avgUnit = coverageData.reduce((sum, data) => sum + data.unit, 0) / coverageData.length;\n    const avgIntegration = coverageData.reduce((sum, data) => sum + data.integration, 0) / coverageData.length;\n    const avgE2e = coverageData.reduce((sum, data) => sum + data.e2e, 0) / coverageData.length;\n    const avgOverall = coverageData.reduce((sum, data) => sum + data.overall, 0) / coverageData.length;\n\n    return {\n      unit: Math.round(avgUnit * 10) / 10,\n      integration: Math.round(avgIntegration * 10) / 10,\n      e2e: Math.round(avgE2e * 10) / 10,\n      overall: Math.round(avgOverall * 10) / 10\n    };\n  }, [pipelines]);\n\n  // Generate historical trend data\n  const trendData = useMemo(() => {\n    const now = new Date();\n    const data: TrendData[] = [];\n\n    for (let i = timeRange - 1; i >= 0; i--) {\n      const date = subDays(now, i);\n      const dateKey = format(date, 'yyyy-MM-dd');\n      \n      // Simulate historical coverage data with some variance\n      const baseUnit = currentCoverage.unit + (Math.random() - 0.5) * 10;\n      const baseIntegration = currentCoverage.integration + (Math.random() - 0.5) * 8;\n      const baseE2e = currentCoverage.e2e + (Math.random() - 0.5) * 12;\n      \n      const unit = Math.max(0, Math.min(100, baseUnit));\n      const integration = Math.max(0, Math.min(100, baseIntegration));\n      const e2e = Math.max(0, Math.min(100, baseE2e));\n      const overall = (unit * 0.5 + integration * 0.3 + e2e * 0.2);\n\n      data.push({\n        date: dateKey,\n        dateLabel: format(date, isMobile ? 'M/d' : 'MMM dd'),\n        unit: Math.round(unit * 10) / 10,\n        integration: Math.round(integration * 10) / 10,\n        e2e: Math.round(e2e * 10) / 10,\n        overall: Math.round(overall * 10) / 10\n      });\n    }\n\n    return data;\n  }, [currentCoverage, timeRange, isMobile]);\n\n  // Calculate trend direction\n  const calculateTrend = (current: number, historical: number[]): { direction: string; percentage: number } => {\n    if (historical.length === 0) return { direction: 'stable', percentage: 0 };\n    \n    const recent = historical.slice(-7); // Last 7 days\n    const older = historical.slice(0, Math.min(7, historical.length - 7));\n    \n    if (older.length === 0) return { direction: 'stable', percentage: 0 };\n    \n    const recentAvg = recent.reduce((sum, val) => sum + val, 0) / recent.length;\n    const olderAvg = older.reduce((sum, val) => sum + val, 0) / older.length;\n    \n    const change = ((recentAvg - olderAvg) / olderAvg) * 100;\n    \n    if (Math.abs(change) < 1) return { direction: 'stable', percentage: 0 };\n    return {\n      direction: change > 0 ? 'improving' : 'declining',\n      percentage: Math.abs(change)\n    };\n  };\n\n  const trends = {\n    unit: calculateTrend(currentCoverage.unit, trendData.map(d => d.unit)),\n    integration: calculateTrend(currentCoverage.integration, trendData.map(d => d.integration)),\n    e2e: calculateTrend(currentCoverage.e2e, trendData.map(d => d.e2e)),\n    overall: calculateTrend(currentCoverage.overall, trendData.map(d => d.overall))\n  };\n\n  // Custom tooltip for trend chart\n  const CustomTooltip = ({ active, payload, label }: any) => {\n    if (!active || !payload || !payload.length) return null;\n\n    return (\n      <div className=\"bg-white dark:bg-gray-800 border border-gray-200 dark:border-gray-700 rounded-lg p-3 shadow-lg\">\n        <p className=\"font-medium text-gray-900 dark:text-white\">{label}</p>\n        <div className=\"mt-2 space-y-1\">\n          {payload.map((entry: any, index: number) => (\n            <div key={index} className=\"flex items-center justify-between space-x-3\">\n              <div className=\"flex items-center space-x-2\">\n                <div \n                  className=\"w-3 h-3 rounded\"\n                  style={{ backgroundColor: entry.color }}\n                />\n                <span className=\"text-sm text-gray-600 dark:text-gray-400 capitalize\">\n                  {entry.dataKey === 'e2e' ? 'E2E' : entry.dataKey}\n                </span>\n              </div>\n              <span className=\"text-sm font-medium text-gray-900 dark:text-white\">\n                {entry.value.toFixed(1)}%\n              </span>\n            </div>\n          ))}\n        </div>\n      </div>\n    );\n  };\n\n  // Trend indicator component\n  const TrendIndicator: React.FC<{ trend: { direction: string; percentage: number } }> = ({ trend }) => {\n    const getIcon = () => {\n      switch (trend.direction) {\n        case 'improving':\n          return '↗';\n        case 'declining':\n          return '↘';\n        default:\n          return '→';\n      }\n    };\n\n    const getColor = () => {\n      switch (trend.direction) {\n        case 'improving':\n          return 'text-green-600';\n        case 'declining':\n          return 'text-red-600';\n        default:\n          return 'text-gray-500';\n      }\n    };\n\n    return (\n      <div className={`flex items-center space-x-1 text-xs ${getColor()}`}>\n        <span>{getIcon()}</span>\n        <span>\n          {trend.direction === 'stable' \n            ? 'Stable' \n            : `${trend.percentage.toFixed(1)}%`\n          }\n        </span>\n      </div>\n    );\n  };\n\n  return (\n    <div className={`bg-white dark:bg-gray-800 rounded-lg border border-gray-200 dark:border-gray-700 p-6 ${className}`}>\n      {/* Header */}\n      <div className=\"flex flex-col sm:flex-row sm:items-center sm:justify-between mb-6\">\n        <div>\n          <h3 className=\"text-lg font-semibold text-gray-900 dark:text-white\">\n            Test Coverage\n          </h3>\n          <p className=\"text-sm text-gray-500 dark:text-gray-400\">\n            Overall: {currentCoverage.overall.toFixed(1)}% • Last {timeRange} days\n          </p>\n        </div>\n        \n        <div className=\"flex items-center space-x-2 mt-4 sm:mt-0\">\n          <button\n            onClick={() => setShowTrends(!showTrends)}\n            className={`px-3 py-1 rounded text-xs font-medium transition-colors ${\n              showTrends\n                ? 'bg-blue-100 dark:bg-blue-900 text-blue-700 dark:text-blue-300'\n                : 'bg-gray-100 dark:bg-gray-700 text-gray-600 dark:text-gray-400 hover:text-gray-900 dark:hover:text-white'\n            }`}\n          >\n            {showTrends ? 'Hide Trends' : 'Show Trends'}\n          </button>\n        </div>\n      </div>\n\n      {/* Coverage circles */}\n      <div className=\"grid grid-cols-1 md:grid-cols-3 xl:grid-cols-4 gap-6 mb-6\">\n        <div className=\"flex flex-col items-center\">\n          <CircularProgress \n            percentage={currentCoverage.overall} \n            title=\"Overall\" \n          />\n          <TrendIndicator trend={trends.overall} />\n        </div>\n        \n        <div className=\"flex flex-col items-center\">\n          <CircularProgress \n            percentage={currentCoverage.unit} \n            title=\"Unit Tests\" \n          />\n          <TrendIndicator trend={trends.unit} />\n        </div>\n        \n        <div className=\"flex flex-col items-center\">\n          <CircularProgress \n            percentage={currentCoverage.integration} \n            title=\"Integration\" \n          />\n          <TrendIndicator trend={trends.integration} />\n        </div>\n        \n        <div className=\"flex flex-col items-center\">\n          <CircularProgress \n            percentage={currentCoverage.e2e} \n            title=\"E2E Tests\" \n          />\n          <TrendIndicator trend={trends.e2e} />\n        </div>\n      </div>\n\n      {/* Historical trends chart */}\n      {showTrends && (\n        <div className=\"border-t border-gray-200 dark:border-gray-700 pt-6\">\n          <h4 className=\"text-sm font-medium text-gray-900 dark:text-white mb-4\">\n            Coverage Trends\n          </h4>\n          <div className=\"h-64\">\n            <ResponsiveContainer width=\"100%\" height=\"100%\">\n              <LineChart\n                data={trendData}\n                margin={{\n                  top: 5,\n                  right: 30,\n                  left: 20,\n                  bottom: 5,\n                }}\n              >\n                <CartesianGrid strokeDasharray=\"3 3\" stroke=\"#E5E7EB\" />\n                <XAxis \n                  dataKey=\"dateLabel\" \n                  stroke=\"#6B7280\"\n                  fontSize={isMobile ? 10 : 12}\n                />\n                <YAxis \n                  domain={[0, 100]}\n                  stroke=\"#6B7280\"\n                  fontSize={12}\n                />\n                <Tooltip content={<CustomTooltip />} />\n                <Line\n                  type=\"monotone\"\n                  dataKey=\"overall\"\n                  stroke=\"#3B82F6\"\n                  strokeWidth={2}\n                  dot={{ r: 4 }}\n                  name=\"Overall\"\n                />\n                <Line\n                  type=\"monotone\"\n                  dataKey=\"unit\"\n                  stroke=\"#10B981\"\n                  strokeWidth={2}\n                  dot={{ r: 3 }}\n                  name=\"Unit\"\n                />\n                <Line\n                  type=\"monotone\"\n                  dataKey=\"integration\"\n                  stroke=\"#F59E0B\"\n                  strokeWidth={2}\n                  dot={{ r: 3 }}\n                  name=\"Integration\"\n                />\n                <Line\n                  type=\"monotone\"\n                  dataKey=\"e2e\"\n                  stroke=\"#EF4444\"\n                  strokeWidth={2}\n                  dot={{ r: 3 }}\n                  name=\"E2E\"\n                />\n              </LineChart>\n            </ResponsiveContainer>\n          </div>\n        </div>\n      )}\n\n      {/* Coverage thresholds legend */}\n      <div className=\"border-t border-gray-200 dark:border-gray-700 pt-4 mt-4\">\n        <div className=\"flex flex-wrap items-center justify-between gap-4 text-xs\">\n          <div className=\"flex flex-wrap items-center gap-4\">\n            <div className=\"flex items-center space-x-2\">\n              <div className=\"w-3 h-3 rounded bg-green-500\" />\n              <span className=\"text-gray-600 dark:text-gray-400\">\n                Excellent (≥90%)\n              </span>\n            </div>\n            <div className=\"flex items-center space-x-2\">\n              <div className=\"w-3 h-3 rounded bg-green-600\" />\n              <span className=\"text-gray-600 dark:text-gray-400\">\n                Good (75-89%)\n              </span>\n            </div>\n            <div className=\"flex items-center space-x-2\">\n              <div className=\"w-3 h-3 rounded bg-yellow-500\" />\n              <span className=\"text-gray-600 dark:text-gray-400\">\n                Warning (60-74%)\n              </span>\n            </div>\n            <div className=\"flex items-center space-x-2\">\n              <div className=\"w-3 h-3 rounded bg-red-500\" />\n              <span className=\"text-gray-600 dark:text-gray-400\">\n                Poor (&lt;60%)\n              </span>\n            </div>\n          </div>\n          \n          <div className=\"text-gray-500 dark:text-gray-400\">\n            {pipelines.filter(p => p.is_active).length} active pipelines\n          </div>\n        </div>\n      </div>\n    </div>\n  );\n};\n\nexport default React.memo(TestCoverageWidget); "],"names":["COVERAGE_THRESHOLDS","excellent","good","warning","poor","extractCoverageFromPipeline","pipeline","baseUnit","Math","min","success_rate","baseIntegration","baseE2e","unitCoverage","pipeline_type","random","integrationCoverage","e2eCoverage","unit","max","integration","e2e","overall","round","getCoverageLevel","percentage","level","color","bgColor","CircularProgress","size","strokeWidth","title","radius","circumference","PI","offset","div","className","svg","width","height","circle","cx","cy","r","stroke","fill","strokeLinecap","strokeDasharray","strokeDashoffset","toFixed","TestCoverageWidget","pipelines","timeRange","isMobile","useResponsive","showTrends","setShowTrends","useState","currentCoverage","useMemo","length","activePipelines","filter","p","is_active","coverageData","map","avgUnit","reduce","sum","data","avgIntegration","avgE2e","avgOverall","trendData","now","Date","i","date","subDays","dateKey","format","push","dateLabel","calculateTrend","current","historical","direction","recent","slice","older","recentAvg","val","olderAvg","change","abs","trends","d","CustomTooltip","active","payload","label","entry","index","style","backgroundColor","span","dataKey","value","TrendIndicator","trend","getIcon","getColor","h3","button","onClick","h4","ResponsiveContainer","LineChart","margin","top","right","left","bottom","CartesianGrid","XAxis","fontSize","YAxis","domain","Tooltip","content","Line","type","dot","name","React","memo"],"mappings":"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"}