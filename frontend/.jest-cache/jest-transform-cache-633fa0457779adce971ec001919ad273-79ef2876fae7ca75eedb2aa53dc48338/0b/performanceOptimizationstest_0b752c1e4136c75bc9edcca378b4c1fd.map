{"version":3,"sources":["/Users/pavan/Desktop/Devops-app-dev-cursor/frontend/src/utils/__tests__/performanceOptimizations.test.ts"],"sourcesContent":["/**\n * Performance Optimizations Tests\n * \n * Comprehensive test suite for performance optimization utilities\n * including GPU acceleration, DOM batching, caching, and monitoring.\n */\n\nimport {\n  usePerformanceOptimization,\n  withPerformanceMonitoring,\n  createOptimizedTransition,\n  PerformanceConfig,\n  PerformanceMetrics,\n  performanceOptimizer,\n} from '../performanceOptimizations';\n// Mock DOM element creator\nconst createMockElement = (tagName: string): HTMLElement => {\n  const element = document.createElement(tagName);\n  // Mock style properties needed for tests\n  Object.defineProperty(element, 'style', {\n    value: {\n      transform: '',\n      willChange: '',\n      backfaceVisibility: '',\n      backgroundColor: '',\n      color: '',\n    },\n    writable: true,\n    configurable: true,\n  });\n  return element;\n};\n\n// Mock performance test utilities\nconst createPerformanceTestUtils = () => ({\n  measureTime: (fn: () => void) => {\n    const start = performance.now();\n    fn();\n    return performance.now() - start;\n  },\n  waitForNextFrame: () => new Promise(resolve => requestAnimationFrame(resolve)),\n});\n\n// Mock requestAnimationFrame and cancelAnimationFrame\nconst mockRAF = jest.fn();\nconst mockCAF = jest.fn();\nglobal.requestAnimationFrame = mockRAF;\nglobal.cancelAnimationFrame = mockCAF;\n\ndescribe('Performance Optimizations', () => {\n  let mockElement: HTMLElement;\n  let performanceUtils: ReturnType<typeof createPerformanceTestUtils>;\n\n  beforeEach(() => {\n    jest.clearAllMocks();\n    mockElement = createMockElement('div');\n    performanceUtils = createPerformanceTestUtils();\n    \n    // Reset RAF mock to return incrementing IDs\n    let rafId = 1;\n    mockRAF.mockImplementation((callback) => {\n      setTimeout(callback, 16); // Simulate 60fps\n      return rafId++;\n    });\n    \n    // Reset the global performance optimizer\n    const { updateConfig } = usePerformanceOptimization();\n    updateConfig({\n      enableGPUAcceleration: true,\n      batchDOMUpdates: true,\n      enableCaching: true,\n      maxCacheSize: 50,\n      targetFrameRate: 60,\n      enableMetrics: false,\n      memoryThreshold: 100,\n    });\n    \n    // Clear any pending DOM updates and reset processing state\n    (performanceOptimizer as any).domUpdateQueue = [];\n    (performanceOptimizer as any).isProcessingUpdates = false;\n  });\n\n  afterEach(() => {\n    jest.clearAllTimers();\n  });\n\n  describe('usePerformanceOptimization Hook', () => {\n    it('should provide performance optimization functions', () => {\n      const {\n        updateConfig,\n        optimizeElement,\n        cleanupElement,\n        queueUpdate,\n        getReport,\n        isHealthy,\n      } = usePerformanceOptimization();\n\n      expect(typeof updateConfig).toBe('function');\n      expect(typeof optimizeElement).toBe('function');\n      expect(typeof cleanupElement).toBe('function');\n      expect(typeof queueUpdate).toBe('function');\n      expect(typeof getReport).toBe('function');\n      expect(typeof isHealthy).toBe('function');\n    });\n\n    it('should update configuration correctly', () => {\n      const { updateConfig, getReport } = usePerformanceOptimization();\n      \n      const newConfig: Partial<PerformanceConfig> = {\n        enableGPUAcceleration: false,\n        targetFrameRate: 30,\n        maxCacheSize: 25,\n      };\n\n      updateConfig(newConfig);\n      \n      // Configuration should be applied (we can't directly test internal state,\n      // but we can test that the functions still work)\n      expect(() => updateConfig(newConfig)).not.toThrow();\n    });\n\n    it('should optimize element for transitions', () => {\n      const { optimizeElement, updateConfig } = usePerformanceOptimization();\n      \n      // Ensure GPU acceleration is enabled\n      updateConfig({ enableGPUAcceleration: true });\n      \n      optimizeElement(mockElement);\n      \n      // Should apply GPU acceleration styles\n      expect(mockElement.style.transform).toBe('translate3d(0, 0, 0)');\n      expect(mockElement.style.willChange).toBe('transform, opacity, background-color, color, border-color, box-shadow');\n      expect(mockElement.style.backfaceVisibility).toBe('hidden');\n    });\n\n    it('should cleanup element optimizations', () => {\n      const { optimizeElement, cleanupElement, updateConfig } = usePerformanceOptimization();\n      \n      // Ensure GPU acceleration is enabled\n      updateConfig({ enableGPUAcceleration: true });\n      \n      // First optimize\n      optimizeElement(mockElement);\n      expect(mockElement.style.transform).toBe('translate3d(0, 0, 0)');\n      \n      // Then cleanup\n      cleanupElement(mockElement);\n      expect(mockElement.style.transform).toBe('');\n      expect(mockElement.style.willChange).toBe('');\n      expect(mockElement.style.backfaceVisibility).toBe('');\n    });\n\n    it('should queue DOM updates with different priorities', () => {\n      const { queueUpdate } = usePerformanceOptimization();\n      \n      const properties = { backgroundColor: 'red', color: 'white' };\n      \n      // Should not throw when queueing updates\n      expect(() => {\n        queueUpdate(mockElement, properties, 'high');\n        queueUpdate(mockElement, properties, 'medium');\n        queueUpdate(mockElement, properties, 'low');\n      }).not.toThrow();\n    });\n\n    it('should provide performance report', () => {\n      const { getReport } = usePerformanceOptimization();\n      \n      const report = getReport();\n      \n      expect(report).toHaveProperty('averageTransitionDuration');\n      expect(report).toHaveProperty('averageFrameRate');\n      expect(report).toHaveProperty('averageMemoryUsage');\n      expect(report).toHaveProperty('cacheEfficiency');\n      expect(report).toHaveProperty('totalTransitions');\n      \n      expect(typeof report.averageTransitionDuration).toBe('number');\n      expect(typeof report.averageFrameRate).toBe('number');\n      expect(typeof report.averageMemoryUsage).toBe('number');\n      expect(typeof report.cacheEfficiency).toBe('number');\n      expect(typeof report.totalTransitions).toBe('number');\n    });\n\n    it('should check memory health status', () => {\n      const { isHealthy } = usePerformanceOptimization();\n      \n      const healthy = isHealthy();\n      expect(typeof healthy).toBe('boolean');\n    });\n  });\n\n  describe('withPerformanceMonitoring HOF', () => {\n    it('should wrap async functions with performance monitoring', async () => {\n      const mockAsyncFunction = jest.fn().mockResolvedValue('test result');\n      const monitoredFunction = withPerformanceMonitoring(mockAsyncFunction, 'testFunction');\n\n      const result = await monitoredFunction('arg1', 'arg2');\n\n      expect(result).toBe('test result');\n      expect(mockAsyncFunction).toHaveBeenCalledWith('arg1', 'arg2');\n    });\n\n    it('should handle function errors gracefully', async () => {\n      const mockError = new Error('Test error');\n      const mockAsyncFunction = jest.fn().mockRejectedValue(mockError);\n      const monitoredFunction = withPerformanceMonitoring(mockAsyncFunction, 'errorFunction');\n\n      await expect(monitoredFunction()).rejects.toThrow('Test error');\n      expect(mockAsyncFunction).toHaveBeenCalled();\n    });\n\n    it('should measure execution time', async () => {\n      const mockAsyncFunction = jest.fn().mockImplementation(async () => {\n        // Simulate some async work\n        await new Promise(resolve => setTimeout(resolve, 100));\n        return 'result';\n      });\n\n      const monitoredFunction = withPerformanceMonitoring(mockAsyncFunction, 'timedFunction');\n      \n      const startTime = Date.now();\n      await monitoredFunction();\n      const endTime = Date.now();\n      \n      // Should have taken at least 100ms\n      expect(endTime - startTime).toBeGreaterThanOrEqual(90); // Allow some tolerance\n    });\n  });\n\n  describe('createOptimizedTransition', () => {\n    it('should create optimized transitions between states', async () => {\n      const { updateConfig } = usePerformanceOptimization();\n      \n      // Ensure GPU acceleration is enabled\n      updateConfig({ enableGPUAcceleration: true });\n      \n      const fromState = { opacity: '0', transform: 'scale(0.8)' };\n      const toState = { opacity: '1', transform: 'scale(1)' };\n      \n      const transitionPromise = createOptimizedTransition(\n        mockElement,\n        fromState,\n        toState,\n        200\n      );\n\n      expect(transitionPromise).toBeInstanceOf(Promise);\n      \n      // Should apply from state initially (overrides GPU acceleration transform)\n      expect(mockElement.style.transform).toBe('scale(0.8)');\n      expect(mockElement.style.opacity).toBe('0');\n      expect(mockElement.style.willChange).toBe('transform, opacity, background-color, color, border-color, box-shadow');\n      \n      await transitionPromise;\n      \n      // Should cleanup after transition\n      expect(mockElement.style.willChange).toBe('');\n    });\n\n    it('should handle transition with default duration', async () => {\n      const fromState = { opacity: '0' };\n      const toState = { opacity: '1' };\n      \n      const transitionPromise = createOptimizedTransition(\n        mockElement,\n        fromState,\n        toState\n      );\n\n      expect(transitionPromise).toBeInstanceOf(Promise);\n      await transitionPromise;\n    });\n\n    it('should apply initial state before transition', async () => {\n      const { updateConfig } = usePerformanceOptimization();\n      \n      // Ensure GPU acceleration is enabled\n      updateConfig({ enableGPUAcceleration: true });\n      \n      const fromState = { backgroundColor: 'red', color: 'white' };\n      const toState = { backgroundColor: 'blue', color: 'black' };\n      \n      createOptimizedTransition(mockElement, fromState, toState, 100);\n      \n      // Should apply from state initially\n      expect(mockElement.style.backgroundColor).toBe('red');\n      expect(mockElement.style.color).toBe('white');\n    });\n  });\n\n  describe('Performance Configuration', () => {\n    it('should handle GPU acceleration toggle', () => {\n      const { updateConfig, optimizeElement } = usePerformanceOptimization();\n      \n      // Disable GPU acceleration\n      updateConfig({ enableGPUAcceleration: false });\n      optimizeElement(mockElement);\n      \n      // Should not apply GPU acceleration when disabled\n      // (We can't directly test this without access to internal state,\n      // but we can verify the function doesn't throw)\n      expect(() => optimizeElement(mockElement)).not.toThrow();\n    });\n\n    it('should handle caching configuration', () => {\n      const { updateConfig } = usePerformanceOptimization();\n      \n      const config: Partial<PerformanceConfig> = {\n        enableCaching: false,\n        maxCacheSize: 10,\n      };\n      \n      expect(() => updateConfig(config)).not.toThrow();\n    });\n\n    it('should handle metrics configuration', () => {\n      const { updateConfig } = usePerformanceOptimization();\n      \n      const config: Partial<PerformanceConfig> = {\n        enableMetrics: true,\n        targetFrameRate: 120,\n      };\n      \n      expect(() => updateConfig(config)).not.toThrow();\n    });\n  });\n\n  describe('Memory Management', () => {\n    it('should monitor memory usage', () => {\n      const { isHealthy } = usePerformanceOptimization();\n      \n      // Mock performance.memory\n      Object.defineProperty(window.performance, 'memory', {\n        value: {\n          usedJSHeapSize: 50 * 1024 * 1024, // 50MB\n          totalJSHeapSize: 100 * 1024 * 1024, // 100MB\n          jsHeapSizeLimit: 2 * 1024 * 1024 * 1024, // 2GB\n        },\n        configurable: true,\n      });\n      \n      const healthy = isHealthy();\n      expect(typeof healthy).toBe('boolean');\n    });\n\n    it('should handle missing performance.memory gracefully', () => {\n      const { isHealthy } = usePerformanceOptimization();\n      \n      // Remove performance.memory\n      delete (window.performance as any).memory;\n      \n      const healthy = isHealthy();\n      expect(typeof healthy).toBe('boolean');\n    });\n  });\n\n  describe('Frame Rate Monitoring', () => {\n    it('should start frame rate monitoring when metrics enabled', () => {\n      const { updateConfig } = usePerformanceOptimization();\n      \n      // Clear any previous RAF calls\n      mockRAF.mockClear();\n      \n      updateConfig({ enableMetrics: true });\n      \n      expect(mockRAF).toHaveBeenCalled();\n    });\n\n    it('should stop frame rate monitoring when metrics disabled', () => {\n      const { updateConfig } = usePerformanceOptimization();\n      \n      // Clear any previous calls\n      mockRAF.mockClear();\n      mockCAF.mockClear();\n      \n      // Enable first\n      updateConfig({ enableMetrics: true });\n      expect(mockRAF).toHaveBeenCalled();\n      \n      // Then disable\n      updateConfig({ enableMetrics: false });\n      expect(mockCAF).toHaveBeenCalled();\n    });\n  });\n\n  describe('DOM Update Batching', () => {\n    it('should batch DOM updates by priority', () => {\n      const { queueUpdate, updateConfig } = usePerformanceOptimization();\n      \n      // Clear any previous RAF calls\n      mockRAF.mockClear();\n      \n      // Ensure batching is enabled\n      updateConfig({ batchDOMUpdates: true });\n      \n      const highPriorityProps = { color: 'red' };\n      const mediumPriorityProps = { backgroundColor: 'blue' };\n      const lowPriorityProps = { fontSize: '16px' };\n      \n      // Queue updates with different priorities\n      queueUpdate(mockElement, highPriorityProps, 'high');\n      queueUpdate(mockElement, mediumPriorityProps, 'medium');\n      queueUpdate(mockElement, lowPriorityProps, 'low');\n      \n      // Should use requestAnimationFrame for batching\n      expect(mockRAF).toHaveBeenCalled();\n    });\n\n    it('should handle multiple elements in batch', () => {\n      const { queueUpdate, updateConfig } = usePerformanceOptimization();\n      \n      // Clear any previous RAF calls\n      mockRAF.mockClear();\n      \n      // Ensure batching is enabled\n      updateConfig({ batchDOMUpdates: true });\n      \n      const element1 = createMockElement('div');\n      const element2 = createMockElement('span');\n      \n      queueUpdate(element1, { color: 'red' });\n      queueUpdate(element2, { color: 'blue' });\n      \n      expect(mockRAF).toHaveBeenCalled();\n    });\n  });\n\n  describe('Error Handling', () => {\n    it('should handle invalid elements gracefully', () => {\n      const { optimizeElement, cleanupElement, queueUpdate } = usePerformanceOptimization();\n      \n      const invalidElement = null as any;\n      \n      expect(() => optimizeElement(invalidElement)).not.toThrow();\n      expect(() => cleanupElement(invalidElement)).not.toThrow();\n      expect(() => queueUpdate(invalidElement, {})).not.toThrow();\n    });\n\n    it('should handle invalid configuration gracefully', () => {\n      const { updateConfig } = usePerformanceOptimization();\n      \n      const invalidConfig = {\n        maxCacheSize: -1,\n        targetFrameRate: -60,\n        memoryThreshold: -100,\n      } as any;\n      \n      expect(() => updateConfig(invalidConfig)).not.toThrow();\n    });\n  });\n\n  describe('Performance Metrics', () => {\n    it('should record transition metrics', () => {\n      const { getReport } = usePerformanceOptimization();\n      \n      // Get initial report\n      const initialReport = getReport();\n      expect(initialReport.totalTransitions).toBe(0);\n      \n      // The internal recordMetrics function is not directly exposed,\n      // but we can test that the report structure is correct\n      expect(initialReport).toHaveProperty('averageTransitionDuration');\n      expect(initialReport).toHaveProperty('averageFrameRate');\n      expect(initialReport).toHaveProperty('averageMemoryUsage');\n      expect(initialReport).toHaveProperty('cacheEfficiency');\n    });\n\n    it('should calculate cache efficiency', () => {\n      const { getReport } = usePerformanceOptimization();\n      \n      const report = getReport();\n      expect(report.cacheEfficiency).toBeGreaterThanOrEqual(0);\n      expect(report.cacheEfficiency).toBeLessThanOrEqual(1);\n    });\n  });\n\n  describe('Integration Tests', () => {\n    it('should work with complete optimization workflow', async () => {\n      const { updateConfig, optimizeElement, queueUpdate, cleanupElement } = usePerformanceOptimization();\n      \n      // Configure for optimal performance\n      updateConfig({\n        enableGPUAcceleration: true,\n        batchDOMUpdates: true,\n        enableCaching: true,\n        enableMetrics: true,\n      });\n      \n      // Optimize element\n      optimizeElement(mockElement);\n      \n      // Queue some updates\n      queueUpdate(mockElement, { opacity: '0.5' }, 'high');\n      queueUpdate(mockElement, { transform: 'scale(1.1)' }, 'medium');\n      \n      // Wait for batched updates to process\n      await new Promise(resolve => setTimeout(resolve, 20));\n      \n      // Cleanup\n      cleanupElement(mockElement);\n      \n      // Should complete without errors\n      expect(mockElement).toBeDefined();\n    });\n\n    it('should handle rapid configuration changes', () => {\n      const { updateConfig } = usePerformanceOptimization();\n      \n      // Rapidly change configuration\n      for (let i = 0; i < 10; i++) {\n        updateConfig({\n          enableMetrics: i % 2 === 0,\n          targetFrameRate: 30 + (i * 10),\n          maxCacheSize: 10 + i,\n        });\n      }\n      \n      // Should handle rapid changes without errors\n      expect(() => updateConfig({ enableGPUAcceleration: true })).not.toThrow();\n    });\n  });\n}); "],"names":["createMockElement","tagName","element","document","createElement","Object","defineProperty","value","transform","willChange","backfaceVisibility","backgroundColor","color","writable","configurable","createPerformanceTestUtils","measureTime","fn","start","performance","now","waitForNextFrame","Promise","resolve","requestAnimationFrame","mockRAF","jest","mockCAF","global","cancelAnimationFrame","describe","mockElement","performanceUtils","beforeEach","clearAllMocks","rafId","mockImplementation","callback","setTimeout","updateConfig","usePerformanceOptimization","enableGPUAcceleration","batchDOMUpdates","enableCaching","maxCacheSize","targetFrameRate","enableMetrics","memoryThreshold","performanceOptimizer","domUpdateQueue","isProcessingUpdates","afterEach","clearAllTimers","it","optimizeElement","cleanupElement","queueUpdate","getReport","isHealthy","expect","toBe","newConfig","not","toThrow","style","properties","report","toHaveProperty","averageTransitionDuration","averageFrameRate","averageMemoryUsage","cacheEfficiency","totalTransitions","healthy","mockAsyncFunction","mockResolvedValue","monitoredFunction","withPerformanceMonitoring","result","toHaveBeenCalledWith","mockError","Error","mockRejectedValue","rejects","toHaveBeenCalled","startTime","Date","endTime","toBeGreaterThanOrEqual","fromState","opacity","toState","transitionPromise","createOptimizedTransition","toBeInstanceOf","config","window","usedJSHeapSize","totalJSHeapSize","jsHeapSizeLimit","memory","mockClear","highPriorityProps","mediumPriorityProps","lowPriorityProps","fontSize","element1","element2","invalidElement","invalidConfig","initialReport","toBeLessThanOrEqual","toBeDefined","i"],"mappings":"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"}