{"version":3,"sources":["/Users/pavan/Desktop/Devops-app-dev-cursor/frontend/src/utils/performanceOptimizations.ts"],"sourcesContent":["/**\n * Performance Optimizations for Theme Transitions\n * \n * Advanced performance optimization utilities for smooth theme transitions\n * including GPU acceleration, batched DOM updates, intelligent caching,\n * and performance monitoring.\n * \n * Features:\n * - GPU acceleration with transform3d and will-change\n * - Batched DOM updates with requestAnimationFrame\n * - Intelligent theme caching and preloading\n * - Performance monitoring and metrics\n * - Memory management and cleanup\n * - Frame rate optimization\n */\n\n// Performance monitoring interface\nexport interface PerformanceMetrics {\n  transitionDuration: number;\n  frameRate: number;\n  memoryUsage: number;\n  domUpdates: number;\n  cacheHits: number;\n  cacheMisses: number;\n  timestamp: number;\n}\n\n// Performance configuration\nexport interface PerformanceConfig {\n  enableGPUAcceleration: boolean;\n  batchDOMUpdates: boolean;\n  enableCaching: boolean;\n  maxCacheSize: number;\n  targetFrameRate: number;\n  enableMetrics: boolean;\n  memoryThreshold: number; // MB\n}\n\n// Default performance configuration\nconst DEFAULT_PERFORMANCE_CONFIG: PerformanceConfig = {\n  enableGPUAcceleration: true,\n  batchDOMUpdates: true,\n  enableCaching: true,\n  maxCacheSize: 50, // Number of cached theme states\n  targetFrameRate: 60,\n  enableMetrics: false,\n  memoryThreshold: 100, // MB\n};\n\n// Theme cache entry\ninterface ThemeCacheEntry {\n  key: string;\n  cssVariables: Record<string, string>;\n  timestamp: number;\n  accessCount: number;\n}\n\n// DOM update batch\ninterface DOMUpdateBatch {\n  element: HTMLElement;\n  properties: Record<string, string>;\n  priority: 'high' | 'medium' | 'low';\n}\n\n// Performance optimization manager\nclass PerformanceOptimizer {\n  private config: PerformanceConfig = DEFAULT_PERFORMANCE_CONFIG;\n  private themeCache = new Map<string, ThemeCacheEntry>();\n  private domUpdateQueue: DOMUpdateBatch[] = [];\n  private isProcessingUpdates = false;\n  private metrics: PerformanceMetrics[] = [];\n  private frameRateMonitor: number | null = null;\n  private lastFrameTime = 0;\n  private frameCount = 0;\n  private currentFrameRate = 0;\n\n  /**\n   * Update performance configuration\n   */\n  public updateConfig(newConfig: Partial<PerformanceConfig>): void {\n    this.config = { ...this.config, ...newConfig };\n    \n    if (this.config.enableMetrics && !this.frameRateMonitor) {\n      this.startFrameRateMonitoring();\n    } else if (!this.config.enableMetrics && this.frameRateMonitor) {\n      this.stopFrameRateMonitoring();\n    }\n  }\n\n  /**\n   * Start frame rate monitoring\n   */\n  private startFrameRateMonitoring(): void {\n    const measureFrameRate = (timestamp: number) => {\n      if (this.lastFrameTime === 0) {\n        this.lastFrameTime = timestamp;\n      }\n\n      const deltaTime = timestamp - this.lastFrameTime;\n      this.frameCount++;\n\n      if (deltaTime >= 1000) { // Update every second\n        this.currentFrameRate = Math.round((this.frameCount * 1000) / deltaTime);\n        this.frameCount = 0;\n        this.lastFrameTime = timestamp;\n      }\n\n      if (this.config.enableMetrics) {\n        this.frameRateMonitor = requestAnimationFrame(measureFrameRate);\n      }\n    };\n\n    this.frameRateMonitor = requestAnimationFrame(measureFrameRate);\n  }\n\n  /**\n   * Stop frame rate monitoring\n   */\n  private stopFrameRateMonitoring(): void {\n    if (this.frameRateMonitor) {\n      cancelAnimationFrame(this.frameRateMonitor);\n      this.frameRateMonitor = null;\n    }\n  }\n\n  /**\n   * Generate cache key for theme state\n   */\n  private generateCacheKey(themeName: string, colorMode: string, contextualTheme: string): string {\n    return `${themeName}-${colorMode}-${contextualTheme}`;\n  }\n\n  /**\n   * Cache theme variables\n   */\n  public cacheThemeVariables(\n    themeName: string, \n    colorMode: string, \n    contextualTheme: string, \n    variables: Record<string, string>\n  ): void {\n    if (!this.config.enableCaching) return;\n\n    const key = this.generateCacheKey(themeName, colorMode, contextualTheme);\n    \n    // Clean cache if it exceeds max size\n    if (this.themeCache.size >= this.config.maxCacheSize) {\n      this.cleanCache();\n    }\n\n    this.themeCache.set(key, {\n      key,\n      cssVariables: { ...variables },\n      timestamp: Date.now(),\n      accessCount: 1,\n    });\n  }\n\n  /**\n   * Retrieve cached theme variables\n   */\n  public getCachedThemeVariables(\n    themeName: string, \n    colorMode: string, \n    contextualTheme: string\n  ): Record<string, string> | null {\n    if (!this.config.enableCaching) return null;\n\n    const key = this.generateCacheKey(themeName, colorMode, contextualTheme);\n    const cached = this.themeCache.get(key);\n\n    if (cached) {\n      cached.accessCount++;\n      cached.timestamp = Date.now();\n      return { ...cached.cssVariables };\n    }\n\n    return null;\n  }\n\n  /**\n   * Clean cache using LRU strategy\n   */\n  private cleanCache(): void {\n    const entries = Array.from(this.themeCache.values());\n    \n    // Sort by access count and timestamp (LRU)\n    entries.sort((a, b) => {\n      if (a.accessCount !== b.accessCount) {\n        return a.accessCount - b.accessCount;\n      }\n      return a.timestamp - b.timestamp;\n    });\n\n    // Remove oldest 25% of entries\n    const toRemove = Math.floor(entries.length * 0.25);\n    for (let i = 0; i < toRemove; i++) {\n      this.themeCache.delete(entries[i].key);\n    }\n  }\n\n  /**\n   * Apply GPU acceleration to element\n   */\n  public applyGPUAcceleration(element: HTMLElement): void {\n    if (!element || !element.style || !this.config.enableGPUAcceleration) return;\n\n    // Force GPU layer creation\n    element.style.transform = element.style.transform || 'translate3d(0, 0, 0)';\n    element.style.backfaceVisibility = 'hidden';\n    element.style.perspective = '1000px';\n    \n    // Optimize for animations\n    element.style.willChange = 'transform, opacity, background-color, color, border-color, box-shadow';\n  }\n\n  /**\n   * Remove GPU acceleration from element\n   */\n  public removeGPUAcceleration(element: HTMLElement): void {\n    if (!element || !element.style) return;\n    \n    element.style.transform = '';\n    element.style.backfaceVisibility = '';\n    element.style.perspective = '';\n    element.style.willChange = '';\n  }\n\n  /**\n   * Queue DOM update for batching\n   */\n  public queueDOMUpdate(\n    element: HTMLElement, \n    properties: Record<string, string>, \n    priority: 'high' | 'medium' | 'low' = 'medium'\n  ): void {\n    if (!element || !element.style) return;\n    \n    if (!this.config.batchDOMUpdates) {\n      // Apply immediately if batching is disabled\n      Object.entries(properties).forEach(([prop, value]) => {\n        element.style.setProperty(prop, value);\n      });\n      return;\n    }\n\n    this.domUpdateQueue.push({ element, properties, priority });\n    \n    if (!this.isProcessingUpdates) {\n      this.processDOMUpdates();\n    }\n  }\n\n  /**\n   * Process batched DOM updates\n   */\n  private processDOMUpdates(): void {\n    if (this.domUpdateQueue.length === 0) {\n      this.isProcessingUpdates = false;\n      return;\n    }\n\n    this.isProcessingUpdates = true;\n\n    requestAnimationFrame(() => {\n      // Sort by priority\n      this.domUpdateQueue.sort((a, b) => {\n        const priorityOrder = { high: 3, medium: 2, low: 1 };\n        return priorityOrder[b.priority] - priorityOrder[a.priority];\n      });\n\n      // Process updates in batches to avoid blocking\n      const batchSize = Math.min(10, this.domUpdateQueue.length);\n      const batch = this.domUpdateQueue.splice(0, batchSize);\n\n      batch.forEach(({ element, properties }) => {\n        Object.entries(properties).forEach(([prop, value]) => {\n          element.style.setProperty(prop, value);\n        });\n      });\n\n      // Continue processing if there are more updates\n      if (this.domUpdateQueue.length > 0) {\n        this.processDOMUpdates();\n      } else {\n        this.isProcessingUpdates = false;\n      }\n    });\n  }\n\n  /**\n   * Preload theme resources\n   */\n  public preloadThemeResources(themes: string[]): Promise<void> {\n    return new Promise((resolve) => {\n      // Simulate theme resource preloading\n      // In a real implementation, this might preload CSS files, images, etc.\n      const preloadPromises = themes.map(theme => {\n        return new Promise<void>((themeResolve) => {\n          // Simulate async resource loading\n          setTimeout(() => {\n            console.log(`Preloaded theme: ${theme}`);\n            themeResolve();\n          }, 10);\n        });\n      });\n\n      Promise.all(preloadPromises).then(() => resolve());\n    });\n  }\n\n  /**\n   * Optimize element for transitions\n   */\n  public optimizeElementForTransition(element: HTMLElement): void {\n    if (!element || !element.style) return;\n    \n    // Apply GPU acceleration\n    this.applyGPUAcceleration(element);\n    \n    // Set up optimal CSS properties for transitions\n    element.style.contain = 'layout style paint';\n    element.style.isolation = 'isolate';\n    \n    // Optimize for specific transition properties\n    const transitionProperties = [\n      'background-color',\n      'color',\n      'border-color',\n      'box-shadow',\n      'opacity',\n      'transform'\n    ];\n    \n    element.style.transition = transitionProperties\n      .map(prop => `${prop} var(--theme-transition-duration, 300ms) var(--theme-transition-timing, ease)`)\n      .join(', ');\n  }\n\n  /**\n   * Clean up element optimizations\n   */\n  public cleanupElementOptimizations(element: HTMLElement): void {\n    if (!element || !element.style) return;\n    \n    this.removeGPUAcceleration(element);\n    element.style.contain = '';\n    element.style.isolation = '';\n    element.style.transition = '';\n  }\n\n  /**\n   * Monitor memory usage\n   */\n  public getMemoryUsage(): number {\n    if ('memory' in performance) {\n      const memory = (performance as any).memory;\n      return Math.round(memory.usedJSHeapSize / 1024 / 1024); // MB\n    }\n    return 0;\n  }\n\n  /**\n   * Check if memory usage is within threshold\n   */\n  public isMemoryUsageHealthy(): boolean {\n    const usage = this.getMemoryUsage();\n    return usage < this.config.memoryThreshold;\n  }\n\n  /**\n   * Force garbage collection if available\n   */\n  public forceGarbageCollection(): void {\n    if ('gc' in window && typeof (window as any).gc === 'function') {\n      (window as any).gc();\n    }\n  }\n\n  /**\n   * Record performance metrics\n   */\n  public recordMetrics(transitionDuration: number, domUpdates: number): void {\n    if (!this.config.enableMetrics) return;\n\n    const metrics: PerformanceMetrics = {\n      transitionDuration,\n      frameRate: this.currentFrameRate,\n      memoryUsage: this.getMemoryUsage(),\n      domUpdates,\n      cacheHits: this.getCacheHitRate().hits,\n      cacheMisses: this.getCacheHitRate().misses,\n      timestamp: Date.now(),\n    };\n\n    this.metrics.push(metrics);\n\n    // Keep only last 100 metrics\n    if (this.metrics.length > 100) {\n      this.metrics = this.metrics.slice(-100);\n    }\n  }\n\n  /**\n   * Get cache hit rate\n   */\n  private getCacheHitRate(): { hits: number; misses: number } {\n    const entries = Array.from(this.themeCache.values());\n    const hits = entries.reduce((sum, entry) => sum + entry.accessCount, 0);\n    const misses = Math.max(0, hits - entries.length);\n    return { hits, misses };\n  }\n\n  /**\n   * Get performance report\n   */\n  public getPerformanceReport(): {\n    averageTransitionDuration: number;\n    averageFrameRate: number;\n    averageMemoryUsage: number;\n    cacheEfficiency: number;\n    totalTransitions: number;\n  } {\n    if (this.metrics.length === 0) {\n      return {\n        averageTransitionDuration: 0,\n        averageFrameRate: 0,\n        averageMemoryUsage: 0,\n        cacheEfficiency: 0,\n        totalTransitions: 0,\n      };\n    }\n\n    const avgTransitionDuration = this.metrics.reduce((sum, m) => sum + m.transitionDuration, 0) / this.metrics.length;\n    const avgFrameRate = this.metrics.reduce((sum, m) => sum + m.frameRate, 0) / this.metrics.length;\n    const avgMemoryUsage = this.metrics.reduce((sum, m) => sum + m.memoryUsage, 0) / this.metrics.length;\n    \n    const totalHits = this.metrics.reduce((sum, m) => sum + m.cacheHits, 0);\n    const totalMisses = this.metrics.reduce((sum, m) => sum + m.cacheMisses, 0);\n    const cacheEfficiency = totalHits + totalMisses > 0 ? (totalHits / (totalHits + totalMisses)) * 100 : 0;\n\n    return {\n      averageTransitionDuration: Math.round(avgTransitionDuration),\n      averageFrameRate: Math.round(avgFrameRate),\n      averageMemoryUsage: Math.round(avgMemoryUsage),\n      cacheEfficiency: Math.round(cacheEfficiency),\n      totalTransitions: this.metrics.length,\n    };\n  }\n\n  /**\n   * Clear all caches and reset metrics\n   */\n  public clearCaches(): void {\n    this.themeCache.clear();\n    this.metrics = [];\n    this.domUpdateQueue = [];\n  }\n\n  /**\n   * Cleanup and destroy\n   */\n  public destroy(): void {\n    this.stopFrameRateMonitoring();\n    this.clearCaches();\n    this.isProcessingUpdates = false;\n  }\n}\n\n// Global performance optimizer instance\nexport const performanceOptimizer = new PerformanceOptimizer();\n\n/**\n * React hook for performance optimization\n */\nexport function usePerformanceOptimization() {\n  const updateConfig = (config: Partial<PerformanceConfig>) => {\n    performanceOptimizer.updateConfig(config);\n  };\n\n  const optimizeElement = (element: HTMLElement) => {\n    performanceOptimizer.optimizeElementForTransition(element);\n  };\n\n  const cleanupElement = (element: HTMLElement) => {\n    performanceOptimizer.cleanupElementOptimizations(element);\n  };\n\n  const queueUpdate = (\n    element: HTMLElement, \n    properties: Record<string, string>, \n    priority?: 'high' | 'medium' | 'low'\n  ) => {\n    performanceOptimizer.queueDOMUpdate(element, properties, priority);\n  };\n\n  const getReport = () => performanceOptimizer.getPerformanceReport();\n\n  const isHealthy = () => performanceOptimizer.isMemoryUsageHealthy();\n\n  return {\n    updateConfig,\n    optimizeElement,\n    cleanupElement,\n    queueUpdate,\n    getReport,\n    isHealthy,\n  };\n}\n\n/**\n * Performance monitoring decorator for theme transitions\n */\nexport function withPerformanceMonitoring<T extends (...args: any[]) => Promise<any>>(\n  fn: T,\n  name: string\n): T {\n  return (async (...args: any[]) => {\n    const startTime = performance.now();\n    let domUpdates = 0;\n\n    // Monitor DOM mutations during execution\n    const observer = new MutationObserver((mutations) => {\n      domUpdates += mutations.length;\n    });\n\n    observer.observe(document.body, {\n      attributes: true,\n      childList: true,\n      subtree: true,\n      attributeFilter: ['style', 'class'],\n    });\n\n    try {\n      const result = await fn(...args);\n      const endTime = performance.now();\n      const duration = endTime - startTime;\n\n      observer.disconnect();\n      performanceOptimizer.recordMetrics(duration, domUpdates);\n\n      console.log(`[Performance] ${name}: ${duration.toFixed(2)}ms, ${domUpdates} DOM updates`);\n      \n      return result;\n    } catch (error) {\n      observer.disconnect();\n      throw error;\n    }\n  }) as T;\n}\n\n/**\n * Utility to create performance-optimized theme transition\n */\nexport function createOptimizedTransition(\n  element: HTMLElement,\n  fromState: Record<string, string>,\n  toState: Record<string, string>,\n  duration: number = 300\n): Promise<void> {\n  return new Promise((resolve) => {\n    // Optimize element for transition\n    performanceOptimizer.optimizeElementForTransition(element);\n\n    // Apply initial state\n    Object.entries(fromState).forEach(([prop, value]) => {\n      // Convert camelCase to kebab-case for CSS properties\n      const cssProperty = prop.replace(/([A-Z])/g, '-$1').toLowerCase();\n      element.style.setProperty(cssProperty, value);\n    });\n\n    // Force reflow\n    element.offsetHeight;\n\n    // Apply final state\n    Object.entries(toState).forEach(([prop, value]) => {\n      performanceOptimizer.queueDOMUpdate(element, { [prop]: value }, 'high');\n    });\n\n    // Cleanup after transition\n    setTimeout(() => {\n      performanceOptimizer.cleanupElementOptimizations(element);\n      resolve();\n    }, duration + 50); // Small buffer for completion\n  });\n}\n\nexport default performanceOptimizer; "],"names":["createOptimizedTransition","performanceOptimizer","usePerformanceOptimization","withPerformanceMonitoring","DEFAULT_PERFORMANCE_CONFIG","enableGPUAcceleration","batchDOMUpdates","enableCaching","maxCacheSize","targetFrameRate","enableMetrics","memoryThreshold","PerformanceOptimizer","updateConfig","newConfig","config","frameRateMonitor","startFrameRateMonitoring","stopFrameRateMonitoring","measureFrameRate","timestamp","lastFrameTime","deltaTime","frameCount","currentFrameRate","Math","round","requestAnimationFrame","cancelAnimationFrame","generateCacheKey","themeName","colorMode","contextualTheme","cacheThemeVariables","variables","key","themeCache","size","cleanCache","set","cssVariables","Date","now","accessCount","getCachedThemeVariables","cached","get","entries","Array","from","values","sort","a","b","toRemove","floor","length","i","delete","applyGPUAcceleration","element","style","transform","backfaceVisibility","perspective","willChange","removeGPUAcceleration","queueDOMUpdate","properties","priority","Object","forEach","prop","value","setProperty","domUpdateQueue","push","isProcessingUpdates","processDOMUpdates","priorityOrder","high","medium","low","batchSize","min","batch","splice","preloadThemeResources","themes","Promise","resolve","preloadPromises","map","theme","themeResolve","setTimeout","console","log","all","then","optimizeElementForTransition","contain","isolation","transitionProperties","transition","join","cleanupElementOptimizations","getMemoryUsage","performance","memory","usedJSHeapSize","isMemoryUsageHealthy","usage","forceGarbageCollection","window","gc","recordMetrics","transitionDuration","domUpdates","metrics","frameRate","memoryUsage","cacheHits","getCacheHitRate","hits","cacheMisses","misses","slice","reduce","sum","entry","max","getPerformanceReport","averageTransitionDuration","averageFrameRate","averageMemoryUsage","cacheEfficiency","totalTransitions","avgTransitionDuration","m","avgFrameRate","avgMemoryUsage","totalHits","totalMisses","clearCaches","clear","destroy","Map","optimizeElement","cleanupElement","queueUpdate","getReport","isHealthy","fn","name","args","startTime","observer","MutationObserver","mutations","observe","document","body","attributes","childList","subtree","attributeFilter","result","endTime","duration","disconnect","toFixed","error","fromState","toState","cssProperty","replace","toLowerCase","offsetHeight"],"mappings":"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"}