{"version":3,"sources":["/Users/pavan/Desktop/Devops-app-dev-cursor/frontend/src/components/ui/OptimizedImage.tsx"],"sourcesContent":["/**\n * Optimized Image Component\n * \n * Enhanced image component with lazy loading, error handling, and performance optimizations.\n * Provides fallback content and automatic optimization for better user experience.\n */\n\nimport React, { useState, useCallback, useMemo } from 'react';\nimport Image from 'next/image';\n\ninterface OptimizedImageProps {\n  /** Image source URL */\n  src: string;\n  /** Alternative text for accessibility */\n  alt: string;\n  /** Image width */\n  width: number;\n  /** Image height */\n  height: number;\n  /** CSS classes */\n  className?: string;\n  /** Fallback content when image fails to load */\n  fallback?: React.ReactNode;\n  /** Priority loading (disable lazy loading) */\n  priority?: boolean;\n  /** Image quality (1-100) */\n  quality?: number;\n  /** Placeholder type */\n  placeholder?: 'blur' | 'empty';\n  /** Blur data URL for placeholder */\n  blurDataURL?: string;\n  /** Sizes attribute for responsive images */\n  sizes?: string;\n  /** Fill container (makes image responsive) */\n  fill?: boolean;\n  /** Object fit style */\n  objectFit?: 'contain' | 'cover' | 'fill' | 'none' | 'scale-down';\n  /** Object position */\n  objectPosition?: string;\n  /** Callback when image loads */\n  onLoad?: () => void;\n  /** Callback when image fails to load */\n  onError?: () => void;\n}\n\n/**\n * OptimizedImage Component\n * \n * Features:\n * - Automatic lazy loading with Next.js Image\n * - Error handling with fallback content\n * - Automatic image optimization and compression\n * - Responsive image support\n * - Accessibility compliance\n * - Performance monitoring\n * \n * @param src - Image source URL\n * @param alt - Alternative text\n * @param width - Image width\n * @param height - Image height\n * @param className - CSS classes\n * @param fallback - Fallback content on error\n * @param priority - Disable lazy loading for above-fold images\n * @param quality - Image quality (1-100)\n * @param placeholder - Placeholder type\n * @param blurDataURL - Blur placeholder data\n * @param sizes - Responsive sizes\n * @param fill - Fill container mode\n * @param objectFit - Object fit behavior\n * @param objectPosition - Object position\n * @param onLoad - Load callback\n * @param onError - Error callback\n */\nconst OptimizedImageComponent: React.FC<OptimizedImageProps> = ({\n  src,\n  alt,\n  width,\n  height,\n  className = '',\n  fallback,\n  priority = false,\n  quality = 75,\n  placeholder = 'empty',\n  blurDataURL,\n  sizes,\n  fill = false,\n  objectFit = 'cover',\n  objectPosition = 'center',\n  onLoad,\n  onError,\n}) => {\n  const [hasError, setHasError] = useState(false);\n  const [isLoading, setIsLoading] = useState(true);\n\n  /**\n   * Handle image load success\n   */\n  const handleLoad = useCallback(() => {\n    setIsLoading(false);\n    setHasError(false);\n    onLoad?.();\n  }, [onLoad]);\n\n  /**\n   * Handle image load error\n   */\n  const handleError = useCallback(() => {\n    setIsLoading(false);\n    setHasError(true);\n    onError?.();\n  }, [onError]);\n\n  /**\n   * Generate blur placeholder for better loading experience\n   */\n  const generatedBlurDataURL = useMemo(() => {\n    if (blurDataURL) return blurDataURL;\n    \n    // Generate a simple colored blur placeholder\n    const canvas = typeof window !== 'undefined' ? document.createElement('canvas') : null;\n    if (!canvas) return undefined;\n    \n    canvas.width = 10;\n    canvas.height = 10;\n    const ctx = canvas.getContext('2d');\n    if (!ctx) return undefined;\n    \n    // Create a simple gradient blur effect\n    const gradient = ctx.createLinearGradient(0, 0, 10, 10);\n    gradient.addColorStop(0, '#f3f4f6');\n    gradient.addColorStop(1, '#e5e7eb');\n    ctx.fillStyle = gradient;\n    ctx.fillRect(0, 0, 10, 10);\n    \n    return canvas.toDataURL();\n  }, [blurDataURL]);\n\n  /**\n   * Render fallback content when image fails\n   */\n  if (hasError && fallback) {\n    return <div className={className}>{fallback}</div>;\n  }\n\n  /**\n   * Common image props\n   */\n  const imageProps = {\n    src,\n    alt,\n    className: `transition-opacity duration-300 ${isLoading ? 'opacity-0' : 'opacity-100'} ${className}`,\n    priority,\n    quality,\n    placeholder: generatedBlurDataURL ? 'blur' as const : placeholder,\n    blurDataURL: generatedBlurDataURL,\n    sizes,\n    style: {\n      objectFit,\n      objectPosition,\n    },\n    onLoad: handleLoad,\n    onError: handleError,\n  };\n\n  return (\n    <div className=\"relative\">\n      {fill ? (\n        <Image\n          {...imageProps}\n          fill\n        />\n      ) : (\n        <Image\n          {...imageProps}\n          width={width}\n          height={height}\n        />\n      )}\n      \n      {/* Loading indicator */}\n      {isLoading && (\n        <div \n          className={`absolute inset-0 bg-gray-200 animate-pulse rounded ${className}`}\n          style={{ width: fill ? '100%' : width, height: fill ? '100%' : height }}\n        />\n      )}\n    </div>\n  );\n};\n\n/**\n * Memoized OptimizedImage component to prevent unnecessary re-renders\n */\nexport const OptimizedImage = React.memo(OptimizedImageComponent);\n\nexport default OptimizedImage; "],"names":["OptimizedImage","OptimizedImageComponent","src","alt","width","height","className","fallback","priority","quality","placeholder","blurDataURL","sizes","fill","objectFit","objectPosition","onLoad","onError","hasError","setHasError","useState","isLoading","setIsLoading","handleLoad","useCallback","handleError","generatedBlurDataURL","useMemo","canvas","window","document","createElement","undefined","ctx","getContext","gradient","createLinearGradient","addColorStop","fillStyle","fillRect","toDataURL","div","imageProps","style","Image","React","memo"],"mappings":"AAAA;;;;;CAKC;;;;;;;;;;;IA4LYA,cAAc;eAAdA;;IAEb,OAA8B;eAA9B;;;;+DA5LsD;8DACpC;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAqClB;;;;;;;;;;;;;;;;;;;;;;;;;;;CA2BC,GACD,MAAMC,0BAAyD,CAAC,EAC9DC,GAAG,EACHC,GAAG,EACHC,KAAK,EACLC,MAAM,EACNC,YAAY,EAAE,EACdC,QAAQ,EACRC,WAAW,KAAK,EAChBC,UAAU,EAAE,EACZC,cAAc,OAAO,EACrBC,WAAW,EACXC,KAAK,EACLC,OAAO,KAAK,EACZC,YAAY,OAAO,EACnBC,iBAAiB,QAAQ,EACzBC,MAAM,EACNC,OAAO,EACR;IACC,MAAM,CAACC,UAAUC,YAAY,GAAGC,IAAAA,eAAQ,EAAC;IACzC,MAAM,CAACC,WAAWC,aAAa,GAAGF,IAAAA,eAAQ,EAAC;IAE3C;;GAEC,GACD,MAAMG,aAAaC,IAAAA,kBAAW,EAAC;QAC7BF,aAAa;QACbH,YAAY;QACZH;IACF,GAAG;QAACA;KAAO;IAEX;;GAEC,GACD,MAAMS,cAAcD,IAAAA,kBAAW,EAAC;QAC9BF,aAAa;QACbH,YAAY;QACZF;IACF,GAAG;QAACA;KAAQ;IAEZ;;GAEC,GACD,MAAMS,uBAAuBC,IAAAA,cAAO,EAAC;QACnC,IAAIhB,aAAa,OAAOA;QAExB,6CAA6C;QAC7C,MAAMiB,SAAS,OAAOC,WAAW,cAAcC,SAASC,aAAa,CAAC,YAAY;QAClF,IAAI,CAACH,QAAQ,OAAOI;QAEpBJ,OAAOxB,KAAK,GAAG;QACfwB,OAAOvB,MAAM,GAAG;QAChB,MAAM4B,MAAML,OAAOM,UAAU,CAAC;QAC9B,IAAI,CAACD,KAAK,OAAOD;QAEjB,uCAAuC;QACvC,MAAMG,WAAWF,IAAIG,oBAAoB,CAAC,GAAG,GAAG,IAAI;QACpDD,SAASE,YAAY,CAAC,GAAG;QACzBF,SAASE,YAAY,CAAC,GAAG;QACzBJ,IAAIK,SAAS,GAAGH;QAChBF,IAAIM,QAAQ,CAAC,GAAG,GAAG,IAAI;QAEvB,OAAOX,OAAOY,SAAS;IACzB,GAAG;QAAC7B;KAAY;IAEhB;;GAEC,GACD,IAAIO,YAAYX,UAAU;QACxB,qBAAO,qBAACkC;YAAInC,WAAWA;sBAAYC;;IACrC;IAEA;;GAEC,GACD,MAAMmC,aAAa;QACjBxC;QACAC;QACAG,WAAW,CAAC,gCAAgC,EAAEe,YAAY,cAAc,cAAc,CAAC,EAAEf,WAAW;QACpGE;QACAC;QACAC,aAAagB,uBAAuB,SAAkBhB;QACtDC,aAAae;QACbd;QACA+B,OAAO;YACL7B;YACAC;QACF;QACAC,QAAQO;QACRN,SAASQ;IACX;IAEA,qBACE,sBAACgB;QAAInC,WAAU;;YACZO,qBACC,qBAAC+B,cAAK;gBACH,GAAGF,UAAU;gBACd7B,IAAI;+BAGN,qBAAC+B,cAAK;gBACH,GAAGF,UAAU;gBACdtC,OAAOA;gBACPC,QAAQA;;YAKXgB,2BACC,qBAACoB;gBACCnC,WAAW,CAAC,mDAAmD,EAAEA,WAAW;gBAC5EqC,OAAO;oBAAEvC,OAAOS,OAAO,SAAST;oBAAOC,QAAQQ,OAAO,SAASR;gBAAO;;;;AAKhF;AAKO,MAAML,+BAAiB6C,cAAK,CAACC,IAAI,CAAC7C;MAEzC,WAAeD"}