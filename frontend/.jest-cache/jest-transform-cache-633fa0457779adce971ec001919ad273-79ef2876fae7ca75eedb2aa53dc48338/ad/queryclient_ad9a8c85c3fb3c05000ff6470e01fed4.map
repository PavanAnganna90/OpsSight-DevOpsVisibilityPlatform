{"version":3,"names":["createQueryClient","cov_2ip0a5sut1","f","s","getQueryClient","_reactquery","QueryClient","defaultOptions","queries","staleTime","gcTime","retry","failureCount","error","b","response","status","retryDelay","attemptIndex","Math","min","refetchOnWindowFocus","refetchOnReconnect","window","mutations","clientSingleton"],"sources":["/Users/pavan/Desktop/Devops-app-dev-cursor/frontend/src/lib/query-client.ts"],"sourcesContent":["import { QueryClient } from '@tanstack/react-query'\n\n/**\n * Query Client Configuration\n * \n * Configured for SSR compatibility with Next.js 15\n * Based on latest TanStack Query v5 best practices\n */\n\nexport function createQueryClient() {\n  return new QueryClient({\n    defaultOptions: {\n      queries: {\n        // With SSR, we usually want to set some default staleTime\n        // above 0 to avoid refetching immediately on the client\n        staleTime: 60 * 1000, // 1 minute\n        gcTime: 1000 * 60 * 60 * 24, // 24 hours (renamed from cacheTime in v5)\n        retry: (failureCount, error: any) => {\n          // Don't retry on 4xx errors except for 401 and 403\n          if (error?.response?.status >= 400 && error?.response?.status < 500) {\n            if (error.response.status === 401 || error.response.status === 403) {\n              return failureCount < 1 // Only retry once for auth errors\n            }\n            return false\n          }\n          // Retry up to 3 times for other errors\n          return failureCount < 3\n        },\n        retryDelay: (attemptIndex) => Math.min(1000 * 2 ** attemptIndex, 30000),\n        // Enable background refetching\n        refetchOnWindowFocus: true,\n        refetchOnReconnect: true,\n        // Disable retries for server-side rendering\n        ...(typeof window === 'undefined' && {\n          retry: false,\n          refetchOnWindowFocus: false,\n          refetchOnReconnect: false,\n        }),\n      },\n      mutations: {\n        retry: 1, // Retry mutations once\n        retryDelay: 1000, // 1 second delay between retries\n      },\n    },\n  })\n}\n\n// Create a stable query client instance\nlet clientSingleton: QueryClient | undefined\n\nexport function getQueryClient() {\n  if (typeof window === 'undefined') {\n    // Server: always make a new query client\n    return createQueryClient()\n  } else {\n    // Browser: use singleton pattern to keep the same query client\n    return (clientSingleton ??= createQueryClient())\n  }\n} "],"mappings":"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","ignoreList":[]}