{"version":3,"sources":["/Users/pavan/Desktop/Devops-app-dev-cursor/frontend/src/utils/performance.ts"],"sourcesContent":["/**\n * Performance Utilities for React 19 and Next.js 15\n * Comprehensive performance optimization utilities\n */\n\nimport React, { useCallback, useMemo, useRef, useEffect, startTransition, useState, Suspense, lazy, DependencyList } from 'react';\n\n// React 19 Performance Features (commented out until React 19 is stable)\n// export { startTransition, useOptimistic, useFormStatus, use } from 'react';\n\n/**\n * Enhanced useMemo with performance profiling\n */\nexport function useProfiledMemo<T>(\n  factory: () => T,\n  deps: React.DependencyList | undefined,\n  debugLabel?: string\n): T {\n  return useMemo(() => {\n    if (process.env.NODE_ENV === 'development' && debugLabel) {\n      const start = performance.now();\n      const result = factory();\n      const end = performance.now();\n      \n      if (end - start > 1) {\n        console.warn(`[Performance] ${debugLabel} took ${(end - start).toFixed(2)}ms`);\n      }\n      \n      return result;\n    }\n    \n    return factory();\n  }, deps);\n}\n\n/**\n * Enhanced useCallback with performance profiling\n */\nexport function useProfiledCallback<T extends (...args: any[]) => any>(\n  callback: T,\n  deps: React.DependencyList,\n  debugLabel?: string\n): T {\n  return useCallback((...args: Parameters<T>) => {\n    if (process.env.NODE_ENV === 'development' && debugLabel) {\n      const start = performance.now();\n      const result = callback(...args);\n      const end = performance.now();\n      \n      if (end - start > 1) {\n        console.warn(`[Performance] ${debugLabel} execution took ${(end - start).toFixed(2)}ms`);\n      }\n      \n      return result;\n    }\n    \n    return callback(...args);\n  }, deps) as T;\n}\n\n/**\n * Debounced value hook for performance optimization\n */\nexport function useDebounced<T>(value: T, delay: number): T {\n  const [debouncedValue, setDebouncedValue] = useState<T>(value);\n\n  useEffect(() => {\n    const handler = setTimeout(() => {\n      setDebouncedValue(value);\n    }, delay);\n\n    return () => {\n      clearTimeout(handler);\n    };\n  }, [value, delay]);\n\n  return debouncedValue;\n}\n\n/**\n * Alias for useDebounced to match requested API\n */\nexport const useDebounce = useDebounced;\n\n/**\n * Throttled callback hook\n */\nexport function useThrottled<T extends (...args: any[]) => any>(\n  callback: T,\n  delay: number\n): T {\n  const lastCall = useRef<number>(0);\n  \n  return useCallback((...args: Parameters<T>) => {\n    const now = Date.now();\n    \n    if (now - lastCall.current >= delay) {\n      lastCall.current = now;\n      return callback(...args);\n    }\n  }, [callback, delay]) as T;\n}\n\n/**\n * Alias for useThrottled to match requested API\n */\nexport const useThrottle = useThrottled;\n\n/**\n * Intersection observer configuration\n */\ninterface IntersectionObserverConfig {\n  threshold?: number | number[];\n  rootMargin?: string;\n  root?: Element | null;\n}\n\n/**\n * Enhanced Intersection Observer hook\n * @param config - Intersection observer configuration\n * @returns Ref to attach to element and intersection state\n * @example\n * const { ref, isIntersecting } = useIntersectionObserver({ threshold: 0.5 });\n */\nexport function useIntersectionObserver<T extends HTMLElement>(\n  config: IntersectionObserverConfig = {}\n): {\n  ref: React.RefObject<T>;\n  isIntersecting: boolean;\n  entry: IntersectionObserverEntry | null;\n} {\n  const { threshold = 0, rootMargin = '0px', root = null } = config;\n  const ref = useRef<T>(null);\n  const [isIntersecting, setIsIntersecting] = useState(false);\n  const [entry, setEntry] = useState<IntersectionObserverEntry | null>(null);\n\n  useEffect(() => {\n    const element = ref.current;\n    if (!element) return;\n\n    const observer = new IntersectionObserver(\n      ([entry]) => {\n        setIsIntersecting(entry.isIntersecting);\n        setEntry(entry);\n      },\n      { threshold, rootMargin, root }\n    );\n\n    observer.observe(element);\n\n    return () => {\n      observer.disconnect();\n    };\n  }, [threshold, rootMargin, root]);\n\n  return { ref, isIntersecting, entry };\n}\n\n/**\n * Virtual scroll configuration\n */\ninterface VirtualScrollConfig {\n  itemHeight: number;\n  containerHeight: number;\n  overscan?: number;\n}\n\n/**\n * Virtual scroll return type\n */\ninterface VirtualScrollReturn {\n  visibleRange: { start: number; end: number };\n  totalHeight: number;\n  offsetY: number;\n}\n\n/**\n * Custom hook for virtual scrolling large lists\n * @param items - Array of items to render\n * @param config - Virtual scroll configuration\n * @returns Virtual scroll properties\n * @example\n * const { visibleRange, totalHeight, offsetY } = useVirtualScroll(items, {\n *   itemHeight: 50,\n *   containerHeight: 500,\n *   overscan: 5\n * });\n */\nexport function useVirtualScroll<T>(\n  items: T[],\n  config: VirtualScrollConfig\n): VirtualScrollReturn {\n  const { itemHeight, containerHeight, overscan = 3 } = config;\n  const [scrollTop, setScrollTop] = useState(0);\n  \n  const visibleRange = useMemo(() => {\n    const start = Math.max(0, Math.floor(scrollTop / itemHeight) - overscan);\n    const end = Math.min(\n      items.length,\n      Math.ceil((scrollTop + containerHeight) / itemHeight) + overscan\n    );\n    \n    return { start, end };\n  }, [scrollTop, itemHeight, containerHeight, overscan, items.length]);\n  \n  const totalHeight = items.length * itemHeight;\n  const offsetY = visibleRange.start * itemHeight;\n  \n  useEffect(() => {\n    const handleScroll = (e: Event) => {\n      const target = e.target as HTMLElement;\n      setScrollTop(target.scrollTop);\n    };\n    \n    const scrollContainer = document.getElementById('virtual-scroll-container');\n    scrollContainer?.addEventListener('scroll', handleScroll);\n    \n    return () => {\n      scrollContainer?.removeEventListener('scroll', handleScroll);\n    };\n  }, []);\n  \n  return { visibleRange, totalHeight, offsetY };\n}\n\n/**\n * Legacy alias for existing implementation\n */\nexport function useVirtualScrolling<T>({\n  items,\n  itemHeight,\n  containerHeight,\n  overscan = 5,\n}: {\n  items: T[];\n  itemHeight: number;\n  containerHeight: number;\n  overscan?: number;\n}) {\n  const [scrollTop, setScrollTop] = useState(0);\n  \n  const visibleRange = useMemo(() => {\n    const start = Math.floor(scrollTop / itemHeight);\n    const end = Math.min(\n      start + Math.ceil(containerHeight / itemHeight) + overscan,\n      items.length\n    );\n    \n    return {\n      start: Math.max(0, start - overscan),\n      end,\n    };\n  }, [scrollTop, itemHeight, containerHeight, overscan, items.length]);\n\n  const visibleItems = useMemo(() => {\n    return items.slice(visibleRange.start, visibleRange.end).map((item, index) => ({\n      item,\n      index: visibleRange.start + index,\n      style: {\n        position: 'absolute' as const,\n        top: (visibleRange.start + index) * itemHeight,\n        height: itemHeight,\n        width: '100%',\n      },\n    }));\n  }, [items, visibleRange, itemHeight]);\n\n  const totalHeight = items.length * itemHeight;\n\n  const handleScroll = useCallback((event: React.UIEvent<HTMLDivElement>) => {\n    setScrollTop(event.currentTarget.scrollTop);\n  }, []);\n\n  return {\n    visibleItems,\n    totalHeight,\n    handleScroll,\n  };\n}\n\n/**\n * Performance monitoring hook\n */\nexport function usePerformanceMonitor(componentName: string) {\n  const renderStart = useRef<number>(performance.now());\n  const renderCount = useRef<number>(0);\n\n  useEffect(() => {\n    renderCount.current += 1;\n    const renderTime = performance.now() - renderStart.current;\n    \n    if (process.env.NODE_ENV === 'development') {\n      console.log(`[Performance] ${componentName} render #${renderCount.current} took ${renderTime.toFixed(2)}ms`);\n      \n      // Warn about slow renders\n      if (renderTime > 16) {\n        console.warn(`[Performance] ${componentName} render exceeded 16ms budget (${renderTime.toFixed(2)}ms)`);\n      }\n    }\n    \n    renderStart.current = performance.now();\n  });\n\n  return {\n    renderCount: renderCount.current,\n  };\n}\n\n/**\n * Memory usage monitoring hook\n */\nexport function useMemoryMonitor(componentName: string) {\n  useEffect(() => {\n    if (process.env.NODE_ENV === 'development' && 'memory' in performance) {\n      const memory = (performance as any).memory;\n      console.log(`[Memory] ${componentName} - Used: ${Math.round(memory.usedJSHeapSize / 1024 / 1024)}MB`);\n    }\n  });\n}\n\n/**\n * Custom hook that returns a stable callback reference\n * Prevents unnecessary re-renders when callback dependencies change\n * @param callback - The callback function\n * @returns A stable callback reference\n * @example\n * const stableCallback = useStableCallback(() => console.log(value));\n */\nexport function useStableCallback<T extends (...args: any[]) => any>(\n  callback: T\n): T {\n  const callbackRef = useRef<T>(callback);\n  \n  useEffect(() => {\n    callbackRef.current = callback;\n  });\n\n  return useCallback(\n    ((...args: Parameters<T>) => {\n      return callbackRef.current(...args);\n    }) as T,\n    []\n  );\n}\n\n/**\n * Deep equality comparison function\n * @param a - First value to compare\n * @param b - Second value to compare\n * @returns True if values are deeply equal\n */\nfunction deepEqual(a: any, b: any): boolean {\n  if (a === b) return true;\n  \n  if (a == null || b == null) return false;\n  \n  if (typeof a !== 'object' || typeof b !== 'object') return false;\n  \n  const keysA = Object.keys(a);\n  const keysB = Object.keys(b);\n  \n  if (keysA.length !== keysB.length) return false;\n  \n  for (const key of keysA) {\n    if (!keysB.includes(key)) return false;\n    if (!deepEqual(a[key], b[key])) return false;\n  }\n  \n  return true;\n}\n\n/**\n * Custom hook that memoizes a value with deep equality comparison\n * @param factory - Factory function that creates the value\n * @param deps - Dependencies array\n * @returns The memoized value\n * @example\n * const complexObject = useDeepMemo(() => ({ ...data }), [data]);\n */\nexport function useDeepMemo<T>(\n  factory: () => T,\n  deps: DependencyList\n): T {\n  const ref = useRef<{ value: T; deps: DependencyList }>();\n\n  if (!ref.current || !deepEqual(ref.current.deps, deps)) {\n    ref.current = { value: factory(), deps };\n  }\n\n  return ref.current.value;\n}\n\n/**\n * Lazy image configuration\n */\ninterface LazyImageConfig {\n  src: string;\n  placeholder?: string;\n  threshold?: number;\n  rootMargin?: string;\n}\n\n/**\n * Lazy image return type\n */\ninterface LazyImageReturn {\n  ref: React.RefObject<HTMLImageElement>;\n  imageSrc: string;\n  isLoaded: boolean;\n  isError: boolean;\n}\n\n/**\n * Custom hook for lazy loading images\n * @param config - Lazy image configuration\n * @returns Lazy image properties\n * @example\n * const { ref, imageSrc, isLoaded } = useLazyImage({\n *   src: 'https://example.com/image.jpg',\n *   placeholder: 'https://example.com/placeholder.jpg'\n * });\n */\nexport function useLazyImage(config: LazyImageConfig): LazyImageReturn {\n  const { src, placeholder = '', threshold = 0, rootMargin = '50px' } = config;\n  const [imageSrc, setImageSrc] = useState(placeholder);\n  const [isLoaded, setIsLoaded] = useState(false);\n  const [isError, setIsError] = useState(false);\n  \n  const { ref, isIntersecting } = useIntersectionObserver<HTMLImageElement>({\n    threshold,\n    rootMargin,\n  });\n\n  useEffect(() => {\n    if (!isIntersecting || isLoaded) return;\n\n    const img = new Image();\n    \n    img.onload = () => {\n      setImageSrc(src);\n      setIsLoaded(true);\n      setIsError(false);\n    };\n    \n    img.onerror = () => {\n      setIsError(true);\n      setIsLoaded(true);\n    };\n    \n    img.src = src;\n  }, [src, isIntersecting, isLoaded]);\n\n  return { ref, imageSrc, isLoaded, isError };\n}\n\n/**\n * Legacy progressive image loading hook\n */\nexport function useProgressiveImage(src: string, placeholderSrc?: string) {\n  const [currentSrc, setCurrentSrc] = useState(placeholderSrc || src);\n  const [isLoading, setIsLoading] = useState(true);\n  const [isError, setIsError] = useState(false);\n\n  useEffect(() => {\n    const img = new Image();\n    \n    img.onload = () => {\n      setCurrentSrc(src);\n      setIsLoading(false);\n    };\n    \n    img.onerror = () => {\n      setIsError(true);\n      setIsLoading(false);\n    };\n    \n    img.src = src;\n    \n    return () => {\n      img.onload = null;\n      img.onerror = null;\n    };\n  }, [src]);\n\n  return {\n    src: currentSrc,\n    isLoading,\n    isError,\n  };\n}\n\n/**\n * Animation frame based updates for smooth performance\n */\nexport function useAnimationFrame(callback: () => void, deps: React.DependencyList) {\n  const requestRef = useRef<number>();\n  \n  useEffect(() => {\n    const animate = () => {\n      callback();\n      requestRef.current = requestAnimationFrame(animate);\n    };\n    \n    requestRef.current = requestAnimationFrame(animate);\n    \n    return () => {\n      if (requestRef.current) {\n        cancelAnimationFrame(requestRef.current);\n      }\n    };\n  }, deps);\n}\n\n/**\n * Bundle size optimization utilities\n */\nexport const lazyImport = <T extends Record<string, any>>(\n  importFn: () => Promise<T>,\n  namedExport?: keyof T\n) => {\n  return lazy(() =>\n    importFn().then((module) => ({\n      default: namedExport ? module[namedExport] : module.default || module,\n    }))\n  );\n};\n\n/**\n * Critical resource preloading\n */\nexport function preloadResource(href: string, as: string) {\n  if (typeof window === 'undefined') return;\n  \n  const link = document.createElement('link');\n  link.rel = 'preload';\n  link.href = href;\n  link.as = as;\n  \n  document.head.appendChild(link);\n}\n\n/**\n * DNS prefetching for external resources\n */\nexport function prefetchDNS(domain: string) {\n  if (typeof window === 'undefined') return;\n  \n  const link = document.createElement('link');\n  link.rel = 'dns-prefetch';\n  link.href = domain;\n  \n  document.head.appendChild(link);\n}\n\n/**\n * Code splitting utilities\n */\nexport const withSuspense = <P extends object>(\n  Component: React.ComponentType<P>,\n  fallback: React.ReactNode = React.createElement('div', {}, 'Loading...')\n) => {\n  return (props: P) => React.createElement(\n    Suspense,\n    { fallback },\n    React.createElement(Component, props)\n  );\n};\n\n/**\n * React 19 optimized form handling\n */\nexport function useOptimizedForm<T extends Record<string, any>>(\n  initialValues: T,\n  onSubmit: (values: T) => void | Promise<void>\n) {\n  const [values, setValues] = useState<T>(initialValues);\n  const [isSubmitting, setIsSubmitting] = useState(false);\n\n  const handleChange = useCallback((name: keyof T, value: any) => {\n    startTransition(() => {\n      setValues(prev => ({ ...prev, [name]: value }));\n    });\n  }, []);\n\n  const handleSubmit = useCallback(async (event: React.FormEvent) => {\n    event.preventDefault();\n    \n    try {\n      setIsSubmitting(true);\n      await onSubmit(values);\n    } finally {\n      setIsSubmitting(false);\n    }\n  }, [values, onSubmit]);\n\n  const reset = useCallback(() => {\n    startTransition(() => {\n      setValues(initialValues);\n    });\n  }, [initialValues]);\n\n  return {\n    values,\n    handleChange,\n    handleSubmit,\n    reset,\n    isSubmitting,\n  };\n}\n\n/**\n * Performance budget monitoring\n */\nexport function usePerformanceBudget() {\n  useEffect(() => {\n    if (typeof window === 'undefined' || process.env.NODE_ENV !== 'development') return;\n\n    const observer = new PerformanceObserver((list) => {\n      for (const entry of list.getEntries()) {\n        if (entry.entryType === 'measure') {\n          const duration = entry.duration;\n          \n          if (duration > 100) {\n            console.warn(`[Performance Budget] ${entry.name} exceeded 100ms budget: ${duration.toFixed(2)}ms`);\n          }\n        }\n      }\n    });\n\n    observer.observe({ entryTypes: ['measure'] });\n\n    return () => {\n      observer.disconnect();\n    };\n  }, []);\n}\n\n// Performance measurement helpers\nexport const measurePerformance = {\n  start: (name: string) => {\n    if (typeof window !== 'undefined') {\n      performance.mark(`${name}-start`);\n    }\n  },\n  \n  end: (name: string) => {\n    if (typeof window !== 'undefined') {\n      performance.mark(`${name}-end`);\n      performance.measure(name, `${name}-start`, `${name}-end`);\n    }\n  },\n  \n  clear: (name: string) => {\n    if (typeof window !== 'undefined') {\n      performance.clearMarks(`${name}-start`);\n      performance.clearMarks(`${name}-end`);\n      performance.clearMeasures(name);\n    }\n  },\n};\n\n "],"names":["lazyImport","measurePerformance","prefetchDNS","preloadResource","useAnimationFrame","useDebounce","useDebounced","useDeepMemo","useIntersectionObserver","useLazyImage","useMemoryMonitor","useOptimizedForm","usePerformanceBudget","usePerformanceMonitor","useProfiledCallback","useProfiledMemo","useProgressiveImage","useStableCallback","useThrottle","useThrottled","useVirtualScroll","useVirtualScrolling","withSuspense","factory","deps","debugLabel","useMemo","process","env","NODE_ENV","start","performance","now","result","end","console","warn","toFixed","callback","useCallback","args","value","delay","debouncedValue","setDebouncedValue","useState","useEffect","handler","setTimeout","clearTimeout","lastCall","useRef","Date","current","config","threshold","rootMargin","root","ref","isIntersecting","setIsIntersecting","entry","setEntry","element","observer","IntersectionObserver","observe","disconnect","items","itemHeight","containerHeight","overscan","scrollTop","setScrollTop","visibleRange","Math","max","floor","min","length","ceil","totalHeight","offsetY","handleScroll","e","target","scrollContainer","document","getElementById","addEventListener","removeEventListener","visibleItems","slice","map","item","index","style","position","top","height","width","event","currentTarget","componentName","renderStart","renderCount","renderTime","log","memory","round","usedJSHeapSize","callbackRef","deepEqual","a","b","keysA","Object","keys","keysB","key","includes","src","placeholder","imageSrc","setImageSrc","isLoaded","setIsLoaded","isError","setIsError","img","Image","onload","onerror","placeholderSrc","currentSrc","setCurrentSrc","isLoading","setIsLoading","requestRef","animate","requestAnimationFrame","cancelAnimationFrame","importFn","namedExport","lazy","then","module","default","href","as","window","link","createElement","rel","head","appendChild","domain","Component","fallback","React","props","Suspense","initialValues","onSubmit","values","setValues","isSubmitting","setIsSubmitting","handleChange","name","startTransition","prev","handleSubmit","preventDefault","reset","PerformanceObserver","list","getEntries","entryType","duration","entryTypes","mark","measure","clear","clearMarks","clearMeasures"],"mappings":"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"}