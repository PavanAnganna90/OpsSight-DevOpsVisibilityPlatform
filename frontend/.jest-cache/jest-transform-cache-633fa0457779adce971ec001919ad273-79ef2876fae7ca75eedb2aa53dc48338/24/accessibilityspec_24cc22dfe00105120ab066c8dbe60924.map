{"version":3,"sources":["/Users/pavan/Desktop/Devops-app-dev-cursor/frontend/src/__tests__/e2e/accessibility.spec.ts"],"sourcesContent":["import { test, expect, type Page } from '@playwright/test';\nimport AxeBuilder from '@axe-core/playwright';\n\n/**\n * Comprehensive Accessibility Testing Suite\n * Verifies WCAG 2.1 AA compliance across all components and browsers\n */\n\ntest.describe('Accessibility Compliance', () => {\n  \n  test.beforeEach(async ({ page }) => {\n    await page.goto('/');\n    await page.waitForLoadState('networkidle');\n  });\n\n  test.describe('WCAG 2.1 AA Compliance', () => {\n    \n    test('should pass automated accessibility scan', async ({ page }) => {\n      const accessibilityScanResults = await new AxeBuilder({ page })\n        .withTags(['wcag2a', 'wcag2aa', 'wcag21aa'])\n        .analyze();\n\n      expect(accessibilityScanResults.violations).toEqual([]);\n      \n      console.log(`✅ Accessibility scan passed: ${accessibilityScanResults.passes.length} rules checked`);\n    });\n\n    test('should have proper color contrast ratios', async ({ page }) => {\n      const contrastResults = await new AxeBuilder({ page })\n        .withRules(['color-contrast'])\n        .analyze();\n\n      expect(contrastResults.violations).toEqual([]);\n      \n      // Additional manual contrast checking for critical elements\n      await testColorContrast(page);\n      \n      console.log('✅ Color contrast requirements met');\n    });\n\n    test('should support keyboard navigation', async ({ page }) => {\n      await testKeyboardNavigation(page);\n      console.log('✅ Keyboard navigation verified');\n    });\n\n    test('should have proper heading structure', async ({ page }) => {\n      const headingResults = await new AxeBuilder({ page })\n        .withRules(['heading-order'])\n        .analyze();\n\n      expect(headingResults.violations).toEqual([]);\n      \n      // Additional heading structure validation\n      await testHeadingHierarchy(page);\n      \n      console.log('✅ Heading structure verified');\n    });\n\n    test('should have proper form accessibility', async ({ page }) => {\n      const formResults = await new AxeBuilder({ page })\n        .withRules(['label', 'form-field-multiple-labels'])\n        .analyze();\n\n      expect(formResults.violations).toEqual([]);\n      \n      await testFormAccessibility(page);\n      \n      console.log('✅ Form accessibility verified');\n    });\n  });\n\n  test.describe('Screen Reader Support', () => {\n    \n    test('should have proper ARIA attributes', async ({ page }) => {\n      const ariaResults = await new AxeBuilder({ page })\n        .withTags(['cat.aria'])\n        .analyze();\n\n      expect(ariaResults.violations).toEqual([]);\n      \n      await testARIAAttributes(page);\n      \n      console.log('✅ ARIA attributes verified');\n    });\n\n    test('should announce content changes', async ({ page }) => {\n      await testLiveRegions(page);\n      console.log('✅ Live region announcements verified');\n    });\n\n    test('should have descriptive content', async ({ page }) => {\n      await testContentAccessibility(page);\n      console.log('✅ Content accessibility verified');\n    });\n  });\n\n  test.describe('Focus Management', () => {\n    \n    test('should have visible focus indicators', async ({ page }) => {\n      await testFocusIndicators(page);\n      console.log('✅ Focus indicators verified');\n    });\n\n    test('should trap focus in modals', async ({ page }) => {\n      await testFocusTrapping(page);\n      console.log('✅ Focus trapping verified');\n    });\n\n    test('should maintain logical focus order', async ({ page }) => {\n      await testFocusOrder(page);\n      console.log('✅ Focus order verified');\n    });\n  });\n\n  test.describe('Motor Accessibility', () => {\n    \n    test('should have adequate touch targets', async ({ page }) => {\n      await testTouchTargets(page);\n      console.log('✅ Touch target sizes verified');\n    });\n\n    test('should respect reduced motion preferences', async ({ page }) => {\n      await testReducedMotion(page);\n      console.log('✅ Reduced motion preferences respected');\n    });\n  });\n\n  test.describe('Theme Accessibility', () => {\n    \n    test('should maintain accessibility across all themes', async ({ page }) => {\n      const themes = ['minimal', 'neo-brutalist', 'glassmorphic', 'cyberpunk', 'editorial', 'accessible'];\n      \n      for (const theme of themes) {\n        await setTheme(page, theme);\n        \n        const accessibilityResults = await new AxeBuilder({ page })\n          .withTags(['wcag2a', 'wcag2aa'])\n          .analyze();\n        \n        expect(accessibilityResults.violations).toEqual([]);\n        console.log(`✅ Theme '${theme}' maintains accessibility`);\n      }\n    });\n\n    test('should support high contrast mode', async ({ page }) => {\n      await testHighContrastMode(page);\n      console.log('✅ High contrast mode verified');\n    });\n  });\n});\n\n/**\n * Test color contrast for critical elements\n */\nasync function testColorContrast(page: Page) {\n  // Test critical UI elements for proper contrast\n  const criticalElements = [\n    'button',\n    'a',\n    '[role=\"button\"]',\n    'input',\n    'textarea',\n    'select'\n  ];\n\n  for (const selector of criticalElements) {\n    const elements = page.locator(selector);\n    const count = await elements.count();\n    \n    if (count > 0) {\n      for (let i = 0; i < Math.min(count, 5); i++) {\n        const element = elements.nth(i);\n        \n        const contrast = await element.evaluate((el) => {\n          const styles = window.getComputedStyle(el);\n          const bgColor = styles.backgroundColor;\n          const textColor = styles.color;\n          \n          // Simple contrast calculation (real implementation would be more sophisticated)\n          return {\n            background: bgColor,\n            text: textColor,\n            visible: bgColor !== 'rgba(0, 0, 0, 0)' && textColor !== 'rgba(0, 0, 0, 0)'\n          };\n        });\n        \n        expect(contrast.visible).toBeTruthy();\n      }\n    }\n  }\n}\n\n/**\n * Test keyboard navigation functionality\n */\nasync function testKeyboardNavigation(page: Page) {\n  // Test Tab navigation\n  await page.keyboard.press('Tab');\n  \n  let focusedElement = page.locator(':focus');\n  expect(await focusedElement.count()).toBeGreaterThan(0);\n  \n  // Test multiple tab presses\n  for (let i = 0; i < 5; i++) {\n    await page.keyboard.press('Tab');\n    focusedElement = page.locator(':focus');\n    expect(await focusedElement.count()).toBeGreaterThan(0);\n  }\n  \n  // Test Shift+Tab (reverse navigation)\n  await page.keyboard.press('Shift+Tab');\n  focusedElement = page.locator(':focus');\n  expect(await focusedElement.count()).toBeGreaterThan(0);\n  \n  // Test Enter key activation\n  await page.keyboard.press('Enter');\n  await page.waitForTimeout(100);\n  \n  // Test Escape key\n  await page.keyboard.press('Escape');\n  await page.waitForTimeout(100);\n}\n\n/**\n * Test heading hierarchy structure\n */\nasync function testHeadingHierarchy(page: Page) {\n  const headings = await page.locator('h1, h2, h3, h4, h5, h6').all();\n  \n  if (headings.length > 0) {\n    // Check for h1 presence\n    const h1Count = await page.locator('h1').count();\n    expect(h1Count).toBeGreaterThanOrEqual(1);\n    \n    // Check logical heading order\n    let previousLevel = 0;\n    \n    for (const heading of headings) {\n      const tagName = await heading.evaluate(el => el.tagName.toLowerCase());\n      const currentLevel = parseInt(tagName.charAt(1));\n      \n      if (previousLevel > 0) {\n        // Heading levels should not skip more than one level\n        expect(currentLevel - previousLevel).toBeLessThanOrEqual(1);\n      }\n      \n      previousLevel = currentLevel;\n    }\n  }\n}\n\n/**\n * Test form accessibility features\n */\nasync function testFormAccessibility(page: Page) {\n  const forms = page.locator('form');\n  const formCount = await forms.count();\n  \n  if (formCount > 0) {\n    const form = forms.first();\n    \n    // Test form inputs have labels\n    const inputs = form.locator('input, textarea, select');\n    const inputCount = await inputs.count();\n    \n    for (let i = 0; i < Math.min(inputCount, 5); i++) {\n      const input = inputs.nth(i);\n      \n      // Check for associated label\n      const hasLabel = await input.evaluate(el => {\n        const id = el.getAttribute('id');\n        const ariaLabel = el.getAttribute('aria-label');\n        const ariaLabelledBy = el.getAttribute('aria-labelledby');\n        \n        if (ariaLabel || ariaLabelledBy) return true;\n        \n        if (id) {\n          const label = document.querySelector(`label[for=\"${id}\"]`);\n          return !!label;\n        }\n        \n        // Check if input is wrapped in label\n        return !!el.closest('label');\n      });\n      \n      expect(hasLabel).toBeTruthy();\n    }\n  }\n}\n\n/**\n * Test ARIA attributes implementation\n */\nasync function testARIAAttributes(page: Page) {\n  // Test elements with interactive roles\n  const interactiveElements = page.locator('[role=\"button\"], [role=\"link\"], [role=\"tab\"], [role=\"menuitem\"]');\n  const count = await interactiveElements.count();\n  \n  if (count > 0) {\n    for (let i = 0; i < Math.min(count, 5); i++) {\n      const element = interactiveElements.nth(i);\n      \n      // Check for accessible name\n      const hasAccessibleName = await element.evaluate(el => {\n        const ariaLabel = el.getAttribute('aria-label');\n        const ariaLabelledBy = el.getAttribute('aria-labelledby');\n        const textContent = el.textContent?.trim();\n        \n        return !!(ariaLabel || ariaLabelledBy || textContent);\n      });\n      \n      expect(hasAccessibleName).toBeTruthy();\n    }\n  }\n  \n  // Test expandable elements\n  const expandableElements = page.locator('[aria-expanded]');\n  const expandableCount = await expandableElements.count();\n  \n  if (expandableCount > 0) {\n    const element = expandableElements.first();\n    const expanded = await element.getAttribute('aria-expanded');\n    expect(['true', 'false']).toContain(expanded);\n  }\n}\n\n/**\n * Test live region announcements\n */\nasync function testLiveRegions(page: Page) {\n  // Look for live regions\n  const liveRegions = page.locator('[aria-live], [role=\"status\"], [role=\"alert\"]');\n  const count = await liveRegions.count();\n  \n  if (count > 0) {\n    const liveRegion = liveRegions.first();\n    const ariaLive = await liveRegion.getAttribute('aria-live');\n    const role = await liveRegion.getAttribute('role');\n    \n    // Should have appropriate live region settings\n    expect(ariaLive || role).toBeTruthy();\n    \n    if (ariaLive) {\n      expect(['polite', 'assertive', 'off']).toContain(ariaLive);\n    }\n  }\n}\n\n/**\n * Test content accessibility\n */\nasync function testContentAccessibility(page: Page) {\n  // Test images have alt text\n  const images = page.locator('img');\n  const imageCount = await images.count();\n  \n  if (imageCount > 0) {\n    for (let i = 0; i < Math.min(imageCount, 5); i++) {\n      const img = images.nth(i);\n      const alt = await img.getAttribute('alt');\n      \n      // Alt attribute should exist (even if empty for decorative images)\n      expect(alt).not.toBeNull();\n    }\n  }\n  \n  // Test links have descriptive text\n  const links = page.locator('a');\n  const linkCount = await links.count();\n  \n  if (linkCount > 0) {\n    for (let i = 0; i < Math.min(linkCount, 5); i++) {\n      const link = links.nth(i);\n      const text = await link.textContent();\n      const ariaLabel = await link.getAttribute('aria-label');\n      \n      // Links should have descriptive text\n      expect(text?.trim() || ariaLabel).toBeTruthy();\n    }\n  }\n}\n\n/**\n * Test focus indicators visibility\n */\nasync function testFocusIndicators(page: Page) {\n  const focusableElements = page.locator('button, a, input, textarea, select, [tabindex=\"0\"]');\n  const count = await focusableElements.count();\n  \n  if (count > 0) {\n    const element = focusableElements.first();\n    \n    // Focus the element\n    await element.focus();\n    \n    // Check for focus styles\n    const focusStyles = await element.evaluate(el => {\n      const styles = window.getComputedStyle(el);\n      return {\n        outline: styles.outline,\n        outlineWidth: styles.outlineWidth,\n        boxShadow: styles.boxShadow\n      };\n    });\n    \n    // Should have some form of focus indicator\n    const hasFocusIndicator = \n      focusStyles.outline !== 'none' ||\n      focusStyles.outlineWidth !== '0px' ||\n      focusStyles.boxShadow !== 'none';\n    \n    expect(hasFocusIndicator).toBeTruthy();\n  }\n}\n\n/**\n * Test focus trapping in modals\n */\nasync function testFocusTrapping(page: Page) {\n  // Look for modal triggers\n  const modalTriggers = page.locator('[data-testid*=\"modal\"], [aria-controls], button:has-text(\"Open\"), button:has-text(\"Show\")');\n  const count = await modalTriggers.count();\n  \n  if (count > 0) {\n    const trigger = modalTriggers.first();\n    \n    // Try to open modal\n    await trigger.click();\n    await page.waitForTimeout(300);\n    \n    // Check if modal is open\n    const modal = page.locator('[role=\"dialog\"], [role=\"modal\"], .modal').first();\n    \n    if (await modal.count() > 0) {\n      // Test focus is trapped within modal\n      await page.keyboard.press('Tab');\n      const focusedElement = page.locator(':focus');\n      \n      // Focus should be within modal\n      const focusWithinModal = await focusedElement.evaluate((el, modalEl) => {\n        return modalEl.contains(el);\n      }, await modal.elementHandle());\n      \n      if (!focusWithinModal) {\n        console.log('⚠️ Focus may not be trapped in modal');\n      }\n      \n      // Close modal with Escape\n      await page.keyboard.press('Escape');\n      await page.waitForTimeout(300);\n    }\n  }\n}\n\n/**\n * Test logical focus order\n */\nasync function testFocusOrder(page: Page) {\n  const focusableElements = page.locator('button, a, input, textarea, select, [tabindex=\"0\"]');\n  const count = await focusableElements.count();\n  \n  if (count > 1) {\n    // Get positions of first few focusable elements\n    const positions = [];\n    \n    for (let i = 0; i < Math.min(count, 5); i++) {\n      const element = focusableElements.nth(i);\n      const box = await element.boundingBox();\n      \n      if (box) {\n        positions.push({ x: box.x, y: box.y, index: i });\n      }\n    }\n    \n    // Check that focus order generally follows visual order (top-to-bottom, left-to-right)\n    for (let i = 1; i < positions.length; i++) {\n      const prev = positions[i - 1];\n      const curr = positions[i];\n      \n      // Current element should be below or to the right of previous\n      const isLogicalOrder = curr.y > prev.y || (curr.y === prev.y && curr.x >= prev.x);\n      \n      if (!isLogicalOrder) {\n        console.log(`⚠️ Focus order may not be logical between elements ${prev.index} and ${curr.index}`);\n      }\n    }\n  }\n}\n\n/**\n * Test touch target sizes for mobile accessibility\n */\nasync function testTouchTargets(page: Page) {\n  const touchTargets = page.locator('button, a, [role=\"button\"]');\n  const count = await touchTargets.count();\n  \n  if (count > 0) {\n    for (let i = 0; i < Math.min(count, 5); i++) {\n      const target = touchTargets.nth(i);\n      const box = await target.boundingBox();\n      \n      if (box) {\n        // WCAG recommends minimum 44x44px touch targets\n        expect(box.width).toBeGreaterThanOrEqual(40); // Allow small tolerance\n        expect(box.height).toBeGreaterThanOrEqual(40);\n      }\n    }\n  }\n}\n\n/**\n * Test reduced motion preferences\n */\nasync function testReducedMotion(page: Page) {\n  // Test with reduced motion preference\n  await page.emulateMedia({ reducedMotion: 'reduce' });\n  \n  // Check that animations are reduced or disabled\n  const animatedElements = page.locator('[class*=\"animate\"], [style*=\"transition\"], [style*=\"animation\"]');\n  const count = await animatedElements.count();\n  \n  if (count > 0) {\n    for (let i = 0; i < Math.min(count, 3); i++) {\n      const element = animatedElements.nth(i);\n      \n      const animationState = await element.evaluate(el => {\n        const styles = window.getComputedStyle(el);\n        return {\n          transition: styles.transition,\n          animation: styles.animation,\n          transform: styles.transform\n        };\n      });\n      \n      // In reduced motion mode, animations should be minimal\n      console.log(`Element ${i} animation state:`, animationState);\n    }\n  }\n  \n  // Reset media emulation\n  await page.emulateMedia({ reducedMotion: null });\n}\n\n/**\n * Set theme for testing\n */\nasync function setTheme(page: Page, theme: string) {\n  // Try to find theme selector\n  const themeSelector = page.locator('[data-testid=\"theme-selector\"], .theme-selector, button:has-text(\"Theme\")').first();\n  \n  if (await themeSelector.count() > 0) {\n    await themeSelector.click();\n    await page.waitForTimeout(200);\n    \n    // Try to select specific theme\n    const themeOption = page.locator(`button:has-text(\"${theme}\"), [data-theme=\"${theme}\"]`).first();\n    \n    if (await themeOption.count() > 0) {\n      await themeOption.click();\n      await page.waitForTimeout(500);\n    } else {\n      // Close theme selector if we can't find the theme\n      await page.keyboard.press('Escape');\n    }\n  } else {\n    // Try to set theme directly via JavaScript if selector not found\n    await page.evaluate((themeName) => {\n      const root = document.documentElement;\n      root.setAttribute('data-theme', themeName);\n    }, theme);\n    \n    await page.waitForTimeout(300);\n  }\n}\n\n/**\n * Test high contrast mode support\n */\nasync function testHighContrastMode(page: Page) {\n  // Test high contrast mode\n  await page.emulateMedia({ forcedColors: 'active' });\n  \n  // Verify content is still accessible\n  const accessibilityResults = await new AxeBuilder({ page })\n    .withRules(['color-contrast'])\n    .analyze();\n  \n  // Should still pass accessibility tests in high contrast mode\n  expect(accessibilityResults.violations).toEqual([]);\n  \n  // Reset forced colors\n  await page.emulateMedia({ forcedColors: null });\n} "],"names":["test","describe","beforeEach","page","goto","waitForLoadState","accessibilityScanResults","AxeBuilder","withTags","analyze","expect","violations","toEqual","console","log","passes","length","contrastResults","withRules","testColorContrast","testKeyboardNavigation","headingResults","testHeadingHierarchy","formResults","testFormAccessibility","ariaResults","testARIAAttributes","testLiveRegions","testContentAccessibility","testFocusIndicators","testFocusTrapping","testFocusOrder","testTouchTargets","testReducedMotion","themes","theme","setTheme","accessibilityResults","testHighContrastMode","criticalElements","selector","elements","locator","count","i","Math","min","element","nth","contrast","evaluate","el","styles","window","getComputedStyle","bgColor","backgroundColor","textColor","color","background","text","visible","toBeTruthy","keyboard","press","focusedElement","toBeGreaterThan","waitForTimeout","headings","all","h1Count","toBeGreaterThanOrEqual","previousLevel","heading","tagName","toLowerCase","currentLevel","parseInt","charAt","toBeLessThanOrEqual","forms","formCount","form","first","inputs","inputCount","input","hasLabel","id","getAttribute","ariaLabel","ariaLabelledBy","label","document","querySelector","closest","interactiveElements","hasAccessibleName","textContent","trim","expandableElements","expandableCount","expanded","toContain","liveRegions","liveRegion","ariaLive","role","images","imageCount","img","alt","not","toBeNull","links","linkCount","link","focusableElements","focus","focusStyles","outline","outlineWidth","boxShadow","hasFocusIndicator","modalTriggers","trigger","click","modal","focusWithinModal","modalEl","contains","elementHandle","positions","box","boundingBox","push","x","y","index","prev","curr","isLogicalOrder","touchTargets","target","width","height","emulateMedia","reducedMotion","animatedElements","animationState","transition","animation","transform","themeSelector","themeOption","themeName","root","documentElement","setAttribute","forcedColors"],"mappings":"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"}