{"version":3,"sources":["/Users/pavan/Desktop/Devops-app-dev-cursor/frontend/src/components/dashboard/Dashboard.tsx"],"sourcesContent":["/**\n * Main Dashboard component for the OpsSight DevOps monitoring platform.\n * Provides the foundational layout structure with responsive grid system.\n */\n\nimport React, { useState } from 'react';\nimport { useAuth } from '../../contexts/AuthContext';\nimport { useResponsive } from '../../hooks/useResponsive';\nimport { usePermissionState } from '../../hooks/usePermissions';\nimport { PermissionGuard } from '../rbac/PermissionGuard';\nimport DashboardHeader from './layout/DashboardHeader';\nimport DashboardSidebar from './layout/DashboardSidebar';\nimport DashboardContent from './layout/DashboardContent';\nimport SystemPulsePanel from './SystemPulsePanel';\nimport CommandCenterPanel from './CommandCenterPanel';\nimport ActionInsightsPanel from './ActionInsightsPanel';\nimport { motion } from 'framer-motion';\n\ninterface DashboardProps {\n  /** Optional className for custom styling */\n  className?: string;\n}\n\nconst panelVariants = {\n  hidden: { opacity: 0, y: 32 },\n  visible: (i: number) => ({\n    opacity: 1,\n    y: 0,\n    transition: { delay: 0.1 + i * 0.15, duration: 0.6, type: 'spring', bounce: 0.18 },\n  }),\n};\n\n/**\n * Dashboard Component\n * \n * Main dashboard layout providing the foundational structure for the OpsSight\n * monitoring platform. Uses CSS Grid for responsive layout organization.\n * \n * Features:\n * - Responsive grid layout with header, sidebar, and main content areas\n * - Integration with authentication context\n * - Mobile-first responsive design\n * - Accessibility compliance (WCAG 2.1)\n * - Support for theme switching\n * \n * Layout Structure:\n * ```\n * ┌─────────────────────────────────┐\n * │            Header               │\n * ├─────────┬───────────────────────┤\n * │ Sidebar │    Main Content       │\n * │         │                       │\n * │         │                       │\n * └─────────┴───────────────────────┘\n * ```\n * \n * @param className - Optional CSS classes for custom styling\n */\nexport const Dashboard: React.FC<DashboardProps> = ({\n  className = '',\n}) => {\n  const { state } = useAuth();\n  const { isMobile } = useResponsive();\n  const [isMobileMenuOpen, setIsMobileMenuOpen] = useState(false);\n  const permissionState = usePermissionState();\n\n  /**\n   * Toggle mobile menu visibility\n   */\n  const toggleMobileMenu = (): void => {\n    setIsMobileMenuOpen(prev => !prev);\n  };\n\n  /**\n   * Close mobile menu\n   */\n  const closeMobileMenu = (): void => {\n    setIsMobileMenuOpen(false);\n  };\n\n  // Redirect to login if not authenticated (should be handled by route protection)\n  if (!state.isAuthenticated) {\n    return (\n      <div className=\"min-h-screen flex items-center justify-center bg-gray-50\">\n        <div className=\"text-center\">\n          <h2 className=\"text-2xl font-bold text-gray-900 mb-2\">\n            Access Denied\n          </h2>\n          <p className=\"text-gray-600\">\n            Please log in to access the dashboard.\n          </p>\n        </div>\n      </div>\n    );\n  }\n\n  return (\n    <div \n      className={`min-h-screen bg-gray-50 dark:bg-gray-900 transition-colors duration-200 ${className}`}\n      role=\"main\"\n      aria-label=\"OpsSight Dashboard\"\n    >\n      {/* Dashboard Grid Layout */}\n      <div className=\"grid grid-rows-[auto_1fr] lg:grid-cols-[250px_1fr] min-h-screen\">\n        {/* Header - spans full width on mobile, right column on desktop */}\n        <header className=\"lg:col-span-2 bg-white dark:bg-gray-800 border-b border-gray-200 dark:border-gray-700 z-10\">\n          <DashboardHeader />\n        </header>\n\n        {/* Sidebar - hidden on mobile, visible on desktop */}\n        <aside className=\"hidden lg:block bg-white dark:bg-gray-800 border-r border-gray-200 dark:border-gray-700 overflow-y-auto\">\n          <DashboardSidebar />\n        </aside>\n\n        {/* Main Content Area */}\n        <main \n          className=\"flex-1 overflow-y-auto p-4 lg:p-6 focus:outline-none\"\n          tabIndex={-1}\n          aria-label=\"Dashboard main content\"\n        >\n          {/* Welcome Section with Role Context */}\n          <div className=\"mb-8\">\n            <div className=\"bg-white dark:bg-gray-800 rounded-lg p-6 border border-gray-200 dark:border-gray-700\">\n              <h1 className=\"text-2xl font-bold text-gray-900 dark:text-white mb-2\">\n                Welcome back, {state.user?.full_name || state.user?.github_username}\n              </h1>\n              <p className=\"text-gray-600 dark:text-gray-400 mb-4\">\n                {permissionState.hasAnyAdminRole \n                  ? 'Administrator Dashboard - Full system access'\n                  : permissionState.hasAnyManagerRole\n                  ? 'Management Dashboard - Team oversight and reporting'\n                  : permissionState.hasAnyDevOpsRole\n                  ? 'DevOps Dashboard - Infrastructure and deployment monitoring'\n                  : 'Dashboard - Your assigned resources and metrics'\n                }\n              </p>\n              {state.user?.roles && (\n                <div className=\"flex items-center space-x-2\">\n                  <span className=\"text-sm text-gray-500 dark:text-gray-400\">Active roles:</span>\n                  <div className=\"flex space-x-2\">\n                    {state.user.roles.slice(0, 3).map((role, index) => (\n                      <span \n                        key={role.id}\n                        className=\"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-blue-100 text-blue-800 dark:bg-blue-900 dark:text-blue-200\"\n                      >\n                        {role.display_name}\n                      </span>\n                    ))}\n                    {state.user.roles.length > 3 && (\n                      <span className=\"text-xs text-gray-500\">+{state.user.roles.length - 3} more</span>\n                    )}\n                  </div>\n                </div>\n              )}\n            </div>\n          </div>\n\n          {/* Dashboard Panels with Permission Guards */}\n          <div className=\"grid grid-cols-1 md:grid-cols-3 gap-8\">\n            {/* Left: System Pulse - Monitoring Permission Required */}\n            <PermissionGuard \n              permission=\"view_monitoring\"\n              fallback={\n                <div className=\"bg-gray-100 dark:bg-gray-800 rounded-lg p-6 text-center\">\n                  <p className=\"text-gray-500 dark:text-gray-400\">Monitoring access restricted</p>\n                </div>\n              }\n            >\n              <motion.div\n                custom={0}\n                initial=\"hidden\"\n                animate=\"visible\"\n                variants={panelVariants}\n              >\n                <SystemPulsePanel />\n              </motion.div>\n            </PermissionGuard>\n\n            {/* Center: Command Center - Infrastructure Permission Required */}\n            <PermissionGuard \n              permission=\"view_infrastructure\"\n              fallback={\n                <div className=\"bg-gray-100 dark:bg-gray-800 rounded-lg p-6 text-center\">\n                  <p className=\"text-gray-500 dark:text-gray-400\">Infrastructure access restricted</p>\n                </div>\n              }\n            >\n              <motion.div\n                custom={1}\n                initial=\"hidden\"\n                animate=\"visible\"\n                variants={panelVariants}\n              >\n                <CommandCenterPanel />\n              </motion.div>\n            </PermissionGuard>\n\n            {/* Right: Actions & Insights - General Dashboard Permission */}\n            <PermissionGuard \n              permission=\"view_dashboard\"\n              fallback={\n                <div className=\"bg-gray-100 dark:bg-gray-800 rounded-lg p-6 text-center\">\n                  <p className=\"text-gray-500 dark:text-gray-400\">Dashboard insights restricted</p>\n                </div>\n              }\n            >\n              <motion.div\n                custom={2}\n                initial=\"hidden\"\n                animate=\"visible\"\n                variants={panelVariants}\n              >\n                <ActionInsightsPanel />\n              </motion.div>\n            </PermissionGuard>\n          </div>\n\n          {/* Admin Quick Actions - Admin Only */}\n          <PermissionGuard roles={['admin', 'organization_owner', 'super_admin']}>\n            <div className=\"mt-8\">\n              <div className=\"bg-gradient-to-r from-red-50 to-orange-50 dark:from-red-900/20 dark:to-orange-900/20 rounded-lg p-6 border border-red-200 dark:border-red-800\">\n                <h2 className=\"text-lg font-semibold text-red-900 dark:text-red-200 mb-4\">\n                  Administrator Quick Actions\n                </h2>\n                <div className=\"grid grid-cols-1 md:grid-cols-3 gap-4\">\n                  <button className=\"p-4 bg-white dark:bg-gray-800 rounded-lg border border-red-200 dark:border-red-700 hover:bg-red-50 dark:hover:bg-red-900/20 transition-colors\">\n                    <h3 className=\"font-medium text-red-900 dark:text-red-200\">User Management</h3>\n                    <p className=\"text-sm text-red-700 dark:text-red-300 mt-1\">Manage users and permissions</p>\n                  </button>\n                  <button className=\"p-4 bg-white dark:bg-gray-800 rounded-lg border border-red-200 dark:border-red-700 hover:bg-red-50 dark:hover:bg-red-900/20 transition-colors\">\n                    <h3 className=\"font-medium text-red-900 dark:text-red-200\">System Settings</h3>\n                    <p className=\"text-sm text-red-700 dark:text-red-300 mt-1\">Configure system parameters</p>\n                  </button>\n                  <button className=\"p-4 bg-white dark:bg-gray-800 rounded-lg border border-red-200 dark:border-red-700 hover:bg-red-50 dark:hover:bg-red-900/20 transition-colors\">\n                    <h3 className=\"font-medium text-red-900 dark:text-red-200\">Audit Logs</h3>\n                    <p className=\"text-sm text-red-700 dark:text-red-300 mt-1\">Review system activity</p>\n                  </button>\n                </div>\n              </div>\n            </div>\n          </PermissionGuard>\n        </main>\n      </div>\n\n      {/* Mobile Sidebar Overlay - shown when sidebar is open on mobile */}\n      <div \n        className=\"fixed inset-0 z-50 lg:hidden bg-black bg-opacity-50 transition-opacity duration-300 opacity-0 pointer-events-none\"\n        aria-hidden=\"true\"\n        role=\"presentation\"\n      >\n        <div className=\"fixed inset-y-0 left-0 w-64 bg-white dark:bg-gray-800 shadow-xl transform -translate-x-full transition-transform duration-300\">\n          <DashboardSidebar />\n        </div>\n      </div>\n    </div>\n  );\n};\n\nexport default Dashboard; "],"names":["Dashboard","panelVariants","hidden","opacity","y","visible","i","transition","delay","duration","type","bounce","className","state","useAuth","isMobile","useResponsive","isMobileMenuOpen","setIsMobileMenuOpen","useState","permissionState","usePermissionState","toggleMobileMenu","prev","closeMobileMenu","isAuthenticated","div","h2","p","role","aria-label","header","DashboardHeader","aside","DashboardSidebar","main","tabIndex","h1","user","full_name","github_username","hasAnyAdminRole","hasAnyManagerRole","hasAnyDevOpsRole","roles","span","slice","map","index","display_name","id","length","PermissionGuard","permission","fallback","motion","custom","initial","animate","variants","SystemPulsePanel","CommandCenterPanel","ActionInsightsPanel","button","h3","aria-hidden"],"mappings":"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"}