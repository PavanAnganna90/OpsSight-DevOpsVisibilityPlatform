{"version":3,"names":["cov_s9hml51d","actualCoverage","s","withAuth","WrappedComponent","f","ProtectedRoute","props","router","_navigation","useRouter","state","_AuthContext","useAuth","_react","useEffect","b","isLoading","isAuthenticated","currentPath","window","location","pathname","push","encodeURIComponent","_jsxruntime","jsx","className"],"sources":["/Users/pavan/Desktop/Devops-app-dev-cursor/frontend/src/components/auth/withAuth.tsx"],"sourcesContent":["'use client';\n\nimport { useEffect } from 'react';\nimport { useRouter } from 'next/navigation';\nimport { useAuth } from '@/contexts/AuthContext';\n\n/**\n * Higher-order component for protecting routes that require authentication\n * @param WrappedComponent - The component to wrap with authentication\n * @returns A new component with authentication checks\n */\nexport function withAuth<P extends object>(\n  WrappedComponent: React.ComponentType<P>\n) {\n  return function ProtectedRoute(props: P) {\n    const router = useRouter();\n    const { state } = useAuth();\n\n    useEffect(() => {\n      // Only redirect after the initial loading is complete\n      if (!state.isLoading && !state.isAuthenticated) {\n        // Store the current path for redirect after login\n        const currentPath = window.location.pathname;\n        router.push(`/login?redirect=${encodeURIComponent(currentPath)}`);\n      }\n    }, [state.isAuthenticated, state.isLoading, router]);\n\n    // Show nothing while loading\n    if (state.isLoading) {\n      return (\n        <div className=\"min-h-screen flex items-center justify-center bg-gray-50\">\n          <div className=\"animate-spin rounded-full h-12 w-12 border-b-2 border-gray-900\"></div>\n        </div>\n      );\n    }\n\n    // Only render the component if authenticated\n    return state.isAuthenticated ? <WrappedComponent {...props} /> : null;\n  };\n} "],"mappings":"AAAA;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;IAWgB;IAAAA,YAAA,YAAAA,CAAA;MAAA,OAAAC,cAAA;IAAA;EAAA;EAAA,OAAAA,cAAA;AAAA;AAAAD,YAAA;AAAAA,YAAA,GAAAE,CAAA;;;;;;+BAAA;;;;;;WAAAC,QAAA;;;;;;;;gCATU;;;gCACA;;;gCACF;AAOjB,SAASA,SACdC,gBAAwC;EAAA;EAAAJ,YAAA,GAAAK,CAAA;EAAAL,YAAA,GAAAE,CAAA;EAExC,OAAO,SAASI,eAAeC,KAAQ;IAAA;IAAAP,YAAA,GAAAK,CAAA;IACrC,MAAMG,MAAA;IAAA;IAAA,CAAAR,YAAA,GAAAE,CAAA,OAAS,IAAAO,WAAA,CAAAC,SAAS;IACxB,MAAM;MAAEC;IAAK,CAAE;IAAA;IAAA,CAAAX,YAAA,GAAAE,CAAA,OAAG,IAAAU,YAAA,CAAAC,OAAO;IAAA;IAAAb,YAAA,GAAAE,CAAA;IAEzB,IAAAY,MAAA,CAAAC,SAAS,EAAC;MAAA;MAAAf,YAAA,GAAAK,CAAA;MAAAL,YAAA,GAAAE,CAAA;MACR;MACA;MAAI;MAAA,CAAAF,YAAA,GAAAgB,CAAA,WAACL,KAAA,CAAMM,SAAS;MAAA;MAAA,CAAAjB,YAAA,GAAAgB,CAAA,UAAI,CAACL,KAAA,CAAMO,eAAe,GAAE;QAAA;QAAAlB,YAAA,GAAAgB,CAAA;QAC9C;QACA,MAAMG,WAAA;QAAA;QAAA,CAAAnB,YAAA,GAAAE,CAAA,QAAckB,MAAA,CAAOC,QAAQ,CAACC,QAAQ;QAAA;QAAAtB,YAAA,GAAAE,CAAA;QAC5CM,MAAA,CAAOe,IAAI,CAAC,mBAAmBC,kBAAA,CAAmBL,WAAA,GAAc;MAClE;MAAA;MAAA;QAAAnB,YAAA,GAAAgB,CAAA;MAAA;IACF,GAAG,CAACL,KAAA,CAAMO,eAAe,EAAEP,KAAA,CAAMM,SAAS,EAAET,MAAA,CAAO;IAEnD;IAAA;IAAAR,YAAA,GAAAE,CAAA;IACA,IAAIS,KAAA,CAAMM,SAAS,EAAE;MAAA;MAAAjB,YAAA,GAAAgB,CAAA;MAAAhB,YAAA,GAAAE,CAAA;MACnB,oBACE,IAAAuB,WAAA,CAAAC,GAAA,EAAC;QAAIC,SAAA,EAAU;kBACb,iBAAAF,WAAA,CAAAC,GAAA,EAAC;UAAIC,SAAA,EAAU;;;IAGrB;IAAA;IAAA;MAAA3B,YAAA,GAAAgB,CAAA;IAAA;IAEA;IAAAhB,YAAA,GAAAE,CAAA;IACA,OAAOS,KAAA,CAAMO,eAAe;IAAA;IAAA,cAAAlB,YAAA,GAAAgB,CAAA,UAAG,IAAAS,WAAA,CAAAC,GAAA,EAACtB,gBAAA;MAAkB,GAAGG;;;+BAAY;EACnE;AACF","ignoreList":[]}