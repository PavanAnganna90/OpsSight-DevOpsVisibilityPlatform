{"version":3,"names":["AlertsPanel","cov_1pwlw3icjg","f","panelVisibility","s","_SettingsContext","useSettings","queryClient","_reactquery","useQueryClient","data","alerts","isLoading","error","refetch","useQuery","queryKey","queryFn","_alertsApi","fetchAlerts","acknowledgeMutation","useMutation","mutationFn","acknowledgeAlert","onSuccess","invalidateQueries","resolveMutation","resolveAlert","b","handleAcknowledge","id","_analytics","trackEvent","alertId","_auditLogApi","logAuditEvent","mutate","handleResolve","_jsxruntime","jsxs","className","jsx","panel","String","_EmptyState","default","illustration","title","description","action","label","onClick","length","map","alert","severity","message","timestamp","status"],"sources":["/Users/pavan/Desktop/Devops-app-dev-cursor/frontend/src/components/dashboard/AlertsPanel.tsx"],"sourcesContent":["import React from 'react';\nimport { useQuery, useMutation, useQueryClient } from '@tanstack/react-query';\nimport { fetchAlerts, acknowledgeAlert, resolveAlert } from '../../services/alertsApi';\nimport { useSettings } from '../../contexts/SettingsContext';\nimport { trackEvent } from '../../utils/analytics';\nimport { logAuditEvent } from '../../services/auditLogApi';\nimport EmptyState from '../ui/EmptyState';\n\nexport default function AlertsPanel() {\n  const { panelVisibility } = useSettings();\n  const queryClient = useQueryClient();\n  const { data: alerts, isLoading, error, refetch } = useQuery({ queryKey: ['alerts'], queryFn: fetchAlerts });\n\n  const acknowledgeMutation = useMutation({\n    mutationFn: acknowledgeAlert,\n    onSuccess: () => queryClient.invalidateQueries({ queryKey: ['alerts'] })\n  });\n  const resolveMutation = useMutation({\n    mutationFn: resolveAlert,\n    onSuccess: () => queryClient.invalidateQueries({ queryKey: ['alerts'] })\n  });\n\n  if (!panelVisibility.alerts) return null;\n\n  const handleAcknowledge = async (id: number) => {\n    trackEvent('acknowledge_alert', { alertId: id });\n    await logAuditEvent('acknowledge_alert', 'admin', { alertId: id });\n    acknowledgeMutation.mutate(id);\n  };\n  const handleResolve = async (id: number) => {\n    trackEvent('resolve_alert', { alertId: id });\n    await logAuditEvent('resolve_alert', 'admin', { alertId: id });\n    resolveMutation.mutate(id);\n  };\n\n  if (isLoading) {\n    return (\n      <section className=\"bg-white/80 dark:bg-gray-900/80 rounded-xl shadow-lg p-6 flex flex-col gap-6 min-h-[320px] items-center justify-center\">\n        <div className=\"animate-spin rounded-full h-10 w-10 border-b-2 border-blue-500 mb-2\" aria-label=\"Loading alerts\" />\n        <span className=\"text-gray-500\">Loading alerts...</span>\n      </section>\n    );\n  }\n  if (error) {\n    trackEvent('error', { panel: 'Alerts', error: String(error) });\n    return (\n      <section className=\"bg-white/80 dark:bg-gray-900/80 rounded-xl shadow-lg p-6 flex flex-col gap-6 min-h-[320px] items-center justify-center\">\n        <EmptyState\n          illustration=\"mascot\"\n          title=\"Error Loading Alerts\"\n          description=\"We couldn't load alerts. Please try again.\"\n          action={{ label: 'Retry', onClick: refetch }}\n        />\n      </section>\n    );\n  }\n  if (!alerts?.length) {\n    return (\n      <section className=\"bg-white/80 dark:bg-gray-900/80 rounded-xl shadow-lg p-6 flex flex-col gap-6 min-h-[320px] items-center justify-center\">\n        <EmptyState\n          illustration=\"mascot\"\n          title=\"No Alerts\"\n          description=\"No active alerts. Enjoy your coffee â˜•\"\n          action={{ label: 'Refresh', onClick: refetch }}\n        />\n      </section>\n    );\n  }\n  return (\n    <section className=\"bg-white/80 dark:bg-gray-900/80 rounded-xl shadow-lg p-6 flex flex-col gap-6 relative overflow-hidden min-h-[320px]\">\n      <div className=\"font-medium mb-2\">Active Alerts</div>\n      <ul className=\"space-y-3\">\n        {alerts.map((alert: any) => (\n          <li key={alert.id} className=\"flex flex-col md:flex-row md:items-center gap-2 bg-gray-50 dark:bg-gray-800 rounded-lg p-4\">\n            <div className=\"flex-1\">\n              <div className=\"font-semibold text-red-600\">[{alert.severity}]</div>\n              <div className=\"text-gray-800 dark:text-gray-100\">{alert.message}</div>\n              <div className=\"text-xs text-gray-400\">{alert.timestamp}</div>\n            </div>\n            <div className=\"flex gap-2 mt-2 md:mt-0\">\n              {alert.status === 'open' && (\n                <button\n                  onClick={() => handleAcknowledge(alert.id)}\n                  className=\"px-3 py-1 rounded bg-yellow-500 text-white font-medium hover:bg-yellow-600 focus:outline-none focus:ring-2 focus:ring-yellow-400 transition\"\n                  aria-label={`Acknowledge alert ${alert.id}`}\n                >\n                  Acknowledge\n                </button>\n              )}\n              {(alert.status === 'open' || alert.status === 'acknowledged') && (\n                <button\n                  onClick={() => handleResolve(alert.id)}\n                  className=\"px-3 py-1 rounded bg-green-600 text-white font-medium hover:bg-green-700 focus:outline-none focus:ring-2 focus:ring-green-400 transition\"\n                  aria-label={`Resolve alert ${alert.id}`}\n                >\n                  Resolve\n                </button>\n              )}\n            </div>\n          </li>\n        ))}\n      </ul>\n    </section>\n  );\n} "],"mappings":"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","ignoreList":[]}