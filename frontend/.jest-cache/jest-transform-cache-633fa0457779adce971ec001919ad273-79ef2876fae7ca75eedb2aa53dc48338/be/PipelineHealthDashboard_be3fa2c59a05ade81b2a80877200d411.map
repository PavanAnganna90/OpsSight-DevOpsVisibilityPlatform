{"version":3,"sources":["/Users/pavan/Desktop/Devops-app-dev-cursor/frontend/src/components/dashboard/PipelineHealthDashboard.tsx"],"sourcesContent":["/**\n * CI/CD Pipeline Health Dashboard Component\n * \n * Displays comprehensive pipeline health metrics including:\n * - Pipeline status overview with color-coded indicators\n * - Success/failure rates and trends\n * - Deployment frequency visualization\n * - Real-time updates and filtering\n */\n\nimport React, { useState, useEffect, useCallback, useMemo } from 'react';\nimport { StatusIndicator, MetricCard, LoadingSkeleton, Button } from '../ui';\nimport { useResponsive } from '../../hooks/useResponsive';\nimport { BuildTimeTrendChart, DeploymentFrequencyChart, TestCoverageWidget, PipelineExecutionView } from '../charts';\n\n// Types based on backend schemas\ninterface PipelineRun {\n  id: number;\n  pipeline_id: number;\n  run_number: number;\n  status: 'pending' | 'running' | 'success' | 'failure' | 'cancelled';\n  commit_sha: string;\n  commit_message?: string;\n  triggered_by: string;\n  trigger_event: string;\n  started_at?: string;\n  finished_at?: string;\n  duration_seconds?: number;\n  branch: string;\n  logs_url?: string;\n  artifacts_url?: string;\n  error_message?: string;\n}\n\ninterface Pipeline {\n  id: number;\n  name: string;\n  description?: string;\n  repository_url: string;\n  branch: string;\n  pipeline_type: 'ci' | 'cd' | 'ci_cd';\n  last_run_status?: 'pending' | 'running' | 'success' | 'failure' | 'cancelled';\n  last_run_at?: string;\n  total_runs: number;\n  success_rate: number;\n  average_duration?: number;\n  is_active: boolean;\n  project_id: number;\n  runs?: PipelineRun[];\n}\n\ninterface PipelineStats {\n  total_runs: number;\n  success_rate: number;\n  failure_rate: number;\n  average_duration?: number;\n  runs_last_30_days: number;\n  success_rate_last_30_days: number;\n}\n\ninterface PipelineHealthDashboardProps {\n  projectId?: number;\n  refreshInterval?: number;\n  className?: string;\n}\n\nconst PipelineHealthDashboard: React.FC<PipelineHealthDashboardProps> = ({\n  projectId,\n  refreshInterval = 30000, // 30 seconds default\n  className = ''\n}) => {\n  // State management\n  const [pipelines, setPipelines] = useState<Pipeline[]>([]);\n  const [loading, setLoading] = useState(true);\n  const [error, setError] = useState<string | null>(null);\n  const [lastRefresh, setLastRefresh] = useState<Date>(new Date());\n  const [selectedPipeline, setSelectedPipeline] = useState<Pipeline | null>(null);\n  const [filterStatus, setFilterStatus] = useState<string>('all');\n  const [sortBy, setSortBy] = useState<'name' | 'last_run' | 'success_rate'>('last_run');\n\n  // Responsive design\n  const { isMobile, isTablet } = useResponsive();\n\n  // Fetch pipelines data\n  const fetchPipelines = useCallback(async () => {\n    try {\n      setError(null);\n      const params = new URLSearchParams();\n      if (projectId) params.append('project_id', projectId.toString());\n      params.append('limit', '50');\n      \n      const response = await fetch(`/api/v1/pipelines?${params}`, {\n        headers: {\n          'Authorization': `Bearer ${localStorage.getItem('access_token')}`,\n          'Content-Type': 'application/json',\n        },\n      });\n\n      if (!response.ok) {\n        throw new Error(`Failed to fetch pipelines: ${response.statusText}`);\n      }\n\n      const data = await response.json();\n      setPipelines(data);\n      setLastRefresh(new Date());\n    } catch (err) {\n      setError(err instanceof Error ? err.message : 'Failed to fetch pipeline data');\n    } finally {\n      setLoading(false);\n    }\n  }, [projectId]);\n\n  // Initial load and refresh interval\n  useEffect(() => {\n    fetchPipelines();\n    \n    if (refreshInterval > 0) {\n      const interval = setInterval(fetchPipelines, refreshInterval);\n      return () => clearInterval(interval);\n    }\n  }, [fetchPipelines, refreshInterval]);\n\n  // Filter and sort pipelines\n  const filteredAndSortedPipelines = useMemo(() => {\n    let filtered = pipelines.filter(pipeline => {\n      if (filterStatus === 'all') return true;\n      return pipeline.last_run_status === filterStatus;\n    });\n\n    return filtered.sort((a, b) => {\n      switch (sortBy) {\n        case 'name':\n          return a.name.localeCompare(b.name);\n        case 'last_run':\n          if (!a.last_run_at && !b.last_run_at) return 0;\n          if (!a.last_run_at) return 1;\n          if (!b.last_run_at) return -1;\n          return new Date(b.last_run_at).getTime() - new Date(a.last_run_at).getTime();\n        case 'success_rate':\n          return b.success_rate - a.success_rate;\n        default:\n          return 0;\n      }\n    });\n  }, [pipelines, filterStatus, sortBy]);\n\n  // Calculate overall stats\n  const overallStats = useMemo(() => {\n    if (pipelines.length === 0) {\n      return {\n        totalPipelines: 0,\n        activePipelines: 0,\n        averageSuccessRate: 0,\n        runningPipelines: 0\n      };\n    }\n\n    const activePipelines = pipelines.filter(p => p.is_active);\n    const runningPipelines = pipelines.filter(p => p.last_run_status === 'running');\n    const averageSuccessRate = activePipelines.reduce((sum, p) => sum + p.success_rate, 0) / activePipelines.length;\n\n    return {\n      totalPipelines: pipelines.length,\n      activePipelines: activePipelines.length,\n      averageSuccessRate: Math.round(averageSuccessRate * 100) / 100,\n      runningPipelines: runningPipelines.length\n    };\n  }, [pipelines]);\n\n  // Format duration helper\n  const formatDuration = (seconds?: number): string => {\n    if (!seconds) return 'N/A';\n    const minutes = Math.floor(seconds / 60);\n    const remainingSeconds = seconds % 60;\n    return `${minutes}m ${remainingSeconds}s`;\n  };\n\n  // Format relative time helper\n  const formatRelativeTime = (dateString?: string): string => {\n    if (!dateString) return 'Never';\n    const date = new Date(dateString);\n    const now = new Date();\n    const diffMs = now.getTime() - date.getTime();\n    const diffMinutes = Math.floor(diffMs / (1000 * 60));\n    \n    if (diffMinutes < 1) return 'Just now';\n    if (diffMinutes < 60) return `${diffMinutes}m ago`;\n    \n    const diffHours = Math.floor(diffMinutes / 60);\n    if (diffHours < 24) return `${diffHours}h ago`;\n    \n    const diffDays = Math.floor(diffHours / 24);\n    return `${diffDays}d ago`;\n  };\n\n  // Get status color for indicators\n  const getStatusColor = (status?: string): 'success' | 'warning' | 'error' | 'info' | 'neutral' => {\n    switch (status) {\n      case 'success': return 'success';\n      case 'failure': return 'error';\n      case 'running': return 'info';\n      case 'pending': return 'warning';\n      case 'cancelled': return 'neutral';\n      default: return 'neutral';\n    }\n  };\n\n  // Handle refresh\n  const handleRefresh = useCallback(() => {\n    setLoading(true);\n    fetchPipelines();\n  }, [fetchPipelines]);\n\n  // Render loading state\n  if (loading && pipelines.length === 0) {\n    return (\n      <div className={`space-y-6 ${className}`}>\n        <div className=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4\">\n          {[...Array(4)].map((_, i) => (\n            <LoadingSkeleton key={i} variant=\"rectangular\" height=\"120px\" />\n          ))}\n        </div>\n        <LoadingSkeleton variant=\"rectangular\" height=\"400px\" />\n      </div>\n    );\n  }\n\n  // Render error state\n  if (error) {\n    return (\n      <div className={`bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800 rounded-lg p-6 ${className}`}>\n        <div className=\"flex items-center justify-between\">\n          <div>\n            <h3 className=\"text-lg font-semibold text-red-800 dark:text-red-200\">\n              Failed to load pipeline data\n            </h3>\n            <p className=\"text-red-600 dark:text-red-300 mt-1\">{error}</p>\n          </div>\n          <Button\n            variant=\"outline\"\n            size=\"sm\"\n            onClick={handleRefresh}\n            disabled={loading}\n          >\n            {loading ? 'Retrying...' : 'Retry'}\n          </Button>\n        </div>\n      </div>\n    );\n  }\n\n  return (\n    <div className={`space-y-6 ${className}`}>\n      {/* Header with refresh and filters */}\n      <div className=\"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4\">\n        <div>\n          <h2 className=\"text-2xl font-bold text-gray-900 dark:text-white\">\n            Pipeline Health Dashboard\n          </h2>\n          <p className=\"text-sm text-gray-500 dark:text-gray-400\">\n            Last updated: {formatRelativeTime(lastRefresh.toISOString())}\n          </p>\n        </div>\n        \n        <div className=\"flex flex-col sm:flex-row gap-2\">\n          {/* Status filter */}\n          <select\n            value={filterStatus}\n            onChange={(e) => setFilterStatus(e.target.value)}\n            className=\"px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md bg-white dark:bg-gray-800 text-gray-900 dark:text-white text-sm\"\n          >\n            <option value=\"all\">All Status</option>\n            <option value=\"success\">Success</option>\n            <option value=\"failure\">Failed</option>\n            <option value=\"running\">Running</option>\n            <option value=\"pending\">Pending</option>\n          </select>\n\n          {/* Sort options */}\n          <select\n            value={sortBy}\n            onChange={(e) => setSortBy(e.target.value as 'name' | 'last_run' | 'success_rate')}\n            className=\"px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md bg-white dark:bg-gray-800 text-gray-900 dark:text-white text-sm\"\n          >\n            <option value=\"last_run\">Last Run</option>\n            <option value=\"name\">Name</option>\n            <option value=\"success_rate\">Success Rate</option>\n          </select>\n\n          {/* Refresh button */}\n          <Button\n            variant=\"outline\"\n            size=\"sm\"\n            onClick={handleRefresh}\n            disabled={loading}\n          >\n            {loading ? 'Refreshing...' : 'Refresh'}\n          </Button>\n        </div>\n      </div>\n\n      {/* Overview metrics */}\n      <div className=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4\">\n        <MetricCard\n          title=\"Total Pipelines\"\n          value={overallStats.totalPipelines.toString()}\n          subtitle={`${overallStats.activePipelines} active`}\n          trend={{\n            value: overallStats.activePipelines > 0 ? '+' : '0',\n            direction: overallStats.activePipelines > 0 ? 'up' : 'neutral'\n          }}\n        />\n        <MetricCard\n          title=\"Average Success Rate\"\n          value={`${overallStats.averageSuccessRate}%`}\n          subtitle=\"Last 30 days\"\n          trend={{\n            value: `${overallStats.averageSuccessRate}%`,\n            direction: overallStats.averageSuccessRate >= 90 ? 'up' : overallStats.averageSuccessRate >= 70 ? 'neutral' : 'down'\n          }}\n        />\n        <MetricCard\n          title=\"Running Pipelines\"\n          value={overallStats.runningPipelines.toString()}\n          subtitle=\"Currently executing\"\n          trend={{\n            value: overallStats.runningPipelines.toString(),\n            direction: overallStats.runningPipelines > 0 ? 'up' : 'neutral'\n          }}\n        />\n        <MetricCard\n          title=\"Total Runs Today\"\n          value=\"--\"\n          subtitle=\"Across all pipelines\"\n          trend={{\n            value: '--',\n            direction: 'neutral'\n          }}\n        />\n      </div>\n\n      {/* Build Time Trend Chart */}\n      <BuildTimeTrendChart \n        pipelines={pipelines}\n        timeRange={30}\n        className=\"mb-6\"\n      />\n\n      {/* Deployment Frequency Chart */}\n      <DeploymentFrequencyChart \n        pipelines={pipelines}\n        timeRange={30}\n        className=\"mb-6\"\n      />\n\n      {/* Test Coverage Widget */}\n      <TestCoverageWidget \n        pipelines={pipelines}\n        timeRange={30}\n        className=\"mb-6\"\n      />\n\n      {/* Real-time Pipeline Execution View */}\n      <PipelineExecutionView \n        pipelineRun={selectedPipeline?.runs?.[0] ? {\n          id: selectedPipeline.runs[0].id,\n          pipeline_id: selectedPipeline.runs[0].pipeline_id,\n          run_number: selectedPipeline.runs[0].run_number,\n          status: selectedPipeline.runs[0].status as any,\n          started_at: selectedPipeline.runs[0].started_at || new Date().toISOString(),\n          finished_at: selectedPipeline.runs[0].finished_at,\n          duration_seconds: selectedPipeline.runs[0].duration_seconds,\n          branch: selectedPipeline.runs[0].branch,\n          commit_sha: selectedPipeline.runs[0].commit_sha,\n          commit_message: selectedPipeline.runs[0].commit_message\n        } : undefined}\n        autoRefresh={true}\n        showSteps={!isMobile}\n        className=\"mb-6\"\n        onExecutionComplete={(run) => {\n          console.log('Pipeline execution completed:', run);\n          // Refresh pipelines data when execution completes\n          fetchPipelines();\n        }}\n        onError={(error) => {\n          console.error('Pipeline execution error:', error);\n          setError(error.message);\n        }}\n      />\n\n      {/* Pipeline list */}\n      <div className=\"bg-white dark:bg-gray-800 rounded-lg border border-gray-200 dark:border-gray-700 overflow-hidden\">\n        <div className=\"px-6 py-4 border-b border-gray-200 dark:border-gray-700\">\n          <h3 className=\"text-lg font-semibold text-gray-900 dark:text-white\">\n            Pipelines ({filteredAndSortedPipelines.length})\n          </h3>\n        </div>\n\n        {filteredAndSortedPipelines.length === 0 ? (\n          <div className=\"px-6 py-12 text-center\">\n            <p className=\"text-gray-500 dark:text-gray-400\">\n              No pipelines found matching the current filters.\n            </p>\n          </div>\n        ) : (\n          <div className=\"divide-y divide-gray-200 dark:divide-gray-700\">\n            {filteredAndSortedPipelines.map((pipeline) => (\n              <div\n                key={pipeline.id}\n                className=\"px-6 py-4 hover:bg-gray-50 dark:hover:bg-gray-700/50 transition-colors cursor-pointer\"\n                onClick={() => setSelectedPipeline(pipeline)}\n              >\n                <div className=\"flex items-center justify-between\">\n                  <div className=\"flex items-center space-x-4 min-w-0 flex-1\">\n                    <StatusIndicator\n                      status={getStatusColor(pipeline.last_run_status)}\n                      size=\"md\"\n                      pulse={pipeline.last_run_status === 'running'}\n                    />\n                    \n                    <div className=\"min-w-0 flex-1\">\n                      <div className=\"flex items-center space-x-2\">\n                        <h4 className=\"text-sm font-medium text-gray-900 dark:text-white truncate\">\n                          {pipeline.name}\n                        </h4>\n                        <span className=\"inline-flex items-center px-2 py-0.5 rounded text-xs font-medium bg-gray-100 dark:bg-gray-700 text-gray-800 dark:text-gray-200\">\n                          {pipeline.pipeline_type.toUpperCase()}\n                        </span>\n                      </div>\n                      \n                      <div className=\"flex items-center space-x-4 mt-1 text-xs text-gray-500 dark:text-gray-400\">\n                        <span>Branch: {pipeline.branch}</span>\n                        <span>•</span>\n                        <span>Success Rate: {Math.round(pipeline.success_rate * 100)}%</span>\n                        <span>•</span>\n                        <span>Runs: {pipeline.total_runs}</span>\n                      </div>\n                    </div>\n                  </div>\n\n                  <div className=\"flex items-center space-x-4 text-sm text-gray-500 dark:text-gray-400\">\n                    <div className=\"text-right\">\n                      <div>Last run: {formatRelativeTime(pipeline.last_run_at)}</div>\n                      {pipeline.average_duration && (\n                        <div className=\"text-xs\">\n                          Avg: {formatDuration(pipeline.average_duration)}\n                        </div>\n                      )}\n                    </div>\n                    \n                    <svg\n                      className=\"w-5 h-5 text-gray-400\"\n                      fill=\"none\"\n                      stroke=\"currentColor\"\n                      viewBox=\"0 0 24 24\"\n                    >\n                      <path\n                        strokeLinecap=\"round\"\n                        strokeLinejoin=\"round\"\n                        strokeWidth={2}\n                        d=\"M9 5l7 7-7 7\"\n                      />\n                    </svg>\n                  </div>\n                </div>\n              </div>\n            ))}\n          </div>\n        )}\n      </div>\n    </div>\n  );\n};\n\nexport default React.memo(PipelineHealthDashboard); "],"names":["PipelineHealthDashboard","projectId","refreshInterval","className","pipelines","setPipelines","useState","loading","setLoading","error","setError","lastRefresh","setLastRefresh","Date","selectedPipeline","setSelectedPipeline","filterStatus","setFilterStatus","sortBy","setSortBy","isMobile","isTablet","useResponsive","fetchPipelines","useCallback","params","URLSearchParams","append","toString","response","fetch","headers","localStorage","getItem","ok","Error","statusText","data","json","err","message","useEffect","interval","setInterval","clearInterval","filteredAndSortedPipelines","useMemo","filtered","filter","pipeline","last_run_status","sort","a","b","name","localeCompare","last_run_at","getTime","success_rate","overallStats","length","totalPipelines","activePipelines","averageSuccessRate","runningPipelines","p","is_active","reduce","sum","Math","round","formatDuration","seconds","minutes","floor","remainingSeconds","formatRelativeTime","dateString","date","now","diffMs","diffMinutes","diffHours","diffDays","getStatusColor","status","handleRefresh","div","Array","map","_","i","LoadingSkeleton","variant","height","h3","Button","size","onClick","disabled","h2","toISOString","select","value","onChange","e","target","option","MetricCard","title","subtitle","trend","direction","BuildTimeTrendChart","timeRange","DeploymentFrequencyChart","TestCoverageWidget","PipelineExecutionView","pipelineRun","runs","id","pipeline_id","run_number","started_at","finished_at","duration_seconds","branch","commit_sha","commit_message","undefined","autoRefresh","showSteps","onExecutionComplete","run","console","log","onError","StatusIndicator","pulse","h4","span","pipeline_type","toUpperCase","total_runs","average_duration","svg","fill","stroke","viewBox","path","strokeLinecap","strokeLinejoin","strokeWidth","d","React","memo"],"mappings":"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"}