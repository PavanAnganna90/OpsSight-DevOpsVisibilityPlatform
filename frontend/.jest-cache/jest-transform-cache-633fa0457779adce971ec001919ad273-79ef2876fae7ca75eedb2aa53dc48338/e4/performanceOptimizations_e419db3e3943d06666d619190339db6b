94231e592cd060defe491261b556defe
/**
 * Performance Optimizations for Theme Transitions
 * 
 * Advanced performance optimization utilities for smooth theme transitions
 * including GPU acceleration, batched DOM updates, intelligent caching,
 * and performance monitoring.
 * 
 * Features:
 * - GPU acceleration with transform3d and will-change
 * - Batched DOM updates with requestAnimationFrame
 * - Intelligent theme caching and preloading
 * - Performance monitoring and metrics
 * - Memory management and cleanup
 * - Frame rate optimization
 */ // Performance monitoring interface
"use strict";
Object.defineProperty(exports, "__esModule", {
    value: true
});
function _export(target, all) {
    for(var name in all)Object.defineProperty(target, name, {
        enumerable: true,
        get: all[name]
    });
}
_export(exports, {
    createOptimizedTransition: function() {
        return createOptimizedTransition;
    },
    default: function() {
        return _default;
    },
    performanceOptimizer: function() {
        return performanceOptimizer;
    },
    shallowEqual: function() {
        return shallowEqual;
    },
    useDebouncedValue: function() {
        return useDebouncedValue;
    },
    useExpensiveMemo: function() {
        return useExpensiveMemo;
    },
    useIntersectionObserver: function() {
        return useIntersectionObserver;
    },
    usePerformanceOptimization: function() {
        return usePerformanceOptimization;
    },
    useRenderPerformance: function() {
        return useRenderPerformance;
    },
    useStableArray: function() {
        return useStableArray;
    },
    useStableCallback: function() {
        return useStableCallback;
    },
    useStableObject: function() {
        return useStableObject;
    },
    useVirtualization: function() {
        return useVirtualization;
    },
    withMemo: function() {
        return withMemo;
    },
    withPerformanceMonitoring: function() {
        return withPerformanceMonitoring;
    }
});
const _react = /*#__PURE__*/ _interop_require_wildcard(require("react"));
function _getRequireWildcardCache(nodeInterop) {
    if (typeof WeakMap !== "function") return null;
    var cacheBabelInterop = new WeakMap();
    var cacheNodeInterop = new WeakMap();
    return (_getRequireWildcardCache = function(nodeInterop) {
        return nodeInterop ? cacheNodeInterop : cacheBabelInterop;
    })(nodeInterop);
}
function _interop_require_wildcard(obj, nodeInterop) {
    if (!nodeInterop && obj && obj.__esModule) {
        return obj;
    }
    if (obj === null || typeof obj !== "object" && typeof obj !== "function") {
        return {
            default: obj
        };
    }
    var cache = _getRequireWildcardCache(nodeInterop);
    if (cache && cache.has(obj)) {
        return cache.get(obj);
    }
    var newObj = {
        __proto__: null
    };
    var hasPropertyDescriptor = Object.defineProperty && Object.getOwnPropertyDescriptor;
    for(var key in obj){
        if (key !== "default" && Object.prototype.hasOwnProperty.call(obj, key)) {
            var desc = hasPropertyDescriptor ? Object.getOwnPropertyDescriptor(obj, key) : null;
            if (desc && (desc.get || desc.set)) {
                Object.defineProperty(newObj, key, desc);
            } else {
                newObj[key] = obj[key];
            }
        }
    }
    newObj.default = obj;
    if (cache) {
        cache.set(obj, newObj);
    }
    return newObj;
}
// Default performance configuration
const DEFAULT_PERFORMANCE_CONFIG = {
    enableGPUAcceleration: true,
    batchDOMUpdates: true,
    enableCaching: true,
    maxCacheSize: 50,
    targetFrameRate: 60,
    enableMetrics: false,
    memoryThreshold: 100
};
// Performance optimization manager
class PerformanceOptimizer {
    /**
   * Update performance configuration
   */ updateConfig(newConfig) {
        this.config = {
            ...this.config,
            ...newConfig
        };
        if (this.config.enableMetrics && !this.frameRateMonitor) {
            this.startFrameRateMonitoring();
        } else if (!this.config.enableMetrics && this.frameRateMonitor) {
            this.stopFrameRateMonitoring();
        }
    }
    /**
   * Start frame rate monitoring
   */ startFrameRateMonitoring() {
        const measureFrameRate = (timestamp)=>{
            if (this.lastFrameTime === 0) {
                this.lastFrameTime = timestamp;
            }
            const deltaTime = timestamp - this.lastFrameTime;
            this.frameCount++;
            if (deltaTime >= 1000) {
                this.currentFrameRate = Math.round(this.frameCount * 1000 / deltaTime);
                this.frameCount = 0;
                this.lastFrameTime = timestamp;
            }
            if (this.config.enableMetrics) {
                this.frameRateMonitor = requestAnimationFrame(measureFrameRate);
            }
        };
        this.frameRateMonitor = requestAnimationFrame(measureFrameRate);
    }
    /**
   * Stop frame rate monitoring
   */ stopFrameRateMonitoring() {
        if (this.frameRateMonitor) {
            cancelAnimationFrame(this.frameRateMonitor);
            this.frameRateMonitor = null;
        }
    }
    /**
   * Generate cache key for theme state
   */ generateCacheKey(themeName, colorMode, contextualTheme) {
        return `${themeName}-${colorMode}-${contextualTheme}`;
    }
    /**
   * Cache theme variables
   */ cacheThemeVariables(themeName, colorMode, contextualTheme, variables) {
        if (!this.config.enableCaching) return;
        const key = this.generateCacheKey(themeName, colorMode, contextualTheme);
        // Clean cache if it exceeds max size
        if (this.themeCache.size >= this.config.maxCacheSize) {
            this.cleanCache();
        }
        this.themeCache.set(key, {
            key,
            cssVariables: {
                ...variables
            },
            timestamp: Date.now(),
            accessCount: 1
        });
    }
    /**
   * Retrieve cached theme variables
   */ getCachedThemeVariables(themeName, colorMode, contextualTheme) {
        if (!this.config.enableCaching) return null;
        const key = this.generateCacheKey(themeName, colorMode, contextualTheme);
        const cached = this.themeCache.get(key);
        if (cached) {
            cached.accessCount++;
            cached.timestamp = Date.now();
            return {
                ...cached.cssVariables
            };
        }
        return null;
    }
    /**
   * Clean cache using LRU strategy
   */ cleanCache() {
        const entries = Array.from(this.themeCache.values());
        // Sort by access count and timestamp (LRU)
        entries.sort((a, b)=>{
            if (a.accessCount !== b.accessCount) {
                return a.accessCount - b.accessCount;
            }
            return a.timestamp - b.timestamp;
        });
        // Remove oldest 25% of entries
        const toRemove = Math.floor(entries.length * 0.25);
        for(let i = 0; i < toRemove; i++){
            this.themeCache.delete(entries[i].key);
        }
    }
    /**
   * Apply GPU acceleration to element
   */ applyGPUAcceleration(element) {
        if (!element || !element.style || !this.config.enableGPUAcceleration) return;
        // Force GPU layer creation
        element.style.transform = element.style.transform || 'translate3d(0, 0, 0)';
        element.style.backfaceVisibility = 'hidden';
        element.style.perspective = '1000px';
        // Optimize for animations
        element.style.willChange = 'transform, opacity, background-color, color, border-color, box-shadow';
    }
    /**
   * Remove GPU acceleration from element
   */ removeGPUAcceleration(element) {
        if (!element || !element.style) return;
        element.style.transform = '';
        element.style.backfaceVisibility = '';
        element.style.perspective = '';
        element.style.willChange = '';
    }
    /**
   * Queue DOM update for batching
   */ queueDOMUpdate(element, properties, priority = 'medium') {
        if (!element || !element.style) return;
        if (!this.config.batchDOMUpdates) {
            // Apply immediately if batching is disabled
            Object.entries(properties).forEach(([prop, value])=>{
                element.style.setProperty(prop, value);
            });
            return;
        }
        this.domUpdateQueue.push({
            element,
            properties,
            priority
        });
        if (!this.isProcessingUpdates) {
            this.processDOMUpdates();
        }
    }
    /**
   * Process batched DOM updates
   */ processDOMUpdates() {
        if (this.domUpdateQueue.length === 0) {
            this.isProcessingUpdates = false;
            return;
        }
        this.isProcessingUpdates = true;
        requestAnimationFrame(()=>{
            // Sort by priority
            this.domUpdateQueue.sort((a, b)=>{
                const priorityOrder = {
                    high: 3,
                    medium: 2,
                    low: 1
                };
                return priorityOrder[b.priority] - priorityOrder[a.priority];
            });
            // Process updates in batches to avoid blocking
            const batchSize = Math.min(10, this.domUpdateQueue.length);
            const batch = this.domUpdateQueue.splice(0, batchSize);
            batch.forEach(({ element, properties })=>{
                Object.entries(properties).forEach(([prop, value])=>{
                    element.style.setProperty(prop, value);
                });
            });
            // Continue processing if there are more updates
            if (this.domUpdateQueue.length > 0) {
                this.processDOMUpdates();
            } else {
                this.isProcessingUpdates = false;
            }
        });
    }
    /**
   * Preload theme resources
   */ preloadThemeResources(themes) {
        return new Promise((resolve)=>{
            // Simulate theme resource preloading
            // In a real implementation, this might preload CSS files, images, etc.
            const preloadPromises = themes.map((theme)=>{
                return new Promise((themeResolve)=>{
                    // Simulate async resource loading
                    setTimeout(()=>{
                        console.log(`Preloaded theme: ${theme}`);
                        themeResolve();
                    }, 10);
                });
            });
            Promise.all(preloadPromises).then(()=>resolve());
        });
    }
    /**
   * Optimize element for transitions
   */ optimizeElementForTransition(element) {
        if (!element || !element.style) return;
        // Apply GPU acceleration
        this.applyGPUAcceleration(element);
        // Set up optimal CSS properties for transitions
        element.style.contain = 'layout style paint';
        element.style.isolation = 'isolate';
        // Optimize for specific transition properties
        const transitionProperties = [
            'background-color',
            'color',
            'border-color',
            'box-shadow',
            'opacity',
            'transform'
        ];
        element.style.transition = transitionProperties.map((prop)=>`${prop} var(--theme-transition-duration, 300ms) var(--theme-transition-timing, ease)`).join(', ');
    }
    /**
   * Clean up element optimizations
   */ cleanupElementOptimizations(element) {
        if (!element || !element.style) return;
        this.removeGPUAcceleration(element);
        element.style.contain = '';
        element.style.isolation = '';
        element.style.transition = '';
    }
    /**
   * Monitor memory usage
   */ getMemoryUsage() {
        if ('memory' in performance) {
            const memory = performance.memory;
            return Math.round(memory.usedJSHeapSize / 1024 / 1024); // MB
        }
        return 0;
    }
    /**
   * Check if memory usage is within threshold
   */ isMemoryUsageHealthy() {
        const usage = this.getMemoryUsage();
        return usage < this.config.memoryThreshold;
    }
    /**
   * Force garbage collection if available
   */ forceGarbageCollection() {
        if ('gc' in window && typeof window.gc === 'function') {
            window.gc();
        }
    }
    /**
   * Record performance metrics
   */ recordMetrics(transitionDuration, domUpdates) {
        if (!this.config.enableMetrics) return;
        const metrics = {
            transitionDuration,
            frameRate: this.currentFrameRate,
            memoryUsage: this.getMemoryUsage(),
            domUpdates,
            cacheHits: this.getCacheHitRate().hits,
            cacheMisses: this.getCacheHitRate().misses,
            timestamp: Date.now()
        };
        this.metrics.push(metrics);
        // Keep only last 100 metrics
        if (this.metrics.length > 100) {
            this.metrics = this.metrics.slice(-100);
        }
    }
    /**
   * Get cache hit rate
   */ getCacheHitRate() {
        const entries = Array.from(this.themeCache.values());
        const hits = entries.reduce((sum, entry)=>sum + entry.accessCount, 0);
        const misses = Math.max(0, hits - entries.length);
        return {
            hits,
            misses
        };
    }
    /**
   * Get performance report
   */ getPerformanceReport() {
        if (this.metrics.length === 0) {
            return {
                averageTransitionDuration: 0,
                averageFrameRate: 0,
                averageMemoryUsage: 0,
                cacheEfficiency: 0,
                totalTransitions: 0
            };
        }
        const avgTransitionDuration = this.metrics.reduce((sum, m)=>sum + m.transitionDuration, 0) / this.metrics.length;
        const avgFrameRate = this.metrics.reduce((sum, m)=>sum + m.frameRate, 0) / this.metrics.length;
        const avgMemoryUsage = this.metrics.reduce((sum, m)=>sum + m.memoryUsage, 0) / this.metrics.length;
        const totalHits = this.metrics.reduce((sum, m)=>sum + m.cacheHits, 0);
        const totalMisses = this.metrics.reduce((sum, m)=>sum + m.cacheMisses, 0);
        const cacheEfficiency = totalHits + totalMisses > 0 ? totalHits / (totalHits + totalMisses) * 100 : 0;
        return {
            averageTransitionDuration: Math.round(avgTransitionDuration),
            averageFrameRate: Math.round(avgFrameRate),
            averageMemoryUsage: Math.round(avgMemoryUsage),
            cacheEfficiency: Math.round(cacheEfficiency),
            totalTransitions: this.metrics.length
        };
    }
    /**
   * Clear all caches and reset metrics
   */ clearCaches() {
        this.themeCache.clear();
        this.metrics = [];
        this.domUpdateQueue = [];
    }
    /**
   * Cleanup and destroy
   */ destroy() {
        this.stopFrameRateMonitoring();
        this.clearCaches();
        this.isProcessingUpdates = false;
    }
    constructor(){
        this.config = DEFAULT_PERFORMANCE_CONFIG;
        this.themeCache = new Map();
        this.domUpdateQueue = [];
        this.isProcessingUpdates = false;
        this.metrics = [];
        this.frameRateMonitor = null;
        this.lastFrameTime = 0;
        this.frameCount = 0;
        this.currentFrameRate = 0;
    }
}
const performanceOptimizer = new PerformanceOptimizer();
function usePerformanceOptimization() {
    const updateConfig = (config)=>{
        performanceOptimizer.updateConfig(config);
    };
    const optimizeElement = (element)=>{
        performanceOptimizer.optimizeElementForTransition(element);
    };
    const cleanupElement = (element)=>{
        performanceOptimizer.cleanupElementOptimizations(element);
    };
    const queueUpdate = (element, properties, priority)=>{
        performanceOptimizer.queueDOMUpdate(element, properties, priority);
    };
    const getReport = ()=>performanceOptimizer.getPerformanceReport();
    const isHealthy = ()=>performanceOptimizer.isMemoryUsageHealthy();
    return {
        updateConfig,
        optimizeElement,
        cleanupElement,
        queueUpdate,
        getReport,
        isHealthy
    };
}
function withPerformanceMonitoring(fn, name) {
    return async (...args)=>{
        const startTime = performance.now();
        let domUpdates = 0;
        // Monitor DOM mutations during execution
        const observer = new MutationObserver((mutations)=>{
            domUpdates += mutations.length;
        });
        observer.observe(document.body, {
            attributes: true,
            childList: true,
            subtree: true,
            attributeFilter: [
                'style',
                'class'
            ]
        });
        try {
            const result = await fn(...args);
            const endTime = performance.now();
            const duration = endTime - startTime;
            observer.disconnect();
            performanceOptimizer.recordMetrics(duration, domUpdates);
            console.log(`[Performance] ${name}: ${duration.toFixed(2)}ms, ${domUpdates} DOM updates`);
            return result;
        } catch (error) {
            observer.disconnect();
            throw error;
        }
    };
}
function createOptimizedTransition(element, fromState, toState, duration = 300) {
    return new Promise((resolve)=>{
        // Optimize element for transition
        performanceOptimizer.optimizeElementForTransition(element);
        // Apply initial state
        Object.entries(fromState).forEach(([prop, value])=>{
            // Convert camelCase to kebab-case for CSS properties
            const cssProperty = prop.replace(/([A-Z])/g, '-$1').toLowerCase();
            element.style.setProperty(cssProperty, value);
        });
        // Force reflow
        element.offsetHeight;
        // Apply final state
        Object.entries(toState).forEach(([prop, value])=>{
            performanceOptimizer.queueDOMUpdate(element, {
                [prop]: value
            }, 'high');
        });
        // Cleanup after transition
        setTimeout(()=>{
            performanceOptimizer.cleanupElementOptimizations(element);
            resolve();
        }, duration + 50); // Small buffer for completion
    });
}
const useExpensiveMemo = (factory, deps)=>{
    return (0, _react.useMemo)(factory, deps);
};
const useStableCallback = (callback, deps)=>{
    return (0, _react.useCallback)(callback, deps);
};
const useDebouncedValue = (value, delay)=>{
    const [debouncedValue, setDebouncedValue] = _react.default.useState(value);
    (0, _react.useEffect)(()=>{
        const handler = setTimeout(()=>{
            setDebouncedValue(value);
        }, delay);
        return ()=>{
            clearTimeout(handler);
        };
    }, [
        value,
        delay
    ]);
    return debouncedValue;
};
const withMemo = (Component, areEqual)=>{
    return _react.default.memo(Component, areEqual);
};
const shallowEqual = (prevProps, nextProps)=>{
    const prevKeys = Object.keys(prevProps);
    const nextKeys = Object.keys(nextProps);
    if (prevKeys.length !== nextKeys.length) {
        return false;
    }
    for (const key of prevKeys){
        if (prevProps[key] !== nextProps[key]) {
            return false;
        }
    }
    return true;
};
const useIntersectionObserver = (options = {})=>{
    const [isIntersecting, setIsIntersecting] = _react.default.useState(false);
    const ref = (0, _react.useRef)(null);
    (0, _react.useEffect)(()=>{
        const element = ref.current;
        if (!element) return;
        const observer = new IntersectionObserver(([entry])=>{
            setIsIntersecting(entry.isIntersecting);
        }, options);
        observer.observe(element);
        return ()=>{
            observer.unobserve(element);
        };
    }, [
        options
    ]);
    return [
        ref,
        isIntersecting
    ];
};
const useStableObject = (obj)=>{
    return (0, _react.useMemo)(()=>obj, [
        JSON.stringify(obj)
    ]);
};
const useStableArray = (arr)=>{
    return (0, _react.useMemo)(()=>arr, [
        JSON.stringify(arr)
    ]);
};
const useRenderPerformance = (componentName, enabled = process.env.NODE_ENV === 'development')=>{
    const renderStartTime = (0, _react.useRef)();
    (0, _react.useEffect)(()=>{
        if (!enabled) return;
        renderStartTime.current = performance.now();
    });
    (0, _react.useEffect)(()=>{
        if (!enabled || !renderStartTime.current) return;
        const renderTime = performance.now() - renderStartTime.current;
        if (renderTime > 16) {
            console.warn(`ðŸŒ Slow render detected in ${componentName}: ${renderTime.toFixed(2)}ms`);
        }
    });
};
const useVirtualization = (items, itemHeight, containerHeight)=>{
    const [scrollTop, setScrollTop] = _react.default.useState(0);
    const startIndex = Math.floor(scrollTop / itemHeight);
    const endIndex = Math.min(startIndex + Math.ceil(containerHeight / itemHeight) + 1, items.length);
    const visibleItems = (0, _react.useMemo)(()=>{
        return items.slice(startIndex, endIndex).map((item, index)=>({
                item,
                index: startIndex + index,
                offsetY: (startIndex + index) * itemHeight
            }));
    }, [
        items,
        startIndex,
        endIndex,
        itemHeight
    ]);
    const totalHeight = items.length * itemHeight;
    const onScroll = (0, _react.useCallback)((e)=>{
        setScrollTop(e.currentTarget.scrollTop);
    }, []);
    return {
        visibleItems,
        totalHeight,
        onScroll,
        containerStyle: {
            height: containerHeight,
            overflow: 'auto'
        }
    };
};
const _default = performanceOptimizer;

//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi9Vc2Vycy9wYXZhbi9EZXNrdG9wL0Rldm9wcy1hcHAtZGV2LWN1cnNvci9mcm9udGVuZC9zcmMvdXRpbHMvcGVyZm9ybWFuY2VPcHRpbWl6YXRpb25zLnRzIl0sInNvdXJjZXNDb250ZW50IjpbIi8qKlxuICogUGVyZm9ybWFuY2UgT3B0aW1pemF0aW9ucyBmb3IgVGhlbWUgVHJhbnNpdGlvbnNcbiAqIFxuICogQWR2YW5jZWQgcGVyZm9ybWFuY2Ugb3B0aW1pemF0aW9uIHV0aWxpdGllcyBmb3Igc21vb3RoIHRoZW1lIHRyYW5zaXRpb25zXG4gKiBpbmNsdWRpbmcgR1BVIGFjY2VsZXJhdGlvbiwgYmF0Y2hlZCBET00gdXBkYXRlcywgaW50ZWxsaWdlbnQgY2FjaGluZyxcbiAqIGFuZCBwZXJmb3JtYW5jZSBtb25pdG9yaW5nLlxuICogXG4gKiBGZWF0dXJlczpcbiAqIC0gR1BVIGFjY2VsZXJhdGlvbiB3aXRoIHRyYW5zZm9ybTNkIGFuZCB3aWxsLWNoYW5nZVxuICogLSBCYXRjaGVkIERPTSB1cGRhdGVzIHdpdGggcmVxdWVzdEFuaW1hdGlvbkZyYW1lXG4gKiAtIEludGVsbGlnZW50IHRoZW1lIGNhY2hpbmcgYW5kIHByZWxvYWRpbmdcbiAqIC0gUGVyZm9ybWFuY2UgbW9uaXRvcmluZyBhbmQgbWV0cmljc1xuICogLSBNZW1vcnkgbWFuYWdlbWVudCBhbmQgY2xlYW51cFxuICogLSBGcmFtZSByYXRlIG9wdGltaXphdGlvblxuICovXG5cbi8vIFBlcmZvcm1hbmNlIG1vbml0b3JpbmcgaW50ZXJmYWNlXG5leHBvcnQgaW50ZXJmYWNlIFBlcmZvcm1hbmNlTWV0cmljcyB7XG4gIHRyYW5zaXRpb25EdXJhdGlvbjogbnVtYmVyO1xuICBmcmFtZVJhdGU6IG51bWJlcjtcbiAgbWVtb3J5VXNhZ2U6IG51bWJlcjtcbiAgZG9tVXBkYXRlczogbnVtYmVyO1xuICBjYWNoZUhpdHM6IG51bWJlcjtcbiAgY2FjaGVNaXNzZXM6IG51bWJlcjtcbiAgdGltZXN0YW1wOiBudW1iZXI7XG59XG5cbi8vIFBlcmZvcm1hbmNlIGNvbmZpZ3VyYXRpb25cbmV4cG9ydCBpbnRlcmZhY2UgUGVyZm9ybWFuY2VDb25maWcge1xuICBlbmFibGVHUFVBY2NlbGVyYXRpb246IGJvb2xlYW47XG4gIGJhdGNoRE9NVXBkYXRlczogYm9vbGVhbjtcbiAgZW5hYmxlQ2FjaGluZzogYm9vbGVhbjtcbiAgbWF4Q2FjaGVTaXplOiBudW1iZXI7XG4gIHRhcmdldEZyYW1lUmF0ZTogbnVtYmVyO1xuICBlbmFibGVNZXRyaWNzOiBib29sZWFuO1xuICBtZW1vcnlUaHJlc2hvbGQ6IG51bWJlcjsgLy8gTUJcbn1cblxuLy8gRGVmYXVsdCBwZXJmb3JtYW5jZSBjb25maWd1cmF0aW9uXG5jb25zdCBERUZBVUxUX1BFUkZPUk1BTkNFX0NPTkZJRzogUGVyZm9ybWFuY2VDb25maWcgPSB7XG4gIGVuYWJsZUdQVUFjY2VsZXJhdGlvbjogdHJ1ZSxcbiAgYmF0Y2hET01VcGRhdGVzOiB0cnVlLFxuICBlbmFibGVDYWNoaW5nOiB0cnVlLFxuICBtYXhDYWNoZVNpemU6IDUwLCAvLyBOdW1iZXIgb2YgY2FjaGVkIHRoZW1lIHN0YXRlc1xuICB0YXJnZXRGcmFtZVJhdGU6IDYwLFxuICBlbmFibGVNZXRyaWNzOiBmYWxzZSxcbiAgbWVtb3J5VGhyZXNob2xkOiAxMDAsIC8vIE1CXG59O1xuXG4vLyBUaGVtZSBjYWNoZSBlbnRyeVxuaW50ZXJmYWNlIFRoZW1lQ2FjaGVFbnRyeSB7XG4gIGtleTogc3RyaW5nO1xuICBjc3NWYXJpYWJsZXM6IFJlY29yZDxzdHJpbmcsIHN0cmluZz47XG4gIHRpbWVzdGFtcDogbnVtYmVyO1xuICBhY2Nlc3NDb3VudDogbnVtYmVyO1xufVxuXG4vLyBET00gdXBkYXRlIGJhdGNoXG5pbnRlcmZhY2UgRE9NVXBkYXRlQmF0Y2gge1xuICBlbGVtZW50OiBIVE1MRWxlbWVudDtcbiAgcHJvcGVydGllczogUmVjb3JkPHN0cmluZywgc3RyaW5nPjtcbiAgcHJpb3JpdHk6ICdoaWdoJyB8ICdtZWRpdW0nIHwgJ2xvdyc7XG59XG5cbi8vIFBlcmZvcm1hbmNlIG9wdGltaXphdGlvbiBtYW5hZ2VyXG5jbGFzcyBQZXJmb3JtYW5jZU9wdGltaXplciB7XG4gIHByaXZhdGUgY29uZmlnOiBQZXJmb3JtYW5jZUNvbmZpZyA9IERFRkFVTFRfUEVSRk9STUFOQ0VfQ09ORklHO1xuICBwcml2YXRlIHRoZW1lQ2FjaGUgPSBuZXcgTWFwPHN0cmluZywgVGhlbWVDYWNoZUVudHJ5PigpO1xuICBwcml2YXRlIGRvbVVwZGF0ZVF1ZXVlOiBET01VcGRhdGVCYXRjaFtdID0gW107XG4gIHByaXZhdGUgaXNQcm9jZXNzaW5nVXBkYXRlcyA9IGZhbHNlO1xuICBwcml2YXRlIG1ldHJpY3M6IFBlcmZvcm1hbmNlTWV0cmljc1tdID0gW107XG4gIHByaXZhdGUgZnJhbWVSYXRlTW9uaXRvcjogbnVtYmVyIHwgbnVsbCA9IG51bGw7XG4gIHByaXZhdGUgbGFzdEZyYW1lVGltZSA9IDA7XG4gIHByaXZhdGUgZnJhbWVDb3VudCA9IDA7XG4gIHByaXZhdGUgY3VycmVudEZyYW1lUmF0ZSA9IDA7XG5cbiAgLyoqXG4gICAqIFVwZGF0ZSBwZXJmb3JtYW5jZSBjb25maWd1cmF0aW9uXG4gICAqL1xuICBwdWJsaWMgdXBkYXRlQ29uZmlnKG5ld0NvbmZpZzogUGFydGlhbDxQZXJmb3JtYW5jZUNvbmZpZz4pOiB2b2lkIHtcbiAgICB0aGlzLmNvbmZpZyA9IHsgLi4udGhpcy5jb25maWcsIC4uLm5ld0NvbmZpZyB9O1xuICAgIFxuICAgIGlmICh0aGlzLmNvbmZpZy5lbmFibGVNZXRyaWNzICYmICF0aGlzLmZyYW1lUmF0ZU1vbml0b3IpIHtcbiAgICAgIHRoaXMuc3RhcnRGcmFtZVJhdGVNb25pdG9yaW5nKCk7XG4gICAgfSBlbHNlIGlmICghdGhpcy5jb25maWcuZW5hYmxlTWV0cmljcyAmJiB0aGlzLmZyYW1lUmF0ZU1vbml0b3IpIHtcbiAgICAgIHRoaXMuc3RvcEZyYW1lUmF0ZU1vbml0b3JpbmcoKTtcbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogU3RhcnQgZnJhbWUgcmF0ZSBtb25pdG9yaW5nXG4gICAqL1xuICBwcml2YXRlIHN0YXJ0RnJhbWVSYXRlTW9uaXRvcmluZygpOiB2b2lkIHtcbiAgICBjb25zdCBtZWFzdXJlRnJhbWVSYXRlID0gKHRpbWVzdGFtcDogbnVtYmVyKSA9PiB7XG4gICAgICBpZiAodGhpcy5sYXN0RnJhbWVUaW1lID09PSAwKSB7XG4gICAgICAgIHRoaXMubGFzdEZyYW1lVGltZSA9IHRpbWVzdGFtcDtcbiAgICAgIH1cblxuICAgICAgY29uc3QgZGVsdGFUaW1lID0gdGltZXN0YW1wIC0gdGhpcy5sYXN0RnJhbWVUaW1lO1xuICAgICAgdGhpcy5mcmFtZUNvdW50Kys7XG5cbiAgICAgIGlmIChkZWx0YVRpbWUgPj0gMTAwMCkgeyAvLyBVcGRhdGUgZXZlcnkgc2Vjb25kXG4gICAgICAgIHRoaXMuY3VycmVudEZyYW1lUmF0ZSA9IE1hdGgucm91bmQoKHRoaXMuZnJhbWVDb3VudCAqIDEwMDApIC8gZGVsdGFUaW1lKTtcbiAgICAgICAgdGhpcy5mcmFtZUNvdW50ID0gMDtcbiAgICAgICAgdGhpcy5sYXN0RnJhbWVUaW1lID0gdGltZXN0YW1wO1xuICAgICAgfVxuXG4gICAgICBpZiAodGhpcy5jb25maWcuZW5hYmxlTWV0cmljcykge1xuICAgICAgICB0aGlzLmZyYW1lUmF0ZU1vbml0b3IgPSByZXF1ZXN0QW5pbWF0aW9uRnJhbWUobWVhc3VyZUZyYW1lUmF0ZSk7XG4gICAgICB9XG4gICAgfTtcblxuICAgIHRoaXMuZnJhbWVSYXRlTW9uaXRvciA9IHJlcXVlc3RBbmltYXRpb25GcmFtZShtZWFzdXJlRnJhbWVSYXRlKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBTdG9wIGZyYW1lIHJhdGUgbW9uaXRvcmluZ1xuICAgKi9cbiAgcHJpdmF0ZSBzdG9wRnJhbWVSYXRlTW9uaXRvcmluZygpOiB2b2lkIHtcbiAgICBpZiAodGhpcy5mcmFtZVJhdGVNb25pdG9yKSB7XG4gICAgICBjYW5jZWxBbmltYXRpb25GcmFtZSh0aGlzLmZyYW1lUmF0ZU1vbml0b3IpO1xuICAgICAgdGhpcy5mcmFtZVJhdGVNb25pdG9yID0gbnVsbDtcbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogR2VuZXJhdGUgY2FjaGUga2V5IGZvciB0aGVtZSBzdGF0ZVxuICAgKi9cbiAgcHJpdmF0ZSBnZW5lcmF0ZUNhY2hlS2V5KHRoZW1lTmFtZTogc3RyaW5nLCBjb2xvck1vZGU6IHN0cmluZywgY29udGV4dHVhbFRoZW1lOiBzdHJpbmcpOiBzdHJpbmcge1xuICAgIHJldHVybiBgJHt0aGVtZU5hbWV9LSR7Y29sb3JNb2RlfS0ke2NvbnRleHR1YWxUaGVtZX1gO1xuICB9XG5cbiAgLyoqXG4gICAqIENhY2hlIHRoZW1lIHZhcmlhYmxlc1xuICAgKi9cbiAgcHVibGljIGNhY2hlVGhlbWVWYXJpYWJsZXMoXG4gICAgdGhlbWVOYW1lOiBzdHJpbmcsIFxuICAgIGNvbG9yTW9kZTogc3RyaW5nLCBcbiAgICBjb250ZXh0dWFsVGhlbWU6IHN0cmluZywgXG4gICAgdmFyaWFibGVzOiBSZWNvcmQ8c3RyaW5nLCBzdHJpbmc+XG4gICk6IHZvaWQge1xuICAgIGlmICghdGhpcy5jb25maWcuZW5hYmxlQ2FjaGluZykgcmV0dXJuO1xuXG4gICAgY29uc3Qga2V5ID0gdGhpcy5nZW5lcmF0ZUNhY2hlS2V5KHRoZW1lTmFtZSwgY29sb3JNb2RlLCBjb250ZXh0dWFsVGhlbWUpO1xuICAgIFxuICAgIC8vIENsZWFuIGNhY2hlIGlmIGl0IGV4Y2VlZHMgbWF4IHNpemVcbiAgICBpZiAodGhpcy50aGVtZUNhY2hlLnNpemUgPj0gdGhpcy5jb25maWcubWF4Q2FjaGVTaXplKSB7XG4gICAgICB0aGlzLmNsZWFuQ2FjaGUoKTtcbiAgICB9XG5cbiAgICB0aGlzLnRoZW1lQ2FjaGUuc2V0KGtleSwge1xuICAgICAga2V5LFxuICAgICAgY3NzVmFyaWFibGVzOiB7IC4uLnZhcmlhYmxlcyB9LFxuICAgICAgdGltZXN0YW1wOiBEYXRlLm5vdygpLFxuICAgICAgYWNjZXNzQ291bnQ6IDEsXG4gICAgfSk7XG4gIH1cblxuICAvKipcbiAgICogUmV0cmlldmUgY2FjaGVkIHRoZW1lIHZhcmlhYmxlc1xuICAgKi9cbiAgcHVibGljIGdldENhY2hlZFRoZW1lVmFyaWFibGVzKFxuICAgIHRoZW1lTmFtZTogc3RyaW5nLCBcbiAgICBjb2xvck1vZGU6IHN0cmluZywgXG4gICAgY29udGV4dHVhbFRoZW1lOiBzdHJpbmdcbiAgKTogUmVjb3JkPHN0cmluZywgc3RyaW5nPiB8IG51bGwge1xuICAgIGlmICghdGhpcy5jb25maWcuZW5hYmxlQ2FjaGluZykgcmV0dXJuIG51bGw7XG5cbiAgICBjb25zdCBrZXkgPSB0aGlzLmdlbmVyYXRlQ2FjaGVLZXkodGhlbWVOYW1lLCBjb2xvck1vZGUsIGNvbnRleHR1YWxUaGVtZSk7XG4gICAgY29uc3QgY2FjaGVkID0gdGhpcy50aGVtZUNhY2hlLmdldChrZXkpO1xuXG4gICAgaWYgKGNhY2hlZCkge1xuICAgICAgY2FjaGVkLmFjY2Vzc0NvdW50Kys7XG4gICAgICBjYWNoZWQudGltZXN0YW1wID0gRGF0ZS5ub3coKTtcbiAgICAgIHJldHVybiB7IC4uLmNhY2hlZC5jc3NWYXJpYWJsZXMgfTtcbiAgICB9XG5cbiAgICByZXR1cm4gbnVsbDtcbiAgfVxuXG4gIC8qKlxuICAgKiBDbGVhbiBjYWNoZSB1c2luZyBMUlUgc3RyYXRlZ3lcbiAgICovXG4gIHByaXZhdGUgY2xlYW5DYWNoZSgpOiB2b2lkIHtcbiAgICBjb25zdCBlbnRyaWVzID0gQXJyYXkuZnJvbSh0aGlzLnRoZW1lQ2FjaGUudmFsdWVzKCkpO1xuICAgIFxuICAgIC8vIFNvcnQgYnkgYWNjZXNzIGNvdW50IGFuZCB0aW1lc3RhbXAgKExSVSlcbiAgICBlbnRyaWVzLnNvcnQoKGEsIGIpID0+IHtcbiAgICAgIGlmIChhLmFjY2Vzc0NvdW50ICE9PSBiLmFjY2Vzc0NvdW50KSB7XG4gICAgICAgIHJldHVybiBhLmFjY2Vzc0NvdW50IC0gYi5hY2Nlc3NDb3VudDtcbiAgICAgIH1cbiAgICAgIHJldHVybiBhLnRpbWVzdGFtcCAtIGIudGltZXN0YW1wO1xuICAgIH0pO1xuXG4gICAgLy8gUmVtb3ZlIG9sZGVzdCAyNSUgb2YgZW50cmllc1xuICAgIGNvbnN0IHRvUmVtb3ZlID0gTWF0aC5mbG9vcihlbnRyaWVzLmxlbmd0aCAqIDAuMjUpO1xuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgdG9SZW1vdmU7IGkrKykge1xuICAgICAgdGhpcy50aGVtZUNhY2hlLmRlbGV0ZShlbnRyaWVzW2ldLmtleSk7XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIEFwcGx5IEdQVSBhY2NlbGVyYXRpb24gdG8gZWxlbWVudFxuICAgKi9cbiAgcHVibGljIGFwcGx5R1BVQWNjZWxlcmF0aW9uKGVsZW1lbnQ6IEhUTUxFbGVtZW50KTogdm9pZCB7XG4gICAgaWYgKCFlbGVtZW50IHx8ICFlbGVtZW50LnN0eWxlIHx8ICF0aGlzLmNvbmZpZy5lbmFibGVHUFVBY2NlbGVyYXRpb24pIHJldHVybjtcblxuICAgIC8vIEZvcmNlIEdQVSBsYXllciBjcmVhdGlvblxuICAgIGVsZW1lbnQuc3R5bGUudHJhbnNmb3JtID0gZWxlbWVudC5zdHlsZS50cmFuc2Zvcm0gfHwgJ3RyYW5zbGF0ZTNkKDAsIDAsIDApJztcbiAgICBlbGVtZW50LnN0eWxlLmJhY2tmYWNlVmlzaWJpbGl0eSA9ICdoaWRkZW4nO1xuICAgIGVsZW1lbnQuc3R5bGUucGVyc3BlY3RpdmUgPSAnMTAwMHB4JztcbiAgICBcbiAgICAvLyBPcHRpbWl6ZSBmb3IgYW5pbWF0aW9uc1xuICAgIGVsZW1lbnQuc3R5bGUud2lsbENoYW5nZSA9ICd0cmFuc2Zvcm0sIG9wYWNpdHksIGJhY2tncm91bmQtY29sb3IsIGNvbG9yLCBib3JkZXItY29sb3IsIGJveC1zaGFkb3cnO1xuICB9XG5cbiAgLyoqXG4gICAqIFJlbW92ZSBHUFUgYWNjZWxlcmF0aW9uIGZyb20gZWxlbWVudFxuICAgKi9cbiAgcHVibGljIHJlbW92ZUdQVUFjY2VsZXJhdGlvbihlbGVtZW50OiBIVE1MRWxlbWVudCk6IHZvaWQge1xuICAgIGlmICghZWxlbWVudCB8fCAhZWxlbWVudC5zdHlsZSkgcmV0dXJuO1xuICAgIFxuICAgIGVsZW1lbnQuc3R5bGUudHJhbnNmb3JtID0gJyc7XG4gICAgZWxlbWVudC5zdHlsZS5iYWNrZmFjZVZpc2liaWxpdHkgPSAnJztcbiAgICBlbGVtZW50LnN0eWxlLnBlcnNwZWN0aXZlID0gJyc7XG4gICAgZWxlbWVudC5zdHlsZS53aWxsQ2hhbmdlID0gJyc7XG4gIH1cblxuICAvKipcbiAgICogUXVldWUgRE9NIHVwZGF0ZSBmb3IgYmF0Y2hpbmdcbiAgICovXG4gIHB1YmxpYyBxdWV1ZURPTVVwZGF0ZShcbiAgICBlbGVtZW50OiBIVE1MRWxlbWVudCwgXG4gICAgcHJvcGVydGllczogUmVjb3JkPHN0cmluZywgc3RyaW5nPiwgXG4gICAgcHJpb3JpdHk6ICdoaWdoJyB8ICdtZWRpdW0nIHwgJ2xvdycgPSAnbWVkaXVtJ1xuICApOiB2b2lkIHtcbiAgICBpZiAoIWVsZW1lbnQgfHwgIWVsZW1lbnQuc3R5bGUpIHJldHVybjtcbiAgICBcbiAgICBpZiAoIXRoaXMuY29uZmlnLmJhdGNoRE9NVXBkYXRlcykge1xuICAgICAgLy8gQXBwbHkgaW1tZWRpYXRlbHkgaWYgYmF0Y2hpbmcgaXMgZGlzYWJsZWRcbiAgICAgIE9iamVjdC5lbnRyaWVzKHByb3BlcnRpZXMpLmZvckVhY2goKFtwcm9wLCB2YWx1ZV0pID0+IHtcbiAgICAgICAgZWxlbWVudC5zdHlsZS5zZXRQcm9wZXJ0eShwcm9wLCB2YWx1ZSk7XG4gICAgICB9KTtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICB0aGlzLmRvbVVwZGF0ZVF1ZXVlLnB1c2goeyBlbGVtZW50LCBwcm9wZXJ0aWVzLCBwcmlvcml0eSB9KTtcbiAgICBcbiAgICBpZiAoIXRoaXMuaXNQcm9jZXNzaW5nVXBkYXRlcykge1xuICAgICAgdGhpcy5wcm9jZXNzRE9NVXBkYXRlcygpO1xuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBQcm9jZXNzIGJhdGNoZWQgRE9NIHVwZGF0ZXNcbiAgICovXG4gIHByaXZhdGUgcHJvY2Vzc0RPTVVwZGF0ZXMoKTogdm9pZCB7XG4gICAgaWYgKHRoaXMuZG9tVXBkYXRlUXVldWUubGVuZ3RoID09PSAwKSB7XG4gICAgICB0aGlzLmlzUHJvY2Vzc2luZ1VwZGF0ZXMgPSBmYWxzZTtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICB0aGlzLmlzUHJvY2Vzc2luZ1VwZGF0ZXMgPSB0cnVlO1xuXG4gICAgcmVxdWVzdEFuaW1hdGlvbkZyYW1lKCgpID0+IHtcbiAgICAgIC8vIFNvcnQgYnkgcHJpb3JpdHlcbiAgICAgIHRoaXMuZG9tVXBkYXRlUXVldWUuc29ydCgoYSwgYikgPT4ge1xuICAgICAgICBjb25zdCBwcmlvcml0eU9yZGVyID0geyBoaWdoOiAzLCBtZWRpdW06IDIsIGxvdzogMSB9O1xuICAgICAgICByZXR1cm4gcHJpb3JpdHlPcmRlcltiLnByaW9yaXR5XSAtIHByaW9yaXR5T3JkZXJbYS5wcmlvcml0eV07XG4gICAgICB9KTtcblxuICAgICAgLy8gUHJvY2VzcyB1cGRhdGVzIGluIGJhdGNoZXMgdG8gYXZvaWQgYmxvY2tpbmdcbiAgICAgIGNvbnN0IGJhdGNoU2l6ZSA9IE1hdGgubWluKDEwLCB0aGlzLmRvbVVwZGF0ZVF1ZXVlLmxlbmd0aCk7XG4gICAgICBjb25zdCBiYXRjaCA9IHRoaXMuZG9tVXBkYXRlUXVldWUuc3BsaWNlKDAsIGJhdGNoU2l6ZSk7XG5cbiAgICAgIGJhdGNoLmZvckVhY2goKHsgZWxlbWVudCwgcHJvcGVydGllcyB9KSA9PiB7XG4gICAgICAgIE9iamVjdC5lbnRyaWVzKHByb3BlcnRpZXMpLmZvckVhY2goKFtwcm9wLCB2YWx1ZV0pID0+IHtcbiAgICAgICAgICBlbGVtZW50LnN0eWxlLnNldFByb3BlcnR5KHByb3AsIHZhbHVlKTtcbiAgICAgICAgfSk7XG4gICAgICB9KTtcblxuICAgICAgLy8gQ29udGludWUgcHJvY2Vzc2luZyBpZiB0aGVyZSBhcmUgbW9yZSB1cGRhdGVzXG4gICAgICBpZiAodGhpcy5kb21VcGRhdGVRdWV1ZS5sZW5ndGggPiAwKSB7XG4gICAgICAgIHRoaXMucHJvY2Vzc0RPTVVwZGF0ZXMoKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHRoaXMuaXNQcm9jZXNzaW5nVXBkYXRlcyA9IGZhbHNlO1xuICAgICAgfVxuICAgIH0pO1xuICB9XG5cbiAgLyoqXG4gICAqIFByZWxvYWQgdGhlbWUgcmVzb3VyY2VzXG4gICAqL1xuICBwdWJsaWMgcHJlbG9hZFRoZW1lUmVzb3VyY2VzKHRoZW1lczogc3RyaW5nW10pOiBQcm9taXNlPHZvaWQ+IHtcbiAgICByZXR1cm4gbmV3IFByb21pc2UoKHJlc29sdmUpID0+IHtcbiAgICAgIC8vIFNpbXVsYXRlIHRoZW1lIHJlc291cmNlIHByZWxvYWRpbmdcbiAgICAgIC8vIEluIGEgcmVhbCBpbXBsZW1lbnRhdGlvbiwgdGhpcyBtaWdodCBwcmVsb2FkIENTUyBmaWxlcywgaW1hZ2VzLCBldGMuXG4gICAgICBjb25zdCBwcmVsb2FkUHJvbWlzZXMgPSB0aGVtZXMubWFwKHRoZW1lID0+IHtcbiAgICAgICAgcmV0dXJuIG5ldyBQcm9taXNlPHZvaWQ+KCh0aGVtZVJlc29sdmUpID0+IHtcbiAgICAgICAgICAvLyBTaW11bGF0ZSBhc3luYyByZXNvdXJjZSBsb2FkaW5nXG4gICAgICAgICAgc2V0VGltZW91dCgoKSA9PiB7XG4gICAgICAgICAgICBjb25zb2xlLmxvZyhgUHJlbG9hZGVkIHRoZW1lOiAke3RoZW1lfWApO1xuICAgICAgICAgICAgdGhlbWVSZXNvbHZlKCk7XG4gICAgICAgICAgfSwgMTApO1xuICAgICAgICB9KTtcbiAgICAgIH0pO1xuXG4gICAgICBQcm9taXNlLmFsbChwcmVsb2FkUHJvbWlzZXMpLnRoZW4oKCkgPT4gcmVzb2x2ZSgpKTtcbiAgICB9KTtcbiAgfVxuXG4gIC8qKlxuICAgKiBPcHRpbWl6ZSBlbGVtZW50IGZvciB0cmFuc2l0aW9uc1xuICAgKi9cbiAgcHVibGljIG9wdGltaXplRWxlbWVudEZvclRyYW5zaXRpb24oZWxlbWVudDogSFRNTEVsZW1lbnQpOiB2b2lkIHtcbiAgICBpZiAoIWVsZW1lbnQgfHwgIWVsZW1lbnQuc3R5bGUpIHJldHVybjtcbiAgICBcbiAgICAvLyBBcHBseSBHUFUgYWNjZWxlcmF0aW9uXG4gICAgdGhpcy5hcHBseUdQVUFjY2VsZXJhdGlvbihlbGVtZW50KTtcbiAgICBcbiAgICAvLyBTZXQgdXAgb3B0aW1hbCBDU1MgcHJvcGVydGllcyBmb3IgdHJhbnNpdGlvbnNcbiAgICBlbGVtZW50LnN0eWxlLmNvbnRhaW4gPSAnbGF5b3V0IHN0eWxlIHBhaW50JztcbiAgICBlbGVtZW50LnN0eWxlLmlzb2xhdGlvbiA9ICdpc29sYXRlJztcbiAgICBcbiAgICAvLyBPcHRpbWl6ZSBmb3Igc3BlY2lmaWMgdHJhbnNpdGlvbiBwcm9wZXJ0aWVzXG4gICAgY29uc3QgdHJhbnNpdGlvblByb3BlcnRpZXMgPSBbXG4gICAgICAnYmFja2dyb3VuZC1jb2xvcicsXG4gICAgICAnY29sb3InLFxuICAgICAgJ2JvcmRlci1jb2xvcicsXG4gICAgICAnYm94LXNoYWRvdycsXG4gICAgICAnb3BhY2l0eScsXG4gICAgICAndHJhbnNmb3JtJ1xuICAgIF07XG4gICAgXG4gICAgZWxlbWVudC5zdHlsZS50cmFuc2l0aW9uID0gdHJhbnNpdGlvblByb3BlcnRpZXNcbiAgICAgIC5tYXAocHJvcCA9PiBgJHtwcm9wfSB2YXIoLS10aGVtZS10cmFuc2l0aW9uLWR1cmF0aW9uLCAzMDBtcykgdmFyKC0tdGhlbWUtdHJhbnNpdGlvbi10aW1pbmcsIGVhc2UpYClcbiAgICAgIC5qb2luKCcsICcpO1xuICB9XG5cbiAgLyoqXG4gICAqIENsZWFuIHVwIGVsZW1lbnQgb3B0aW1pemF0aW9uc1xuICAgKi9cbiAgcHVibGljIGNsZWFudXBFbGVtZW50T3B0aW1pemF0aW9ucyhlbGVtZW50OiBIVE1MRWxlbWVudCk6IHZvaWQge1xuICAgIGlmICghZWxlbWVudCB8fCAhZWxlbWVudC5zdHlsZSkgcmV0dXJuO1xuICAgIFxuICAgIHRoaXMucmVtb3ZlR1BVQWNjZWxlcmF0aW9uKGVsZW1lbnQpO1xuICAgIGVsZW1lbnQuc3R5bGUuY29udGFpbiA9ICcnO1xuICAgIGVsZW1lbnQuc3R5bGUuaXNvbGF0aW9uID0gJyc7XG4gICAgZWxlbWVudC5zdHlsZS50cmFuc2l0aW9uID0gJyc7XG4gIH1cblxuICAvKipcbiAgICogTW9uaXRvciBtZW1vcnkgdXNhZ2VcbiAgICovXG4gIHB1YmxpYyBnZXRNZW1vcnlVc2FnZSgpOiBudW1iZXIge1xuICAgIGlmICgnbWVtb3J5JyBpbiBwZXJmb3JtYW5jZSkge1xuICAgICAgY29uc3QgbWVtb3J5ID0gKHBlcmZvcm1hbmNlIGFzIGFueSkubWVtb3J5O1xuICAgICAgcmV0dXJuIE1hdGgucm91bmQobWVtb3J5LnVzZWRKU0hlYXBTaXplIC8gMTAyNCAvIDEwMjQpOyAvLyBNQlxuICAgIH1cbiAgICByZXR1cm4gMDtcbiAgfVxuXG4gIC8qKlxuICAgKiBDaGVjayBpZiBtZW1vcnkgdXNhZ2UgaXMgd2l0aGluIHRocmVzaG9sZFxuICAgKi9cbiAgcHVibGljIGlzTWVtb3J5VXNhZ2VIZWFsdGh5KCk6IGJvb2xlYW4ge1xuICAgIGNvbnN0IHVzYWdlID0gdGhpcy5nZXRNZW1vcnlVc2FnZSgpO1xuICAgIHJldHVybiB1c2FnZSA8IHRoaXMuY29uZmlnLm1lbW9yeVRocmVzaG9sZDtcbiAgfVxuXG4gIC8qKlxuICAgKiBGb3JjZSBnYXJiYWdlIGNvbGxlY3Rpb24gaWYgYXZhaWxhYmxlXG4gICAqL1xuICBwdWJsaWMgZm9yY2VHYXJiYWdlQ29sbGVjdGlvbigpOiB2b2lkIHtcbiAgICBpZiAoJ2djJyBpbiB3aW5kb3cgJiYgdHlwZW9mICh3aW5kb3cgYXMgYW55KS5nYyA9PT0gJ2Z1bmN0aW9uJykge1xuICAgICAgKHdpbmRvdyBhcyBhbnkpLmdjKCk7XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIFJlY29yZCBwZXJmb3JtYW5jZSBtZXRyaWNzXG4gICAqL1xuICBwdWJsaWMgcmVjb3JkTWV0cmljcyh0cmFuc2l0aW9uRHVyYXRpb246IG51bWJlciwgZG9tVXBkYXRlczogbnVtYmVyKTogdm9pZCB7XG4gICAgaWYgKCF0aGlzLmNvbmZpZy5lbmFibGVNZXRyaWNzKSByZXR1cm47XG5cbiAgICBjb25zdCBtZXRyaWNzOiBQZXJmb3JtYW5jZU1ldHJpY3MgPSB7XG4gICAgICB0cmFuc2l0aW9uRHVyYXRpb24sXG4gICAgICBmcmFtZVJhdGU6IHRoaXMuY3VycmVudEZyYW1lUmF0ZSxcbiAgICAgIG1lbW9yeVVzYWdlOiB0aGlzLmdldE1lbW9yeVVzYWdlKCksXG4gICAgICBkb21VcGRhdGVzLFxuICAgICAgY2FjaGVIaXRzOiB0aGlzLmdldENhY2hlSGl0UmF0ZSgpLmhpdHMsXG4gICAgICBjYWNoZU1pc3NlczogdGhpcy5nZXRDYWNoZUhpdFJhdGUoKS5taXNzZXMsXG4gICAgICB0aW1lc3RhbXA6IERhdGUubm93KCksXG4gICAgfTtcblxuICAgIHRoaXMubWV0cmljcy5wdXNoKG1ldHJpY3MpO1xuXG4gICAgLy8gS2VlcCBvbmx5IGxhc3QgMTAwIG1ldHJpY3NcbiAgICBpZiAodGhpcy5tZXRyaWNzLmxlbmd0aCA+IDEwMCkge1xuICAgICAgdGhpcy5tZXRyaWNzID0gdGhpcy5tZXRyaWNzLnNsaWNlKC0xMDApO1xuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBHZXQgY2FjaGUgaGl0IHJhdGVcbiAgICovXG4gIHByaXZhdGUgZ2V0Q2FjaGVIaXRSYXRlKCk6IHsgaGl0czogbnVtYmVyOyBtaXNzZXM6IG51bWJlciB9IHtcbiAgICBjb25zdCBlbnRyaWVzID0gQXJyYXkuZnJvbSh0aGlzLnRoZW1lQ2FjaGUudmFsdWVzKCkpO1xuICAgIGNvbnN0IGhpdHMgPSBlbnRyaWVzLnJlZHVjZSgoc3VtLCBlbnRyeSkgPT4gc3VtICsgZW50cnkuYWNjZXNzQ291bnQsIDApO1xuICAgIGNvbnN0IG1pc3NlcyA9IE1hdGgubWF4KDAsIGhpdHMgLSBlbnRyaWVzLmxlbmd0aCk7XG4gICAgcmV0dXJuIHsgaGl0cywgbWlzc2VzIH07XG4gIH1cblxuICAvKipcbiAgICogR2V0IHBlcmZvcm1hbmNlIHJlcG9ydFxuICAgKi9cbiAgcHVibGljIGdldFBlcmZvcm1hbmNlUmVwb3J0KCk6IHtcbiAgICBhdmVyYWdlVHJhbnNpdGlvbkR1cmF0aW9uOiBudW1iZXI7XG4gICAgYXZlcmFnZUZyYW1lUmF0ZTogbnVtYmVyO1xuICAgIGF2ZXJhZ2VNZW1vcnlVc2FnZTogbnVtYmVyO1xuICAgIGNhY2hlRWZmaWNpZW5jeTogbnVtYmVyO1xuICAgIHRvdGFsVHJhbnNpdGlvbnM6IG51bWJlcjtcbiAgfSB7XG4gICAgaWYgKHRoaXMubWV0cmljcy5sZW5ndGggPT09IDApIHtcbiAgICAgIHJldHVybiB7XG4gICAgICAgIGF2ZXJhZ2VUcmFuc2l0aW9uRHVyYXRpb246IDAsXG4gICAgICAgIGF2ZXJhZ2VGcmFtZVJhdGU6IDAsXG4gICAgICAgIGF2ZXJhZ2VNZW1vcnlVc2FnZTogMCxcbiAgICAgICAgY2FjaGVFZmZpY2llbmN5OiAwLFxuICAgICAgICB0b3RhbFRyYW5zaXRpb25zOiAwLFxuICAgICAgfTtcbiAgICB9XG5cbiAgICBjb25zdCBhdmdUcmFuc2l0aW9uRHVyYXRpb24gPSB0aGlzLm1ldHJpY3MucmVkdWNlKChzdW0sIG0pID0+IHN1bSArIG0udHJhbnNpdGlvbkR1cmF0aW9uLCAwKSAvIHRoaXMubWV0cmljcy5sZW5ndGg7XG4gICAgY29uc3QgYXZnRnJhbWVSYXRlID0gdGhpcy5tZXRyaWNzLnJlZHVjZSgoc3VtLCBtKSA9PiBzdW0gKyBtLmZyYW1lUmF0ZSwgMCkgLyB0aGlzLm1ldHJpY3MubGVuZ3RoO1xuICAgIGNvbnN0IGF2Z01lbW9yeVVzYWdlID0gdGhpcy5tZXRyaWNzLnJlZHVjZSgoc3VtLCBtKSA9PiBzdW0gKyBtLm1lbW9yeVVzYWdlLCAwKSAvIHRoaXMubWV0cmljcy5sZW5ndGg7XG4gICAgXG4gICAgY29uc3QgdG90YWxIaXRzID0gdGhpcy5tZXRyaWNzLnJlZHVjZSgoc3VtLCBtKSA9PiBzdW0gKyBtLmNhY2hlSGl0cywgMCk7XG4gICAgY29uc3QgdG90YWxNaXNzZXMgPSB0aGlzLm1ldHJpY3MucmVkdWNlKChzdW0sIG0pID0+IHN1bSArIG0uY2FjaGVNaXNzZXMsIDApO1xuICAgIGNvbnN0IGNhY2hlRWZmaWNpZW5jeSA9IHRvdGFsSGl0cyArIHRvdGFsTWlzc2VzID4gMCA/ICh0b3RhbEhpdHMgLyAodG90YWxIaXRzICsgdG90YWxNaXNzZXMpKSAqIDEwMCA6IDA7XG5cbiAgICByZXR1cm4ge1xuICAgICAgYXZlcmFnZVRyYW5zaXRpb25EdXJhdGlvbjogTWF0aC5yb3VuZChhdmdUcmFuc2l0aW9uRHVyYXRpb24pLFxuICAgICAgYXZlcmFnZUZyYW1lUmF0ZTogTWF0aC5yb3VuZChhdmdGcmFtZVJhdGUpLFxuICAgICAgYXZlcmFnZU1lbW9yeVVzYWdlOiBNYXRoLnJvdW5kKGF2Z01lbW9yeVVzYWdlKSxcbiAgICAgIGNhY2hlRWZmaWNpZW5jeTogTWF0aC5yb3VuZChjYWNoZUVmZmljaWVuY3kpLFxuICAgICAgdG90YWxUcmFuc2l0aW9uczogdGhpcy5tZXRyaWNzLmxlbmd0aCxcbiAgICB9O1xuICB9XG5cbiAgLyoqXG4gICAqIENsZWFyIGFsbCBjYWNoZXMgYW5kIHJlc2V0IG1ldHJpY3NcbiAgICovXG4gIHB1YmxpYyBjbGVhckNhY2hlcygpOiB2b2lkIHtcbiAgICB0aGlzLnRoZW1lQ2FjaGUuY2xlYXIoKTtcbiAgICB0aGlzLm1ldHJpY3MgPSBbXTtcbiAgICB0aGlzLmRvbVVwZGF0ZVF1ZXVlID0gW107XG4gIH1cblxuICAvKipcbiAgICogQ2xlYW51cCBhbmQgZGVzdHJveVxuICAgKi9cbiAgcHVibGljIGRlc3Ryb3koKTogdm9pZCB7XG4gICAgdGhpcy5zdG9wRnJhbWVSYXRlTW9uaXRvcmluZygpO1xuICAgIHRoaXMuY2xlYXJDYWNoZXMoKTtcbiAgICB0aGlzLmlzUHJvY2Vzc2luZ1VwZGF0ZXMgPSBmYWxzZTtcbiAgfVxufVxuXG4vLyBHbG9iYWwgcGVyZm9ybWFuY2Ugb3B0aW1pemVyIGluc3RhbmNlXG5leHBvcnQgY29uc3QgcGVyZm9ybWFuY2VPcHRpbWl6ZXIgPSBuZXcgUGVyZm9ybWFuY2VPcHRpbWl6ZXIoKTtcblxuLyoqXG4gKiBSZWFjdCBob29rIGZvciBwZXJmb3JtYW5jZSBvcHRpbWl6YXRpb25cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIHVzZVBlcmZvcm1hbmNlT3B0aW1pemF0aW9uKCkge1xuICBjb25zdCB1cGRhdGVDb25maWcgPSAoY29uZmlnOiBQYXJ0aWFsPFBlcmZvcm1hbmNlQ29uZmlnPikgPT4ge1xuICAgIHBlcmZvcm1hbmNlT3B0aW1pemVyLnVwZGF0ZUNvbmZpZyhjb25maWcpO1xuICB9O1xuXG4gIGNvbnN0IG9wdGltaXplRWxlbWVudCA9IChlbGVtZW50OiBIVE1MRWxlbWVudCkgPT4ge1xuICAgIHBlcmZvcm1hbmNlT3B0aW1pemVyLm9wdGltaXplRWxlbWVudEZvclRyYW5zaXRpb24oZWxlbWVudCk7XG4gIH07XG5cbiAgY29uc3QgY2xlYW51cEVsZW1lbnQgPSAoZWxlbWVudDogSFRNTEVsZW1lbnQpID0+IHtcbiAgICBwZXJmb3JtYW5jZU9wdGltaXplci5jbGVhbnVwRWxlbWVudE9wdGltaXphdGlvbnMoZWxlbWVudCk7XG4gIH07XG5cbiAgY29uc3QgcXVldWVVcGRhdGUgPSAoXG4gICAgZWxlbWVudDogSFRNTEVsZW1lbnQsIFxuICAgIHByb3BlcnRpZXM6IFJlY29yZDxzdHJpbmcsIHN0cmluZz4sIFxuICAgIHByaW9yaXR5PzogJ2hpZ2gnIHwgJ21lZGl1bScgfCAnbG93J1xuICApID0+IHtcbiAgICBwZXJmb3JtYW5jZU9wdGltaXplci5xdWV1ZURPTVVwZGF0ZShlbGVtZW50LCBwcm9wZXJ0aWVzLCBwcmlvcml0eSk7XG4gIH07XG5cbiAgY29uc3QgZ2V0UmVwb3J0ID0gKCkgPT4gcGVyZm9ybWFuY2VPcHRpbWl6ZXIuZ2V0UGVyZm9ybWFuY2VSZXBvcnQoKTtcblxuICBjb25zdCBpc0hlYWx0aHkgPSAoKSA9PiBwZXJmb3JtYW5jZU9wdGltaXplci5pc01lbW9yeVVzYWdlSGVhbHRoeSgpO1xuXG4gIHJldHVybiB7XG4gICAgdXBkYXRlQ29uZmlnLFxuICAgIG9wdGltaXplRWxlbWVudCxcbiAgICBjbGVhbnVwRWxlbWVudCxcbiAgICBxdWV1ZVVwZGF0ZSxcbiAgICBnZXRSZXBvcnQsXG4gICAgaXNIZWFsdGh5LFxuICB9O1xufVxuXG4vKipcbiAqIFBlcmZvcm1hbmNlIG1vbml0b3JpbmcgZGVjb3JhdG9yIGZvciB0aGVtZSB0cmFuc2l0aW9uc1xuICovXG5leHBvcnQgZnVuY3Rpb24gd2l0aFBlcmZvcm1hbmNlTW9uaXRvcmluZzxUIGV4dGVuZHMgKC4uLmFyZ3M6IGFueVtdKSA9PiBQcm9taXNlPGFueT4+KFxuICBmbjogVCxcbiAgbmFtZTogc3RyaW5nXG4pOiBUIHtcbiAgcmV0dXJuIChhc3luYyAoLi4uYXJnczogYW55W10pID0+IHtcbiAgICBjb25zdCBzdGFydFRpbWUgPSBwZXJmb3JtYW5jZS5ub3coKTtcbiAgICBsZXQgZG9tVXBkYXRlcyA9IDA7XG5cbiAgICAvLyBNb25pdG9yIERPTSBtdXRhdGlvbnMgZHVyaW5nIGV4ZWN1dGlvblxuICAgIGNvbnN0IG9ic2VydmVyID0gbmV3IE11dGF0aW9uT2JzZXJ2ZXIoKG11dGF0aW9ucykgPT4ge1xuICAgICAgZG9tVXBkYXRlcyArPSBtdXRhdGlvbnMubGVuZ3RoO1xuICAgIH0pO1xuXG4gICAgb2JzZXJ2ZXIub2JzZXJ2ZShkb2N1bWVudC5ib2R5LCB7XG4gICAgICBhdHRyaWJ1dGVzOiB0cnVlLFxuICAgICAgY2hpbGRMaXN0OiB0cnVlLFxuICAgICAgc3VidHJlZTogdHJ1ZSxcbiAgICAgIGF0dHJpYnV0ZUZpbHRlcjogWydzdHlsZScsICdjbGFzcyddLFxuICAgIH0pO1xuXG4gICAgdHJ5IHtcbiAgICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IGZuKC4uLmFyZ3MpO1xuICAgICAgY29uc3QgZW5kVGltZSA9IHBlcmZvcm1hbmNlLm5vdygpO1xuICAgICAgY29uc3QgZHVyYXRpb24gPSBlbmRUaW1lIC0gc3RhcnRUaW1lO1xuXG4gICAgICBvYnNlcnZlci5kaXNjb25uZWN0KCk7XG4gICAgICBwZXJmb3JtYW5jZU9wdGltaXplci5yZWNvcmRNZXRyaWNzKGR1cmF0aW9uLCBkb21VcGRhdGVzKTtcblxuICAgICAgY29uc29sZS5sb2coYFtQZXJmb3JtYW5jZV0gJHtuYW1lfTogJHtkdXJhdGlvbi50b0ZpeGVkKDIpfW1zLCAke2RvbVVwZGF0ZXN9IERPTSB1cGRhdGVzYCk7XG4gICAgICBcbiAgICAgIHJldHVybiByZXN1bHQ7XG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgIG9ic2VydmVyLmRpc2Nvbm5lY3QoKTtcbiAgICAgIHRocm93IGVycm9yO1xuICAgIH1cbiAgfSkgYXMgVDtcbn1cblxuLyoqXG4gKiBVdGlsaXR5IHRvIGNyZWF0ZSBwZXJmb3JtYW5jZS1vcHRpbWl6ZWQgdGhlbWUgdHJhbnNpdGlvblxuICovXG5leHBvcnQgZnVuY3Rpb24gY3JlYXRlT3B0aW1pemVkVHJhbnNpdGlvbihcbiAgZWxlbWVudDogSFRNTEVsZW1lbnQsXG4gIGZyb21TdGF0ZTogUmVjb3JkPHN0cmluZywgc3RyaW5nPixcbiAgdG9TdGF0ZTogUmVjb3JkPHN0cmluZywgc3RyaW5nPixcbiAgZHVyYXRpb246IG51bWJlciA9IDMwMFxuKTogUHJvbWlzZTx2b2lkPiB7XG4gIHJldHVybiBuZXcgUHJvbWlzZSgocmVzb2x2ZSkgPT4ge1xuICAgIC8vIE9wdGltaXplIGVsZW1lbnQgZm9yIHRyYW5zaXRpb25cbiAgICBwZXJmb3JtYW5jZU9wdGltaXplci5vcHRpbWl6ZUVsZW1lbnRGb3JUcmFuc2l0aW9uKGVsZW1lbnQpO1xuXG4gICAgLy8gQXBwbHkgaW5pdGlhbCBzdGF0ZVxuICAgIE9iamVjdC5lbnRyaWVzKGZyb21TdGF0ZSkuZm9yRWFjaCgoW3Byb3AsIHZhbHVlXSkgPT4ge1xuICAgICAgLy8gQ29udmVydCBjYW1lbENhc2UgdG8ga2ViYWItY2FzZSBmb3IgQ1NTIHByb3BlcnRpZXNcbiAgICAgIGNvbnN0IGNzc1Byb3BlcnR5ID0gcHJvcC5yZXBsYWNlKC8oW0EtWl0pL2csICctJDEnKS50b0xvd2VyQ2FzZSgpO1xuICAgICAgZWxlbWVudC5zdHlsZS5zZXRQcm9wZXJ0eShjc3NQcm9wZXJ0eSwgdmFsdWUpO1xuICAgIH0pO1xuXG4gICAgLy8gRm9yY2UgcmVmbG93XG4gICAgZWxlbWVudC5vZmZzZXRIZWlnaHQ7XG5cbiAgICAvLyBBcHBseSBmaW5hbCBzdGF0ZVxuICAgIE9iamVjdC5lbnRyaWVzKHRvU3RhdGUpLmZvckVhY2goKFtwcm9wLCB2YWx1ZV0pID0+IHtcbiAgICAgIHBlcmZvcm1hbmNlT3B0aW1pemVyLnF1ZXVlRE9NVXBkYXRlKGVsZW1lbnQsIHsgW3Byb3BdOiB2YWx1ZSB9LCAnaGlnaCcpO1xuICAgIH0pO1xuXG4gICAgLy8gQ2xlYW51cCBhZnRlciB0cmFuc2l0aW9uXG4gICAgc2V0VGltZW91dCgoKSA9PiB7XG4gICAgICBwZXJmb3JtYW5jZU9wdGltaXplci5jbGVhbnVwRWxlbWVudE9wdGltaXphdGlvbnMoZWxlbWVudCk7XG4gICAgICByZXNvbHZlKCk7XG4gICAgfSwgZHVyYXRpb24gKyA1MCk7IC8vIFNtYWxsIGJ1ZmZlciBmb3IgY29tcGxldGlvblxuICB9KTtcbn1cblxuLyoqXG4gKiBBZGRpdGlvbmFsIFJlYWN0IHBlcmZvcm1hbmNlIG9wdGltaXphdGlvbiB1dGlsaXRpZXNcbiAqL1xuXG5pbXBvcnQgUmVhY3QsIHsgdXNlTWVtbywgdXNlQ2FsbGJhY2ssIHVzZVJlZiwgdXNlRWZmZWN0IH0gZnJvbSAncmVhY3QnO1xuXG4vKipcbiAqIEN1c3RvbSBob29rIGZvciBtZW1vaXppbmcgZXhwZW5zaXZlIGNhbGN1bGF0aW9uc1xuICovXG5leHBvcnQgY29uc3QgdXNlRXhwZW5zaXZlTWVtbyA9IDxUPihcbiAgZmFjdG9yeTogKCkgPT4gVCxcbiAgZGVwczogUmVhY3QuRGVwZW5kZW5jeUxpc3Rcbik6IFQgPT4ge1xuICByZXR1cm4gdXNlTWVtbyhmYWN0b3J5LCBkZXBzKTtcbn07XG5cbi8qKlxuICogQ3VzdG9tIGhvb2sgZm9yIG1lbW9pemluZyBjYWxsYmFjayBmdW5jdGlvbnMgd2l0aCBkZXBlbmRlbmN5IHRyYWNraW5nXG4gKi9cbmV4cG9ydCBjb25zdCB1c2VTdGFibGVDYWxsYmFjayA9IDxUIGV4dGVuZHMgKC4uLmFyZ3M6IGFueVtdKSA9PiBhbnk+KFxuICBjYWxsYmFjazogVCxcbiAgZGVwczogUmVhY3QuRGVwZW5kZW5jeUxpc3Rcbik6IFQgPT4ge1xuICByZXR1cm4gdXNlQ2FsbGJhY2soY2FsbGJhY2ssIGRlcHMpO1xufTtcblxuLyoqXG4gKiBDdXN0b20gaG9vayBmb3IgZGVib3VuY2VkIHZhbHVlc1xuICovXG5leHBvcnQgY29uc3QgdXNlRGVib3VuY2VkVmFsdWUgPSA8VD4odmFsdWU6IFQsIGRlbGF5OiBudW1iZXIpOiBUID0+IHtcbiAgY29uc3QgW2RlYm91bmNlZFZhbHVlLCBzZXREZWJvdW5jZWRWYWx1ZV0gPSBSZWFjdC51c2VTdGF0ZTxUPih2YWx1ZSk7XG5cbiAgdXNlRWZmZWN0KCgpID0+IHtcbiAgICBjb25zdCBoYW5kbGVyID0gc2V0VGltZW91dCgoKSA9PiB7XG4gICAgICBzZXREZWJvdW5jZWRWYWx1ZSh2YWx1ZSk7XG4gICAgfSwgZGVsYXkpO1xuXG4gICAgcmV0dXJuICgpID0+IHtcbiAgICAgIGNsZWFyVGltZW91dChoYW5kbGVyKTtcbiAgICB9O1xuICB9LCBbdmFsdWUsIGRlbGF5XSk7XG5cbiAgcmV0dXJuIGRlYm91bmNlZFZhbHVlO1xufTtcblxuLyoqXG4gKiBIT0MgZm9yIG1lbW9pemluZyBjb21wb25lbnRzIHdpdGggY3VzdG9tIGNvbXBhcmlzb25cbiAqL1xuZXhwb3J0IGNvbnN0IHdpdGhNZW1vID0gPFAgZXh0ZW5kcyBvYmplY3Q+KFxuICBDb21wb25lbnQ6IFJlYWN0LkNvbXBvbmVudFR5cGU8UD4sXG4gIGFyZUVxdWFsPzogKHByZXZQcm9wczogUCwgbmV4dFByb3BzOiBQKSA9PiBib29sZWFuXG4pID0+IHtcbiAgcmV0dXJuIFJlYWN0Lm1lbW8oQ29tcG9uZW50LCBhcmVFcXVhbCk7XG59O1xuXG4vKipcbiAqIEN1c3RvbSBjb21wYXJpc29uIGZ1bmN0aW9uIGZvciBzaGFsbG93IG9iamVjdCBjb21wYXJpc29uXG4gKi9cbmV4cG9ydCBjb25zdCBzaGFsbG93RXF1YWwgPSA8VCBleHRlbmRzIFJlY29yZDxzdHJpbmcsIGFueT4+KFxuICBwcmV2UHJvcHM6IFQsXG4gIG5leHRQcm9wczogVFxuKTogYm9vbGVhbiA9PiB7XG4gIGNvbnN0IHByZXZLZXlzID0gT2JqZWN0LmtleXMocHJldlByb3BzKTtcbiAgY29uc3QgbmV4dEtleXMgPSBPYmplY3Qua2V5cyhuZXh0UHJvcHMpO1xuXG4gIGlmIChwcmV2S2V5cy5sZW5ndGggIT09IG5leHRLZXlzLmxlbmd0aCkge1xuICAgIHJldHVybiBmYWxzZTtcbiAgfVxuXG4gIGZvciAoY29uc3Qga2V5IG9mIHByZXZLZXlzKSB7XG4gICAgaWYgKHByZXZQcm9wc1trZXldICE9PSBuZXh0UHJvcHNba2V5XSkge1xuICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cbiAgfVxuXG4gIHJldHVybiB0cnVlO1xufTtcblxuLyoqXG4gKiBDdXN0b20gaG9vayBmb3IgaW50ZXJzZWN0aW9uIG9ic2VydmVyICh1c2VmdWwgZm9yIGxhenkgbG9hZGluZylcbiAqL1xuZXhwb3J0IGNvbnN0IHVzZUludGVyc2VjdGlvbk9ic2VydmVyID0gKFxuICBvcHRpb25zOiBJbnRlcnNlY3Rpb25PYnNlcnZlckluaXQgPSB7fVxuKTogW1JlYWN0LlJlZk9iamVjdDxIVE1MRWxlbWVudD4sIGJvb2xlYW5dID0+IHtcbiAgY29uc3QgW2lzSW50ZXJzZWN0aW5nLCBzZXRJc0ludGVyc2VjdGluZ10gPSBSZWFjdC51c2VTdGF0ZShmYWxzZSk7XG4gIGNvbnN0IHJlZiA9IHVzZVJlZjxIVE1MRWxlbWVudD4obnVsbCk7XG5cbiAgdXNlRWZmZWN0KCgpID0+IHtcbiAgICBjb25zdCBlbGVtZW50ID0gcmVmLmN1cnJlbnQ7XG4gICAgaWYgKCFlbGVtZW50KSByZXR1cm47XG5cbiAgICBjb25zdCBvYnNlcnZlciA9IG5ldyBJbnRlcnNlY3Rpb25PYnNlcnZlcihcbiAgICAgIChbZW50cnldKSA9PiB7XG4gICAgICAgIHNldElzSW50ZXJzZWN0aW5nKGVudHJ5LmlzSW50ZXJzZWN0aW5nKTtcbiAgICAgIH0sXG4gICAgICBvcHRpb25zXG4gICAgKTtcblxuICAgIG9ic2VydmVyLm9ic2VydmUoZWxlbWVudCk7XG5cbiAgICByZXR1cm4gKCkgPT4ge1xuICAgICAgb2JzZXJ2ZXIudW5vYnNlcnZlKGVsZW1lbnQpO1xuICAgIH07XG4gIH0sIFtvcHRpb25zXSk7XG5cbiAgcmV0dXJuIFtyZWYsIGlzSW50ZXJzZWN0aW5nXTtcbn07XG5cbi8qKlxuICogQ3VzdG9tIGhvb2sgZm9yIHByZXZlbnRpbmcgdW5uZWNlc3NhcnkgcmUtcmVuZGVycyB3aGVuIG9iamVjdCByZWZlcmVuY2VzIGNoYW5nZVxuICovXG5leHBvcnQgY29uc3QgdXNlU3RhYmxlT2JqZWN0ID0gPFQgZXh0ZW5kcyBSZWNvcmQ8c3RyaW5nLCBhbnk+PihvYmo6IFQpOiBUID0+IHtcbiAgcmV0dXJuIHVzZU1lbW8oKCkgPT4gb2JqLCBbSlNPTi5zdHJpbmdpZnkob2JqKV0pO1xufTtcblxuLyoqXG4gKiBDdXN0b20gaG9vayBmb3IgcHJldmVudGluZyB1bm5lY2Vzc2FyeSByZS1yZW5kZXJzIHdoZW4gYXJyYXkgcmVmZXJlbmNlcyBjaGFuZ2VcbiAqL1xuZXhwb3J0IGNvbnN0IHVzZVN0YWJsZUFycmF5ID0gPFQ+KGFycjogVFtdKTogVFtdID0+IHtcbiAgcmV0dXJuIHVzZU1lbW8oKCkgPT4gYXJyLCBbSlNPTi5zdHJpbmdpZnkoYXJyKV0pO1xufTtcblxuLyoqXG4gKiBQZXJmb3JtYW5jZSBtb25pdG9yaW5nIGhvb2sgZm9yIGNvbXBvbmVudCByZW5kZXIgdGltZXNcbiAqL1xuZXhwb3J0IGNvbnN0IHVzZVJlbmRlclBlcmZvcm1hbmNlID0gKFxuICBjb21wb25lbnROYW1lOiBzdHJpbmcsXG4gIGVuYWJsZWQ6IGJvb2xlYW4gPSBwcm9jZXNzLmVudi5OT0RFX0VOViA9PT0gJ2RldmVsb3BtZW50J1xuKSA9PiB7XG4gIGNvbnN0IHJlbmRlclN0YXJ0VGltZSA9IHVzZVJlZjxudW1iZXI+KCk7XG5cbiAgdXNlRWZmZWN0KCgpID0+IHtcbiAgICBpZiAoIWVuYWJsZWQpIHJldHVybjtcbiAgICByZW5kZXJTdGFydFRpbWUuY3VycmVudCA9IHBlcmZvcm1hbmNlLm5vdygpO1xuICB9KTtcblxuICB1c2VFZmZlY3QoKCkgPT4ge1xuICAgIGlmICghZW5hYmxlZCB8fCAhcmVuZGVyU3RhcnRUaW1lLmN1cnJlbnQpIHJldHVybjtcblxuICAgIGNvbnN0IHJlbmRlclRpbWUgPSBwZXJmb3JtYW5jZS5ub3coKSAtIHJlbmRlclN0YXJ0VGltZS5jdXJyZW50O1xuICAgIFxuICAgIGlmIChyZW5kZXJUaW1lID4gMTYpIHsgLy8gTG9nIGlmIHJlbmRlciB0YWtlcyBsb25nZXIgdGhhbiAxNm1zICg2MGZwcyB0aHJlc2hvbGQpXG4gICAgICBjb25zb2xlLndhcm4oXG4gICAgICAgIGDwn5CMIFNsb3cgcmVuZGVyIGRldGVjdGVkIGluICR7Y29tcG9uZW50TmFtZX06ICR7cmVuZGVyVGltZS50b0ZpeGVkKDIpfW1zYFxuICAgICAgKTtcbiAgICB9XG4gIH0pO1xufTtcblxuLyoqXG4gKiBIb29rIGZvciBpbXBsZW1lbnRpbmcgdmlydHVhbCBzY3JvbGxpbmdcbiAqL1xuZXhwb3J0IGNvbnN0IHVzZVZpcnR1YWxpemF0aW9uID0gPFQ+KFxuICBpdGVtczogVFtdLFxuICBpdGVtSGVpZ2h0OiBudW1iZXIsXG4gIGNvbnRhaW5lckhlaWdodDogbnVtYmVyXG4pID0+IHtcbiAgY29uc3QgW3Njcm9sbFRvcCwgc2V0U2Nyb2xsVG9wXSA9IFJlYWN0LnVzZVN0YXRlKDApO1xuXG4gIGNvbnN0IHN0YXJ0SW5kZXggPSBNYXRoLmZsb29yKHNjcm9sbFRvcCAvIGl0ZW1IZWlnaHQpO1xuICBjb25zdCBlbmRJbmRleCA9IE1hdGgubWluKFxuICAgIHN0YXJ0SW5kZXggKyBNYXRoLmNlaWwoY29udGFpbmVySGVpZ2h0IC8gaXRlbUhlaWdodCkgKyAxLFxuICAgIGl0ZW1zLmxlbmd0aFxuICApO1xuXG4gIGNvbnN0IHZpc2libGVJdGVtcyA9IHVzZU1lbW8oKCkgPT4ge1xuICAgIHJldHVybiBpdGVtcy5zbGljZShzdGFydEluZGV4LCBlbmRJbmRleCkubWFwKChpdGVtLCBpbmRleCkgPT4gKHtcbiAgICAgIGl0ZW0sXG4gICAgICBpbmRleDogc3RhcnRJbmRleCArIGluZGV4LFxuICAgICAgb2Zmc2V0WTogKHN0YXJ0SW5kZXggKyBpbmRleCkgKiBpdGVtSGVpZ2h0LFxuICAgIH0pKTtcbiAgfSwgW2l0ZW1zLCBzdGFydEluZGV4LCBlbmRJbmRleCwgaXRlbUhlaWdodF0pO1xuXG4gIGNvbnN0IHRvdGFsSGVpZ2h0ID0gaXRlbXMubGVuZ3RoICogaXRlbUhlaWdodDtcblxuICBjb25zdCBvblNjcm9sbCA9IHVzZUNhbGxiYWNrKChlOiBSZWFjdC5VSUV2ZW50PEhUTUxEaXZFbGVtZW50PikgPT4ge1xuICAgIHNldFNjcm9sbFRvcChlLmN1cnJlbnRUYXJnZXQuc2Nyb2xsVG9wKTtcbiAgfSwgW10pO1xuXG4gIHJldHVybiB7XG4gICAgdmlzaWJsZUl0ZW1zLFxuICAgIHRvdGFsSGVpZ2h0LFxuICAgIG9uU2Nyb2xsLFxuICAgIGNvbnRhaW5lclN0eWxlOiB7XG4gICAgICBoZWlnaHQ6IGNvbnRhaW5lckhlaWdodCxcbiAgICAgIG92ZXJmbG93OiAnYXV0bycgYXMgY29uc3QsXG4gICAgfSxcbiAgfTtcbn07XG5cbmV4cG9ydCBkZWZhdWx0IHBlcmZvcm1hbmNlT3B0aW1pemVyOyAiXSwibmFtZXMiOlsiY3JlYXRlT3B0aW1pemVkVHJhbnNpdGlvbiIsInBlcmZvcm1hbmNlT3B0aW1pemVyIiwic2hhbGxvd0VxdWFsIiwidXNlRGVib3VuY2VkVmFsdWUiLCJ1c2VFeHBlbnNpdmVNZW1vIiwidXNlSW50ZXJzZWN0aW9uT2JzZXJ2ZXIiLCJ1c2VQZXJmb3JtYW5jZU9wdGltaXphdGlvbiIsInVzZVJlbmRlclBlcmZvcm1hbmNlIiwidXNlU3RhYmxlQXJyYXkiLCJ1c2VTdGFibGVDYWxsYmFjayIsInVzZVN0YWJsZU9iamVjdCIsInVzZVZpcnR1YWxpemF0aW9uIiwid2l0aE1lbW8iLCJ3aXRoUGVyZm9ybWFuY2VNb25pdG9yaW5nIiwiREVGQVVMVF9QRVJGT1JNQU5DRV9DT05GSUciLCJlbmFibGVHUFVBY2NlbGVyYXRpb24iLCJiYXRjaERPTVVwZGF0ZXMiLCJlbmFibGVDYWNoaW5nIiwibWF4Q2FjaGVTaXplIiwidGFyZ2V0RnJhbWVSYXRlIiwiZW5hYmxlTWV0cmljcyIsIm1lbW9yeVRocmVzaG9sZCIsIlBlcmZvcm1hbmNlT3B0aW1pemVyIiwidXBkYXRlQ29uZmlnIiwibmV3Q29uZmlnIiwiY29uZmlnIiwiZnJhbWVSYXRlTW9uaXRvciIsInN0YXJ0RnJhbWVSYXRlTW9uaXRvcmluZyIsInN0b3BGcmFtZVJhdGVNb25pdG9yaW5nIiwibWVhc3VyZUZyYW1lUmF0ZSIsInRpbWVzdGFtcCIsImxhc3RGcmFtZVRpbWUiLCJkZWx0YVRpbWUiLCJmcmFtZUNvdW50IiwiY3VycmVudEZyYW1lUmF0ZSIsIk1hdGgiLCJyb3VuZCIsInJlcXVlc3RBbmltYXRpb25GcmFtZSIsImNhbmNlbEFuaW1hdGlvbkZyYW1lIiwiZ2VuZXJhdGVDYWNoZUtleSIsInRoZW1lTmFtZSIsImNvbG9yTW9kZSIsImNvbnRleHR1YWxUaGVtZSIsImNhY2hlVGhlbWVWYXJpYWJsZXMiLCJ2YXJpYWJsZXMiLCJrZXkiLCJ0aGVtZUNhY2hlIiwic2l6ZSIsImNsZWFuQ2FjaGUiLCJzZXQiLCJjc3NWYXJpYWJsZXMiLCJEYXRlIiwibm93IiwiYWNjZXNzQ291bnQiLCJnZXRDYWNoZWRUaGVtZVZhcmlhYmxlcyIsImNhY2hlZCIsImdldCIsImVudHJpZXMiLCJBcnJheSIsImZyb20iLCJ2YWx1ZXMiLCJzb3J0IiwiYSIsImIiLCJ0b1JlbW92ZSIsImZsb29yIiwibGVuZ3RoIiwiaSIsImRlbGV0ZSIsImFwcGx5R1BVQWNjZWxlcmF0aW9uIiwiZWxlbWVudCIsInN0eWxlIiwidHJhbnNmb3JtIiwiYmFja2ZhY2VWaXNpYmlsaXR5IiwicGVyc3BlY3RpdmUiLCJ3aWxsQ2hhbmdlIiwicmVtb3ZlR1BVQWNjZWxlcmF0aW9uIiwicXVldWVET01VcGRhdGUiLCJwcm9wZXJ0aWVzIiwicHJpb3JpdHkiLCJPYmplY3QiLCJmb3JFYWNoIiwicHJvcCIsInZhbHVlIiwic2V0UHJvcGVydHkiLCJkb21VcGRhdGVRdWV1ZSIsInB1c2giLCJpc1Byb2Nlc3NpbmdVcGRhdGVzIiwicHJvY2Vzc0RPTVVwZGF0ZXMiLCJwcmlvcml0eU9yZGVyIiwiaGlnaCIsIm1lZGl1bSIsImxvdyIsImJhdGNoU2l6ZSIsIm1pbiIsImJhdGNoIiwic3BsaWNlIiwicHJlbG9hZFRoZW1lUmVzb3VyY2VzIiwidGhlbWVzIiwiUHJvbWlzZSIsInJlc29sdmUiLCJwcmVsb2FkUHJvbWlzZXMiLCJtYXAiLCJ0aGVtZSIsInRoZW1lUmVzb2x2ZSIsInNldFRpbWVvdXQiLCJjb25zb2xlIiwibG9nIiwiYWxsIiwidGhlbiIsIm9wdGltaXplRWxlbWVudEZvclRyYW5zaXRpb24iLCJjb250YWluIiwiaXNvbGF0aW9uIiwidHJhbnNpdGlvblByb3BlcnRpZXMiLCJ0cmFuc2l0aW9uIiwiam9pbiIsImNsZWFudXBFbGVtZW50T3B0aW1pemF0aW9ucyIsImdldE1lbW9yeVVzYWdlIiwicGVyZm9ybWFuY2UiLCJtZW1vcnkiLCJ1c2VkSlNIZWFwU2l6ZSIsImlzTWVtb3J5VXNhZ2VIZWFsdGh5IiwidXNhZ2UiLCJmb3JjZUdhcmJhZ2VDb2xsZWN0aW9uIiwid2luZG93IiwiZ2MiLCJyZWNvcmRNZXRyaWNzIiwidHJhbnNpdGlvbkR1cmF0aW9uIiwiZG9tVXBkYXRlcyIsIm1ldHJpY3MiLCJmcmFtZVJhdGUiLCJtZW1vcnlVc2FnZSIsImNhY2hlSGl0cyIsImdldENhY2hlSGl0UmF0ZSIsImhpdHMiLCJjYWNoZU1pc3NlcyIsIm1pc3NlcyIsInNsaWNlIiwicmVkdWNlIiwic3VtIiwiZW50cnkiLCJtYXgiLCJnZXRQZXJmb3JtYW5jZVJlcG9ydCIsImF2ZXJhZ2VUcmFuc2l0aW9uRHVyYXRpb24iLCJhdmVyYWdlRnJhbWVSYXRlIiwiYXZlcmFnZU1lbW9yeVVzYWdlIiwiY2FjaGVFZmZpY2llbmN5IiwidG90YWxUcmFuc2l0aW9ucyIsImF2Z1RyYW5zaXRpb25EdXJhdGlvbiIsIm0iLCJhdmdGcmFtZVJhdGUiLCJhdmdNZW1vcnlVc2FnZSIsInRvdGFsSGl0cyIsInRvdGFsTWlzc2VzIiwiY2xlYXJDYWNoZXMiLCJjbGVhciIsImRlc3Ryb3kiLCJNYXAiLCJvcHRpbWl6ZUVsZW1lbnQiLCJjbGVhbnVwRWxlbWVudCIsInF1ZXVlVXBkYXRlIiwiZ2V0UmVwb3J0IiwiaXNIZWFsdGh5IiwiZm4iLCJuYW1lIiwiYXJncyIsInN0YXJ0VGltZSIsIm9ic2VydmVyIiwiTXV0YXRpb25PYnNlcnZlciIsIm11dGF0aW9ucyIsIm9ic2VydmUiLCJkb2N1bWVudCIsImJvZHkiLCJhdHRyaWJ1dGVzIiwiY2hpbGRMaXN0Iiwic3VidHJlZSIsImF0dHJpYnV0ZUZpbHRlciIsInJlc3VsdCIsImVuZFRpbWUiLCJkdXJhdGlvbiIsImRpc2Nvbm5lY3QiLCJ0b0ZpeGVkIiwiZXJyb3IiLCJmcm9tU3RhdGUiLCJ0b1N0YXRlIiwiY3NzUHJvcGVydHkiLCJyZXBsYWNlIiwidG9Mb3dlckNhc2UiLCJvZmZzZXRIZWlnaHQiLCJmYWN0b3J5IiwiZGVwcyIsInVzZU1lbW8iLCJjYWxsYmFjayIsInVzZUNhbGxiYWNrIiwiZGVsYXkiLCJkZWJvdW5jZWRWYWx1ZSIsInNldERlYm91bmNlZFZhbHVlIiwiUmVhY3QiLCJ1c2VTdGF0ZSIsInVzZUVmZmVjdCIsImhhbmRsZXIiLCJjbGVhclRpbWVvdXQiLCJDb21wb25lbnQiLCJhcmVFcXVhbCIsIm1lbW8iLCJwcmV2UHJvcHMiLCJuZXh0UHJvcHMiLCJwcmV2S2V5cyIsImtleXMiLCJuZXh0S2V5cyIsIm9wdGlvbnMiLCJpc0ludGVyc2VjdGluZyIsInNldElzSW50ZXJzZWN0aW5nIiwicmVmIiwidXNlUmVmIiwiY3VycmVudCIsIkludGVyc2VjdGlvbk9ic2VydmVyIiwidW5vYnNlcnZlIiwib2JqIiwiSlNPTiIsInN0cmluZ2lmeSIsImFyciIsImNvbXBvbmVudE5hbWUiLCJlbmFibGVkIiwicHJvY2VzcyIsImVudiIsIk5PREVfRU5WIiwicmVuZGVyU3RhcnRUaW1lIiwicmVuZGVyVGltZSIsIndhcm4iLCJpdGVtcyIsIml0ZW1IZWlnaHQiLCJjb250YWluZXJIZWlnaHQiLCJzY3JvbGxUb3AiLCJzZXRTY3JvbGxUb3AiLCJzdGFydEluZGV4IiwiZW5kSW5kZXgiLCJjZWlsIiwidmlzaWJsZUl0ZW1zIiwiaXRlbSIsImluZGV4Iiwib2Zmc2V0WSIsInRvdGFsSGVpZ2h0Iiwib25TY3JvbGwiLCJlIiwiY3VycmVudFRhcmdldCIsImNvbnRhaW5lclN0eWxlIiwiaGVpZ2h0Iiwib3ZlcmZsb3ciXSwibWFwcGluZ3MiOiJBQUFBOzs7Ozs7Ozs7Ozs7OztDQWNDLEdBRUQsbUNBQW1DOzs7Ozs7Ozs7Ozs7SUEwaEJuQkEseUJBQXlCO2VBQXpCQTs7SUErTmhCLE9BQW9DO2VBQXBDOztJQW5UYUMsb0JBQW9CO2VBQXBCQTs7SUErS0FDLFlBQVk7ZUFBWkE7O0lBN0JBQyxpQkFBaUI7ZUFBakJBOztJQXBCQUMsZ0JBQWdCO2VBQWhCQTs7SUF3RUFDLHVCQUF1QjtlQUF2QkE7O0lBak1HQywwQkFBMEI7ZUFBMUJBOztJQTZPSEMsb0JBQW9CO2VBQXBCQTs7SUFQQUMsY0FBYztlQUFkQTs7SUFuR0FDLGlCQUFpQjtlQUFqQkE7O0lBNEZBQyxlQUFlO2VBQWZBOztJQXlDQUMsaUJBQWlCO2VBQWpCQTs7SUF4R0FDLFFB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