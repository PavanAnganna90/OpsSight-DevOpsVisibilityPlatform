a70b7001b3848d2e11b473ac08c89253
"use strict";
Object.defineProperty(exports, "__esModule", {
    value: true
});
Object.defineProperty(exports, "default", {
    enumerable: true,
    get: function() {
        return _default;
    }
});
const _jsxruntime = require("react/jsx-runtime");
const _react = /*#__PURE__*/ _interop_require_default(require("react"));
function _interop_require_default(obj) {
    return obj && obj.__esModule ? obj : {
        default: obj
    };
}
/**
 * PermissionAssignment - Assign permissions to a role.
 * Accessibility and UI polish improvements included.
 *
 * Props:
 *   allPermissions: Array<{ id, name, display_name, category }>
 *   assigned: string[] (permission names assigned to the role)
 *   onChange: (updated: string[]) => void
 *   loading?: boolean (disable checkboxes when true)
 *   error?: string
 */ const PermissionAssignment = ({ allPermissions = [], assigned = [], onChange, loading = false, error = '' })=>{
    // Group permissions by category
    const grouped = allPermissions.reduce((acc, perm)=>{
        if (!acc[perm.category]) acc[perm.category] = [];
        acc[perm.category].push(perm);
        return acc;
    }, {});
    const handleToggle = (permName)=>{
        if (assigned.includes(permName)) {
            onChange(assigned.filter((n)=>n !== permName));
        } else {
            onChange([
                ...assigned,
                permName
            ]);
        }
    };
    return /*#__PURE__*/ (0, _jsxruntime.jsxs)("div", {
        children: [
            Object.keys(grouped).length === 0 ? /*#__PURE__*/ (0, _jsxruntime.jsx)("div", {
                className: "text-gray-500",
                children: "No permissions available."
            }) : /*#__PURE__*/ (0, _jsxruntime.jsx)("div", {
                className: "max-h-60 overflow-y-auto border rounded p-2 bg-gray-50 dark:bg-gray-800",
                children: Object.keys(grouped).map((category)=>/*#__PURE__*/ (0, _jsxruntime.jsxs)("div", {
                        className: "mb-2",
                        children: [
                            /*#__PURE__*/ (0, _jsxruntime.jsx)("div", {
                                className: "font-semibold text-xs text-gray-700 dark:text-gray-300 mb-1",
                                children: category
                            }),
                            grouped[category].map((perm)=>/*#__PURE__*/ (0, _jsxruntime.jsxs)("label", {
                                    htmlFor: `perm-checkbox-${perm.id}`,
                                    className: "flex items-center gap-2 text-sm mb-1",
                                    children: [
                                        /*#__PURE__*/ (0, _jsxruntime.jsx)("input", {
                                            id: `perm-checkbox-${perm.id}`,
                                            type: "checkbox",
                                            checked: assigned.includes(perm.name),
                                            onChange: ()=>handleToggle(perm.name),
                                            disabled: loading,
                                            className: "focus:outline-none focus-visible:ring-2 focus-visible:ring-blue-500"
                                        }),
                                        perm.display_name
                                    ]
                                }, perm.id))
                        ]
                    }, category))
            }),
            /*#__PURE__*/ (0, _jsxruntime.jsx)("div", {
                "aria-live": "polite",
                children: error && /*#__PURE__*/ (0, _jsxruntime.jsx)("div", {
                    className: "text-red-500 mt-2",
                    children: error
                })
            })
        ]
    });
};
const _default = PermissionAssignment;

//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi9Vc2Vycy9wYXZhbi9EZXNrdG9wL0Rldm9wcy1hcHAtZGV2LWN1cnNvci9mcm9udGVuZC9zcmMvY29tcG9uZW50cy9hZG1pbi9QZXJtaXNzaW9uQXNzaWdubWVudC50c3giXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IFJlYWN0IGZyb20gJ3JlYWN0JztcblxuLyoqXG4gKiBQZXJtaXNzaW9uQXNzaWdubWVudCAtIEFzc2lnbiBwZXJtaXNzaW9ucyB0byBhIHJvbGUuXG4gKiBBY2Nlc3NpYmlsaXR5IGFuZCBVSSBwb2xpc2ggaW1wcm92ZW1lbnRzIGluY2x1ZGVkLlxuICpcbiAqIFByb3BzOlxuICogICBhbGxQZXJtaXNzaW9uczogQXJyYXk8eyBpZCwgbmFtZSwgZGlzcGxheV9uYW1lLCBjYXRlZ29yeSB9PlxuICogICBhc3NpZ25lZDogc3RyaW5nW10gKHBlcm1pc3Npb24gbmFtZXMgYXNzaWduZWQgdG8gdGhlIHJvbGUpXG4gKiAgIG9uQ2hhbmdlOiAodXBkYXRlZDogc3RyaW5nW10pID0+IHZvaWRcbiAqICAgbG9hZGluZz86IGJvb2xlYW4gKGRpc2FibGUgY2hlY2tib3hlcyB3aGVuIHRydWUpXG4gKiAgIGVycm9yPzogc3RyaW5nXG4gKi9cbmNvbnN0IFBlcm1pc3Npb25Bc3NpZ25tZW50ID0gKHtcbiAgYWxsUGVybWlzc2lvbnMgPSBbXSxcbiAgYXNzaWduZWQgPSBbXSxcbiAgb25DaGFuZ2UsXG4gIGxvYWRpbmcgPSBmYWxzZSxcbiAgZXJyb3IgPSAnJyxcbn06IHtcbiAgYWxsUGVybWlzc2lvbnM6IEFycmF5PHsgaWQ6IG51bWJlcjsgbmFtZTogc3RyaW5nOyBkaXNwbGF5X25hbWU6IHN0cmluZzsgY2F0ZWdvcnk6IHN0cmluZyB9PjtcbiAgYXNzaWduZWQ6IHN0cmluZ1tdO1xuICBvbkNoYW5nZTogKHVwZGF0ZWQ6IHN0cmluZ1tdKSA9PiB2b2lkO1xuICBsb2FkaW5nPzogYm9vbGVhbjtcbiAgZXJyb3I/OiBzdHJpbmc7XG59KSA9PiB7XG4gIC8vIEdyb3VwIHBlcm1pc3Npb25zIGJ5IGNhdGVnb3J5XG4gIGNvbnN0IGdyb3VwZWQgPSBhbGxQZXJtaXNzaW9ucy5yZWR1Y2UoKGFjYzogYW55LCBwZXJtKSA9PiB7XG4gICAgaWYgKCFhY2NbcGVybS5jYXRlZ29yeV0pIGFjY1twZXJtLmNhdGVnb3J5XSA9IFtdO1xuICAgIGFjY1twZXJtLmNhdGVnb3J5XS5wdXNoKHBlcm0pO1xuICAgIHJldHVybiBhY2M7XG4gIH0sIHt9KTtcblxuICBjb25zdCBoYW5kbGVUb2dnbGUgPSAocGVybU5hbWU6IHN0cmluZykgPT4ge1xuICAgIGlmIChhc3NpZ25lZC5pbmNsdWRlcyhwZXJtTmFtZSkpIHtcbiAgICAgIG9uQ2hhbmdlKGFzc2lnbmVkLmZpbHRlcihuID0+IG4gIT09IHBlcm1OYW1lKSk7XG4gICAgfSBlbHNlIHtcbiAgICAgIG9uQ2hhbmdlKFsuLi5hc3NpZ25lZCwgcGVybU5hbWVdKTtcbiAgICB9XG4gIH07XG5cbiAgcmV0dXJuIChcbiAgICA8ZGl2PlxuICAgICAge09iamVjdC5rZXlzKGdyb3VwZWQpLmxlbmd0aCA9PT0gMCA/IChcbiAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJ0ZXh0LWdyYXktNTAwXCI+Tm8gcGVybWlzc2lvbnMgYXZhaWxhYmxlLjwvZGl2PlxuICAgICAgKSA6IChcbiAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJtYXgtaC02MCBvdmVyZmxvdy15LWF1dG8gYm9yZGVyIHJvdW5kZWQgcC0yIGJnLWdyYXktNTAgZGFyazpiZy1ncmF5LTgwMFwiPlxuICAgICAgICAgIHtPYmplY3Qua2V5cyhncm91cGVkKS5tYXAoY2F0ZWdvcnkgPT4gKFxuICAgICAgICAgICAgPGRpdiBrZXk9e2NhdGVnb3J5fSBjbGFzc05hbWU9XCJtYi0yXCI+XG4gICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiZm9udC1zZW1pYm9sZCB0ZXh0LXhzIHRleHQtZ3JheS03MDAgZGFyazp0ZXh0LWdyYXktMzAwIG1iLTFcIj57Y2F0ZWdvcnl9PC9kaXY+XG4gICAgICAgICAgICAgIHtncm91cGVkW2NhdGVnb3J5XS5tYXAoKHBlcm06IGFueSkgPT4gKFxuICAgICAgICAgICAgICAgIDxsYWJlbCBrZXk9e3Blcm0uaWR9IGh0bWxGb3I9e2BwZXJtLWNoZWNrYm94LSR7cGVybS5pZH1gfSBjbGFzc05hbWU9XCJmbGV4IGl0ZW1zLWNlbnRlciBnYXAtMiB0ZXh0LXNtIG1iLTFcIj5cbiAgICAgICAgICAgICAgICAgIDxpbnB1dFxuICAgICAgICAgICAgICAgICAgICBpZD17YHBlcm0tY2hlY2tib3gtJHtwZXJtLmlkfWB9XG4gICAgICAgICAgICAgICAgICAgIHR5cGU9XCJjaGVja2JveFwiXG4gICAgICAgICAgICAgICAgICAgIGNoZWNrZWQ9e2Fzc2lnbmVkLmluY2x1ZGVzKHBlcm0ubmFtZSl9XG4gICAgICAgICAgICAgICAgICAgIG9uQ2hhbmdlPXsoKSA9PiBoYW5kbGVUb2dnbGUocGVybS5uYW1lKX1cbiAgICAgICAgICAgICAgICAgICAgZGlzYWJsZWQ9e2xvYWRpbmd9XG4gICAgICAgICAgICAgICAgICAgIGNsYXNzTmFtZT1cImZvY3VzOm91dGxpbmUtbm9uZSBmb2N1cy12aXNpYmxlOnJpbmctMiBmb2N1cy12aXNpYmxlOnJpbmctYmx1ZS01MDBcIlxuICAgICAgICAgICAgICAgICAgLz5cbiAgICAgICAgICAgICAgICAgIHtwZXJtLmRpc3BsYXlfbmFtZX1cbiAgICAgICAgICAgICAgICA8L2xhYmVsPlxuICAgICAgICAgICAgICApKX1cbiAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICkpfVxuICAgICAgICA8L2Rpdj5cbiAgICAgICl9XG4gICAgICA8ZGl2IGFyaWEtbGl2ZT1cInBvbGl0ZVwiPlxuICAgICAgICB7ZXJyb3IgJiYgPGRpdiBjbGFzc05hbWU9XCJ0ZXh0LXJlZC01MDAgbXQtMlwiPntlcnJvcn08L2Rpdj59XG4gICAgICA8L2Rpdj5cbiAgICA8L2Rpdj5cbiAgKTtcbn07XG5cbmV4cG9ydCBkZWZhdWx0IFBlcm1pc3Npb25Bc3NpZ25tZW50OyAiXSwibmFtZXMiOlsiUGVybWlzc2lvbkFzc2lnbm1lbnQiLCJhbGxQZXJtaXNzaW9ucyIsImFzc2lnbmVkIiwib25DaGFuZ2UiLCJsb2FkaW5nIiwiZXJyb3IiLCJncm91cGVkIiwicmVkdWNlIiwiYWNjIiwicGVybSIsImNhdGVnb3J5IiwicHVzaCIsImhhbmRsZVRvZ2dsZSIsInBlcm1OYW1lIiwiaW5jbHVkZXMiLCJmaWx0ZXIiLCJuIiwiZGl2IiwiT2JqZWN0Iiwia2V5cyIsImxlbmd0aCIsImNsYXNzTmFtZSIsIm1hcCIsImxhYmVsIiwiaHRtbEZvciIsImlkIiwiaW5wdXQiLCJ0eXBlIiwiY2hlY2tlZCIsIm5hbWUiLCJkaXNhYmxlZCIsImRpc3BsYXlfbmFtZSIsImFyaWEtbGl2ZSJdLCJtYXBwaW5ncyI6Ijs7OzsrQkEwRUE7OztlQUFBOzs7OzhEQTFFa0I7Ozs7OztBQUVsQjs7Ozs7Ozs7OztDQVVDLEdBQ0QsTUFBTUEsdUJBQXVCLENBQUMsRUFDNUJDLGlCQUFpQixFQUFFLEVBQ25CQyxXQUFXLEVBQUUsRUFDYkMsUUFBUSxFQUNSQyxVQUFVLEtBQUssRUFDZkMsUUFBUSxFQUFFLEVBT1g7SUFDQyxnQ0FBZ0M7SUFDaEMsTUFBTUMsVUFBVUwsZUFBZU0sTUFBTSxDQUFDLENBQUNDLEtBQVVDO1FBQy9DLElBQUksQ0FBQ0QsR0FBRyxDQUFDQyxLQUFLQyxRQUFRLENBQUMsRUFBRUYsR0FBRyxDQUFDQyxLQUFLQyxRQUFRLENBQUMsR0FBRyxFQUFFO1FBQ2hERixHQUFHLENBQUNDLEtBQUtDLFFBQVEsQ0FBQyxDQUFDQyxJQUFJLENBQUNGO1FBQ3hCLE9BQU9EO0lBQ1QsR0FBRyxDQUFDO0lBRUosTUFBTUksZUFBZSxDQUFDQztRQUNwQixJQUFJWCxTQUFTWSxRQUFRLENBQUNELFdBQVc7WUFDL0JWLFNBQVNELFNBQVNhLE1BQU0sQ0FBQ0MsQ0FBQUEsSUFBS0EsTUFBTUg7UUFDdEMsT0FBTztZQUNMVixTQUFTO21CQUFJRDtnQkFBVVc7YUFBUztRQUNsQztJQUNGO0lBRUEscUJBQ0Usc0JBQUNJOztZQUNFQyxPQUFPQyxJQUFJLENBQUNiLFNBQVNjLE1BQU0sS0FBSyxrQkFDL0IscUJBQUNIO2dCQUFJSSxXQUFVOzBCQUFnQjsrQkFFL0IscUJBQUNKO2dCQUFJSSxXQUFVOzBCQUNaSCxPQUFPQyxJQUFJLENBQUNiLFNBQVNnQixHQUFHLENBQUNaLENBQUFBLHlCQUN4QixzQkFBQ087d0JBQW1CSSxXQUFVOzswQ0FDNUIscUJBQUNKO2dDQUFJSSxXQUFVOzBDQUErRFg7OzRCQUM3RUosT0FBTyxDQUFDSSxTQUFTLENBQUNZLEdBQUcsQ0FBQyxDQUFDYixxQkFDdEIsc0JBQUNjO29DQUFvQkMsU0FBUyxDQUFDLGNBQWMsRUFBRWYsS0FBS2dCLEVBQUUsRUFBRTtvQ0FBRUosV0FBVTs7c0RBQ2xFLHFCQUFDSzs0Q0FDQ0QsSUFBSSxDQUFDLGNBQWMsRUFBRWhCLEtBQUtnQixFQUFFLEVBQUU7NENBQzlCRSxNQUFLOzRDQUNMQyxTQUFTMUIsU0FBU1ksUUFBUSxDQUFDTCxLQUFLb0IsSUFBSTs0Q0FDcEMxQixVQUFVLElBQU1TLGFBQWFILEtBQUtvQixJQUFJOzRDQUN0Q0MsVUFBVTFCOzRDQUNWaUIsV0FBVTs7d0NBRVhaLEtBQUtzQixZQUFZOzttQ0FUUnRCLEtBQUtnQixFQUFFOzt1QkFIYmY7OzBCQW1CaEIscUJBQUNPO2dCQUFJZSxhQUFVOzBCQUNaM0IsdUJBQVMscUJBQUNZO29CQUFJSSxXQUFVOzhCQUFxQmhCOzs7OztBQUl0RDtNQUVBLFdBQWVMIn0=