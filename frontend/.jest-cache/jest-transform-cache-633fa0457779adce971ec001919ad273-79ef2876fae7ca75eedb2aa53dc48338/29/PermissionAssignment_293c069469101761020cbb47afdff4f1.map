{"version":3,"sources":["/Users/pavan/Desktop/Devops-app-dev-cursor/frontend/src/components/admin/PermissionAssignment.tsx"],"sourcesContent":["import React from 'react';\n\n/**\n * PermissionAssignment - Assign permissions to a role.\n * Accessibility and UI polish improvements included.\n *\n * Props:\n *   allPermissions: Array<{ id, name, display_name, category }>\n *   assigned: string[] (permission names assigned to the role)\n *   onChange: (updated: string[]) => void\n *   loading?: boolean (disable checkboxes when true)\n *   error?: string\n */\nconst PermissionAssignment = ({\n  allPermissions = [],\n  assigned = [],\n  onChange,\n  loading = false,\n  error = '',\n}: {\n  allPermissions: Array<{ id: number; name: string; display_name: string; category: string }>;\n  assigned: string[];\n  onChange: (updated: string[]) => void;\n  loading?: boolean;\n  error?: string;\n}) => {\n  // Group permissions by category\n  const grouped = allPermissions.reduce((acc: any, perm) => {\n    if (!acc[perm.category]) acc[perm.category] = [];\n    acc[perm.category].push(perm);\n    return acc;\n  }, {});\n\n  const handleToggle = (permName: string) => {\n    if (assigned.includes(permName)) {\n      onChange(assigned.filter(n => n !== permName));\n    } else {\n      onChange([...assigned, permName]);\n    }\n  };\n\n  return (\n    <div>\n      {Object.keys(grouped).length === 0 ? (\n        <div className=\"text-gray-500\">No permissions available.</div>\n      ) : (\n        <div className=\"max-h-60 overflow-y-auto border rounded p-2 bg-gray-50 dark:bg-gray-800\">\n          {Object.keys(grouped).map(category => (\n            <div key={category} className=\"mb-2\">\n              <div className=\"font-semibold text-xs text-gray-700 dark:text-gray-300 mb-1\">{category}</div>\n              {grouped[category].map((perm: any) => (\n                <label key={perm.id} htmlFor={`perm-checkbox-${perm.id}`} className=\"flex items-center gap-2 text-sm mb-1\">\n                  <input\n                    id={`perm-checkbox-${perm.id}`}\n                    type=\"checkbox\"\n                    checked={assigned.includes(perm.name)}\n                    onChange={() => handleToggle(perm.name)}\n                    disabled={loading}\n                    className=\"focus:outline-none focus-visible:ring-2 focus-visible:ring-blue-500\"\n                  />\n                  {perm.display_name}\n                </label>\n              ))}\n            </div>\n          ))}\n        </div>\n      )}\n      <div aria-live=\"polite\">\n        {error && <div className=\"text-red-500 mt-2\">{error}</div>}\n      </div>\n    </div>\n  );\n};\n\nexport default PermissionAssignment; "],"names":["PermissionAssignment","allPermissions","assigned","onChange","loading","error","grouped","reduce","acc","perm","category","push","handleToggle","permName","includes","filter","n","div","Object","keys","length","className","map","label","htmlFor","id","input","type","checked","name","disabled","display_name","aria-live"],"mappings":";;;;+BA0EA;;;eAAA;;;;8DA1EkB;;;;;;AAElB;;;;;;;;;;CAUC,GACD,MAAMA,uBAAuB,CAAC,EAC5BC,iBAAiB,EAAE,EACnBC,WAAW,EAAE,EACbC,QAAQ,EACRC,UAAU,KAAK,EACfC,QAAQ,EAAE,EAOX;IACC,gCAAgC;IAChC,MAAMC,UAAUL,eAAeM,MAAM,CAAC,CAACC,KAAUC;QAC/C,IAAI,CAACD,GAAG,CAACC,KAAKC,QAAQ,CAAC,EAAEF,GAAG,CAACC,KAAKC,QAAQ,CAAC,GAAG,EAAE;QAChDF,GAAG,CAACC,KAAKC,QAAQ,CAAC,CAACC,IAAI,CAACF;QACxB,OAAOD;IACT,GAAG,CAAC;IAEJ,MAAMI,eAAe,CAACC;QACpB,IAAIX,SAASY,QAAQ,CAACD,WAAW;YAC/BV,SAASD,SAASa,MAAM,CAACC,CAAAA,IAAKA,MAAMH;QACtC,OAAO;YACLV,SAAS;mBAAID;gBAAUW;aAAS;QAClC;IACF;IAEA,qBACE,sBAACI;;YACEC,OAAOC,IAAI,CAACb,SAASc,MAAM,KAAK,kBAC/B,qBAACH;gBAAII,WAAU;0BAAgB;+BAE/B,qBAACJ;gBAAII,WAAU;0BACZH,OAAOC,IAAI,CAACb,SAASgB,GAAG,CAACZ,CAAAA,yBACxB,sBAACO;wBAAmBI,WAAU;;0CAC5B,qBAACJ;gCAAII,WAAU;0CAA+DX;;4BAC7EJ,OAAO,CAACI,SAAS,CAACY,GAAG,CAAC,CAACb,qBACtB,sBAACc;oCAAoBC,SAAS,CAAC,cAAc,EAAEf,KAAKgB,EAAE,EAAE;oCAAEJ,WAAU;;sDAClE,qBAACK;4CACCD,IAAI,CAAC,cAAc,EAAEhB,KAAKgB,EAAE,EAAE;4CAC9BE,MAAK;4CACLC,SAAS1B,SAASY,QAAQ,CAACL,KAAKoB,IAAI;4CACpC1B,UAAU,IAAMS,aAAaH,KAAKoB,IAAI;4CACtCC,UAAU1B;4CACViB,WAAU;;wCAEXZ,KAAKsB,YAAY;;mCATRtB,KAAKgB,EAAE;;uBAHbf;;0BAmBhB,qBAACO;gBAAIe,aAAU;0BACZ3B,uBAAS,qBAACY;oBAAII,WAAU;8BAAqBhB;;;;;AAItD;MAEA,WAAeL"}