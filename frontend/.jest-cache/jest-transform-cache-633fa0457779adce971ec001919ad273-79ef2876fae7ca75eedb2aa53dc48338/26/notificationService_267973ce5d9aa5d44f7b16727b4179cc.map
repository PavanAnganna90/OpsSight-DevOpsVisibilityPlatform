{"version":3,"names":["createNotificationPreference","cov_tpklvlq81","f","s","getAvailableChannels","getNotificationFrequencies","getNotificationPreferences","getNotificationTypes","resetNotificationPreferences","testNotificationChannel","updateNotificationPreference","API_BASE","response","fetch","ok","b","Error","status","json","error","console","preference","method","headers","body","JSON","stringify","id","updates","channel","message","value","label"],"sources":["/Users/pavan/Desktop/Devops-app-dev-cursor/frontend/src/services/notificationService.ts"],"sourcesContent":["/**\n * Notification Service API\n * \n * Handles communication with the notification preferences API endpoints.\n */\n\n// Note: Using direct fetch for now - could integrate with existing API utilities later\n\n// Types\nexport interface NotificationPreference {\n  id: number;\n  notification_type: string;\n  channel: string;\n  frequency: string;\n  enabled: boolean;\n  team_id?: number;\n  project_id?: number;\n  min_severity?: string;\n  quiet_hours_start?: string;\n  quiet_hours_end?: string;\n  timezone: string;\n  created_at: string;\n  updated_at: string;\n}\n\nexport interface NotificationPreferenceCreate {\n  notification_type: string;\n  channel: string;\n  frequency: string;\n  enabled: boolean;\n  timezone: string;\n  team_id?: number;\n  project_id?: number;\n  min_severity?: string;\n  quiet_hours_start?: string;\n  quiet_hours_end?: string;\n}\n\nexport interface NotificationPreferenceUpdate {\n  enabled?: boolean;\n  frequency?: string;\n  min_severity?: string;\n  quiet_hours_start?: string | null;\n  quiet_hours_end?: string | null;\n  timezone?: string;\n}\n\nexport interface ChannelOption {\n  value: string;\n  label: string;\n}\n\nexport interface TestResult {\n  status: string;\n  error?: string;\n}\n\n// API base URL\nconst API_BASE = '/api/v1/notifications';\n\n/**\n * Get all notification preferences for the current user\n */\nexport const getNotificationPreferences = async (): Promise<NotificationPreference[]> => {\n  try {\n    const response = await fetch(`${API_BASE}/preferences`);\n    if (!response.ok) {\n      throw new Error(`HTTP error! status: ${response.status}`);\n    }\n    return await response.json();\n  } catch (error) {\n    console.error('Failed to fetch notification preferences:', error);\n    throw error;\n  }\n};\n\n/**\n * Create a new notification preference\n */\nexport const createNotificationPreference = async (\n  preference: NotificationPreferenceCreate\n): Promise<NotificationPreference> => {\n  try {\n    const response = await fetch(`${API_BASE}/preferences`, {\n      method: 'POST',\n      headers: {\n        'Content-Type': 'application/json',\n      },\n      body: JSON.stringify(preference),\n    });\n    if (!response.ok) {\n      throw new Error(`HTTP error! status: ${response.status}`);\n    }\n    return await response.json();\n  } catch (error) {\n    console.error('Failed to create notification preference:', error);\n    throw error;\n  }\n};\n\n/**\n * Update an existing notification preference\n */\nexport const updateNotificationPreference = async (\n  id: number,\n  updates: NotificationPreferenceUpdate\n): Promise<NotificationPreference> => {\n  try {\n    const response = await fetch(`${API_BASE}/preferences/${id}`, {\n      method: 'PUT',\n      headers: {\n        'Content-Type': 'application/json',\n      },\n      body: JSON.stringify(updates),\n    });\n    if (!response.ok) {\n      throw new Error(`HTTP error! status: ${response.status}`);\n    }\n    return await response.json();\n  } catch (error) {\n    console.error('Failed to update notification preference:', error);\n    throw error;\n  }\n};\n\n/**\n * Reset notification preferences to defaults\n */\nexport const resetNotificationPreferences = async (): Promise<NotificationPreference[]> => {\n  try {\n    const response = await fetch(`${API_BASE}/preferences/reset`, {\n      method: 'POST',\n    });\n    if (!response.ok) {\n      throw new Error(`HTTP error! status: ${response.status}`);\n    }\n    return await response.json();\n  } catch (error) {\n    console.error('Failed to reset notification preferences:', error);\n    throw error;\n  }\n};\n\n/**\n * Test a notification channel\n */\nexport const testNotificationChannel = async (\n  channel: string,\n  message?: string\n): Promise<TestResult> => {\n  try {\n    const response = await fetch(`${API_BASE}/test/${channel}`, {\n      method: 'POST',\n      headers: {\n        'Content-Type': 'application/json',\n      },\n      body: JSON.stringify({ message: message || 'Test notification from OpsSight' }),\n    });\n    if (!response.ok) {\n      throw new Error(`HTTP error! status: ${response.status}`);\n    }\n    return await response.json();\n  } catch (error) {\n    console.error('Failed to test notification channel:', error);\n    throw error;\n  }\n};\n\n/**\n * Get available notification channels\n */\nexport const getAvailableChannels = async (): Promise<ChannelOption[]> => {\n  // Return static data for now - this could be fetched from API\n  return [\n    { value: 'email', label: 'Email' },\n    { value: 'slack', label: 'Slack' },\n    { value: 'webhook', label: 'Webhook' }\n  ];\n};\n\n/**\n * Get available notification types\n */\nexport const getNotificationTypes = async (): Promise<ChannelOption[]> => {\n  // Return static data for now - this could be fetched from API\n  return [\n    { value: 'alert_triggered', label: 'Alert Triggered' },\n    { value: 'alert_resolved', label: 'Alert Resolved' },\n    { value: 'pipeline_failed', label: 'Pipeline Failed' },\n    { value: 'pipeline_succeeded', label: 'Pipeline Succeeded' },\n    { value: 'deployment_started', label: 'Deployment Started' },\n    { value: 'deployment_completed', label: 'Deployment Completed' },\n    { value: 'security_vulnerability', label: 'Security Vulnerability' },\n    { value: 'system_maintenance', label: 'System Maintenance' }\n  ];\n};\n\n/**\n * Get available notification frequencies\n */\nexport const getNotificationFrequencies = async (): Promise<ChannelOption[]> => {\n  // Return static data for now - this could be fetched from API\n  return [\n    { value: 'immediate', label: 'Immediate' },\n    { value: 'hourly', label: 'Hourly Digest' },\n    { value: 'daily', label: 'Daily Digest' },\n    { value: 'weekly', label: 'Weekly Digest' }\n  ];\n}; "],"mappings":"AAAA;;;;GAAA,CAMA;AAEA;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;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","ignoreList":[]}