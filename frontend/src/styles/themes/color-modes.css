/**
 * Color mode specific styles and transitions
 * Provides smooth transitions between light, dark, and high-contrast modes
 */

/* Base color mode transition setup */
:root {
  /* Transition timing for color mode changes */
  --color-mode-transition-duration: 0.3s;
  --color-mode-transition-timing: ease;
  
  /* Color mode specific CSS custom properties */
  color-scheme: light;
}

/* Respect user's motion preferences */
@media (prefers-reduced-motion: reduce) {
  :root {
    --color-mode-transition-duration: 0s;
  }
}

/* Global transitions for color mode changes */
*,
*::before,
*::after {
  transition: 
    background-color var(--color-mode-transition-duration) var(--color-mode-transition-timing),
    color var(--color-mode-transition-duration) var(--color-mode-transition-timing),
    border-color var(--color-mode-transition-duration) var(--color-mode-transition-timing),
    box-shadow var(--color-mode-transition-duration) var(--color-mode-transition-timing),
    fill var(--color-mode-transition-duration) var(--color-mode-transition-timing),
    stroke var(--color-mode-transition-duration) var(--color-mode-transition-timing);
}

/* Disable transitions on elements that shouldn't animate */
.no-transition,
.no-transition *,
[data-no-transition],
[data-no-transition] *,
/* Disable on interactive elements during interaction */
button:active,
input:focus,
textarea:focus,
select:focus {
  transition: none !important;
}

/* Light mode specific styles */
.color-mode-light {
  color-scheme: light;
}

.color-mode-light :root {
  --mode-background: #ffffff;
  --mode-foreground: #000000;
  --mode-surface: #f8f9fa;
  --mode-border: #e9ecef;
  --mode-shadow: rgba(0, 0, 0, 0.1);
  --mode-overlay: rgba(0, 0, 0, 0.5);
  --mode-invert: 0;
}

/* Dark mode specific styles */
.color-mode-dark {
  color-scheme: dark;
}

.color-mode-dark :root {
  --mode-background: #0a0a0a;
  --mode-foreground: #ffffff;
  --mode-surface: #1a1a1a;
  --mode-border: #2a2a2a;
  --mode-shadow: rgba(0, 0, 0, 0.3);
  --mode-overlay: rgba(0, 0, 0, 0.7);
  --mode-invert: 1;
}

/* High contrast mode specific styles */
.color-mode-high-contrast {
  color-scheme: dark;
  forced-color-adjust: none; /* Prevents browser from overriding our colors */
}

.color-mode-high-contrast :root {
  --mode-background: #000000;
  --mode-foreground: #ffffff;
  --mode-surface: #000000;
  --mode-border: #ffffff;
  --mode-shadow: none;
  --mode-overlay: rgba(0, 0, 0, 0.9);
  --mode-invert: 1;
}

/* High contrast mode enhancements */
.color-mode-high-contrast * {
  /* Increase text contrast */
  text-shadow: none !important;
  
  /* Remove background images that might interfere with readability */
  background-image: none !important;
  
  /* Ensure borders are visible */
  border-width: 2px !important;
  border-style: solid !important;
}

.color-mode-high-contrast button,
.color-mode-high-contrast input,
.color-mode-high-contrast textarea,
.color-mode-high-contrast select {
  /* Ensure form elements have proper contrast */
  background-color: var(--mode-background) !important;
  color: var(--mode-foreground) !important;
  border-color: var(--mode-foreground) !important;
}

.color-mode-high-contrast a {
  /* Make links more visible */
  text-decoration: underline !important;
  text-decoration-thickness: 2px !important;
}

.color-mode-high-contrast :focus,
.color-mode-high-contrast :focus-visible {
  /* Enhanced focus indicators */
  outline: 4px solid var(--mode-foreground) !important;
  outline-offset: 2px !important;
}

/* Theme-specific color mode adaptations */

/* Minimal theme color mode adaptations */
.theme-minimal.color-mode-dark {
  /* Enhanced spacing for dark mode readability */
  --minimal-emphasis: 'medium';
  --shadow-intensity: '0.05';
}

.theme-minimal.color-mode-high-contrast {
  /* Maximum clarity for minimal theme */
  --minimal-emphasis: 'strong';
  --border-style: '3px solid';
  --shadow-intensity: '0';
}

/* Neo-brutalist theme color mode adaptations */
.theme-neo-brutalist.color-mode-dark {
  /* Invert the brutal aesthetic for dark mode */
  --brutalist-border: '3px solid #ffffff';
  --brutalist-shadow: '6px 6px 0px #ffffff';
}

.theme-neo-brutalist.color-mode-high-contrast {
  /* Extra brutal in high contrast */
  --brutalist-border: '5px solid #ffffff';
  --brutalist-shadow: '8px 8px 0px #ffffff';
}

/* Glassmorphic theme color mode adaptations */
.theme-glassmorphic.color-mode-dark {
  /* Darker glass effects */
  --glass-backdrop: 'blur(15px) saturate(120%)';
  --glass-border: '1px solid rgba(255, 255, 255, 0.1)';
  --glass-background: 'rgba(0, 0, 0, 0.2)';
}

.theme-glassmorphic.color-mode-high-contrast {
  /* Remove glass effects for clarity */
  --glass-backdrop: 'none';
  --glass-border: '2px solid #ffffff';
  --glass-background: '#000000';
}

.theme-glassmorphic.color-mode-high-contrast * {
  backdrop-filter: none !important;
  background: var(--mode-background) !important;
  border: 2px solid var(--mode-foreground) !important;
}

/* Cyberpunk theme color mode adaptations */
.theme-cyberpunk.color-mode-light {
  /* Toned down neon for light mode */
  --cyberpunk-glow: '0 0 5px currentColor';
  --cyberpunk-text-shadow: 'none';
}

.theme-cyberpunk.color-mode-high-contrast {
  /* Remove all glow effects for clarity */
  --cyberpunk-glow: 'none';
  --cyberpunk-text-shadow: 'none';
}

.theme-cyberpunk.color-mode-high-contrast * {
  animation: none !important;
  text-shadow: none !important;
  box-shadow: none !important;
}

/* Editorial theme color mode adaptations */
.theme-editorial.color-mode-dark {
  /* Optimized reading experience for dark mode */
  --editorial-measure: '60ch';
  --editorial-leading: '1.7';
}

.theme-editorial.color-mode-high-contrast {
  /* Maximum readability */
  --editorial-measure: '50ch';
  --editorial-leading: '1.8';
}

/* Accessible theme color mode adaptations */
.theme-accessible.color-mode-dark {
  /* Enhanced accessibility in dark mode */
  --accessible-focus: '3px solid #60a5fa';
  --accessible-target-size: '48px';
}

.theme-accessible.color-mode-high-contrast {
  /* Maximum accessibility */
  --accessible-focus: '4px solid #ffffff';
  --accessible-target-size: '52px';
}

/* Media query adaptations for system preferences */
@media (prefers-color-scheme: dark) {
  .color-mode-system {
    color-scheme: dark;
  }
  
  .color-mode-system :root {
    --mode-background: #0a0a0a;
    --mode-foreground: #ffffff;
    --mode-surface: #1a1a1a;
    --mode-border: #2a2a2a;
    --mode-shadow: rgba(0, 0, 0, 0.3);
    --mode-overlay: rgba(0, 0, 0, 0.7);
    --mode-invert: 1;
  }
}

@media (prefers-contrast: high) {
  .color-mode-system {
    color-scheme: dark;
    forced-color-adjust: none;
  }
  
  .color-mode-system :root {
    --mode-background: #000000;
    --mode-foreground: #ffffff;
    --mode-surface: #000000;
    --mode-border: #ffffff;
    --mode-shadow: none;
    --mode-overlay: rgba(0, 0, 0, 0.9);
    --mode-invert: 1;
  }
}

/* Smooth color transitions for specific UI elements */
.color-mode-transition {
  transition: 
    background-color var(--color-mode-transition-duration) var(--color-mode-transition-timing),
    color var(--color-mode-transition-duration) var(--color-mode-transition-timing),
    border-color var(--color-mode-transition-duration) var(--color-mode-transition-timing),
    box-shadow var(--color-mode-transition-duration) var(--color-mode-transition-timing);
}

/* Focus management during color mode transitions */
:focus-visible {
  transition: 
    outline-color calc(var(--color-mode-transition-duration) * 0.5) var(--color-mode-transition-timing),
    box-shadow calc(var(--color-mode-transition-duration) * 0.5) var(--color-mode-transition-timing);
}

/* Image adaptations for different color modes */
.color-mode-dark img {
  filter: brightness(0.8) contrast(1.2);
}

.color-mode-high-contrast img {
  filter: contrast(2) brightness(1.2);
}

/* SVG adaptations */
.color-mode-dark svg {
  filter: invert(var(--mode-invert, 0));
}

.color-mode-high-contrast svg {
  filter: contrast(2);
}

/* Print media adaptations */
@media print {
  * {
    background: white !important;
    color: black !important;
    box-shadow: none !important;
    text-shadow: none !important;
  }
} 